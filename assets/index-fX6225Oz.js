import{r as u,j as e,ap as H,g as X,T as ue,aq as xe,t as pe,E as he,ar as ge}from"./vendor-DeyLhXpq.js";import{h as je,C as w,a as S,b as E,e as k,c as T,i as V,j as W,k as Y,B as fe,f as ve}from"./index-C80gN8Bw.js";import{I as ce}from"./input-YB48jCN_.js";import{L as me}from"./label-zCgB-xLj.js";import{S as ye}from"./slider-B4oC9STL.js";import{T as be,b as Ne,c as Z,a as ee}from"./tabs-Cta2-_OZ.js";import{S as Me,a as Ce,b as Pe,c as we,d as ke}from"./select-CdX-EdLH.js";import{t as se}from"./trackToolEvent-dYL5XBH_.js";import"./monitoring-C74x5Iy6.js";import"./ui-BQCqNqg0.js";import"./theme-CfHJhC9-.js";const g=1024*1024,x=1024*g,Re=[16*g,32*g,64*g,128*g,256*g,512*g,1*x,2*x,4*x,8*x,16*x,32*x,64*x],Se=.03,Ee=.004,I=730,K={default:{cpu:.03,memory:.004,label:"Default (On-demand)"},aws:{cpu:.034,memory:.0046,label:"AWS (US East)"},gcp:{cpu:.031,memory:.0041,label:"GCP (US Central)"},azure:{cpu:.032,memory:.0044,label:"Azure (East US)"},reserved:{cpu:.019,memory:.0025,label:"Reserved/Committed"}},te=[{min:0,max:19,config:{basePercentile:"p50",safetyMultiplier:1,headroomMultiplier:1.1,risk:"high"}},{min:20,max:39,config:{basePercentile:"p50",safetyMultiplier:1.1,headroomMultiplier:1.2,risk:"high"}},{min:40,max:59,config:{basePercentile:"p95",safetyMultiplier:1.1,headroomMultiplier:1.3,risk:"medium"}},{min:60,max:79,config:{basePercentile:"p95",safetyMultiplier:1.2,headroomMultiplier:1.5,risk:"low"}},{min:80,max:100,config:{basePercentile:"p99",safetyMultiplier:1.3,headroomMultiplier:2,risk:"low"}}],Te={webserver:60,worker:40,database:80,custom:50};function $(s){const a=s.trim();if(!a)throw new Error("Empty CPU value");const i=a.match(/^(\d+(?:\.\d+)?)m$/);if(i){const l=parseFloat(i[1]);if(isNaN(l)||l<0)throw new Error(`Invalid CPU value: ${s}`);return Math.round(l)}const m=a.match(/^(\d+(?:\.\d+)?)$/);if(m){const l=parseFloat(m[1]);if(isNaN(l)||l<0)throw new Error(`Invalid CPU value: ${s}`);return Math.round(l*1e3)}throw new Error(`Invalid CPU value: ${s}`)}function U(s){const a=s.trim();if(!a)throw new Error("Empty memory value");const i=a.match(/^(\d+(?:\.\d+)?)(Ki|Mi|Gi|Ti)$/);if(i){const c=parseFloat(i[1]);if(isNaN(c)||c<0)throw new Error(`Invalid memory value: ${s}`);const b=i[2].toLowerCase(),h={ki:1024,mi:g,gi:x,ti:1024*x};return Math.round(c*h[b])}const m=a.match(/^(\d+(?:\.\d+)?)(K|M|G|T)$/);if(m){const c=parseFloat(m[1]);if(isNaN(c)||c<0)throw new Error(`Invalid memory value: ${s}`);const b=m[2].toLowerCase();return Math.round(c*{k:1e3,m:1e6,g:1e9,t:1e12}[b])}const l=a.match(/^(\d+)$/);if(l){const c=parseInt(l[1],10);if(isNaN(c)||c<0)throw new Error(`Invalid memory value: ${s}`);return c}throw new Error(`Invalid memory value: ${s}`)}function re(s){return s>=1e3&&s%1e3===0?String(s/1e3):`${Math.round(s)}m`}function ae(s){return s>=x&&s%x===0?`${s/x}Gi`:s>=g&&s%g===0?`${s/g}Mi`:s>=1024&&s%1024===0?`${s/1024}Ki`:String(s)}function ie(s){const a=Math.round(s*100)/100,i=a<1e3?10:100;return Math.ceil(a/i)*i}function ne(s){const a=16*g;if(s<=a)return a;for(const i of Re)if(s<=i)return i;return Math.ceil(s/x)*x}function le(s){const{p95:a,max:i}=s,m=s.p50??a*.6,l=s.p99??Math.max(a,i*.9);if(m>a||a>l||l>i)throw new Error("Percentile values must be in order (P50 ≤ P95 ≤ P99 ≤ Max)");return{p50:m,p95:a,p99:l,max:i}}function Le(s){for(const a of te)if(s>=a.min&&s<=a.max)return a.config;return te[2].config}function $e(s){const{usage:a,current:i,replicas:m,slider:l,costPerCoreHour:c=Se,costPerGiBHour:b=Ee}=s,h=Math.max(1,Math.floor(m)),d=Le(l),p=[],f=[],D=a.cpu[d.basePercentile]*d.safetyMultiplier,o=a.cpu.max*d.headroomMultiplier,z=a.memory[d.basePercentile]*d.safetyMultiplier,B=a.memory.max*d.headroomMultiplier;p.push(`Based on ${d.basePercentile.toUpperCase()} usage with ${d.safetyMultiplier}x safety multiplier`),p.push(`Limits set at ${d.headroomMultiplier}x observed max`);let N=Math.max(10,D),n=Math.max(10,o),M=Math.max(16*g,z),C=Math.max(16*g,B);N=ie(N),n=ie(n),M=ne(M),C=ne(C),N>n&&(N=n,f.push("CPU requests capped at limits")),M>C&&(M=C,f.push("Memory requests capped at limits")),n<a.cpu.max&&f.push("CPU limits below observed max - risk of throttling"),C<a.memory.max&&f.push("Memory limits below observed max - risk of OOMKill");const r=i.requests.cpu/1e3*h*c*I,L=i.requests.memory/x*h*b*I,R=r+L,P=N/1e3*h*c*I,G=M/x*h*b*I,O=P+G,t=r-P,j=L-G,v=t+j,A=Math.max(0,v),_=A*12;return v<0?p.push("Recommendation increases resource allocation (negative savings)"):v>0&&p.push(`Estimated monthly savings: $${v.toFixed(2)}`),{requests:{cpu:re(N),memory:ae(M)},limits:{cpu:re(n),memory:ae(C)},requestsNormalized:{cpu:N,memory:M},limitsNormalized:{cpu:n,memory:C},reasoning:p,costs:{current:{cpu:r,memory:L,total:R,yearly:R*12},recommended:{cpu:P,memory:G,total:O,yearly:O*12},savings:{cpu:t,memory:j,total:v,yearly:v*12}},savings:{monthly:A,yearly:_},risk:d.risk,warnings:f}}function Ue(s){return`resources:
  requests:
    cpu: "${s.requests.cpu}"
    memory: "${s.requests.memory}"
  limits:
    cpu: "${s.limits.cpu}"
    memory: "${s.limits.memory}"`}const qe={replicas:"3",currentCpuRequests:"500m",currentCpuLimits:"1",currentMemRequests:"512Mi",currentMemLimits:"1Gi",cpuP50:"100m",cpuP95:"200m",cpuP99:"300m",cpuMax:"400m",memP50:"256Mi",memP95:"400Mi",memP99:"450Mi",memMax:"512Mi"},Fe=[{id:"webserver",label:"Web Server",description:"Request-response, some bursts"},{id:"worker",label:"Worker",description:"Batch processing, predictable"},{id:"database",label:"Database",description:"Memory-sensitive, avoid OOMKill"},{id:"custom",label:"Custom",description:"Manual slider adjustment"}],q=[{value:"50m",label:"50m",description:"0.05 cores"},{value:"100m",label:"100m",description:"0.1 cores"},{value:"250m",label:"250m",description:"0.25 cores"},{value:"500m",label:"500m",description:"0.5 cores"},{value:"1",label:"1",description:"1 core"},{value:"2",label:"2",description:"2 cores"},{value:"4",label:"4",description:"4 cores"}],F=[{value:"64Mi",label:"64Mi",description:"64 MiB"},{value:"128Mi",label:"128Mi",description:"128 MiB"},{value:"256Mi",label:"256Mi",description:"256 MiB"},{value:"512Mi",label:"512Mi",description:"512 MiB"},{value:"1Gi",label:"1Gi",description:"1 GiB"},{value:"2Gi",label:"2Gi",description:"2 GiB"},{value:"4Gi",label:"4Gi",description:"4 GiB"},{value:"8Gi",label:"8Gi",description:"8 GiB"}];function Ge(s){switch(s){case"low":return"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20";case"medium":return"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20";case"high":return"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20"}}function oe(s,a){if(s===0)return a<0?"+∞":"—";const i=Math.round(a/s*100);return`${a>=0?"-":"+"}${Math.abs(i)}%`}function y({id:s,label:a,value:i,onChange:m,placeholder:l,presets:c,tooltip:b}){const[h,d]=u.useState(!1);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(me,{htmlFor:s,children:a}),e.jsxs(V,{children:[e.jsx(W,{children:e.jsx(ge,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx(Y,{className:"max-w-xs",children:b})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{id:s,value:i,onChange:p=>m(p.target.value),onFocus:()=>d(!0),onBlur:()=>setTimeout(()=>d(!1),150),placeholder:l,className:"pr-8 font-mono",autoComplete:"off"}),e.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(!h),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",className:T("transition-transform",h&&"rotate-180"),children:e.jsx("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),h&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[180px] rounded-md border bg-popover p-1 shadow-md",children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:"Common values"}),c.map(p=>e.jsxs("button",{type:"button",onMouseDown:f=>f.preventDefault(),onClick:()=>{m(p.value),d(!1)},className:T("flex w-full items-center justify-between rounded-sm px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground",i===p.value&&"bg-accent"),children:[e.jsx("span",{className:"font-mono",children:p.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:p.description})]},p.value))]})]})]})}function Qe(){const[s,a]=u.useState(qe),[i,m]=u.useState(50),[l,c]=u.useState("custom"),[b,h]=u.useState(!1),[d,p]=u.useState("cpu"),[f,D]=u.useState("default"),[o,z]=u.useState(s),[B,N]=u.useTransition();u.useEffect(()=>{const t=setTimeout(()=>{N(()=>{z(s)})},150);return()=>clearTimeout(t)},[s]);const n=u.useCallback((t,j)=>{a(v=>({...v,[t]:j}))},[]),M=u.useCallback(t=>{c(t),m(Te[t]),se({tool_name:"k8s_rightsizer",action:"preset_change",event_label:t})},[]),C=u.useCallback(t=>{m(t[0]),c("custom")},[]),{recommendation:r,error:L}=u.useMemo(()=>{try{const t={requests:$(o.currentCpuRequests),limits:$(o.currentCpuLimits)},j={requests:U(o.currentMemRequests),limits:U(o.currentMemLimits)},v={p95:$(o.cpuP95),max:$(o.cpuMax)};o.cpuP50.trim()&&(v.p50=$(o.cpuP50)),o.cpuP99.trim()&&(v.p99=$(o.cpuP99));const A=le(v),_={p95:U(o.memP95),max:U(o.memMax)};o.memP50.trim()&&(_.p50=U(o.memP50)),o.memP99.trim()&&(_.p99=U(o.memP99));const de=le(_),Q=Math.max(1,Math.floor(parseInt(o.replicas,10)||1)),J=K[f];return{recommendation:$e({usage:{cpu:A,memory:de},current:{requests:{cpu:t.requests,memory:j.requests},limits:{cpu:t.limits,memory:j.limits}},replicas:Q,slider:i,costPerCoreHour:J.cpu,costPerGiBHour:J.memory}),error:null,validatedReplicas:Q}}catch(t){return{recommendation:null,error:t instanceof Error?t.message:"Invalid input",validatedReplicas:1}}},[o,i,f]),R=u.useMemo(()=>Math.max(1,Math.floor(parseInt(s.replicas,10)||1)),[s.replicas]),P=r?Ue(r):"",G=u.useCallback(async()=>{if(P)try{await navigator.clipboard.writeText(P),h(!0),setTimeout(()=>h(!1),2e3),se({tool_name:"k8s_rightsizer",action:"copy_yaml",event_label:"yaml"})}catch{console.warn("Clipboard API failed, copy manually")}},[P]),O=u.useMemo(()=>i<20?"Aggressive":i<40?"Efficient":i<60?"Balanced":i<80?"Conservative":"Safe",[i]);return e.jsx(je,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(S,{className:"pb-3",children:e.jsx(E,{className:"text-lg",children:"Workload Profile"})}),e.jsx(k,{children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Fe.map(t=>e.jsxs("button",{onClick:()=>M(t.id),className:T("p-3 rounded-lg border text-left transition-colors",l===t.id?"border-primary bg-primary/5":"border-border hover:border-muted-foreground/50"),children:[e.jsx("div",{className:"font-medium text-sm",children:t.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.description})]},t.id))})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(S,{className:"pb-3",children:e.jsxs(E,{className:"text-lg flex items-center gap-2",children:["Current Configuration",e.jsxs(V,{children:[e.jsx(W,{children:e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(Y,{children:e.jsx("p",{children:"Your current requests/limits from the deployment spec"})})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(me,{htmlFor:"replicas",children:"Replicas"}),e.jsx(ce,{id:"replicas",value:s.replicas,onChange:t=>n("replicas",t.target.value),placeholder:"3"})]}),e.jsx(y,{id:"currentCpuRequests",label:"CPU Requests",value:s.currentCpuRequests,onChange:t=>n("currentCpuRequests",t),placeholder:"500m",presets:q,tooltip:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"CPU in millicores (m)"}),e.jsx("p",{children:"1000m = 1 CPU core"}),e.jsx("p",{className:"text-xs",children:"Example: 500m = half a core"})]})}),e.jsx(y,{id:"currentCpuLimits",label:"CPU Limits",value:s.currentCpuLimits,onChange:t=>n("currentCpuLimits",t),placeholder:"1",presets:q,tooltip:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"CPU in millicores (m)"}),e.jsx("p",{children:"1000m = 1 CPU core"}),e.jsx("p",{className:"text-xs",children:"Limits cap max CPU usage"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{id:"currentMemRequests",label:"Memory Requests",value:s.currentMemRequests,onChange:t=>n("currentMemRequests",t),placeholder:"512Mi",presets:F,tooltip:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Memory in binary units"}),e.jsx("p",{children:"Mi = mebibytes, Gi = gibibytes"}),e.jsx("p",{className:"text-xs",children:"1Gi = 1024Mi"})]})}),e.jsx(y,{id:"currentMemLimits",label:"Memory Limits",value:s.currentMemLimits,onChange:t=>n("currentMemLimits",t),placeholder:"1Gi",presets:F,tooltip:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Memory in binary units"}),e.jsx("p",{children:"Mi = mebibytes, Gi = gibibytes"}),e.jsx("p",{className:"text-xs",children:"Exceeding limits causes OOMKill"})]})})]})]})]}),e.jsxs(w,{children:[e.jsx(S,{className:"pb-3",children:e.jsxs(E,{className:"text-lg flex items-center gap-2",children:["Observed Usage Percentiles",e.jsxs(V,{children:[e.jsx(W,{children:e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs(Y,{className:"max-w-xs",children:[e.jsx("p",{children:"Get these from your monitoring (Prometheus, Datadog, etc.)."}),e.jsx("p",{className:"mt-1 text-xs",children:"P95 and Max are required. P50 and P99 are optional."})]})]})]})}),e.jsx(k,{children:e.jsxs(be,{value:d,onValueChange:t=>p(t),children:[e.jsxs(Ne,{className:"mb-4",children:[e.jsx(Z,{value:"cpu",children:"CPU"}),e.jsx(Z,{value:"memory",children:"Memory"})]}),e.jsxs(ee,{value:"cpu",className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{id:"cpuP50",label:"P50 (optional)",value:s.cpuP50,onChange:t=>n("cpuP50",t),placeholder:"100m",presets:q,tooltip:e.jsx("p",{children:"Median CPU usage - 50% of samples are below this"})}),e.jsx(y,{id:"cpuP95",label:"P95 *",value:s.cpuP95,onChange:t=>n("cpuP95",t),placeholder:"200m",presets:q,tooltip:e.jsx("p",{children:"95th percentile - 95% of samples are below this"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{id:"cpuP99",label:"P99 (optional)",value:s.cpuP99,onChange:t=>n("cpuP99",t),placeholder:"300m",presets:q,tooltip:e.jsx("p",{children:"99th percentile - captures peak usage"})}),e.jsx(y,{id:"cpuMax",label:"Max *",value:s.cpuMax,onChange:t=>n("cpuMax",t),placeholder:"400m",presets:q,tooltip:e.jsx("p",{children:"Maximum observed CPU usage"})})]})]}),e.jsxs(ee,{value:"memory",className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{id:"memP50",label:"P50 (optional)",value:s.memP50,onChange:t=>n("memP50",t),placeholder:"256Mi",presets:F,tooltip:e.jsx("p",{children:"Median memory usage - 50% of samples are below this"})}),e.jsx(y,{id:"memP95",label:"P95 *",value:s.memP95,onChange:t=>n("memP95",t),placeholder:"400Mi",presets:F,tooltip:e.jsx("p",{children:"95th percentile - 95% of samples are below this"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(y,{id:"memP99",label:"P99 (optional)",value:s.memP99,onChange:t=>n("memP99",t),placeholder:"450Mi",presets:F,tooltip:e.jsx("p",{children:"99th percentile - captures peak usage"})}),e.jsx(y,{id:"memMax",label:"Max *",value:s.memMax,onChange:t=>n("memMax",t),placeholder:"512Mi",presets:F,tooltip:e.jsx("p",{children:"Maximum observed memory usage"})})]})]})]})})]}),e.jsxs(w,{children:[e.jsx(S,{className:"pb-3",children:e.jsx(E,{className:"text-lg",children:"Risk Preference"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Efficiency"}),e.jsx("span",{className:"font-medium",children:O}),e.jsx("span",{className:"text-muted-foreground",children:"Safety"})]}),e.jsx(ye,{value:[i],onValueChange:C,min:0,max:100,step:1,className:"py-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Lower cost, higher risk"}),e.jsx("span",{children:"Higher cost, lower risk"})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:L?e.jsx(w,{className:"border-destructive",children:e.jsx(k,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:L})]})})}):r?e.jsxs(e.Fragment,{children:[e.jsxs(w,{className:B?"opacity-70 transition-opacity":"",children:[e.jsx(S,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(E,{className:"text-lg flex items-center gap-2",children:["Recommendation",B&&e.jsx("span",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})]}),e.jsxs(fe,{variant:"outline",className:Ge(r.risk),children:[r.risk," risk"]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Current"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["CPU: ",s.currentCpuRequests," / ",s.currentCpuLimits]}),e.jsxs("div",{children:["Mem: ",s.currentMemRequests," / ",s.currentMemLimits]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Recommended"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["CPU: ",r.requests.cpu," / ",r.limits.cpu]}),e.jsxs("div",{children:["Mem: ",r.requests.memory," / ",r.limits.memory]})]})]})]}),r.warnings.length>0&&e.jsx("div",{className:"space-y-2",children:r.warnings.map((t,j)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-yellow-600 dark:text-yellow-400",children:[e.jsx(X,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{children:t})]},j))}),e.jsx("div",{className:"text-sm text-muted-foreground space-y-1",children:r.reasoning.map((t,j)=>e.jsxs("div",{children:["• ",t]},j))})]})]}),e.jsxs(w,{children:[e.jsx(S,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-lg",children:"Cost Analysis"}),e.jsxs(Me,{value:f,onValueChange:t=>D(t),children:[e.jsx(Ce,{className:"w-[160px] h-8 text-xs",children:e.jsx(Pe,{})}),e.jsx(we,{children:Object.entries(K).map(([t,{label:j}])=>e.jsx(ke,{value:t,className:"text-xs",children:j},t))})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-muted-foreground",children:[e.jsx("th",{className:"text-left font-medium py-2"}),e.jsx("th",{className:"text-right font-medium py-2 px-2",children:"Current"}),e.jsx("th",{className:"text-right font-medium py-2 px-2",children:"Recommended"}),e.jsx("th",{className:"text-right font-medium py-2 px-2",children:"Change"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-1.5 text-muted-foreground",children:"CPU"}),e.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",r.costs.current.cpu.toFixed(2),"/mo"]}),e.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",r.costs.recommended.cpu.toFixed(2),"/mo"]}),e.jsx("td",{className:T("py-1.5 px-2 text-right font-mono",r.costs.savings.cpu>0&&"text-green-600 dark:text-green-400",r.costs.savings.cpu<0&&"text-red-600 dark:text-red-400"),children:oe(r.costs.current.cpu,r.costs.savings.cpu)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1.5 text-muted-foreground",children:"Memory"}),e.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",r.costs.current.memory.toFixed(2),"/mo"]}),e.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",r.costs.recommended.memory.toFixed(2),"/mo"]}),e.jsx("td",{className:T("py-1.5 px-2 text-right font-mono",r.costs.savings.memory>0&&"text-green-600 dark:text-green-400",r.costs.savings.memory<0&&"text-red-600 dark:text-red-400"),children:oe(r.costs.current.memory,r.costs.savings.memory)})]}),e.jsxs("tr",{className:"border-t border-border",children:[e.jsx("td",{className:"py-2 font-medium",children:"Total"}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono font-medium",children:["$",r.costs.current.total.toFixed(2),"/mo"]}),e.jsxs("td",{className:"py-2 px-2 text-right font-mono font-medium",children:["$",r.costs.recommended.total.toFixed(2),"/mo"]}),e.jsxs("td",{className:T("py-2 px-2 text-right font-mono font-medium",r.costs.savings.total>0&&"text-green-600 dark:text-green-400",r.costs.savings.total<0&&"text-red-600 dark:text-red-400"),children:[r.costs.savings.total>=0?"-":"+","$",Math.abs(r.costs.savings.total).toFixed(2)]})]}),e.jsxs("tr",{className:"text-muted-foreground",children:[e.jsx("td",{className:"py-1"}),e.jsxs("td",{className:"py-1 px-2 text-right font-mono text-xs",children:["$",r.costs.current.yearly.toFixed(0),"/yr"]}),e.jsxs("td",{className:"py-1 px-2 text-right font-mono text-xs",children:["$",r.costs.recommended.yearly.toFixed(0),"/yr"]}),e.jsxs("td",{className:T("py-1 px-2 text-right font-mono text-xs",r.costs.savings.yearly>0&&"text-green-600 dark:text-green-400",r.costs.savings.yearly<0&&"text-red-600 dark:text-red-400"),children:[r.costs.savings.yearly>=0?"-":"+","$",Math.abs(r.costs.savings.yearly).toFixed(0),"/yr"]})]})]})]})}),r.costs.savings.total>0?e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-green-500/10 text-green-600 dark:text-green-400",children:[e.jsx(ue,{className:"h-5 w-5 shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["$",r.costs.savings.total.toFixed(2),"/mo savings"]}),e.jsxs("div",{className:"text-xs opacity-80",children:["$",r.costs.savings.yearly.toFixed(0),"/year across ",R," replica",R!==1?"s":""]})]})]}):r.costs.savings.total<0?e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-amber-500/10 text-amber-600 dark:text-amber-400",children:[e.jsx(xe,{className:"h-5 w-5 shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["+$",Math.abs(r.costs.savings.total).toFixed(2),"/mo increase"]}),e.jsx("div",{className:"text-xs opacity-80",children:"Adds headroom for reliability"})]})]}):e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted text-muted-foreground",children:[e.jsx(H,{className:"h-5 w-5 shrink-0"}),e.jsx("div",{className:"text-sm",children:"No cost change with current recommendations"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[R," replica",R!==1?"s":""," x (CPU + Memory) x ",I," hrs/month at ",K[f].label," rates"]})]})]}),e.jsxs(w,{children:[e.jsx(S,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-lg",children:"YAML Snippet"}),e.jsx(ve,{variant:"outline",size:"sm",onClick:G,className:"gap-2",children:b?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-4 w-4"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4"}),"Copy"]})})]})}),e.jsx(k,{children:e.jsx("pre",{className:"p-4 rounded-lg bg-muted text-sm font-mono overflow-x-auto",children:P})})]})]}):null})]})]})})}export{Qe as default};
