import{j as o}from"./vendor-DeyLhXpq.js";import{R as v,T as S}from"./CategoricalChart-duV1COC7.js";import{A as w,a as y}from"./AreaChart-nwQ3LCOb.js";import{X as N,Y as k}from"./CartesianChart-CwdFezkh.js";import{L as C}from"./Legend-VtQ-yhzb.js";import"./monitoring-C74x5Iy6.js";import"./ui-BQCqNqg0.js";import"./index-C80gN8Bw.js";import"./theme-CfHJhC9-.js";import"./string-B1tyo_-o.js";import"./band-CquvqAHh.js";import"./init-Dmth1JHB.js";import"./ordinal-DILIJJjt.js";import"./linear-DQdcXjjB.js";import"./defaultLocale-DX6XiGOO.js";import"./time-CutwCmSq.js";import"./getRadiusAndStrokeWidthFromDot-Ygmr1NzX.js";import"./graphicalItemSelectors-CWW1-rcR.js";import"./Symbols-CIEB9ePZ.js";import"./math-CRUJxRjv.js";const c=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5, var(--primary)))","hsl(var(--muted-foreground))"];function L({active:p,payload:n,label:m}){return!p||!n||!n.length?null:o.jsxs("div",{className:"bg-popover text-popover-foreground border border-border rounded-lg px-3 py-2 text-sm shadow-md max-w-xs",children:[o.jsx("p",{className:"font-medium mb-1",children:m}),n.filter(a=>Number(a.value)>0).map((a,i)=>o.jsxs("p",{className:"truncate",children:[o.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:a.color}}),a.name,": ",Number(a.value).toLocaleString()]},i))]})}function P({data:p,postLookups:n,matchPost:m}){if(p.length===0)return o.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"});const a=new Map;for(const t of p)for(const e of t.topPages??[]){if(!e.page.startsWith("/blog/")||e.page==="/blog/"||e.page==="/blog")continue;const g=e.page.replace(/\/$/,"").replace("/blog/",""),l=m(g,n)?.slug??g;a.set(l,(a.get(l)??0)+e.sessions)}const i=[...a.entries()].sort((t,e)=>e[1]-t[1]).slice(0,5).map(([t])=>t),b=new Set(i),f=new Map;for(const t of i){const r=m(t,n)?.title??t;f.set(t,r.length>30?r.slice(0,28)+"â€¦":r)}const d=p.map(t=>{const e=new Map;for(const s of t.topPages??[]){if(!s.page.startsWith("/blog/")||s.page==="/blog/"||s.page==="/blog")continue;const u=s.page.replace(/\/$/,"").replace("/blog/",""),x=m(u,n)?.slug??u;e.set(x,(e.get(x)??0)+s.sessions)}const r={date:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})};let g=0;for(const[s,l]of e)b.has(s)?r[s]=l:g+=l;for(const s of i)s in r||(r[s]=0);return r.Other=g,r}),j=Math.max(0,Math.ceil(d.length/6)-1),h=[...i,"Other"];return o.jsx("div",{className:"h-72 w-full",children:o.jsx(v,{width:"100%",height:288,children:o.jsxs(w,{data:d,margin:{top:10,right:10,left:0,bottom:0},children:[o.jsx("defs",{children:h.map((t,e)=>o.jsxs("linearGradient",{id:`blogGrad-${e}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:c[e%c.length],stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:c[e%c.length],stopOpacity:0})]},t))}),o.jsx(N,{dataKey:"date",tick:{fontSize:12},tickLine:!1,axisLine:!1,interval:j,className:"text-muted-foreground"}),o.jsx(k,{tick:{fontSize:12},tickLine:!1,axisLine:!1,tickFormatter:t=>t.toLocaleString(),className:"text-muted-foreground"}),o.jsx(S,{content:o.jsx(L,{})}),o.jsx(C,{verticalAlign:"bottom",height:36,formatter:t=>t==="Other"?"Other":f.get(t)??t,wrapperStyle:{fontSize:"11px"}}),h.map((t,e)=>o.jsx(y,{type:"monotone",dataKey:t,name:t,stackId:"1",stroke:c[e%c.length],fill:`url(#blogGrad-${e})`,strokeWidth:1.5},t))]})})})}export{P as BlogTrafficChart};
