{"version":3,"mappings":";4jBAmBA,SAASA,EACPC,EACK,CACL,MAAMC,MAAa,IAEnB,UAAWC,KAASF,EAAS,CAC3B,MAAMG,EAAWF,EAAO,IAAIC,EAAM,IAAI,EAEjCC,EAEMD,EAAM,WAAaC,EAAS,WAAaD,EAAM,UAAYC,EAAS,WAC7EF,EAAO,IAAIC,EAAM,KAAMA,CAAK,EAF5BD,EAAO,IAAIC,EAAM,KAAMA,CAAK,CAIhC,CAGA,OAAO,MAAM,KAAKD,EAAO,QAAQ,EAAE,KAAK,CAAC,EAAGG,IAAM,EAAE,KAAK,cAAcA,EAAE,IAAI,CAAC,CAChF,CAEA,eAAeC,EAAaC,EAAsC,CAChE,GAAI,CACF,MAAMC,EAAW,MAAM,MAAMD,CAAG,EAChC,OAAIC,EAAS,SAAW,IACf,CAAE,OAAQ,WAEdA,EAAS,GAGP,CAAE,OAAQ,UAAW,KAAM,MAAMA,EAAS,MAAK,EAF7C,CAAE,OAAQ,QAAS,QAAS,QAAQA,EAAS,MAAM,KAAKA,EAAS,UAAU,GAGtF,OAASC,EAAK,CACZ,MAAO,CAAE,OAAQ,QAAS,QAASA,aAAe,MAAQA,EAAI,QAAU,gBAC1E,CACF,CAEO,SAASC,IAAkC,CAChD,KAAM,CAACC,EAAMC,CAAO,EAAIC,WAAwB,CAC9C,OAAQ,KACR,WAAY,GACZ,cAAe,GACf,kBAAmB,GACnB,eAAgB,GAChB,UAAW,GACX,MAAO,KACP,QAAS,KACV,EAEDC,mBAAU,IAAM,CACd,eAAeC,GAAW,CACxB,KAAM,CAACC,EAAcC,EAAWC,EAAcC,EAAkBC,CAAa,EAAI,MAAM,QAAQ,IAAI,CACjGd,EAAyB,sBAAsB,EAC/CA,EAA6B,2BAA2B,EACxDA,EAAuC,sCAAsC,EAC7EA,EAAiC,kCAAkC,EACnEA,EAAgC,sCAAsC,EACvE,EAGKe,EAAyB,GAEzBC,EAAmB,GAEnBC,EAAU,CACd,CAAE,KAAM,cAAe,OAAQP,CAAA,EAC/B,CAAE,KAAM,mBAAoB,OAAQC,CAAA,EACpC,CAAE,KAAM,8BAA+B,OAAQC,CAAA,EAC/C,CAAE,KAAM,qBAAsB,OAAQC,CAAA,EACtC,CAAE,KAAM,8BAA+B,OAAQC,CAAA,CAAc,EAG/D,SAAW,CAAE,KAAAI,EAAM,OAAAC,CAAA,IAAYF,EACzBE,EAAO,SAAW,UACpBJ,EAAa,KAAKG,CAAI,EACbC,EAAO,SAAW,SAC3BH,EAAO,KAAK,GAAGE,CAAI,KAAKC,EAAO,OAAO,EAAE,EAK5C,GAAIH,EAAO,OAAS,EAAG,CACrBV,EAASc,IAAU,CACjB,GAAGA,EACH,UAAW,GACX,MAAO,mBAAmBJ,EAAO,KAAK,IAAI,CAAC,GAC3C,QAAS,MACT,EACF,MACF,CAGA,MAAMK,EAAUN,EAAa,OAAS,EAClC,kCAAkCA,EAAa,KAAK,IAAI,CAAC,GACzD,KAEJT,EAAQ,CACN,OAAQI,EAAa,SAAW,UAAYA,EAAa,KAAO,KAChE,WAAYC,EAAU,SAAW,UAAYjB,EAAkBiB,EAAU,IAAI,EAAI,GACjF,cAAeC,EAAa,SAAW,UAAYlB,EAAkBkB,EAAa,IAAI,EAAI,GAC1F,kBAAmBC,EAAiB,SAAW,UAAYA,EAAiB,KAAO,GACnF,eAAgBC,EAAc,SAAW,UAAYpB,EAAkBoB,EAAc,IAAI,EAAI,GAC7F,UAAW,GACX,MAAO,KACP,QAAAO,CAAA,CACD,CACH,CAEAZ,EAAA,CACF,EAAG,EAAE,EAEEJ,CACT,CClHO,MAAMiB,EAAaC,OAAK,SAAoB,CAAE,MAAAC,EAAO,MAAAC,EAAO,KAAMC,EAAM,SAAAC,EAAU,MAAAC,EAAO,OAAAC,CAAA,EAA2B,CACzH,MAAMC,EAAe,CACnB,KAAM,mBACN,QAAS,iBACT,SAAU,gBAGZ,cACGC,EAAA,CACC,UAAAC,OAACC,EAAA,CAAW,UAAU,4DACpB,UAAAC,MAACC,EAAA,CAAU,UAAU,4CAClB,SAAAX,EACH,EACCE,GAAQQ,MAACR,EAAA,CAAK,UAAU,gCAAgC,GAC3D,SACCU,EAAA,CACC,UAAAF,MAAC,OAAI,UAAWG,EAAG,qBAAsBR,GAAUC,EAAaD,CAAM,CAAC,EACpE,SAAAJ,CAAA,CACH,EACAO,OAAC,OAAI,UAAU,+BACZ,UAAAL,GACCO,MAAC,KAAE,UAAU,gCAAiC,SAAAP,EAAS,EAExDC,IAAU,QACTI,OAAC,OAAI,UAAWK,EACd,4BACAT,GAAS,EAAI,mBAAqB,gBAEjC,UAAAA,GAAS,QACPU,GAAA,CAAW,UAAU,eAAe,EAErCJ,MAACK,GAAA,CAAa,UAAU,eAAe,EAExC,KAAK,IAAIX,CAAK,EAAE,QAAQ,CAAC,EAAE,KAC9B,GAEJ,GACF,GACF,CAEJ,CAAC,ECrCKY,GAAwB,CAC5B,CACE,MAAO,MACP,IAAK,MACL,KAAM,IACN,WAAY,CAAE,KAAM,IAAK,KAAM,GAC/B,MAAQC,GAAM,WAAWA,EAAE,QAAQ,UAAW,EAAE,CAAC,GAEnD,CACE,MAAO,MACP,IAAK,MACL,KAAM,IACN,WAAY,CAAE,KAAM,IAAK,KAAM,GAC/B,MAAQA,GAAM,WAAWA,EAAE,QAAQ,UAAW,EAAE,CAAC,GAEnD,CACE,MAAO,MACP,IAAK,MACL,KAAM,GACN,WAAY,CAAE,KAAM,GAAK,KAAM,KAC/B,MAAQA,GAAM,WAAWA,CAAC,GAAK,GAEjC,CACE,MAAO,MACP,IAAK,MACL,KAAM,KACN,WAAY,CAAE,KAAM,IAAK,KAAM,KAC/B,MAAQA,GAAM,WAAWA,EAAE,QAAQ,UAAW,EAAE,CAAC,EAErD,EAEA,SAASC,GAAUjB,EAAekB,EAA6E,CAC7G,OAAIlB,GAASkB,EAAW,KAAa,OACjClB,GAASkB,EAAW,KAAa,UAC9B,UACT,CAEO,SAASC,GAAkB,CAAE,KAAAvC,GAAgC,CAClE,GAAIA,EAAK,SAAW,EAClB,cACG0B,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,2BAAe,EAC5B,QACCC,EAAA,CACC,SAAAF,MAAC,KAAE,UAAU,gCAAgC,6BAAiB,EAChE,GACF,EAKJ,MAAMW,EAAWxC,EAAK,KAAKyC,GAAKA,EAAE,OAAS,MAAM,GAAKzC,EAAK,CAAC,EAE5D,cACG0B,EAAA,CACC,UAAAC,OAACC,EAAA,CACC,UAAAC,MAACC,GAAU,2BAAe,EAC1BH,OAAC,KAAE,UAAU,gCAAgC,sBACjCa,EAAS,KAAK,SAC1B,GACF,QACCT,EAAA,CAAY,UAAU,YACpB,SAAAI,GAAO,IAAKO,GAAU,CACrB,MAAMC,EAAWH,EAASE,EAAM,GAAG,EAC7BtB,EAAQsB,EAAM,MAAMC,CAAQ,EAC5BnB,EAASa,GAAUjB,EAAOsB,EAAM,UAAU,EAG1CE,EAAgB,KAAK,IAAKxB,EAAQsB,EAAM,WAAW,KAAQ,IAAK,GAAG,EAEnEG,EAAa,CACjB,KAAM,OACN,QAAS,oBACT,SAAU,QAGZ,OACElB,OAAC,OAAoB,UAAU,YAC7B,UAAAA,OAAC,OAAI,UAAU,+BACb,UAAAE,MAAC,QAAK,UAAU,cAAe,SAAAa,EAAM,MAAM,EAC3Cf,OAAC,QAAK,UAAWK,EAAG,YAAa,CAC/B,mBAAoBR,IAAW,OAC/B,iBAAkBA,IAAW,UAC7B,eAAgBA,IAAW,WAC5B,EACE,UAAAmB,EACDhB,OAAC,QAAK,UAAU,qCAAqC,cACjDkB,EAAWrB,CAAM,EAAE,KACvB,GACF,GACF,EACAK,MAACiB,GAAA,CACC,MAAOF,EACP,UAAU,MACV,aAAY,GAAGF,EAAM,KAAK,KAAKC,CAAQ,KAEzChB,OAAC,OAAI,UAAU,qDACb,UAAAA,OAAC,QAAK,oBAAQe,EAAM,WAAW,KAAMA,EAAM,MAAK,SAC/C,QAAK,oBAAWA,EAAM,WAAW,KAAMA,EAAM,MAAK,GACrD,IAtBQA,EAAM,GAuBhB,CAEJ,CAAC,EACH,GACF,CAEJ,CC5GA,MAAMP,GAAwB,CAC5B,CACE,IAAK,MACL,MAAO,2BACP,WAAY,CAAE,KAAM,KAAM,KAAM,KAChC,OAASC,GAAM,IAAIA,EAAI,KAAM,QAAQ,CAAC,CAAC,KAEzC,CACE,IAAK,MACL,MAAO,yBACP,WAAY,CAAE,KAAM,KAAM,KAAM,KAChC,OAASA,GAAM,IAAIA,EAAI,KAAM,QAAQ,CAAC,CAAC,KAEzC,CACE,IAAK,MACL,MAAO,0BACP,WAAY,CAAE,KAAM,GAAK,KAAM,KAC/B,OAASA,GAAMA,EAAE,QAAQ,CAAC,GAE5B,CACE,IAAK,MACL,MAAO,4BACP,WAAY,CAAE,KAAM,IAAK,KAAM,KAC/B,OAASA,GAAM,GAAG,KAAK,MAAMA,CAAC,CAAC,MAEjC,CACE,IAAK,OACL,MAAO,qBACP,WAAY,CAAE,KAAM,IAAK,KAAM,MAC/B,OAASA,GAAM,GAAG,KAAK,MAAMA,CAAC,CAAC,KAEnC,EAEA,SAASC,GAAUjB,EAAekB,EAA6E,CAC7G,OAAIlB,GAASkB,EAAW,KAAa,OACjClB,GAASkB,EAAW,KAAa,UAC9B,UACT,CAEO,SAASS,GAAiB,CAAE,KAAA/C,GAA+B,CAChE,GAAI,CAACA,GAAQ,CAACA,EAAK,SAAW,OAAO,KAAKA,EAAK,OAAO,EAAE,SAAW,EACjE,cACG0B,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,6BAAiB,EAC9B,QACCC,EAAA,CACC,SAAAF,MAAC,KAAE,UAAU,gCAAgC,mFAAuE,EACtH,GACF,EAIJ,MAAMgB,EAAa,CACjB,KAAM,OACN,QAAS,oBACT,SAAU,QAGZ,cACGnB,EAAA,CACC,UAAAC,OAACC,EAAA,CACC,UAAAC,MAACC,GAAU,6BAAiB,EAC5BH,OAAC,KAAE,UAAU,gCAAgC,6BAC1B3B,EAAK,QAAQ,KAAK,OAASA,EAAK,QAAQ,KAAK,OAAS,EAAE,cAC3E,GACF,QACC+B,EAAA,CAAY,UAAU,YACpB,SAAAI,GAAO,IAAKO,GAAU,CACrB,MAAMM,EAAShD,EAAK,QAAQ0C,EAAM,GAAG,EACrC,GAAI,CAACM,EAAQ,OAAO,KAEpB,MAAM5B,EAAQ4B,EAAO,QACfxB,EAASa,GAAUjB,EAAOsB,EAAM,UAAU,EAC1CE,EAAgB,KAAK,IAAKxB,EAAQsB,EAAM,WAAW,KAAQ,IAAK,GAAG,EAEzE,OACEf,OAAC,OAAoB,UAAU,YAC7B,UAAAA,OAAC,OAAI,UAAU,+BACb,UAAAE,MAAC,QAAK,UAAU,cAAe,SAAAa,EAAM,IAAI,EACzCf,OAAC,QAAK,UAAWK,EAAG,YAAa,CAC/B,mBAAoBR,IAAW,OAC/B,iBAAkBA,IAAW,UAC7B,eAAgBA,IAAW,WAC5B,EACE,UAAAkB,EAAM,OAAOtB,CAAK,EACnBO,OAAC,QAAK,UAAU,qCAAqC,cACjDkB,EAAWrB,CAAM,EAAE,KACvB,GACF,GACF,EACAK,MAACiB,GAAA,CACC,MAAOF,EACP,UAAU,MACV,aAAY,GAAGF,EAAM,GAAG,KAAKA,EAAM,OAAOtB,CAAK,CAAC,KAElDO,OAAC,OAAI,UAAU,qDACb,UAAAA,OAAC,QAAK,oBAAQe,EAAM,MAAQ,MAAQA,EAAM,WAAW,KAAO,GAAGA,EAAM,WAAW,IAAI,MAAK,SACxF,QAAK,oBAAWA,EAAM,MAAQ,MAAQA,EAAM,WAAW,KAAO,GAAGA,EAAM,WAAW,IAAI,MAAK,GAC9F,IAtBQA,EAAM,GAuBhB,CAEJ,CAAC,EACH,GACF,CAEJ,CClHA,SAASO,EAAW,CAAE,MAAAC,GAA4B,CAChD,MAAM1B,EAAS0B,GAAS,GAAK,OAASA,GAAS,GAAK,UAAY,WAEhE,OACErB,MAAC,QAAK,UAAWG,EACf,+EACA,CACE,2DAA4DR,IAAW,OACvE,qDAAsDA,IAAW,UACjE,+CAAgDA,IAAW,WAC7D,EAEC,SAAA0B,EACH,CAEJ,CAEO,SAASC,GAAsB,CAAE,KAAAnD,GAAoC,CAC1E,OAAIA,EAAK,SAAW,SAEf0B,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,qCAAyB,EACtC,QACCC,EAAA,CACC,SAAAF,MAAC,KAAE,UAAU,gCAAgC,6BAAiB,EAChE,GACF,SAKDH,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,qCAAyB,EACtC,EACAD,MAACE,GACC,SAAAF,MAAC,OAAI,UAAU,kBACb,SAAAF,OAAC,SAAM,UAAU,iBACf,UAAAE,MAAC,SACC,SAAAF,OAAC,MAAG,UAAU,WACZ,UAAAE,MAAC,MAAG,UAAU,6BAA6B,gBAAI,EAC/CA,MAAC,MAAG,UAAU,+BAA+B,gBAAI,EACjDA,MAAC,MAAG,UAAU,+BAA+B,gBAAI,EACjDA,MAAC,MAAG,UAAU,+BAA+B,eAAG,EAChDA,MAAC,MAAG,UAAU,+BAA+B,cAAE,EAC/CA,MAAC,MAAG,UAAU,8BAA8B,eAAG,EAC/CA,MAAC,MAAG,UAAU,8BAA8B,eAAG,GACjD,EACF,EACAA,MAAC,SACE,SAAA7B,EAAK,IAAKoD,GACTzB,OAAC,MAAmB,UAAU,4BAC5B,UAAAE,MAAC,MAAG,UAAU,OACZ,SAAAA,MAAC,KACC,KAAMuB,EAAK,IACX,OAAO,SACP,IAAI,sBACJ,UAAU,kBAET,SAAAA,EAAK,OAEV,EACAvB,MAAC,MAAG,UAAU,mBACZ,eAACoB,EAAA,CAAW,MAAOG,EAAK,YAAa,EACvC,EACAvB,MAAC,MAAG,UAAU,mBACZ,eAACoB,EAAA,CAAW,MAAOG,EAAK,cAAe,EACzC,EACAvB,MAAC,MAAG,UAAU,mBACZ,eAACoB,EAAA,CAAW,MAAOG,EAAK,IAAK,EAC/B,EACAvB,MAAC,MAAG,UAAU,mBACZ,eAACoB,EAAA,CAAW,MAAOG,EAAK,cAAe,EACzC,EACAvB,MAAC,MAAG,UAAU,oCAAqC,WAAK,IAAI,EAC5DA,MAAC,MAAG,UAAU,oCAAqC,WAAK,IAAI,IAxBrDuB,EAAK,IAyBd,CACD,EACH,GACF,EACF,EACF,GACF,CAEJ,CClFA,MAAMC,GAAmB,CACvB,4BACA,cACA,YACA,gBACA,YACA,UACF,EAGMC,GAAqB,CACzB,YACA,YACA,cACA,eACA,SACA,SACA,UACA,SACA,cACA,SACA,SACA,SACA,SACA,WACA,SACA,SACF,EA2BO,SAASC,GAAoBH,EAKN,CAC5B,MAAMI,EAAOJ,EAAK,KAGlB,UAAWK,KAAWJ,GACpB,GAAII,EAAQ,KAAKD,CAAI,EACnB,MAAO,CACL,GAAGJ,EACH,YAAa,KACb,OAAQ,yBAAyBK,EAAQ,MAAM,IAMrD,UAAWA,KAAWH,GACpB,GAAIG,EAAQ,KAAKD,CAAI,EACnB,MAAO,CACL,GAAGJ,EACH,YAAa,MACb,OAAQ,8BAA8BK,EAAQ,MAAM,IAO1D,MAAMC,EAAQN,EAAK,MAAQ,EAAIA,EAAK,SAAWA,EAAK,MAAQ,EAC5D,OAAIM,GAAS,KAAQA,GAAS,MAAQN,EAAK,UAAY,GAC9C,CACL,GAAGA,EACH,YAAa,YACb,OAAQ,gCAAgCM,EAAM,QAAQ,CAAC,CAAC,gCAIrD,CACL,GAAGN,EACH,YAAa,QACb,OAAQ,yBAEZ,CAKO,SAASO,GACdC,EAMgB,CAChB,MAAMC,EAAkBD,EAAS,IAAIL,EAAmB,EAExD,IAAIO,EAAgB,EAChBC,EAAa,EACbC,EAAc,EACdC,EAAoB,EAExB,MAAMC,EAA4C,GAElD,UAAWC,KAAkBN,EAC3B,OAAQM,EAAe,aACrB,IAAK,QACHL,GAAiBK,EAAe,SAChC,MACF,IAAK,KACHJ,GAAcI,EAAe,SAC7BD,EAAa,KAAKC,CAAc,EAChC,MACF,IAAK,MACHH,GAAeG,EAAe,SAC9BD,EAAa,KAAKC,CAAc,EAChC,MACF,IAAK,YACHF,GAAqBE,EAAe,SACpCD,EAAa,KAAKC,CAAc,EAChC,MAIN,MAAMC,EAAgBN,EAAgBC,EAAaC,EAAcC,EAC3DI,EAAsBN,EAAaC,EAAcC,EAEvD,MAAO,CACL,cAAAG,EACA,cAAAN,EACA,WAAAC,EACA,YAAAC,EACA,kBAAAC,EACA,gBAAiBG,EAAgB,EAAKN,EAAgBM,EAAiB,IAAM,IAC7E,oBAAqBA,EAAgB,EAAKC,EAAsBD,EAAiB,IAAM,EACvF,aAAcF,EAAa,KAAK,CAACI,EAAG5E,IAAMA,EAAE,SAAW4E,EAAE,QAAQ,EAErE,CAqBO,SAASC,GAAoBC,EAA2B,CAC7D,OAAQA,EAAA,CACN,IAAK,QACH,MAAO,uEACT,IAAK,KACH,MAAO,mEACT,IAAK,MACH,MAAO,2EACT,IAAK,YACH,MAAO,2EAEb,CC9KO,SAASC,GAAmB,CAAE,SAAAb,GAAqC,CACxE,MAAMc,EAA2BC,UAC/B,IAAMhB,GAAsBC,CAAQ,EACpC,CAACA,CAAQ,GAGX,cACGlC,EAAA,CACC,UAAAG,MAACD,GAAW,UAAU,OACpB,SAAAD,OAACG,EAAA,CAAU,UAAU,gDAAgD,4BAEnED,MAAC+C,GAAA,CACC,SAAAjD,OAACkD,GAAA,CACC,UAAAhD,MAACiD,GAAA,CACC,SAAAjD,MAACkD,GAAA,CAAK,UAAU,gCAAgC,EAClD,QACCC,GAAA,CAAe,UAAU,WACxB,SAAAnD,MAAC,KAAE,gJAIH,EACF,GACF,EACF,GACF,EACF,EACAF,OAACI,EAAA,CAAY,UAAU,YAErB,UAAAJ,OAAC,OAAI,UAAU,wCACb,UAAAA,OAAC,OAAI,UAAU,0BACb,UAAAE,MAAC,OAAI,UAAU,qDACb,eAACoD,EAAA,CAAM,UAAU,6CAA6C,EAChE,SACC,OACC,UAAApD,MAAC,KAAE,UAAU,gCAAgC,iBAAK,QACjD,KAAE,UAAU,mCACV,SAAA6C,EAAS,cAAc,gBAAe,CACzC,GACF,GACF,EACA/C,OAAC,OAAI,UAAU,0BACb,UAAAE,MAAC,OAAI,UAAU,mDACb,eAACqD,GAAA,CAAQ,UAAU,2CAA2C,EAChE,SACC,OACC,UAAArD,MAAC,KAAE,UAAU,gCAAgC,cAAE,QAC9C,KAAE,UAAU,mCACV,SAAA6C,EAAS,WAAW,gBAAe,CACtC,GACF,GACF,EACA/C,OAAC,OAAI,UAAU,0BACb,UAAAE,MAAC,OAAI,UAAU,uDACb,eAACsD,GAAA,CAAI,UAAU,+CAA+C,EAChE,SACC,OACC,UAAAtD,MAAC,KAAE,UAAU,gCAAgC,eAAG,QAC/C,KAAE,UAAU,mCACV,SAAA6C,EAAS,YAAY,gBAAe,CACvC,GACF,GACF,EACA/C,OAAC,OAAI,UAAU,0BACb,UAAAE,MAAC,OAAI,UAAU,uDACb,eAACuD,GAAA,CAAc,UAAU,+CAA+C,EAC1E,SACC,OACC,UAAAvD,MAAC,KAAE,UAAU,gCAAgC,qBAAS,QACrD,KAAE,UAAU,mCACV,SAAA6C,EAAS,kBAAkB,gBAAe,CAC7C,GACF,GACF,GACF,EAGA/C,OAAC,OAAI,UAAU,YACb,UAAAA,OAAC,OAAI,UAAU,qDACb,UAAAE,MAAC,QAAK,+BAAmB,SACxB,QAAM,UAAA6C,EAAS,gBAAgB,QAAQ,CAAC,EAAE,WAAO,GACpD,EACA/C,OAAC,OAAI,UAAU,iDACZ,UAAA+C,EAAS,cAAgB,GACxB7C,MAAC,OACC,UAAU,sBACV,MAAO,CACL,MAAO,GAAI6C,EAAS,cAAgBA,EAAS,cAAiB,GAAG,IACnE,GAGHA,EAAS,WAAa,GACrB7C,MAAC,OACC,UAAU,qBACV,MAAO,CACL,MAAO,GAAI6C,EAAS,WAAaA,EAAS,cAAiB,GAAG,IAChE,GAGHA,EAAS,YAAc,GACtB7C,MAAC,OACC,UAAU,uBACV,MAAO,CACL,MAAO,GAAI6C,EAAS,YAAcA,EAAS,cAAiB,GAAG,IACjE,GAGHA,EAAS,kBAAoB,GAC5B7C,MAAC,OACC,UAAU,uBACV,MAAO,CACL,MAAO,GAAI6C,EAAS,kBAAoBA,EAAS,cAAiB,GAAG,IACvE,EACF,EAEJ,GACF,EAGCA,EAAS,aAAa,OAAS,GAC9B/C,OAAC,OAAI,UAAU,YACb,UAAAE,MAAC,KAAE,UAAU,4CAA4C,yBAEzD,EACAA,MAAC,OAAI,UAAU,qCACZ,SAAA6C,EAAS,aAAa,MAAM,EAAG,CAAC,EAAE,IAAKtB,GACtCzB,OAAC,OAEC,UAAU,yFAEV,UAAAA,OAAC,OAAI,UAAU,kCACb,UAAAE,MAAC,QACC,UAAW,2DAA2D0C,GAAoBnB,EAAK,WAAW,CAAC,GAE1G,SAAAA,EAAK,cAERvB,MAAC,QAAK,UAAU,mCACb,WAAK,KACR,GACF,QACC,QAAK,UAAU,qCACb,SAAAuB,EAAK,SAAS,gBAAe,CAChC,IAfKA,EAAK,KAiBb,EACH,EACCsB,EAAS,aAAa,OAAS,GAC9B/C,OAAC,KAAE,UAAU,gCAAgC,cACzC+C,EAAS,aAAa,OAAS,EAAE,iBACrC,GAEJ,EAIDA,EAAS,aAAa,SAAW,SAC/B,KAAE,UAAU,iDAAiD,sDAE9D,GAEJ,GACF,CAEJ,CCtLA,MAAMW,GAAoBC,OAAK,IAAAC,EAAA,IAAM,OAAO,iCAA4B,qEAAE,KAAKC,IAAM,CAAE,QAASA,EAAE,mBAAoB,CAAC,EAM1GC,GAAoBvE,OAAK,SAA2B,CAAE,KAAAlB,GAAgC,CACjG,GAAIA,EAAK,SAAW,EAClB,OACE6B,MAACH,EAAA,CACC,SAAAG,MAACE,EAAA,CAAY,UAAU,OACrB,SAAAF,MAAC,KAAE,UAAU,yCAAyC,yDAEtD,EACF,EACF,EAIJ,MAAM6D,EAAS1F,EAAKA,EAAK,OAAS,CAAC,EAC7B,CAAE,QAAA2F,EAAS,SAAAC,EAAU,aAAAC,EAAc,QAAAC,EAAS,OAAAC,GAAWL,EAGvDM,EAAiBL,EAAQ,iBAAmB,GAC5CA,EAAQ,oBAAsBA,EAAQ,iBAAoB,KAAK,QAAQ,CAAC,EAC1E,MAEJ,OACEhE,OAAC,OAAI,UAAU,YAEb,UAAAA,OAAC,OAAI,UAAU,wCACb,UAAAA,OAACD,EAAA,CACC,UAAAC,OAACC,EAAA,CAAW,UAAU,4DACpB,UAAAC,MAACC,EAAA,CAAU,UAAU,4CAA4C,yBAEjE,EACAD,MAACoE,GAAA,CAAM,UAAU,gCAAgC,GACnD,SACClE,EAAA,CACC,UAAAF,MAAC,OAAI,UAAU,qBAAsB,SAAA8D,EAAQ,aAAa,iBAAiB,EAC3E9D,MAAC,KAAE,UAAU,qCAAsC,WAAO,YAAY,GACxE,GACF,SAECH,EAAA,CACC,UAAAC,OAACC,EAAA,CAAW,UAAU,4DACpB,UAAAC,MAACC,EAAA,CAAU,UAAU,4CAA4C,mBAEjE,EACAD,MAACqE,GAAA,CAAW,UAAU,2BAA2B,GACnD,SACCnE,EAAA,CACC,UAAAJ,OAAC,OAAI,UAAU,sCAAsC,cACjDgE,EAAQ,oBAAoB,QAAQ,CAAC,GACzC,EACAhE,OAAC,KAAE,UAAU,qCAAsC,UAAAqE,EAAe,oBAAgB,GACpF,GACF,SAECtE,EAAA,CACC,UAAAC,OAACC,EAAA,CAAW,UAAU,4DACpB,UAAAC,MAACC,EAAA,CAAU,UAAU,4CAA4C,oBAEjE,EACAD,MAACqE,GAAA,CAAW,UAAU,gCAAgC,GACxD,SACCnE,EAAA,CACC,UAAAJ,OAAC,OAAI,UAAW,sBAAsBgE,EAAQ,iBAAmB,EAAI,mBAAqB,EAAE,GAAI,cAC5FA,EAAQ,eAAe,QAAQ,CAAC,GACpC,EACA9D,MAAC,KAAE,UAAU,qCAAqC,wBAAY,GAChE,GACF,GACF,EAGC7B,EAAK,OAAS,GACb2B,OAACD,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,6BAAiB,EAC9B,EACAD,MAACE,EAAA,CACC,SAAAF,MAACsE,WAAA,CAAS,SAAUtE,MAAC,OAAI,UAAU,sCAAsC,EACvE,SAAAA,MAACwD,GAAA,CAAkB,KAAArF,EAAY,EACjC,EACF,GACF,EAIF2B,OAAC,OAAI,UAAU,wCAEb,UAAAA,OAACD,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAD,OAACG,EAAA,CAAU,UAAU,0BACnB,UAAAD,MAACuE,GAAA,CAAO,UAAU,UAAU,EAAE,kBAEhC,EACF,EACAvE,MAACE,EAAA,CACC,SAAAJ,OAAC,OAAI,UAAU,YACZ,iBAAO,QAAQiE,CAAQ,EACrB,OAAO,CAAC,EAAGS,CAAK,IAAMA,EAAM,QAAU,CAAC,EACvC,IAAI,CAAC,CAACC,EAAQD,CAAK,IACpB1E,OAAC,OAAiB,UAAU,mEAC1B,UAAAA,OAAC,QAAK,UAAU,iCAAkC,UAAA2E,EAAO,YAAQ,EACjE3E,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,QAAK,UAAU,uBAAwB,UAAA0E,EAAM,QAAQ,iBAAiB,QAAI,EAC3E1E,OAAC,QAAK,UAAU,qCAAqC,eAChD0E,EAAM,YAAY,QAAQ,CAAC,EAAE,KAClC,GACF,IAPQC,CAQV,CACD,EACAR,EAAQ,QAAU,GACjBnE,OAAC,OAAI,UAAU,yCACb,UAAAE,MAAC,QAAK,UAAU,sBAAsB,4BAAgB,EACtDF,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,QAAK,UAAU,uBAAwB,UAAAmE,EAAQ,QAAQ,QAAQ,CAAC,EAAE,WAAO,EAC1EnE,OAAC,QAAK,UAAU,qCAAqC,eAChDmE,EAAQ,YAAY,QAAQ,CAAC,EAAE,KACpC,GACF,GACF,GAEJ,EACF,GACF,SAGCpE,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAD,OAACG,EAAA,CAAU,UAAU,0BACnB,UAAAD,MAAC0E,GAAA,CAAS,UAAU,UAAU,EAAE,uBAElC,EACF,EACA1E,MAACE,EAAA,CACC,SAAAF,MAAC,OAAI,UAAU,YACZ,SAAAgE,EAAa,MAAM,EAAG,CAAC,EAAE,IAAKW,GAAS,CACtC,MAAMC,EAAad,EAAQ,aAAe,GACpCa,EAAK,QAAUb,EAAQ,aAAgB,KAAK,QAAQ,CAAC,EACvD,EACJ,OACEhE,OAAC,OAAoB,UAAU,YAC7B,UAAAA,OAAC,OAAI,UAAU,oCACb,UAAAE,MAAC,QAAK,UAAU,2CAA4C,SAAA2E,EAAK,KAAK,EACtE7E,OAAC,QAAK,UAAU,uBAAwB,UAAA6E,EAAK,QAAQ,iBAAiB,QAAI,GAC5E,EACA3E,MAAC,OAAI,UAAU,qCACb,SAAAA,MAAC,OACC,UAAU,+CACV,MAAO,CAAE,MAAO,GAAG4E,CAAU,IAAI,EACnC,CACF,IAVQD,EAAK,IAWf,CAEJ,CAAC,EACH,EACF,GACF,GACF,GACF,CAEJ,CAAC,EClKKE,GAAmBpB,OAAK,IAAAC,EAAA,IAAM,OAAO,gCAA2B,+EAAE,KAAKC,IAAM,CAAE,QAASA,EAAE,kBAAmB,CAAC,EAC9GmB,GAAwBrB,OAAK,IAAAC,EAAA,IAAM,OAAO,qCAAgC,kFAAE,KAAKC,IAAM,CAAE,QAASA,EAAE,uBAAwB,CAAC,EAWnI,SAASoB,EAAYpD,EAAsB,CACzC,OAAOA,EAAK,QAAQ,SAAU,EAAE,EAAE,QAAQ,MAAO,EAAE,CACrD,CAMA,MAAMqD,GAAuC,CAC3C,4CAA6C,kDAC7C,uDAAwD,kDACxD,mCAAoC,cACpC,6CAA8C,gDAC9C,qDAAsD,wDACtD,2CAA4C,8CAC9C,EAGA,SAASC,GAAoBC,EAAsB,CACjD,OAAOA,EAAK,QAAQ,SAAU,OAAO,CACvC,CAMA,SAASC,GAAiBC,EAAuC,CAC/D,MAAMC,EAAS,IAAI,IAAID,EAAM,IAAIxE,GAAK,CAACA,EAAE,KAAMA,CAAC,CAAC,CAAC,EAG5C0E,MAAqB,IAC3B,UAAW1E,KAAKwE,EAAO,CACrB,MAAMG,EAAW3E,EAAE,KAAK,QAAQ,sBAAuB,EAAE,EACzD0E,EAAe,IAAIC,EAAU3E,CAAC,CAChC,CAGA,MAAM4E,MAAiB,IACvB,UAAW5E,KAAKwE,EAAO,CACrB,MAAMK,EAAM7E,EAAE,MAAM,cAAc,QAAQ,cAAe,GAAG,EAAE,QAAQ,SAAU,EAAE,EAClF4E,EAAW,IAAIC,EAAK7E,CAAC,CACvB,CAEA,MAAO,CAAE,OAAAyE,EAAQ,eAAAC,EAAgB,WAAAE,CAAA,CACnC,CAEA,SAASE,EACPR,EACAS,EAC+C,CAE/C,MAAMC,EAAUZ,GAAaE,CAAI,EACjC,GAAIU,EAAS,CACX,MAAMC,EAAOF,EAAQ,OAAO,IAAIC,CAAO,EACvC,GAAIC,EAAM,OAAOA,CACnB,CAGA,MAAMC,EAAQH,EAAQ,OAAO,IAAIT,CAAI,EACrC,GAAIY,EAAO,OAAOA,EAGlB,MAAMC,EAAiBd,GAAoBC,CAAI,EAC/C,GAAIa,IAAmBb,EAAM,CAC3B,MAAMW,EAAOF,EAAQ,OAAO,IAAII,CAAc,EAC9C,GAAIF,EAAM,OAAOA,CACnB,CAGA,MAAMN,EAAWL,EAAK,QAAQ,sBAAuB,EAAE,EACjDc,EAAaL,EAAQ,eAAe,IAAIJ,CAAQ,EACtD,GAAIS,EAAY,OAAOA,EAGvB,MAAMP,EAAMF,EAAS,QAAQ,cAAe,GAAG,EAAE,QAAQ,SAAU,EAAE,EACrE,GAAIE,EAAI,QAAU,GAAI,CACpB,MAAMQ,EAAUN,EAAQ,WAAW,IAAIF,CAAG,EAC1C,GAAIQ,EAAS,OAAOA,CACtB,CAGF,CAGA,SAASC,EAAiBvI,EAAwB,CAChD,MAAMwI,MAAU,IAChB,UAAW5E,KAAQ5D,EAAM,UAAY,GAAI,CACvC,GAAI,CAAC4D,EAAK,KAAK,WAAW,QAAQ,GAAKA,EAAK,OAAS,UAAYA,EAAK,OAAS,QAAS,SACxF,MAAM6E,EAAa7E,EAAK,KAAK,QAAQ,MAAO,EAAE,EACxC3D,EAAWuI,EAAI,IAAIC,CAAU,EAC/BxI,GACFA,EAAS,UAAY2D,EAAK,SAC1B3D,EAAS,OAAS2D,EAAK,MACvB3D,EAAS,WAAa2D,EAAK,WAE3B4E,EAAI,IAAIC,EAAY,CAAE,SAAU7E,EAAK,SAAU,MAAOA,EAAK,MAAO,UAAWA,EAAK,UAAW,CAEjG,CACA,OAAO4E,CACT,CAEO,SAASE,GAAkB,CAAE,WAAAC,EAAY,UAAAC,GAAqC,CACnF,KAAM,CAACC,EAASC,CAAU,EAAIpI,WAAkB,UAAU,EACpD,CAACqI,EAASC,CAAU,EAAItI,WAAS,EAAK,EACtC,CAACuI,EAAoBC,CAAqB,EAAIxI,WAA6B,eAAe,EAC1F,CAACyI,EAAoBC,CAAqB,EAAI1I,WAAS,EAAK,EAE5D+G,EAAQtC,UAAQ,IAAMkE,GAAA,EAAe,EAAE,EACvCrB,EAAU7C,UAAQ,IAAMqC,GAAiBC,CAAK,EAAG,CAACA,CAAK,CAAC,EAGxD6B,EAAenE,UAAQ,IAAM,CACjC,MAAMoE,EAAchB,EAAiBK,GAAa,CAAE,SAAU,GAAuB,EAE/EY,EAAO,MAAM,KAAKD,EAAY,SAAS,EAAE,IAAI,CAAC,CAACvF,EAAM6C,CAAK,IAAM,CACpE,MAAMU,EAAOH,EAAYpD,CAAI,EACvBkE,EAAOH,EAAUR,EAAMS,CAAO,EACpC,MAAO,CACL,KAAAhE,EACA,KAAAuD,EACA,MAAOW,GAAM,OAASX,EACtB,OAAQW,GAAM,QAAU,IACxB,KAAMA,GAAM,MAAQ,GACpB,KAAMA,GAAM,MAAQ,GACpB,SAAUA,GAAM,UAAY,gBAC5B,YAAaA,GAAM,aAAe,IAClC,QAAS,CAAC,CAACA,EACX,GAAGrB,CAAA,CAEP,CAAC,EAEKjC,EAAgB4E,EAAK,OAAO,CAACC,EAAGC,IAAMD,EAAIC,EAAE,SAAU,CAAC,EACvDC,EAAUH,EAAK,OAAS,EAC1BA,EAAK,OAAO,CAACI,EAAKF,IAAMA,EAAE,SAAWE,EAAI,SAAWF,EAAIE,EAAKJ,EAAK,CAAC,CAAC,EACpE,KAEJ,MAAO,CAAE,KAAAA,EAAM,cAAA5E,EAAe,QAAA+E,CAAA,CAChC,EAAG,CAACf,EAAWZ,CAAO,CAAC,EAGjB6B,EAAgB1E,UAAQ,IAAM,CAClC,GAAIwD,EAAW,OAAS,EAAG,OAC3B,MAAMmB,EAAS,CAAC,GAAGnB,CAAU,EAAE,KAAK,CAAC7D,EAAG5E,IAAM,IAAI,KAAKA,EAAE,IAAI,EAAE,UAAY,IAAI,KAAK4E,EAAE,IAAI,EAAE,SAAS,EAC/FiF,EAAUD,EAAO,CAAC,EAClBE,EAAWF,EAAO,CAAC,EACzB,GAAI,CAACC,GAAW,CAACC,EAAU,OAE3B,MAAMC,EAAc,MAAM,KAAK1B,EAAiBwB,CAAO,EAAE,QAAQ,EAAE,OAAO,CAACN,EAAGC,IAAMD,EAAIC,EAAE,SAAU,CAAC,EAC/FQ,EAAe,MAAM,KAAK3B,EAAiByB,CAAQ,EAAE,QAAQ,EAAE,OAAO,CAACP,EAAGC,IAAMD,EAAIC,EAAE,SAAU,CAAC,EACvG,GAAIQ,IAAiB,EACrB,OAAO,KAAK,OAAQD,EAAcC,GAAgBA,EAAgB,GAAG,CACvE,EAAG,CAACvB,CAAU,CAAC,EAGTwB,EAAchF,UAAQ,IAAM,CAChC,MAAMiF,MAAiB,IAEvB,UAAWpK,KAAS2I,EAAY,CAC9B,MAAM0B,EAAY9B,EAAiBvI,CAAK,EACxC,SAAW,CAACgE,EAAM6C,CAAK,IAAKwD,EAAW,CACrC,MAAM9C,EAAOH,EAAYpD,CAAI,EAGvB8D,EADOC,EAAUR,EAAMS,CAAO,GAClB,MAAQT,EAEpBtH,EAAWmK,EAAW,IAAItC,CAAG,EACnC,GAAI7H,EAAU,CACZA,EAAS,eAAiB4G,EAAM,SAChC5G,EAAS,YAAc4G,EAAM,UAC7B,MAAMyD,GAAY,IAAI,KAAKtK,EAAM,IAAI,EAAE,UACnCsK,GAAY,IAAI,KAAKrK,EAAS,SAAS,EAAE,YAAWA,EAAS,UAAYD,EAAM,MAC/EsK,GAAY,IAAI,KAAKrK,EAAS,QAAQ,EAAE,YAAWA,EAAS,SAAWD,EAAM,KACnF,MACEoK,EAAW,IAAItC,EAAK,CAClB,cAAejB,EAAM,SACrB,WAAYA,EAAM,UAClB,UAAW7G,EAAM,KACjB,SAAUA,EAAM,KACjB,CAEL,CACF,CAEA,MAAMuK,EAAa5B,EAAW,OAAS,EACnC,CAAC,GAAGA,CAAU,EAAE,KAAK,CAAC7D,EAAG5E,IAAM,IAAI,KAAKA,EAAE,IAAI,EAAE,UAAY,IAAI,KAAK4E,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,EAAE,KAC3F,GAEE0E,EAAO,MAAM,KAAKY,EAAW,SAAS,EAAE,IAAI,CAAC,CAAC7C,EAAMV,CAAK,IAAM,CACnE,MAAMqB,EAAOH,EAAUR,EAAMS,CAAO,EACpC,MAAO,CACL,KAAAT,EACA,MAAOW,GAAM,OAASX,EACtB,QAAS,CAAC,CAACW,EACX,eAAgBrB,EAAM,WAAa0D,EACnC,GAAG1D,CAAA,CAEP,CAAC,EAEK2D,EAAoBhB,EAAK,OAAO,CAACC,EAAGC,IAAMD,EAAIC,EAAE,WAAY,CAAC,EAEnE,MAAO,CAAE,KAAAF,EAAM,kBAAAgB,CAAA,CACjB,EAAG,CAAC7B,EAAYX,CAAO,CAAC,EAGlByC,EAAiBtF,UAAQ,IAAM,CACnC,MAAMuF,MAAa,IACnB,UAAW1K,KAAS2I,EAAY,CAC9B,MAAM0B,EAAY9B,EAAiBvI,CAAK,EACxC,SAAW,CAACgE,EAAM6C,CAAK,IAAKwD,EAAW,CACrC,MAAM9C,EAAOH,EAAYpD,CAAI,EACvBkE,EAAOH,EAAUR,EAAMS,CAAO,EACpC,GAAIE,EACF,UAAWyC,KAAOzC,EAAK,KACrBwC,EAAO,IAAIC,GAAMD,EAAO,IAAIC,CAAG,GAAK,GAAK9D,EAAM,QAAQ,CAG7D,CACF,CACA,OAAO,MAAM,KAAK6D,EAAO,SAAS,EAC/B,IAAI,CAAC,CAACC,EAAKC,CAAQ,KAAO,CAAE,IAAAD,EAAK,SAAAC,CAAA,EAAW,EAC5C,KAAK,CAAC9F,EAAG5E,IAAMA,EAAE,SAAW4E,EAAE,QAAQ,CAC3C,EAAG,CAAC6D,EAAYX,CAAO,CAAC,EAGlB6C,EAAa1F,UAAQ,IACV,CAAC,GAAGmE,EAAa,IAAI,EAAE,KAAK,CAACxE,EAAG5E,IAAM,CACnD,IAAI4K,EAAM,EACV,OAAQjC,EAAA,CACN,IAAK,QAASiC,EAAMhG,EAAE,MAAM,cAAc5E,EAAE,KAAK,EAAG,MACpD,IAAK,OAAQ4K,EAAO,IAAI,KAAKhG,EAAE,MAAQ,CAAC,EAAE,UAAc,IAAI,KAAK5E,EAAE,MAAQ,CAAC,EAAE,UAAY,MAC1F,IAAK,WAAY4K,EAAMhG,EAAE,SAAW5E,EAAE,SAAU,MAChD,IAAK,QAAS4K,EAAMhG,EAAE,MAAQ5E,EAAE,MAAO,MACvC,IAAK,YAAa4K,EAAMhG,EAAE,UAAY5E,EAAE,UAAW,MAErD,OAAO6I,EAAU+B,EAAM,CAACA,CAC1B,CAAC,EACa,MAAM,EAAG,CAAC,EACvB,CAACxB,EAAa,KAAMT,EAASE,CAAO,CAAC,EAGlCgC,EAAoB5F,UAAQ,IACjB,CAAC,GAAGgF,EAAY,IAAI,EAAE,KAAK,CAACrF,EAAG5E,IAAM,CAClD,IAAI4K,EAAM,EACV,OAAQ7B,EAAA,CACN,IAAK,QAAS6B,EAAMhG,EAAE,MAAM,cAAc5E,EAAE,KAAK,EAAG,MACpD,IAAK,gBAAiB4K,EAAMhG,EAAE,cAAgB5E,EAAE,cAAe,MAC/D,IAAK,aAAc4K,EAAMhG,EAAE,WAAa5E,EAAE,WAAY,MAExD,OAAOiJ,EAAqB2B,EAAM,CAACA,CACrC,CAAC,EAEA,CAACX,EAAY,KAAMlB,EAAoBE,CAAkB,CAAC,EAEvD6B,EAAclD,GAAiB,CAC/Be,IAAYf,EAAKkB,EAAW,CAACD,CAAO,GACjCD,EAAWhB,CAAG,EAAGkB,EAAW,EAAK,EAC1C,EAEMiC,EAAyBnD,GAA4B,CACrDmB,IAAuBnB,EAAKsB,EAAsB,CAACD,CAAkB,GAClED,EAAsBpB,CAAG,EAAGsB,EAAsB,EAAK,EAChE,EAEM8B,EAAiBpD,GAAiBe,IAAYf,EAAOiB,EAAU,KAAO,KAAQ,KAC9EoC,EAA4BrD,GAA4BmB,IAAuBnB,EAAOqB,EAAqB,KAAO,KAAQ,KAE1HiC,GAAY,CAAC,CAAE,OAAAC,KACfA,EAAehJ,MAACI,GAAA,CAAW,UAAU,qCAAqC,EACvEJ,MAACiJ,GAAA,CAAM,UAAU,4CAA4C,EAGtE,OACEnJ,OAAC,OAAI,UAAU,YAEb,UAAAA,OAAC,OAAI,UAAU,uDACb,UAAAE,MAACZ,EAAA,CACC,MAAM,qBACN,MAAO6H,EAAa,cAAc,iBAClC,KAAM7D,EACN,MAAOoE,CAAA,GAETxH,MAACZ,EAAA,CACC,MAAM,mBACN,MAAOgG,EAAM,OAAO,iBACpB,KAAM8D,EAAA,GAERlJ,MAACZ,EAAA,CACC,MAAM,gBACN,MAAO6H,EAAa,SAAS,OAAS,IACtC,KAAMkC,GACN,SAAUlC,EAAa,QAAU,GAAGA,EAAa,QAAQ,QAAQ,YAAc,SAEjFjH,MAACZ,EAAA,CACC,MAAM,iBACN,MAAO0I,EAAY,kBAAkB,iBACrC,KAAMsB,GACN,SAAS,8BACX,EACF,QAGC,OAAI,UAAU,wCACb,SAAAtJ,OAACD,EAAA,CAAK,UAAU,gBACd,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,kCAAsB,EACnC,QACCC,EAAA,CACC,SAAAF,MAACsE,YAAS,SAAUtE,MAAC,OAAI,UAAU,sCAAsC,EACvE,SAAAA,MAAC6E,IAAiB,KAAMyB,EAAY,YAAaX,EAAS,UAAAD,CAAA,CAAsB,EAClF,EACF,GACF,EACF,SAEC7F,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,oCAAwB,EACrC,EACAD,MAACE,EAAA,CACC,SAAAF,MAACsE,WAAA,CAAS,SAAUtE,MAAC,OAAI,UAAU,sCAAsC,EACvE,SAAAA,MAAC8E,GAAA,CAAsB,QAASsD,EAAgB,EAClD,EACF,GACF,EAGCI,EAAW,OAAS,GACnB1I,OAACD,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,iCAAqB,EAClC,EACAD,MAACE,GACC,SAAAF,MAAC,OAAI,UAAU,kBACb,SAAAF,OAAC,SAAM,UAAU,iBACf,UAAAE,MAAC,SACC,SAAAF,OAAC,MAAG,UAAU,WACZ,UAAAA,OAAC,MAAG,UAAU,wDAAwD,QAAS,IAAM6I,EAAW,OAAO,EAAG,kBAClGE,EAAc,OAAO,GAC7B,EACA/I,OAAC,MAAG,UAAU,kFAAkF,QAAS,IAAM6I,EAAW,MAAM,EAAG,iBAC5HE,EAAc,MAAM,GAC3B,EACA/I,OAAC,MAAG,UAAU,8DAA8D,QAAS,IAAM6I,EAAW,UAAU,EAAG,qBACxGE,EAAc,UAAU,GACnC,EACA/I,OAAC,MAAG,UAAU,mFAAmF,QAAS,IAAM6I,EAAW,WAAW,EAAG,kBACjIE,EAAc,WAAW,GACjC,GACF,EACF,EACA7I,MAAC,SACE,SAAAwI,EAAW,IAAKa,GACfvJ,OAAC,MAAkB,UAAU,4BAC3B,UAAAE,MAAC,MAAG,UAAU,8BAA8B,MAAOqJ,EAAI,MAAQ,WAAI,MAAM,EACzErJ,MAAC,MAAG,UAAU,yEAA0E,WAAI,KAAK,QAChG,MAAG,UAAU,oCAAqC,SAAAqJ,EAAI,SAAS,iBAAiB,QAChF,MAAG,UAAU,yDAA0D,SAAAA,EAAI,UAAU,gBAAe,CAAE,IAJhGA,EAAI,IAKb,CACD,EACH,GACF,EACF,EACF,GACF,EAIDX,EAAkB,OAAS,GAC1B5I,OAACD,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,gCAAoB,EACjC,EACAD,MAACE,GACC,SAAAF,MAAC,OAAI,UAAU,kBACb,SAAAF,OAAC,SAAM,UAAU,iBACf,UAAAE,MAAC,SACC,SAAAF,OAAC,MAAG,UAAU,WACZ,UAAAA,OAAC,MAAG,UAAU,wDAAwD,QAAS,IAAM8I,EAAsB,OAAO,EAAG,kBAC7GE,EAAyB,OAAO,GACxC,EACAhJ,OAAC,MAAG,UAAU,8DAA8D,QAAS,IAAM8I,EAAsB,eAAe,EAAG,qBACxHE,EAAyB,eAAe,GACnD,EACAhJ,OAAC,MAAG,UAAU,mFAAmF,QAAS,IAAM8I,EAAsB,YAAY,EAAG,kBAC7IE,EAAyB,YAAY,GAC7C,EACA9I,MAAC,MAAG,UAAU,uDAAuD,sBAAU,EAC/EA,MAAC,MAAG,UAAU,yDAAyD,iBAAK,GAC9E,EACF,EACAA,MAAC,SACE,SAAA0I,EAAkB,IAAKW,GACtBvJ,OAAC,MAAkB,UAAU,4BAC3B,UAAAE,MAAC,MAAG,UAAU,8BAA8B,MAAOqJ,EAAI,MACpD,WAAI,MACP,QACC,MAAG,UAAU,oCAAqC,SAAAA,EAAI,cAAc,iBAAiB,QACrF,MAAG,UAAU,yDAA0D,SAAAA,EAAI,WAAW,iBAAiB,EACxGrJ,MAAC,MAAG,UAAU,yEAA0E,WAAI,UAAU,EACtGA,MAAC,MAAG,UAAU,6CACZ,eAAC+I,GAAA,CAAU,OAAQM,EAAI,eAAgB,EACzC,IATOA,EAAI,IAUb,CACD,EACH,GACF,EACF,EACF,GACF,GAEJ,CAEJ,CC9ZA,MAAMC,GAAqB7F,OAAK,IAAAC,EAAA,IAAM,OAAO,kCAA6B,sEAAE,KAAKC,IAAM,CAAE,QAASA,EAAE,oBAAqB,CAAC,EACpH4F,GAAuB9F,OAAK,IAAAC,EAAA,IAAM,OAAO,oCAA+B,4EAAE,KAAKC,IAAM,CAAE,QAASA,EAAE,sBAAuB,CAAC,EAC1H6F,GAAsB/F,OAAK,IAAAC,EAAA,IAAM,OAAO,mCAA8B,kFAAE,KAAKC,IAAM,CAAE,QAASA,EAAE,qBAAsB,CAAC,EACvH8F,GAAyBhG,OAAK,IAAAC,EAAA,IAAM,OAAO,sCAAiC,qFAAE,KAAKC,IAAM,CAAE,QAASA,EAAE,wBAAyB,CAAC,EAChI+F,GAAyBjG,OAAK,IAAAC,EAAA,IAAM,OAAO,sCAAiC,+EAAE,KAAKC,IAAM,CAAE,QAASA,EAAE,wBAAyB,CAAC,EAEhIgG,GAA4B,CAChC,CAAE,MAAO,SAAU,MAAO,UAC1B,CAAE,MAAO,UAAW,MAAO,WAC3B,CAAE,MAAO,OAAQ,MAAO,QACxB,CAAE,MAAO,cAAe,MAAO,cAAe,YAAa,QAC3D,CAAE,MAAO,QAAS,MAAO,SACzB,CAAE,MAAO,OAAQ,MAAO,QAC1B,EAEO,SAASC,IAAqB,CACnC,KAAM,CAAE,OAAA/F,EAAQ,WAAAyC,EAAY,cAAAuD,EAAe,kBAAAC,EAAmB,eAAAC,EAAgB,UAAAC,EAAW,MAAAC,EAAO,QAAA9K,CAAA,EAAYjB,GAAA,EACtG,CAACgM,EAAWC,CAAY,EAAI9L,WAAS,QAAQ,EAEnD,GAAI2L,EACF,OACElK,OAAC,OAAI,UAAU,YAEb,UAAAE,MAAC,OAAI,KAAK,SAAS,YAAU,SAAS,UAAU,UAAU,qCAE1D,QAEC,OAAI,UAAU,uDACZ,UAAC,GAAG,MAAM,CAAC,CAAC,EAAE,IAAI,CAACoK,EAAGC,IACrBvK,OAACD,EAAA,CAAa,UAAU,gBACtB,UAAAG,MAACD,GAAW,UAAU,OACpB,eAAC,OAAI,UAAU,4BAA4B,EAC7C,QACCG,EAAA,CACC,SAAAF,MAAC,OAAI,UAAU,4BAA4B,EAC7C,IANSqK,CAOX,CACD,EACH,EAEAvK,OAAC,OAAI,UAAU,YACb,UAAAE,MAAC,OAAI,UAAU,2CAA2C,EAC1DF,OAAC,OAAI,UAAU,wCACb,UAAAA,OAACD,EAAA,CAAK,UAAU,8BACd,UAAAG,MAACD,EAAA,CACC,SAAAC,MAAC,OAAI,UAAU,4BAA4B,EAC7C,QACCE,EAAA,CACC,SAAAF,MAAC,OAAI,UAAU,wBAAwB,EACzC,GACF,EACAF,OAACD,EAAA,CAAK,UAAU,gBACd,UAAAG,MAACD,EAAA,CACC,SAAAC,MAAC,OAAI,UAAU,4BAA4B,EAC7C,QACCE,EAAA,CACC,SAAAF,MAAC,OAAI,UAAU,wBAAwB,EACzC,GACF,GACF,EACAF,OAAC,OAAI,UAAU,wCACb,UAAAA,OAACD,EAAA,CAAK,UAAU,gBACd,UAAAG,MAACD,EAAA,CACC,SAAAC,MAAC,OAAI,UAAU,4BAA4B,EAC7C,QACCE,EAAA,CACC,SAAAF,MAAC,OAAI,UAAU,wBAAwB,EACzC,GACF,EACAF,OAACD,EAAA,CAAK,UAAU,gBACd,UAAAG,MAACD,EAAA,CACC,SAAAC,MAAC,OAAI,UAAU,4BAA4B,EAC7C,QACCE,EAAA,CACC,SAAAF,MAAC,OAAI,UAAU,wBAAwB,EACzC,GACF,GACF,EACAF,OAACD,EAAA,CAAK,UAAU,gBACd,UAAAG,MAACD,EAAA,CACC,SAAAC,MAAC,OAAI,UAAU,4BAA4B,EAC7C,QACCE,EAAA,CACC,SAAAF,MAAC,OAAI,UAAU,wBAAwB,EACzC,GACF,GACF,GACF,EAIJ,GAAIiK,EACF,OACEjK,MAACH,EAAA,CAAK,UAAU,qBAAqB,KAAK,QACxC,SAAAG,MAACE,EAAA,CAAY,UAAU,OACrB,SAAAJ,OAAC,KAAE,UAAU,mBAAmB,4CAAgCmK,CAAA,EAAM,EACxE,EACF,EAKJ,MAAM1D,EAAYD,EAAWA,EAAW,OAAS,CAAC,EAC5CgE,EAAchE,EAAWA,EAAW,OAAS,CAAC,EAG9CiE,EAAchE,GAAW,iBAC3BoD,GACAA,GAAe,OAAOa,GAAOA,EAAI,QAAU,OAAO,EAGhDC,EAAelE,GAAW,SAAS,UAAY,MAAQ+D,GAAa,SAAS,UAAY,MAAQA,EAAY,QAAQ,SAAW,GAChI/D,EAAU,QAAQ,SAAW+D,EAAY,QAAQ,UAAYA,EAAY,QAAQ,SAAY,IAC/F,OAGEI,EAAiBZ,EAAkB,OAAS,EAC9C,KAAK,MAAMA,EAAkB,OAAO,CAACa,EAAK/J,IAAM+J,EAAM/J,EAAE,YAAa,CAAC,EAAIkJ,EAAkB,MAAM,EAClG,KAGEc,EAAef,EAAcA,EAAc,OAAS,CAAC,EAE3D,OACE/J,OAAC,OAAI,UAAU,YAEZ,UAAAX,SACEU,EAAA,CAAK,UAAU,wCAAwC,KAAK,SAC3D,SAAAG,MAACE,EAAA,CAAY,UAAU,OACrB,eAAC,KAAE,UAAU,+CAAgD,SAAAf,EAAQ,EACvE,EACF,EAIFW,OAAC+K,EAAO,IAAP,CACC,UAAU,uDACV,SAAUC,GACV,QAAQ,SACR,QAAQ,UAER,UAAA9K,MAAC6K,EAAO,IAAP,CAAW,SAAUE,EACpB,SAAA/K,MAACZ,EAAA,CACC,MAAM,gBACN,MAAOmH,GAAW,SAAS,UAAU,kBAAoB,IACzD,KAAMnD,EACN,MAAOqH,CAAA,GAEX,EACAzK,MAAC6K,EAAO,IAAP,CAAW,SAAUE,EACpB,SAAA/K,MAACZ,EAAA,CACC,MAAM,kBACN,MAAOsL,IAAmB,KAAO,GAAGA,CAAc,GAAK,IACvD,KAAMM,GACN,SAAS,mBACT,OAAQN,IAAmB,KAAQA,GAAkB,GAAK,OAASA,GAAkB,GAAK,UAAY,WAAc,SAExH,EACA1K,MAAC6K,EAAO,IAAP,CAAW,SAAUE,EACpB,SAAA/K,MAACZ,EAAA,CACC,MAAM,mBACN,MAAOwL,GAAc,SAAS,kBAAkB,kBAAoB,IACpE,KAAMK,EAAA,GAEV,EACAjL,MAAC6K,EAAO,IAAP,CAAW,SAAUE,EACpB,SAAA/K,MAACZ,EAAA,CACC,MAAM,cACN,MAAOmH,GAAW,SAAS,YAAc,KAAO,IAAIA,EAAU,QAAQ,WAAa,KAAK,QAAQ,CAAC,CAAC,IAAM,IACxG,KAAM2E,EACN,OAAQ3E,GAAW,SAAS,YAAc,KAAQA,EAAU,QAAQ,YAAc,GAAM,OAASA,EAAU,QAAQ,YAAc,GAAM,UAAY,WAAc,QACnK,CACF,YAID4E,GAAA,CAAK,MAAOjB,EAAW,cAAeC,EAAc,UAAU,YAC7D,UAAAnK,MAACoL,GAAA,CACC,MAAOb,EACP,MAAOL,EACP,cAAeC,EACf,kBAAkB,qBAGpBrK,OAACuL,GAAA,CAAgB,KAAK,OAEnB,UAAAnB,IAAc,WACblK,MAAC6K,EAAO,IAAP,CAEC,SAAUS,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,OAEL,gBAACC,EAAA,CAAY,MAAM,UAAU,UAAU,YAAY,WAAU,GACjE,UAAAzL,OAAC,OAAI,UAAU,wCACb,UAAAA,OAACD,EAAA,CAAK,UAAU,gBACd,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,8BAAkB,EAC/B,EACAD,MAACE,EAAA,CACC,SAAAF,MAACsE,WAAA,CAAS,SAAUtE,MAAC,OAAI,UAAU,sCAAsC,EACvE,SAAAA,MAACsJ,GAAA,CAAmB,KAAMhD,EAAY,EACxC,EACF,GACF,SACCzG,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,4BAAgB,EAC7B,QACCC,EAAA,CACC,SAAAF,MAACsE,YAAS,SAAUtE,MAAC,OAAI,UAAU,sCAAsC,EACvE,SAAAA,MAACuJ,IAAqB,KAAMhD,GAAW,iBAAmB,GAAI,EAChE,EACF,GACF,GACF,EAEAzG,OAAC,OAAI,UAAU,wCACb,UAAAA,OAACD,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,2BAAe,EAC5B,QACCC,EAAA,CACC,SAAAF,MAACsE,WAAA,CAAS,eAAW,OAAI,UAAU,sCAAsC,EACvE,eAACkF,GAAA,CAAoB,KAAMjD,GAAW,eAAgB,EACxD,EACF,GACF,EACCA,GAAW,gBAAgB,SAAWA,EAAU,eAAe,QAAQ,OAAS,GAC/EzG,OAACD,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,yBAAa,EAC1B,EACAD,MAACE,GACC,SAAAF,MAAC,OAAI,UAAU,YACZ,SAAAuG,EAAU,eAAe,QAAQ,MAAM,EAAG,CAAC,EAAE,IAAI,CAACiF,EAAQnB,IACzDvK,OAAC,OAAY,UAAU,iFACrB,UAAAA,OAAC,QAAK,UAAU,2CACb,UAAA0L,EAAO,OAAO,MAAIA,EAAO,QAC5B,QACC,QAAK,UAAU,6CACb,SAAAA,EAAO,SAAS,gBAAe,CAClC,IANQnB,CAOV,CACD,EACH,EACF,GACF,EAED9D,GAAW,UAAYA,EAAU,SAAS,OAAS,GAClDvG,MAAC4C,GAAA,CAAmB,SAAU2D,EAAU,SAAU,GAEtD,EAGCA,GAAW,UAAYA,EAAU,SAAS,OAAS,UACjD1G,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,0BAAc,EAC3B,EACAD,MAACE,GACC,SAAAF,MAAC,OAAI,UAAU,kBACb,SAAAF,OAAC,SAAM,UAAU,iBACf,UAAAE,MAAC,SACC,SAAAF,OAAC,MAAG,UAAU,WACZ,UAAAE,MAAC,MAAG,UAAU,6BAA6B,gBAAI,EAC/CA,MAAC,MAAG,UAAU,mCAAmC,oBAAQ,EACzDA,MAAC,MAAG,UAAU,mCAAmC,iBAAK,EACtDA,MAAC,MAAG,UAAU,wDAAwD,iBAAK,GAC7E,EACF,EACAA,MAAC,SACE,SAAAuG,EAAU,SAAS,MAAM,EAAG,EAAE,EAAE,IAAKhF,GACpCzB,OAAC,MAAmB,UAAU,4BAC5B,UAAAE,MAAC,MAAG,UAAU,iEAAkE,SAAAuB,EAAK,KAAK,QACzF,MAAG,UAAU,oCAAqC,SAAAA,EAAK,SAAS,iBAAiB,QACjF,MAAG,UAAU,oCAAqC,SAAAA,EAAK,MAAM,iBAAiB,QAC9E,MAAG,UAAU,yDAA0D,SAAAA,EAAK,UAAU,gBAAe,CAAE,IAJjGA,EAAK,IAKd,CACD,EACH,GACF,EACF,EACF,GACF,GAEE,GAnGI,WAwGP2I,IAAc,QACblK,MAAC6K,EAAO,IAAP,CAEC,SAAUS,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,OAEL,SAAAtL,MAACuL,EAAA,CAAY,MAAM,OAAO,UAAU,YAAY,WAAU,GACxD,SAAAvL,MAACqG,GAAA,CAAkB,WAAAC,EAAwB,UAAAC,CAAA,CAAsB,EACnE,GARI,QAaP2D,IAAc,eACblK,MAAC6K,EAAO,IAAP,CAEC,SAAUS,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,OAEL,gBAACC,EAAA,CAAY,MAAM,cAAc,UAAU,YAAY,WAAU,GAErE,UAAAzL,OAAC,OAAI,UAAU,wCACb,UAAAA,OAAC,OAAI,UAAU,YACb,UAAAE,MAAC,MAAG,UAAU,4CAA4C,iCAAqB,EAC/EA,MAACU,GAAA,CAAkB,KAAMoJ,CAAA,CAAmB,GAC9C,EACAhK,OAAC,OAAI,UAAU,YACb,UAAAE,MAAC,MAAG,UAAU,4CAA4C,mCAAuB,EACjFA,MAACkB,GAAA,CAAiB,KAAM2C,GAAQ,UAAW,GAC7C,GACF,SAGChE,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,qCAAyB,EACtC,EACAD,MAACE,EAAA,CACC,SAAAF,MAACsE,WAAA,CAAS,SAAUtE,MAAC,OAAI,UAAU,sCAAsC,EACvE,SAAAA,MAACyJ,GAAA,CAAuB,KAAMK,EAAmB,EACnD,EACF,GACF,EAEA9J,MAACsB,GAAA,CAAsB,KAAMwI,CAAA,CAAmB,GAC5C,GAhCI,eAqCPI,IAAc,UACblK,MAAC6K,EAAO,IAAP,CAEC,SAAUS,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,OAEL,gBAACC,EAAA,CAAY,MAAM,SAAS,UAAU,YAAY,WAAU,GAChE,UAAAzL,OAACD,EAAA,CACC,UAAAG,MAACD,EAAA,CACC,SAAAC,MAACC,EAAA,CAAU,8BAAkB,EAC/B,EACAD,MAACE,EAAA,CACC,SAAAF,MAACsE,WAAA,CAAS,SAAUtE,MAAC,OAAI,UAAU,sCAAsC,EACvE,SAAAA,MAAC0J,GAAA,CAAuB,KAAMG,EAAe,EAC/C,EACF,GACF,EAEA/J,OAAC,OAAI,UAAU,uDACb,UAAAE,MAACZ,EAAA,CACC,MAAM,SACN,MAAOwL,GAAc,SAAS,aAAa,kBAAoB,IAC/D,KAAMM,CAAA,GAERlL,MAACZ,EAAA,CACC,MAAM,cACN,MAAOwL,GAAc,SAAS,kBAAkB,kBAAoB,IACpE,KAAMK,EAAA,GAERjL,MAACZ,EAAA,CACC,MAAM,MACN,MAAOwL,GAAc,SAAS,YAAc,KAAO,IAAIA,EAAa,QAAQ,WAAa,KAAK,QAAQ,CAAC,CAAC,IAAM,IAC9G,KAAMM,CAAA,GAERlL,MAACZ,EAAA,CACC,MAAM,eACN,MAAOwL,GAAc,SAAS,iBAAiB,QAAQ,CAAC,GAAK,IAC7D,KAAMI,EAAA,EACR,EACF,GACI,GAxCI,UA6CPd,IAAc,SACblK,MAAC6K,EAAO,IAAP,CAEC,SAAUS,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,OAEL,SAAAtL,MAACuL,EAAA,CAAY,MAAM,QAAQ,UAAU,YAAY,WAAU,GAC9D,SAAAhF,GAAW,iBACVzG,OAAA2L,WAAA,CACE,UAAA3L,OAAC,OAAI,UAAU,uDACb,UAAAE,MAACZ,EAAA,CACC,MAAM,yBACN,MAAOmH,EAAU,iBAAiB,MAAM,iBACxC,KAAMmF,EAAA,GAEPnF,EAAU,iBAAiB,OAAO,MAAM,EAAG,CAAC,EAAE,IAAKoF,GAClD3L,MAACZ,EAAA,CAEC,MAAOuM,EAAK,KAAK,QAAQ,KAAM,GAAG,EAAE,QAAQ,QAASC,GAAKA,EAAE,aAAa,EACzE,MAAOD,EAAK,MAAM,iBAClB,KAAMT,EACN,SAAS,gBAJJS,EAAK,KAMb,GACH,EAEA3L,MAAC,OAAI,UAAU,wCACZ,SAAAuG,EAAU,iBAAiB,OAAO,IAAKoF,GACtC7L,OAACD,EAAA,CACC,UAAAG,MAACD,GACC,SAAAC,MAACC,EAAA,CAAU,UAAU,UAClB,SAAA0L,EAAK,KAAK,QAAQ,KAAM,GAAG,EAAE,QAAQ,QAASC,GAAKA,EAAE,aAAa,EACrE,EACF,EACA5L,MAACE,EAAA,CACC,SAAAF,MAAC,OAAI,UAAU,YACZ,SAAA2L,EAAK,QAAQ,IAAKE,GACjB/L,OAAC,OAAwB,UAAU,iFACjC,UAAAE,MAAC,QAAK,UAAU,oBACb,SAAA6L,EAAO,OAAO,QAAQ,KAAM,GAAG,EAClC,QACC,QAAK,UAAU,6CACb,SAAAA,EAAO,MAAM,gBAAe,CAC/B,IANQA,EAAO,MAOjB,CACD,EACH,EACF,IAnBSF,EAAK,IAoBhB,CACD,EACH,GACF,EAEA3L,MAACH,EAAA,CACC,SAAAG,MAACE,GAAY,UAAU,OACrB,SAAAF,MAAC,KAAE,UAAU,yCAAyC,wHAEtD,EACF,EACF,EAEE,GA7DI,SAkEPkK,IAAc,QACblK,MAAC6K,EAAO,IAAP,CAEC,SAAUS,EACV,QAAQ,SACR,QAAQ,UACR,KAAK,OAEL,SAAAtL,MAACuL,EAAA,CAAY,MAAM,OAAO,UAAU,YAAY,WAAU,GACxD,SAAAvL,MAAC4D,GAAA,CAAkB,KAAMmG,CAAA,CAAgB,EAC3C,GARI,OASN,EAEJ,GACF,EAGClG,GAAQ,WACP7D,MAAC,UAAO,UAAU,iCAChB,SAAAF,OAAC,KAAE,UAAU,gCAAgC,2BAC5B,IAAI,KAAK+D,EAAO,SAAS,EAAE,mBAAmB,QAAS,CACpE,MAAO,QACP,IAAK,UACL,KAAM,UACN,KAAM,UACN,OAAQ,UACT,GACH,EACF,GAEJ,CAEJ","names":["deduplicateByDate","entries","byDate","entry","existing","b","fetchJson","url","response","err","useAnalyticsData","data","setData","useState","useEffect","loadData","latestResult","ga4Result","searchResult","lighthouseResult","billingResult","missingFiles","errors","results","name","result","prev","warning","MetricCard","memo","title","value","Icon","subtitle","trend","status","statusColors","Card","jsxs","CardHeader","jsx","CardTitle","CardContent","cn","TrendingUp","TrendingDown","vitals","v","getStatus","thresholds","CoreWebVitalsCard","homePage","p","vital","rawValue","progressValue","statusText","Progress","RumWebVitalsCard","metric","ScoreBadge","score","LighthouseScoresTable","page","CI_TEST_PATTERNS","BOT_PROBE_PATTERNS","classifyPageTraffic","path","pattern","ratio","analyzeTrafficQuality","topPages","classifications","humanSessions","ciSessions","botSessions","syntheticSessions","flaggedPages","classification","totalSessions","allNonHumanSessions","a","getTrafficTypeBadge","type","TrafficQualityCard","analysis","useMemo","TooltipProvider","Tooltip","TooltipTrigger","Info","TooltipContent","Users","Monitor","Bot","AlertTriangle","BillingTrendChart","lazy","__vitePreload","m","GitHubBillingCard","latest","summary","byRunner","byRepository","storage","period","savingsPercent","Clock","DollarSign","Suspense","Server","stats","runner","Database","repo","percentage","BlogTrafficChart","BlogTagBreakdownChart","extractSlug","SLUG_ALIASES","normalizeYearPrefix","slug","buildPostLookups","posts","bySlug","byStrippedSlug","stripped","byTitleKey","key","matchPost","lookups","aliased","post","exact","yearNormalized","byStripped","byTitle","extractBlogPages","map","normalized","BlogAnalyticsCard","ga4History","latestGA4","sortKey","setSortKey","sortAsc","setSortAsc","leaderboardSortKey","setLeaderboardSortKey","leaderboardSortAsc","setLeaderboardSortAsc","getAllPosts","enrichedData","blogPageMap","rows","s","r","topPost","top","sessionsTrend","sorted","current","previous","currentBlog","previousBlog","allTimeData","cumulative","blogPages","entryTime","latestDate","totalAllTimeViews","allTimeTagData","tagMap","tag","sessions","sortedRows","cmp","sortedLeaderboard","handleSort","handleLeaderboardSort","sortIndicator","leaderboardSortIndicator","TrendIcon","active","Minus","FileText","BookOpen","Eye","row","SessionsTrendChart","DeviceBreakdownChart","TrafficSourcesChart","LighthouseHistoryChart","SearchPerformanceChart","ANALYTICS_TABS","AnalyticsDashboard","searchHistory","lighthouseSummary","billingHistory","isLoading","error","activeTab","setActiveTab","_","i","previousGA4","visibleTabs","tab","sessionTrend","avgPerformance","sum","latestSearch","motion","staggerContainer","staggerItem","Gauge","Search","Activity","Tabs","ResponsiveTabsList","AnimatePresence","tabContent","TabsContent","source","Fragment","Wrench","tool","c","action"],"ignoreList":[],"sources":["../../src/hooks/useAnalyticsData.ts","../../src/components/analytics/MetricCard.tsx","../../src/components/analytics/CoreWebVitalsCard.tsx","../../src/components/analytics/RumWebVitalsCard.tsx","../../src/components/analytics/LighthouseScoresTable.tsx","../../src/lib/analytics/traffic-classification.ts","../../src/components/analytics/TrafficQualityCard.tsx","../../src/components/analytics/GitHubBillingCard.tsx","../../src/components/analytics/BlogAnalyticsCard.tsx","../../src/components/analytics/AnalyticsDashboard.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport type {\n  LatestMetrics,\n  GA4HistoryEntry,\n  SearchConsoleHistoryEntry,\n  LighthousePageScore,\n  GitHubBillingEntry,\n  AnalyticsData,\n} from '@/components/analytics/types';\n\ntype FetchResult<T> =\n  | { status: 'success'; data: T }\n  | { status: 'missing' }  // 404 - file not found\n  | { status: 'error'; message: string };  // network/server errors\n\n/**\n * Deduplicate time-series data by date, keeping the latest entry per date.\n * Handles data where automated collection may create multiple entries per day.\n */\nfunction deduplicateByDate<T extends { date: string; timestamp?: string }>(\n  entries: T[]\n): T[] {\n  const byDate = new Map<string, T>();\n\n  for (const entry of entries) {\n    const existing = byDate.get(entry.date);\n    // Keep entry if no existing, or if this one is newer (by timestamp if available)\n    if (!existing) {\n      byDate.set(entry.date, entry);\n    } else if (entry.timestamp && existing.timestamp && entry.timestamp > existing.timestamp) {\n      byDate.set(entry.date, entry);\n    }\n  }\n\n  // Return sorted by date ascending\n  return Array.from(byDate.values()).sort((a, b) => a.date.localeCompare(b.date));\n}\n\nasync function fetchJson<T>(url: string): Promise<FetchResult<T>> {\n  try {\n    const response = await fetch(url);\n    if (response.status === 404) {\n      return { status: 'missing' };\n    }\n    if (!response.ok) {\n      return { status: 'error', message: `HTTP ${response.status}: ${response.statusText}` };\n    }\n    return { status: 'success', data: await response.json() };\n  } catch (err) {\n    return { status: 'error', message: err instanceof Error ? err.message : 'Network error' };\n  }\n}\n\nexport function useAnalyticsData(): AnalyticsData {\n  const [data, setData] = useState<AnalyticsData>({\n    latest: null,\n    ga4History: [],\n    searchHistory: [],\n    lighthouseSummary: [],\n    billingHistory: [],\n    isLoading: true,\n    error: null,\n    warning: null,\n  });\n\n  useEffect(() => {\n    async function loadData() {\n      const [latestResult, ga4Result, searchResult, lighthouseResult, billingResult] = await Promise.all([\n        fetchJson<LatestMetrics>('/metrics/latest.json'),\n        fetchJson<GA4HistoryEntry[]>('/metrics/ga4-history.json'),\n        fetchJson<SearchConsoleHistoryEntry[]>('/metrics/search-console-history.json'),\n        fetchJson<LighthousePageScore[]>('/lighthouse-reports/summary.json'),\n        fetchJson<GitHubBillingEntry[]>('/metrics/github-billing-history.json'),\n      ]);\n\n      // Track missing files (404s) for warning\n      const missingFiles: string[] = [];\n      // Track actual errors (network, 500s) for error state\n      const errors: string[] = [];\n\n      const results = [\n        { name: 'latest.json', result: latestResult },\n        { name: 'ga4-history.json', result: ga4Result },\n        { name: 'search-console-history.json', result: searchResult },\n        { name: 'lighthouse summary', result: lighthouseResult },\n        { name: 'github-billing-history.json', result: billingResult },\n      ];\n\n      for (const { name, result } of results) {\n        if (result.status === 'missing') {\n          missingFiles.push(name);\n        } else if (result.status === 'error') {\n          errors.push(`${name}: ${result.message}`);\n        }\n      }\n\n      // If we have actual errors, show error state\n      if (errors.length > 0) {\n        setData((prev) => ({\n          ...prev,\n          isLoading: false,\n          error: `Failed to load: ${errors.join('; ')}`,\n          warning: null,\n        }));\n        return;\n      }\n\n      // Otherwise show data with optional missing files warning\n      const warning = missingFiles.length > 0\n        ? `Some metrics data unavailable: ${missingFiles.join(', ')}`\n        : null;\n\n      setData({\n        latest: latestResult.status === 'success' ? latestResult.data : null,\n        ga4History: ga4Result.status === 'success' ? deduplicateByDate(ga4Result.data) : [],\n        searchHistory: searchResult.status === 'success' ? deduplicateByDate(searchResult.data) : [],\n        lighthouseSummary: lighthouseResult.status === 'success' ? lighthouseResult.data : [],\n        billingHistory: billingResult.status === 'success' ? deduplicateByDate(billingResult.data) : [],\n        isLoading: false,\n        error: null,\n        warning,\n      });\n    }\n\n    loadData();\n  }, []);\n\n  return data;\n}\n","import { memo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { cn } from '@/lib/utils';\nimport { LucideIcon, TrendingUp, TrendingDown } from 'lucide-react';\n\ninterface MetricCardProps {\n  title: string;\n  value: string;\n  icon?: LucideIcon;\n  subtitle?: string;\n  trend?: number;\n  status?: 'good' | 'warning' | 'critical';\n}\n\nexport const MetricCard = memo(function MetricCard({ title, value, icon: Icon, subtitle, trend, status }: MetricCardProps) {\n  const statusColors = {\n    good: 'text-emerald-500',\n    warning: 'text-amber-500',\n    critical: 'text-red-500',\n  };\n\n  return (\n    <Card>\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n        <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n          {title}\n        </CardTitle>\n        {Icon && <Icon className=\"h-4 w-4 text-muted-foreground\" />}\n      </CardHeader>\n      <CardContent>\n        <div className={cn('text-2xl font-bold', status && statusColors[status])}>\n          {value}\n        </div>\n        <div className=\"flex items-center gap-2 mt-1\">\n          {subtitle && (\n            <p className=\"text-xs text-muted-foreground\">{subtitle}</p>\n          )}\n          {trend !== undefined && (\n            <div className={cn(\n              'flex items-center text-xs',\n              trend >= 0 ? 'text-emerald-500' : 'text-red-500'\n            )}>\n              {trend >= 0 ? (\n                <TrendingUp className=\"h-3 w-3 mr-1\" />\n              ) : (\n                <TrendingDown className=\"h-3 w-3 mr-1\" />\n              )}\n              {Math.abs(trend).toFixed(0)}%\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n})\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { cn } from '@/lib/utils';\nimport type { LighthousePageScore } from './types';\n\ninterface CoreWebVitalsCardProps {\n  data: LighthousePageScore[];\n}\n\ninterface VitalConfig {\n  label: string;\n  key: keyof LighthousePageScore;\n  unit: string;\n  thresholds: { good: number; poor: number };\n  parse: (value: string) => number;\n}\n\nconst vitals: VitalConfig[] = [\n  {\n    label: 'LCP',\n    key: 'lcp',\n    unit: 's',\n    thresholds: { good: 2.5, poor: 4.0 },\n    parse: (v) => parseFloat(v.replace(/[^\\d.]/g, '')),\n  },\n  {\n    label: 'FCP',\n    key: 'fcp',\n    unit: 's',\n    thresholds: { good: 1.8, poor: 3.0 },\n    parse: (v) => parseFloat(v.replace(/[^\\d.]/g, '')),\n  },\n  {\n    label: 'CLS',\n    key: 'cls',\n    unit: '',\n    thresholds: { good: 0.1, poor: 0.25 },\n    parse: (v) => parseFloat(v) || 0,\n  },\n  {\n    label: 'TBT',\n    key: 'tbt',\n    unit: 'ms',\n    thresholds: { good: 200, poor: 600 },\n    parse: (v) => parseFloat(v.replace(/[^\\d.]/g, '')),\n  },\n];\n\nfunction getStatus(value: number, thresholds: { good: number; poor: number }): 'good' | 'warning' | 'critical' {\n  if (value <= thresholds.good) return 'good';\n  if (value <= thresholds.poor) return 'warning';\n  return 'critical';\n}\n\nexport function CoreWebVitalsCard({ data }: CoreWebVitalsCardProps) {\n  if (data.length === 0) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>Core Web Vitals</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-muted-foreground text-sm\">No data available</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Use home page metrics as primary, or first available\n  const homePage = data.find(p => p.page === 'home') ?? data[0];\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Core Web Vitals</CardTitle>\n        <p className=\"text-sm text-muted-foreground\">\n          Based on {homePage.page} page\n        </p>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {vitals.map((vital) => {\n          const rawValue = homePage[vital.key] as string;\n          const value = vital.parse(rawValue);\n          const status = getStatus(value, vital.thresholds);\n\n          // Calculate progress percentage (0-100 based on poor threshold)\n          const progressValue = Math.min((value / vital.thresholds.poor) * 100, 100);\n\n          const statusText = {\n            good: 'Good',\n            warning: 'Needs Improvement',\n            critical: 'Poor',\n          };\n\n          return (\n            <div key={vital.key} className=\"space-y-1\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"font-medium\">{vital.label}</span>\n                <span className={cn('font-mono', {\n                  'text-emerald-500': status === 'good',\n                  'text-amber-500': status === 'warning',\n                  'text-red-500': status === 'critical',\n                })}>\n                  {rawValue}\n                  <span className=\"text-muted-foreground text-xs ml-2\">\n                    ({statusText[status]})\n                  </span>\n                </span>\n              </div>\n              <Progress\n                value={progressValue}\n                className=\"h-2\"\n                aria-label={`${vital.label}: ${rawValue}`}\n              />\n              <div className=\"flex justify-between text-xs text-muted-foreground\">\n                <span>Good: ≤{vital.thresholds.good}{vital.unit}</span>\n                <span>Poor: &gt;{vital.thresholds.poor}{vital.unit}</span>\n              </div>\n            </div>\n          );\n        })}\n      </CardContent>\n    </Card>\n  );\n}\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { cn } from '@/lib/utils';\nimport type { WebVitalsData } from './types';\n\ninterface RumWebVitalsCardProps {\n  data: WebVitalsData | null | undefined;\n}\n\ninterface VitalConfig {\n  key: 'LCP' | 'FCP' | 'CLS' | 'INP' | 'TTFB';\n  label: string;\n  thresholds: { good: number; poor: number };\n  format: (value: number) => string;\n}\n\nconst vitals: VitalConfig[] = [\n  {\n    key: 'LCP',\n    label: 'Largest Contentful Paint',\n    thresholds: { good: 2500, poor: 4000 },\n    format: (v) => `${(v / 1000).toFixed(2)}s`,\n  },\n  {\n    key: 'FCP',\n    label: 'First Contentful Paint',\n    thresholds: { good: 1800, poor: 3000 },\n    format: (v) => `${(v / 1000).toFixed(2)}s`,\n  },\n  {\n    key: 'CLS',\n    label: 'Cumulative Layout Shift',\n    thresholds: { good: 0.1, poor: 0.25 },\n    format: (v) => v.toFixed(4),\n  },\n  {\n    key: 'INP',\n    label: 'Interaction to Next Paint',\n    thresholds: { good: 200, poor: 500 },\n    format: (v) => `${Math.round(v)}ms`,\n  },\n  {\n    key: 'TTFB',\n    label: 'Time to First Byte',\n    thresholds: { good: 800, poor: 1800 },\n    format: (v) => `${Math.round(v)}ms`,\n  },\n];\n\nfunction getStatus(value: number, thresholds: { good: number; poor: number }): 'good' | 'warning' | 'critical' {\n  if (value <= thresholds.good) return 'good';\n  if (value <= thresholds.poor) return 'warning';\n  return 'critical';\n}\n\nexport function RumWebVitalsCard({ data }: RumWebVitalsCardProps) {\n  if (!data || !data.metrics || Object.keys(data.metrics).length === 0) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>Real User Metrics</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-muted-foreground text-sm\">No RUM data available yet. Data will appear after users visit the site.</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const statusText = {\n    good: 'Good',\n    warning: 'Needs Improvement',\n    critical: 'Poor',\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Real User Metrics</CardTitle>\n        <p className=\"text-sm text-muted-foreground\">\n          Field data from {data.metrics.LCP?.count || data.metrics.FCP?.count || 0}+ sessions\n        </p>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {vitals.map((vital) => {\n          const metric = data.metrics[vital.key];\n          if (!metric) return null;\n\n          const value = metric.average;\n          const status = getStatus(value, vital.thresholds);\n          const progressValue = Math.min((value / vital.thresholds.poor) * 100, 100);\n\n          return (\n            <div key={vital.key} className=\"space-y-1\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"font-medium\">{vital.key}</span>\n                <span className={cn('font-mono', {\n                  'text-emerald-500': status === 'good',\n                  'text-amber-500': status === 'warning',\n                  'text-red-500': status === 'critical',\n                })}>\n                  {vital.format(value)}\n                  <span className=\"text-muted-foreground text-xs ml-2\">\n                    ({statusText[status]})\n                  </span>\n                </span>\n              </div>\n              <Progress\n                value={progressValue}\n                className=\"h-2\"\n                aria-label={`${vital.key}: ${vital.format(value)}`}\n              />\n              <div className=\"flex justify-between text-xs text-muted-foreground\">\n                <span>Good: ≤{vital.key === 'CLS' ? vital.thresholds.good : `${vital.thresholds.good}ms`}</span>\n                <span>Poor: &gt;{vital.key === 'CLS' ? vital.thresholds.poor : `${vital.thresholds.poor}ms`}</span>\n              </div>\n            </div>\n          );\n        })}\n      </CardContent>\n    </Card>\n  );\n}\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { cn } from '@/lib/utils';\nimport type { LighthousePageScore } from './types';\n\ninterface LighthouseScoresTableProps {\n  data: LighthousePageScore[];\n}\n\nfunction ScoreBadge({ score }: { score: number }) {\n  const status = score >= 90 ? 'good' : score >= 70 ? 'warning' : 'critical';\n\n  return (\n    <span className={cn(\n      'inline-flex items-center justify-center w-10 h-6 rounded text-xs font-medium',\n      {\n        'bg-emerald-500/20 text-emerald-600 dark:text-emerald-400': status === 'good',\n        'bg-amber-500/20 text-amber-600 dark:text-amber-400': status === 'warning',\n        'bg-red-500/20 text-red-600 dark:text-red-400': status === 'critical',\n      }\n    )}>\n      {score}\n    </span>\n  );\n}\n\nexport function LighthouseScoresTable({ data }: LighthouseScoresTableProps) {\n  if (data.length === 0) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>Lighthouse Scores by Page</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-muted-foreground text-sm\">No data available</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Lighthouse Scores by Page</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-sm\">\n            <thead>\n              <tr className=\"border-b\">\n                <th className=\"text-left py-2 font-medium\">Page</th>\n                <th className=\"text-center py-2 font-medium\">Perf</th>\n                <th className=\"text-center py-2 font-medium\">A11y</th>\n                <th className=\"text-center py-2 font-medium\">SEO</th>\n                <th className=\"text-center py-2 font-medium\">BP</th>\n                <th className=\"text-right py-2 font-medium\">LCP</th>\n                <th className=\"text-right py-2 font-medium\">CLS</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.map((page) => (\n                <tr key={page.page} className=\"border-b border-border/50\">\n                  <td className=\"py-2\">\n                    <a\n                      href={page.url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"hover:underline\"\n                    >\n                      {page.page}\n                    </a>\n                  </td>\n                  <td className=\"text-center py-2\">\n                    <ScoreBadge score={page.performance} />\n                  </td>\n                  <td className=\"text-center py-2\">\n                    <ScoreBadge score={page.accessibility} />\n                  </td>\n                  <td className=\"text-center py-2\">\n                    <ScoreBadge score={page.seo} />\n                  </td>\n                  <td className=\"text-center py-2\">\n                    <ScoreBadge score={page.bestPractices} />\n                  </td>\n                  <td className=\"text-right py-2 font-mono text-xs\">{page.lcp}</td>\n                  <td className=\"text-right py-2 font-mono text-xs\">{page.cls}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","/**\n * Traffic classification utilities for identifying CI/bot traffic patterns.\n * Based on the ci-analytics-pollution skill.\n *\n * Since we don't have user agent data in stored GA4 history, we use heuristics:\n * - Known test/probe paths\n * - Session-to-user ratios (CI traffic tends to be 1:1)\n * - Path patterns commonly hit by bots\n */\n\n// Patterns that indicate CI/test traffic\nconst CI_TEST_PATTERNS = [\n  /this-page-does-not-exist/i,\n  /test-route/i,\n  /404-test/i,\n  /non-existent/i,\n  /__test__/i,\n  /\\/e2e\\//i,\n];\n\n// Patterns that indicate bot/scanner traffic\nconst BOT_PROBE_PATTERNS = [\n  /wp-admin/i,\n  /wp-login/i,\n  /wp-content/i,\n  /xmlrpc\\.php/i,\n  /\\.env/i,\n  /\\.git/i,\n  /\\.php$/i,\n  /admin/i,\n  /phpmyadmin/i,\n  /\\.sql/i,\n  /\\.bak/i,\n  /\\.zip/i,\n  /\\.tar/i,\n  /cgi-bin/i,\n  /\\.asp/i,\n  /\\.aspx/i,\n];\n\nexport type TrafficType = 'human' | 'ci' | 'bot' | 'synthetic';\n\nexport interface PageTrafficClassification {\n  page: string;\n  sessions: number;\n  users: number;\n  pageViews: number;\n  trafficType: TrafficType;\n  reason: string;\n}\n\nexport interface TrafficSummary {\n  totalSessions: number;\n  humanSessions: number;\n  ciSessions: number;\n  botSessions: number;\n  syntheticSessions: number;\n  humanPercentage: number;\n  syntheticPercentage: number;\n  flaggedPages: PageTrafficClassification[];\n}\n\n/**\n * Classify a single page's traffic based on URL patterns and session/user ratio\n */\nexport function classifyPageTraffic(page: {\n  page: string;\n  sessions: number;\n  users: number;\n  pageViews: number;\n}): PageTrafficClassification {\n  const path = page.page;\n\n  // Check for CI/test patterns\n  for (const pattern of CI_TEST_PATTERNS) {\n    if (pattern.test(path)) {\n      return {\n        ...page,\n        trafficType: 'ci',\n        reason: `Matches test pattern: ${pattern.source}`,\n      };\n    }\n  }\n\n  // Check for bot probe patterns\n  for (const pattern of BOT_PROBE_PATTERNS) {\n    if (pattern.test(path)) {\n      return {\n        ...page,\n        trafficType: 'bot',\n        reason: `Matches bot probe pattern: ${pattern.source}`,\n      };\n    }\n  }\n\n  // Check session-to-user ratio for synthetic automated traffic\n  // A ratio very close to 1:1 with significant volume suggests automation\n  const ratio = page.users > 0 ? page.sessions / page.users : 1;\n  if (ratio >= 0.95 && ratio <= 1.05 && page.sessions >= 50) {\n    return {\n      ...page,\n      trafficType: 'synthetic',\n      reason: `Near 1:1 session/user ratio (${ratio.toFixed(2)}) suggests automated traffic`,\n    };\n  }\n\n  return {\n    ...page,\n    trafficType: 'human',\n    reason: 'Normal traffic pattern',\n  };\n}\n\n/**\n * Analyze all pages and generate a traffic quality summary\n */\nexport function analyzeTrafficQuality(\n  topPages: Array<{\n    page: string;\n    sessions: number;\n    users: number;\n    pageViews: number;\n  }>\n): TrafficSummary {\n  const classifications = topPages.map(classifyPageTraffic);\n\n  let humanSessions = 0;\n  let ciSessions = 0;\n  let botSessions = 0;\n  let syntheticSessions = 0;\n\n  const flaggedPages: PageTrafficClassification[] = [];\n\n  for (const classification of classifications) {\n    switch (classification.trafficType) {\n      case 'human':\n        humanSessions += classification.sessions;\n        break;\n      case 'ci':\n        ciSessions += classification.sessions;\n        flaggedPages.push(classification);\n        break;\n      case 'bot':\n        botSessions += classification.sessions;\n        flaggedPages.push(classification);\n        break;\n      case 'synthetic':\n        syntheticSessions += classification.sessions;\n        flaggedPages.push(classification);\n        break;\n    }\n  }\n\n  const totalSessions = humanSessions + ciSessions + botSessions + syntheticSessions;\n  const allNonHumanSessions = ciSessions + botSessions + syntheticSessions;\n\n  return {\n    totalSessions,\n    humanSessions,\n    ciSessions,\n    botSessions,\n    syntheticSessions,\n    humanPercentage: totalSessions > 0 ? (humanSessions / totalSessions) * 100 : 100,\n    syntheticPercentage: totalSessions > 0 ? (allNonHumanSessions / totalSessions) * 100 : 0,\n    flaggedPages: flaggedPages.sort((a, b) => b.sessions - a.sessions),\n  };\n}\n\n/**\n * Get a color class for a traffic type\n */\nexport function getTrafficTypeColor(type: TrafficType): string {\n  switch (type) {\n    case 'human':\n      return 'text-green-600 dark:text-green-400';\n    case 'ci':\n      return 'text-blue-600 dark:text-blue-400';\n    case 'bot':\n      return 'text-orange-600 dark:text-orange-400';\n    case 'synthetic':\n      return 'text-yellow-600 dark:text-yellow-400';\n  }\n}\n\n/**\n * Get a badge style for a traffic type\n */\nexport function getTrafficTypeBadge(type: TrafficType): string {\n  switch (type) {\n    case 'human':\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n    case 'ci':\n      return 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400';\n    case 'bot':\n      return 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400';\n    case 'synthetic':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n  }\n}\n","import { useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Bot, Monitor, AlertTriangle, Users, Info } from 'lucide-react';\nimport {\n  analyzeTrafficQuality,\n  getTrafficTypeBadge,\n  type TrafficSummary,\n} from '@/lib/analytics/traffic-classification';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\n\ninterface TrafficQualityCardProps {\n  topPages: Array<{\n    page: string;\n    sessions: number;\n    users: number;\n    pageViews: number;\n  }>;\n}\n\nexport function TrafficQualityCard({ topPages }: TrafficQualityCardProps) {\n  const analysis: TrafficSummary = useMemo(\n    () => analyzeTrafficQuality(topPages),\n    [topPages]\n  );\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-base font-medium flex items-center gap-2\">\n          Traffic Quality\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger>\n                <Info className=\"h-4 w-4 text-muted-foreground\" />\n              </TooltipTrigger>\n              <TooltipContent className=\"max-w-xs\">\n                <p>\n                  Estimates traffic quality based on URL patterns and\n                  session/user ratios. CI traffic from automated tests and bot\n                  probes are flagged.\n                </p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Summary Stats */}\n        <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1.5 rounded-md bg-green-100 dark:bg-green-900/30\">\n              <Users className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\n            </div>\n            <div>\n              <p className=\"text-xs text-muted-foreground\">Human</p>\n              <p className=\"text-sm font-medium tabular-nums\">\n                {analysis.humanSessions.toLocaleString()}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1.5 rounded-md bg-blue-100 dark:bg-blue-900/30\">\n              <Monitor className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n            </div>\n            <div>\n              <p className=\"text-xs text-muted-foreground\">CI</p>\n              <p className=\"text-sm font-medium tabular-nums\">\n                {analysis.ciSessions.toLocaleString()}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1.5 rounded-md bg-orange-100 dark:bg-orange-900/30\">\n              <Bot className=\"h-4 w-4 text-orange-600 dark:text-orange-400\" />\n            </div>\n            <div>\n              <p className=\"text-xs text-muted-foreground\">Bot</p>\n              <p className=\"text-sm font-medium tabular-nums\">\n                {analysis.botSessions.toLocaleString()}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"p-1.5 rounded-md bg-yellow-100 dark:bg-yellow-900/30\">\n              <AlertTriangle className=\"h-4 w-4 text-yellow-600 dark:text-yellow-400\" />\n            </div>\n            <div>\n              <p className=\"text-xs text-muted-foreground\">Synthetic</p>\n              <p className=\"text-sm font-medium tabular-nums\">\n                {analysis.syntheticSessions.toLocaleString()}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"space-y-1\">\n          <div className=\"flex justify-between text-xs text-muted-foreground\">\n            <span>Traffic Composition</span>\n            <span>{analysis.humanPercentage.toFixed(1)}% human</span>\n          </div>\n          <div className=\"h-2 rounded-full bg-muted overflow-hidden flex\">\n            {analysis.humanSessions > 0 && (\n              <div\n                className=\"bg-green-500 h-full\"\n                style={{\n                  width: `${(analysis.humanSessions / analysis.totalSessions) * 100}%`,\n                }}\n              />\n            )}\n            {analysis.ciSessions > 0 && (\n              <div\n                className=\"bg-blue-500 h-full\"\n                style={{\n                  width: `${(analysis.ciSessions / analysis.totalSessions) * 100}%`,\n                }}\n              />\n            )}\n            {analysis.botSessions > 0 && (\n              <div\n                className=\"bg-orange-500 h-full\"\n                style={{\n                  width: `${(analysis.botSessions / analysis.totalSessions) * 100}%`,\n                }}\n              />\n            )}\n            {analysis.syntheticSessions > 0 && (\n              <div\n                className=\"bg-yellow-500 h-full\"\n                style={{\n                  width: `${(analysis.syntheticSessions / analysis.totalSessions) * 100}%`,\n                }}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Flagged Pages */}\n        {analysis.flaggedPages.length > 0 && (\n          <div className=\"space-y-2\">\n            <p className=\"text-xs font-medium text-muted-foreground\">\n              Flagged Pages\n            </p>\n            <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n              {analysis.flaggedPages.slice(0, 5).map((page) => (\n                <div\n                  key={page.page}\n                  className=\"flex items-center justify-between text-xs py-1 border-b border-border/50 last:border-0\"\n                >\n                  <div className=\"flex items-center gap-2 min-w-0\">\n                    <span\n                      className={`px-1.5 py-0.5 rounded text-[10px] font-medium uppercase ${getTrafficTypeBadge(page.trafficType)}`}\n                    >\n                      {page.trafficType}\n                    </span>\n                    <span className=\"font-mono truncate max-w-[150px]\">\n                      {page.page}\n                    </span>\n                  </div>\n                  <span className=\"text-muted-foreground tabular-nums\">\n                    {page.sessions.toLocaleString()}\n                  </span>\n                </div>\n              ))}\n            </div>\n            {analysis.flaggedPages.length > 5 && (\n              <p className=\"text-xs text-muted-foreground\">\n                +{analysis.flaggedPages.length - 5} more flagged\n              </p>\n            )}\n          </div>\n        )}\n\n        {/* No issues message */}\n        {analysis.flaggedPages.length === 0 && (\n          <p className=\"text-xs text-muted-foreground text-center py-2\">\n            No synthetic traffic detected in top pages\n          </p>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","import { memo, lazy, Suspense } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { GitHubBillingEntry } from './types';\nimport { DollarSign, Clock, Database, Server } from 'lucide-react';\n\nconst BillingTrendChart = lazy(() => import('./charts/BillingTrendChart').then(m => ({ default: m.BillingTrendChart })));\n\ninterface GitHubBillingCardProps {\n  data: GitHubBillingEntry[];\n}\n\nexport const GitHubBillingCard = memo(function GitHubBillingCard({ data }: GitHubBillingCardProps) {\n  if (data.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"pt-6\">\n          <p className=\"text-muted-foreground text-center py-8\">\n            No GitHub Actions billing data available yet.\n          </p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const latest = data[data.length - 1];\n  const { summary, byRunner, byRepository, storage, period } = latest;\n\n  // Calculate savings percentage\n  const savingsPercent = summary.totalGrossAmount > 0\n    ? ((summary.totalDiscountAmount / summary.totalGrossAmount) * 100).toFixed(0)\n    : '100';\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              Total Minutes\n            </CardTitle>\n            <Clock className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{summary.totalMinutes.toLocaleString()}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">{period.description}</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              Savings\n            </CardTitle>\n            <DollarSign className=\"h-4 w-4 text-emerald-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-emerald-500\">\n              ${summary.totalDiscountAmount.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">{savingsPercent}% from free tier</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              Net Cost\n            </CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${summary.totalNetAmount === 0 ? 'text-emerald-500' : ''}`}>\n              ${summary.totalNetAmount.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">actual spend</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Minutes Trend Chart - only show if we have history */}\n      {data.length > 1 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Minutes Over Time</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <Suspense fallback={<div className=\"h-48 bg-muted rounded animate-pulse\" />}>\n              <BillingTrendChart data={data} />\n            </Suspense>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Details Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n        {/* Resource Usage - runners + storage */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Server className=\"h-4 w-4\" />\n              Resource Usage\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {Object.entries(byRunner)\n                .filter(([, stats]) => stats.minutes > 0)\n                .map(([runner, stats]) => (\n                <div key={runner} className=\"flex justify-between items-center py-2 border-b border-border/50\">\n                  <span className=\"text-sm font-medium capitalize\">{runner} runners</span>\n                  <div className=\"text-right\">\n                    <span className=\"text-sm tabular-nums\">{stats.minutes.toLocaleString()} min</span>\n                    <span className=\"text-xs text-muted-foreground ml-2\">\n                      (${stats.grossAmount.toFixed(2)})\n                    </span>\n                  </div>\n                </div>\n              ))}\n              {storage.gbHours > 0 && (\n                <div className=\"flex justify-between items-center py-2\">\n                  <span className=\"text-sm font-medium\">Artifact storage</span>\n                  <div className=\"text-right\">\n                    <span className=\"text-sm tabular-nums\">{storage.gbHours.toFixed(2)} GB-hrs</span>\n                    <span className=\"text-xs text-muted-foreground ml-2\">\n                      (${storage.grossAmount.toFixed(2)})\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* By Repository */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Database className=\"h-4 w-4\" />\n              Usage by Repository\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {byRepository.slice(0, 5).map((repo) => {\n                const percentage = summary.totalMinutes > 0\n                  ? ((repo.minutes / summary.totalMinutes) * 100).toFixed(0)\n                  : 0;\n                return (\n                  <div key={repo.name} className=\"space-y-1\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-sm font-mono truncate max-w-[180px]\">{repo.name}</span>\n                      <span className=\"text-sm tabular-nums\">{repo.minutes.toLocaleString()} min</span>\n                    </div>\n                    <div className=\"w-full bg-muted rounded-full h-1.5\">\n                      <div\n                        className=\"bg-primary rounded-full h-1.5 transition-all\"\n                        style={{ width: `${percentage}%` }}\n                      />\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n});\n","import { lazy, Suspense, useMemo, useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { MetricCard } from './MetricCard';\nimport { BookOpen, Users, FileText, Eye, TrendingUp, Minus } from 'lucide-react';\nimport { getAllPosts } from '@/content/blog/index';\nimport type { GA4HistoryEntry } from './types';\n\nconst BlogTrafficChart = lazy(() => import('./charts/BlogTrafficChart').then(m => ({ default: m.BlogTrafficChart })));\nconst BlogTagBreakdownChart = lazy(() => import('./charts/BlogTagBreakdownChart').then(m => ({ default: m.BlogTagBreakdownChart })));\n\ninterface BlogAnalyticsCardProps {\n  ga4History: GA4HistoryEntry[];\n  latestGA4: GA4HistoryEntry | undefined;\n}\n\ntype SortKey = 'sessions' | 'users' | 'pageViews' | 'date' | 'title';\ntype LeaderboardSortKey = 'totalSessions' | 'totalViews' | 'title';\n\n/** Normalize a GA4 page path to a slug for matching */\nfunction extractSlug(path: string): string {\n  return path.replace('/blog/', '').replace(/\\/$/, '');\n}\n\n/**\n * Known slug renames: old GA4 slug → current canonical slug.\n * GA4 keeps reporting old URLs long after posts are renamed/moved.\n */\nconst SLUG_ALIASES: Record<string, string> = {\n  'adventures-in-ai-assisted-web-development': '2026-01-05-notes-on-building-this-site-together',\n  '2025-01-07-adventures-in-ai-assisted-web-development': '2026-01-05-notes-on-building-this-site-together',\n  '2026-01-getting-started-with-sre': 'hello-world',\n  '2026-02-04-andre-collaborative-music-queue': '2026-02-04-echonest-collaborative-music-queue',\n  '2026-01-24-postmortems-that-actually-change-things': '2026-01-24-retrospectives-that-actually-change-things',\n  '2026-01-23-slo-math-most-teams-get-wrong': '2026-01-21-the-slo-math-most-teams-get-wrong',\n};\n\n/** Normalize 2025 date prefixes to 2026 (blog was re-dated) */\nfunction normalizeYearPrefix(slug: string): string {\n  return slug.replace(/^2025-/, '2026-');\n}\n\n/**\n * Build lookup maps for matching GA4 slugs to posts.\n * Handles renamed posts by alias map, year normalization, fuzzy-matching on title words, and stripped date prefixes.\n */\nfunction buildPostLookups(posts: ReturnType<typeof getAllPosts>) {\n  const bySlug = new Map(posts.map(p => [p.slug, p]));\n\n  // Also index by slug without date prefix (e.g. \"notes-on-building-this-site-together\")\n  const byStrippedSlug = new Map<string, typeof posts[0]>();\n  for (const p of posts) {\n    const stripped = p.slug.replace(/^\\d{4}-\\d{2}-\\d{2}-/, '');\n    byStrippedSlug.set(stripped, p);\n  }\n\n  // Index by normalized title words for fuzzy matching\n  const byTitleKey = new Map<string, typeof posts[0]>();\n  for (const p of posts) {\n    const key = p.title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');\n    byTitleKey.set(key, p);\n  }\n\n  return { bySlug, byStrippedSlug, byTitleKey };\n}\n\nfunction matchPost(\n  slug: string,\n  lookups: ReturnType<typeof buildPostLookups>,\n): ReturnType<typeof getAllPosts>[0] | undefined {\n  // Check alias map first\n  const aliased = SLUG_ALIASES[slug];\n  if (aliased) {\n    const post = lookups.bySlug.get(aliased);\n    if (post) return post;\n  }\n\n  // Exact match\n  const exact = lookups.bySlug.get(slug);\n  if (exact) return exact;\n\n  // Try with year normalization (2025→2026)\n  const yearNormalized = normalizeYearPrefix(slug);\n  if (yearNormalized !== slug) {\n    const post = lookups.bySlug.get(yearNormalized);\n    if (post) return post;\n  }\n\n  // Strip date prefix and try again\n  const stripped = slug.replace(/^\\d{4}-\\d{2}-\\d{2}-/, '');\n  const byStripped = lookups.byStrippedSlug.get(stripped);\n  if (byStripped) return byStripped;\n\n  // Fuzzy: normalize slug to title key (only if key is long enough to avoid false matches)\n  const key = stripped.replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');\n  if (key.length >= 10) {\n    const byTitle = lookups.byTitleKey.get(key);\n    if (byTitle) return byTitle;\n  }\n\n  return undefined;\n}\n\n/** Aggregate blog page data from a single GA4 entry */\nfunction extractBlogPages(entry: GA4HistoryEntry) {\n  const map = new Map<string, { sessions: number; users: number; pageViews: number }>();\n  for (const page of entry.topPages ?? []) {\n    if (!page.page.startsWith('/blog/') || page.page === '/blog/' || page.page === '/blog') continue;\n    const normalized = page.page.replace(/\\/$/, '');\n    const existing = map.get(normalized);\n    if (existing) {\n      existing.sessions += page.sessions;\n      existing.users += page.users;\n      existing.pageViews += page.pageViews;\n    } else {\n      map.set(normalized, { sessions: page.sessions, users: page.users, pageViews: page.pageViews });\n    }\n  }\n  return map;\n}\n\nexport function BlogAnalyticsCard({ ga4History, latestGA4 }: BlogAnalyticsCardProps) {\n  const [sortKey, setSortKey] = useState<SortKey>('sessions');\n  const [sortAsc, setSortAsc] = useState(false);\n  const [leaderboardSortKey, setLeaderboardSortKey] = useState<LeaderboardSortKey>('totalSessions');\n  const [leaderboardSortAsc, setLeaderboardSortAsc] = useState(false);\n\n  const posts = useMemo(() => getAllPosts(), []);\n  const lookups = useMemo(() => buildPostLookups(posts), [posts]);\n\n  // --- 7d data (latest entry) ---\n  const enrichedData = useMemo(() => {\n    const blogPageMap = extractBlogPages(latestGA4 ?? { topPages: [] } as GA4HistoryEntry);\n\n    const rows = Array.from(blogPageMap.entries()).map(([path, stats]) => {\n      const slug = extractSlug(path);\n      const post = matchPost(slug, lookups);\n      return {\n        path,\n        slug,\n        title: post?.title ?? slug,\n        author: post?.author ?? '—',\n        date: post?.date ?? '',\n        tags: post?.tags ?? [],\n        category: post?.category ?? 'Uncategorized',\n        readingTime: post?.readingTime ?? '—',\n        matched: !!post,\n        ...stats,\n      };\n    });\n\n    const totalSessions = rows.reduce((s, r) => s + r.sessions, 0);\n    const topPost = rows.length > 0\n      ? rows.reduce((top, r) => r.sessions > top.sessions ? r : top, rows[0])\n      : null;\n\n    return { rows, totalSessions, topPost };\n  }, [latestGA4, lookups]);\n\n  // --- WoW trend for blog sessions ---\n  const sessionsTrend = useMemo(() => {\n    if (ga4History.length < 2) return undefined;\n    const sorted = [...ga4History].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n    const current = sorted[0];\n    const previous = sorted[1];\n    if (!current || !previous) return undefined;\n\n    const currentBlog = Array.from(extractBlogPages(current).values()).reduce((s, r) => s + r.sessions, 0);\n    const previousBlog = Array.from(extractBlogPages(previous).values()).reduce((s, r) => s + r.sessions, 0);\n    if (previousBlog === 0) return undefined;\n    return Math.round(((currentBlog - previousBlog) / previousBlog) * 100);\n  }, [ga4History]);\n\n  // --- All-time leaderboard ---\n  const allTimeData = useMemo(() => {\n    const cumulative = new Map<string, { totalSessions: number; totalViews: number; firstSeen: string; lastSeen: string }>();\n\n    for (const entry of ga4History) {\n      const blogPages = extractBlogPages(entry);\n      for (const [path, stats] of blogPages) {\n        const slug = extractSlug(path);\n        // Resolve to canonical slug via post match\n        const post = matchPost(slug, lookups);\n        const key = post?.slug ?? slug;\n\n        const existing = cumulative.get(key);\n        if (existing) {\n          existing.totalSessions += stats.sessions;\n          existing.totalViews += stats.pageViews;\n          const entryTime = new Date(entry.date).getTime();\n          if (entryTime < new Date(existing.firstSeen).getTime()) existing.firstSeen = entry.date;\n          if (entryTime > new Date(existing.lastSeen).getTime()) existing.lastSeen = entry.date;\n        } else {\n          cumulative.set(key, {\n            totalSessions: stats.sessions,\n            totalViews: stats.pageViews,\n            firstSeen: entry.date,\n            lastSeen: entry.date,\n          });\n        }\n      }\n    }\n\n    const latestDate = ga4History.length > 0\n      ? [...ga4History].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())[0].date\n      : '';\n\n    const rows = Array.from(cumulative.entries()).map(([slug, stats]) => {\n      const post = matchPost(slug, lookups);\n      return {\n        slug,\n        title: post?.title ?? slug,\n        matched: !!post,\n        recentlyActive: stats.lastSeen === latestDate,\n        ...stats,\n      };\n    });\n\n    const totalAllTimeViews = rows.reduce((s, r) => s + r.totalViews, 0);\n\n    return { rows, totalAllTimeViews };\n  }, [ga4History, lookups]);\n\n  // --- All-time tag breakdown ---\n  const allTimeTagData = useMemo(() => {\n    const tagMap = new Map<string, number>();\n    for (const entry of ga4History) {\n      const blogPages = extractBlogPages(entry);\n      for (const [path, stats] of blogPages) {\n        const slug = extractSlug(path);\n        const post = matchPost(slug, lookups);\n        if (post) {\n          for (const tag of post.tags) {\n            tagMap.set(tag, (tagMap.get(tag) ?? 0) + stats.sessions);\n          }\n        }\n      }\n    }\n    return Array.from(tagMap.entries())\n      .map(([tag, sessions]) => ({ tag, sessions }))\n      .sort((a, b) => b.sessions - a.sessions);\n  }, [ga4History, lookups]);\n\n  // --- Sorted 7d rows ---\n  const sortedRows = useMemo(() => {\n    const sorted = [...enrichedData.rows].sort((a, b) => {\n      let cmp = 0;\n      switch (sortKey) {\n        case 'title': cmp = a.title.localeCompare(b.title); break;\n        case 'date': cmp = (new Date(a.date || 0).getTime()) - (new Date(b.date || 0).getTime()); break;\n        case 'sessions': cmp = a.sessions - b.sessions; break;\n        case 'users': cmp = a.users - b.users; break;\n        case 'pageViews': cmp = a.pageViews - b.pageViews; break;\n      }\n      return sortAsc ? cmp : -cmp;\n    });\n    return sorted.slice(0, 5);\n  }, [enrichedData.rows, sortKey, sortAsc]);\n\n  // --- Sorted leaderboard rows ---\n  const sortedLeaderboard = useMemo(() => {\n    const sorted = [...allTimeData.rows].sort((a, b) => {\n      let cmp = 0;\n      switch (leaderboardSortKey) {\n        case 'title': cmp = a.title.localeCompare(b.title); break;\n        case 'totalSessions': cmp = a.totalSessions - b.totalSessions; break;\n        case 'totalViews': cmp = a.totalViews - b.totalViews; break;\n      }\n      return leaderboardSortAsc ? cmp : -cmp;\n    });\n    return sorted;\n  }, [allTimeData.rows, leaderboardSortKey, leaderboardSortAsc]);\n\n  const handleSort = (key: SortKey) => {\n    if (sortKey === key) setSortAsc(!sortAsc);\n    else { setSortKey(key); setSortAsc(false); }\n  };\n\n  const handleLeaderboardSort = (key: LeaderboardSortKey) => {\n    if (leaderboardSortKey === key) setLeaderboardSortAsc(!leaderboardSortAsc);\n    else { setLeaderboardSortKey(key); setLeaderboardSortAsc(false); }\n  };\n\n  const sortIndicator = (key: SortKey) => sortKey === key ? (sortAsc ? ' ↑' : ' ↓') : null;\n  const leaderboardSortIndicator = (key: LeaderboardSortKey) => leaderboardSortKey === key ? (leaderboardSortAsc ? ' ↑' : ' ↓') : null;\n\n  const TrendIcon = ({ active }: { active: boolean }) => {\n    if (active) return <TrendingUp className=\"w-3 h-3 text-green-500 inline ml-1\" />;\n    return <Minus className=\"w-3 h-3 text-muted-foreground inline ml-1\" />;\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Overview metrics */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <MetricCard\n          title=\"Blog Sessions (7d)\"\n          value={enrichedData.totalSessions.toLocaleString()}\n          icon={Users}\n          trend={sessionsTrend}\n        />\n        <MetricCard\n          title=\"Total Blog Posts\"\n          value={posts.length.toLocaleString()}\n          icon={FileText}\n        />\n        <MetricCard\n          title=\"Top Post (7d)\"\n          value={enrichedData.topPost?.title ?? '—'}\n          icon={BookOpen}\n          subtitle={enrichedData.topPost ? `${enrichedData.topPost.sessions} sessions` : undefined}\n        />\n        <MetricCard\n          title=\"All-Time Views\"\n          value={allTimeData.totalAllTimeViews.toLocaleString()}\n          icon={Eye}\n          subtitle=\"cumulative blog page views\"\n        />\n      </div>\n\n      {/* Charts */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n        <Card className=\"lg:col-span-2\">\n          <CardHeader>\n            <CardTitle>Blog Traffic Over Time</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <Suspense fallback={<div className=\"h-64 bg-muted rounded animate-pulse\" />}>\n              <BlogTrafficChart data={ga4History} postLookups={lookups} matchPost={matchPost} />\n            </Suspense>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Tag Breakdown (All-Time)</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Suspense fallback={<div className=\"h-64 bg-muted rounded animate-pulse\" />}>\n            <BlogTagBreakdownChart tagData={allTimeTagData} />\n          </Suspense>\n        </CardContent>\n      </Card>\n\n      {/* Post performance table (7d, top 5) */}\n      {sortedRows.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Post Performance (7d)</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-sm\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left py-2 font-medium cursor-pointer select-none\" onClick={() => handleSort('title')}>\n                      Title{sortIndicator('title')}\n                    </th>\n                    <th className=\"text-left py-2 pl-4 font-medium hidden md:table-cell cursor-pointer select-none\" onClick={() => handleSort('date')}>\n                      Date{sortIndicator('date')}\n                    </th>\n                    <th className=\"text-right py-2 pl-4 font-medium cursor-pointer select-none\" onClick={() => handleSort('sessions')}>\n                      Sessions{sortIndicator('sessions')}\n                    </th>\n                    <th className=\"text-right py-2 pl-4 font-medium hidden sm:table-cell cursor-pointer select-none\" onClick={() => handleSort('pageViews')}>\n                      Views{sortIndicator('pageViews')}\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {sortedRows.map((row) => (\n                    <tr key={row.path} className=\"border-b border-border/50\">\n                      <td className=\"py-2 truncate max-w-[250px]\" title={row.title}>{row.title}</td>\n                      <td className=\"py-2 pl-4 font-mono text-xs text-muted-foreground hidden md:table-cell\">{row.date}</td>\n                      <td className=\"text-right py-2 pl-4 tabular-nums\">{row.sessions.toLocaleString()}</td>\n                      <td className=\"text-right py-2 pl-4 tabular-nums hidden sm:table-cell\">{row.pageViews.toLocaleString()}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* All-time leaderboard */}\n      {sortedLeaderboard.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>All-Time Leaderboard</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-sm\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left py-2 font-medium cursor-pointer select-none\" onClick={() => handleLeaderboardSort('title')}>\n                      Title{leaderboardSortIndicator('title')}\n                    </th>\n                    <th className=\"text-right py-2 pl-4 font-medium cursor-pointer select-none\" onClick={() => handleLeaderboardSort('totalSessions')}>\n                      Sessions{leaderboardSortIndicator('totalSessions')}\n                    </th>\n                    <th className=\"text-right py-2 pl-4 font-medium hidden sm:table-cell cursor-pointer select-none\" onClick={() => handleLeaderboardSort('totalViews')}>\n                      Views{leaderboardSortIndicator('totalViews')}\n                    </th>\n                    <th className=\"text-left py-2 pl-4 font-medium hidden md:table-cell\">First Seen</th>\n                    <th className=\"text-center py-2 pl-4 font-medium hidden lg:table-cell\">Trend</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {sortedLeaderboard.map((row) => (\n                    <tr key={row.slug} className=\"border-b border-border/50\">\n                      <td className=\"py-2 truncate max-w-[250px]\" title={row.title}>\n                        {row.title}\n                      </td>\n                      <td className=\"text-right py-2 pl-4 tabular-nums\">{row.totalSessions.toLocaleString()}</td>\n                      <td className=\"text-right py-2 pl-4 tabular-nums hidden sm:table-cell\">{row.totalViews.toLocaleString()}</td>\n                      <td className=\"py-2 pl-4 font-mono text-xs text-muted-foreground hidden md:table-cell\">{row.firstSeen}</td>\n                      <td className=\"text-center py-2 pl-4 hidden lg:table-cell\">\n                        <TrendIcon active={row.recentlyActive} />\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","import { lazy, Suspense, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useAnalyticsData } from '@/hooks/useAnalyticsData';\nimport { Tabs, TabsContent } from '@/components/ui/tabs';\nimport { ResponsiveTabsList, type TabItem } from '@/components/ui/responsive-tabs';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Activity, Search, Gauge, Users, Wrench } from 'lucide-react';\nimport { MetricCard } from './MetricCard';\nimport { CoreWebVitalsCard } from './CoreWebVitalsCard';\nimport { RumWebVitalsCard } from './RumWebVitalsCard';\nimport { LighthouseScoresTable } from './LighthouseScoresTable';\nimport { TrafficQualityCard } from './TrafficQualityCard';\nimport { GitHubBillingCard } from './GitHubBillingCard';\nimport { BlogAnalyticsCard } from './BlogAnalyticsCard';\nimport { staggerContainer, staggerItem, tabContent } from '@/lib/motion';\n\n// Lazy load Recharts-dependent components (heaviest)\nconst SessionsTrendChart = lazy(() => import('./charts/SessionsTrendChart').then(m => ({ default: m.SessionsTrendChart })));\nconst DeviceBreakdownChart = lazy(() => import('./charts/DeviceBreakdownChart').then(m => ({ default: m.DeviceBreakdownChart })));\nconst TrafficSourcesChart = lazy(() => import('./charts/TrafficSourcesChart').then(m => ({ default: m.TrafficSourcesChart })));\nconst LighthouseHistoryChart = lazy(() => import('./charts/LighthouseHistoryChart').then(m => ({ default: m.LighthouseHistoryChart })));\nconst SearchPerformanceChart = lazy(() => import('./charts/SearchPerformanceChart').then(m => ({ default: m.SearchPerformanceChart })));\n\nconst ANALYTICS_TABS: TabItem[] = [\n  { value: 'search', label: 'Search' },\n  { value: 'traffic', label: 'Traffic' },\n  { value: 'blog', label: 'Blog' },\n  { value: 'performance', label: 'Performance', mobileLabel: 'Perf' },\n  { value: 'tools', label: 'Tools' },\n  { value: 'cicd', label: 'CI/CD' },\n];\n\nexport function AnalyticsDashboard() {\n  const { latest, ga4History, searchHistory, lighthouseSummary, billingHistory, isLoading, error, warning } = useAnalyticsData();\n  const [activeTab, setActiveTab] = useState('search');\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Dedicated live region for concise status announcement */}\n        <div role=\"status\" aria-live=\"polite\" className=\"sr-only\">\n          Loading analytics data...\n        </div>\n        {/* Metric cards skeleton */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {[...Array(4)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader className=\"pb-2\">\n                <div className=\"h-4 bg-muted rounded w-24\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-8 bg-muted rounded w-16\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n        {/* Tabs skeleton - matches Traffic tab layout */}\n        <div className=\"space-y-4\">\n          <div className=\"h-10 bg-muted rounded w-64 animate-pulse\" />\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n            <Card className=\"lg:col-span-2 animate-pulse\">\n              <CardHeader>\n                <div className=\"h-6 bg-muted rounded w-40\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 bg-muted rounded\" />\n              </CardContent>\n            </Card>\n            <Card className=\"animate-pulse\">\n              <CardHeader>\n                <div className=\"h-6 bg-muted rounded w-36\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 bg-muted rounded\" />\n              </CardContent>\n            </Card>\n          </div>\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n            <Card className=\"animate-pulse\">\n              <CardHeader>\n                <div className=\"h-6 bg-muted rounded w-32\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 bg-muted rounded\" />\n              </CardContent>\n            </Card>\n            <Card className=\"animate-pulse\">\n              <CardHeader>\n                <div className=\"h-6 bg-muted rounded w-28\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-48 bg-muted rounded\" />\n              </CardContent>\n            </Card>\n          </div>\n          <Card className=\"animate-pulse\">\n            <CardHeader>\n              <div className=\"h-6 bg-muted rounded w-32\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"h-64 bg-muted rounded\" />\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card className=\"border-destructive\" role=\"alert\">\n        <CardContent className=\"pt-6\">\n          <p className=\"text-destructive\">Failed to load analytics data: {error}</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Get latest GA4 data for overview\n  const latestGA4 = ga4History[ga4History.length - 1];\n  const previousGA4 = ga4History[ga4History.length - 2];\n\n  // Hide Tools tab when there's no tool interaction data\n  const visibleTabs = latestGA4?.toolInteractions\n    ? ANALYTICS_TABS\n    : ANALYTICS_TABS.filter(tab => tab.value !== 'tools');\n\n  // Calculate session trend (guard against missing data and divide-by-zero)\n  const sessionTrend = latestGA4?.summary?.sessions != null && previousGA4?.summary?.sessions != null && previousGA4.summary.sessions > 0\n    ? ((latestGA4.summary.sessions - previousGA4.summary.sessions) / previousGA4.summary.sessions) * 100\n    : undefined;\n\n  // Get average Lighthouse performance score\n  const avgPerformance = lighthouseSummary.length > 0\n    ? Math.round(lighthouseSummary.reduce((sum, p) => sum + p.performance, 0) / lighthouseSummary.length)\n    : null;\n\n  // Get latest search data\n  const latestSearch = searchHistory[searchHistory.length - 1];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Warning for missing data */}\n      {warning && (\n        <Card className=\"border-yellow-500/50 bg-yellow-500/10\" role=\"status\">\n          <CardContent className=\"pt-6\">\n            <p className=\"text-sm text-yellow-700 dark:text-yellow-400\">{warning}</p>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Overview Cards */}\n      <motion.div\n        className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\"\n        variants={staggerContainer}\n        initial=\"hidden\"\n        animate=\"visible\"\n      >\n        <motion.div variants={staggerItem}>\n          <MetricCard\n            title=\"Sessions (7d)\"\n            value={latestGA4?.summary?.sessions?.toLocaleString() ?? '—'}\n            icon={Users}\n            trend={sessionTrend}\n          />\n        </motion.div>\n        <motion.div variants={staggerItem}>\n          <MetricCard\n            title=\"Lighthouse Perf\"\n            value={avgPerformance !== null ? `${avgPerformance}` : '—'}\n            icon={Gauge}\n            subtitle=\"avg across pages\"\n            status={avgPerformance !== null ? (avgPerformance >= 90 ? 'good' : avgPerformance >= 70 ? 'warning' : 'critical') : undefined}\n          />\n        </motion.div>\n        <motion.div variants={staggerItem}>\n          <MetricCard\n            title=\"Impressions (7d)\"\n            value={latestSearch?.summary?.totalImpressions?.toLocaleString() ?? '—'}\n            icon={Search}\n          />\n        </motion.div>\n        <motion.div variants={staggerItem}>\n          <MetricCard\n            title=\"Bounce Rate\"\n            value={latestGA4?.summary?.bounceRate != null ? `${(latestGA4.summary.bounceRate * 100).toFixed(0)}%` : '—'}\n            icon={Activity}\n            status={latestGA4?.summary?.bounceRate != null ? (latestGA4.summary.bounceRate <= 0.5 ? 'good' : latestGA4.summary.bounceRate <= 0.7 ? 'warning' : 'critical') : undefined}\n          />\n        </motion.div>\n      </motion.div>\n\n      {/* Tabbed Sections */}\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-4\">\n        <ResponsiveTabsList\n          items={visibleTabs}\n          value={activeTab}\n          onValueChange={setActiveTab}\n          tabsListClassName=\"w-full sm:w-auto\"\n        />\n\n        <AnimatePresence mode=\"wait\">\n          {/* Traffic Tab */}\n          {activeTab === 'traffic' && (\n            <motion.div\n              key=\"traffic\"\n              variants={tabContent}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n            >\n              <TabsContent value=\"traffic\" className=\"space-y-4\" forceMount>\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n            <Card className=\"lg:col-span-2\">\n              <CardHeader>\n                <CardTitle>Sessions Over Time</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Suspense fallback={<div className=\"h-64 bg-muted rounded animate-pulse\" />}>\n                  <SessionsTrendChart data={ga4History} />\n                </Suspense>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardHeader>\n                <CardTitle>Device Breakdown</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Suspense fallback={<div className=\"h-64 bg-muted rounded animate-pulse\" />}>\n                  <DeviceBreakdownChart data={latestGA4?.deviceBreakdown ?? []} />\n                </Suspense>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Traffic Sources</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Suspense fallback={<div className=\"h-64 bg-muted rounded animate-pulse\" />}>\n                  <TrafficSourcesChart data={latestGA4?.trafficSources} />\n                </Suspense>\n              </CardContent>\n            </Card>\n            {latestGA4?.trafficSources?.sources && latestGA4.trafficSources.sources.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>Top Referrers</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-2\">\n                    {latestGA4.trafficSources.sources.slice(0, 6).map((source, i) => (\n                      <div key={i} className=\"flex justify-between items-center py-1 border-b border-border/50 last:border-0\">\n                        <span className=\"text-sm font-mono truncate max-w-[200px]\">\n                          {source.source} / {source.medium}\n                        </span>\n                        <span className=\"text-sm tabular-nums text-muted-foreground\">\n                          {source.sessions.toLocaleString()}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n            {latestGA4?.topPages && latestGA4.topPages.length > 0 && (\n              <TrafficQualityCard topPages={latestGA4.topPages} />\n            )}\n          </div>\n\n          {/* Top Pages Table */}\n          {latestGA4?.topPages && latestGA4.topPages.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Top Pages (7d)</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full text-sm\">\n                    <thead>\n                      <tr className=\"border-b\">\n                        <th className=\"text-left py-2 font-medium\">Page</th>\n                        <th className=\"text-right py-2 pl-4 font-medium\">Sessions</th>\n                        <th className=\"text-right py-2 pl-4 font-medium\">Users</th>\n                        <th className=\"text-right py-2 pl-4 font-medium hidden sm:table-cell\">Views</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {latestGA4.topPages.slice(0, 10).map((page) => (\n                        <tr key={page.page} className=\"border-b border-border/50\">\n                          <td className=\"py-2 font-mono text-xs truncate max-w-[150px] sm:max-w-[200px]\">{page.page}</td>\n                          <td className=\"text-right py-2 pl-4 tabular-nums\">{page.sessions.toLocaleString()}</td>\n                          <td className=\"text-right py-2 pl-4 tabular-nums\">{page.users.toLocaleString()}</td>\n                          <td className=\"text-right py-2 pl-4 tabular-nums hidden sm:table-cell\">{page.pageViews.toLocaleString()}</td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n              </TabsContent>\n            </motion.div>\n          )}\n\n          {/* Blog Tab */}\n          {activeTab === 'blog' && (\n            <motion.div\n              key=\"blog\"\n              variants={tabContent}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n            >\n              <TabsContent value=\"blog\" className=\"space-y-4\" forceMount>\n                <BlogAnalyticsCard ga4History={ga4History} latestGA4={latestGA4} />\n              </TabsContent>\n            </motion.div>\n          )}\n\n          {/* Performance Tab */}\n          {activeTab === 'performance' && (\n            <motion.div\n              key=\"performance\"\n              variants={tabContent}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n            >\n              <TabsContent value=\"performance\" className=\"space-y-4\" forceMount>\n          {/* Web Vitals Comparison: Lab vs Field */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <h3 className=\"text-sm font-medium text-muted-foreground\">Lab Data (Lighthouse)</h3>\n              <CoreWebVitalsCard data={lighthouseSummary} />\n            </div>\n            <div className=\"space-y-2\">\n              <h3 className=\"text-sm font-medium text-muted-foreground\">Field Data (Real Users)</h3>\n              <RumWebVitalsCard data={latest?.webVitals} />\n            </div>\n          </div>\n\n          {/* Lighthouse Scores Chart */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Lighthouse Scores by Page</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <Suspense fallback={<div className=\"h-64 bg-muted rounded animate-pulse\" />}>\n                <LighthouseHistoryChart data={lighthouseSummary} />\n              </Suspense>\n            </CardContent>\n          </Card>\n\n          <LighthouseScoresTable data={lighthouseSummary} />\n              </TabsContent>\n            </motion.div>\n          )}\n\n          {/* Search Tab */}\n          {activeTab === 'search' && (\n            <motion.div\n              key=\"search\"\n              variants={tabContent}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n            >\n              <TabsContent value=\"search\" className=\"space-y-4\" forceMount>\n          <Card>\n            <CardHeader>\n              <CardTitle>Search Performance</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <Suspense fallback={<div className=\"h-64 bg-muted rounded animate-pulse\" />}>\n                <SearchPerformanceChart data={searchHistory} />\n              </Suspense>\n            </CardContent>\n          </Card>\n\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <MetricCard\n              title=\"Clicks\"\n              value={latestSearch?.summary?.totalClicks?.toLocaleString() ?? '—'}\n              icon={Activity}\n            />\n            <MetricCard\n              title=\"Impressions\"\n              value={latestSearch?.summary?.totalImpressions?.toLocaleString() ?? '—'}\n              icon={Search}\n            />\n            <MetricCard\n              title=\"CTR\"\n              value={latestSearch?.summary?.averageCTR != null ? `${(latestSearch.summary.averageCTR * 100).toFixed(1)}%` : '—'}\n              icon={Activity}\n            />\n            <MetricCard\n              title=\"Avg Position\"\n              value={latestSearch?.summary?.averagePosition?.toFixed(1) ?? '—'}\n              icon={Gauge}\n            />\n          </div>\n              </TabsContent>\n            </motion.div>\n          )}\n\n          {/* Tools Tab */}\n          {activeTab === 'tools' && (\n            <motion.div\n              key=\"tools\"\n              variants={tabContent}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n            >\n              <TabsContent value=\"tools\" className=\"space-y-4\" forceMount>\n          {latestGA4?.toolInteractions ? (\n            <>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <MetricCard\n                  title=\"Tool Interactions (7d)\"\n                  value={latestGA4.toolInteractions.total.toLocaleString()}\n                  icon={Wrench}\n                />\n                {latestGA4.toolInteractions.byTool.slice(0, 3).map((tool) => (\n                  <MetricCard\n                    key={tool.name}\n                    title={tool.name.replace(/_/g, ' ').replace(/\\b\\w/g, c => c.toUpperCase())}\n                    value={tool.total.toLocaleString()}\n                    icon={Activity}\n                    subtitle=\"interactions\"\n                  />\n                ))}\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n                {latestGA4.toolInteractions.byTool.map((tool) => (\n                  <Card key={tool.name}>\n                    <CardHeader>\n                      <CardTitle className=\"text-lg\">\n                        {tool.name.replace(/_/g, ' ').replace(/\\b\\w/g, c => c.toUpperCase())}\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-2\">\n                        {tool.actions.map((action) => (\n                          <div key={action.action} className=\"flex justify-between items-center py-1 border-b border-border/50 last:border-0\">\n                            <span className=\"text-sm font-mono\">\n                              {action.action.replace(/_/g, ' ')}\n                            </span>\n                            <span className=\"text-sm tabular-nums text-muted-foreground\">\n                              {action.count.toLocaleString()}\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </>\n          ) : (\n            <Card>\n              <CardContent className=\"pt-6\">\n                <p className=\"text-muted-foreground text-center py-8\">\n                  No tool interaction data available yet. Tool events will appear here once users interact with the SRE tools.\n                </p>\n              </CardContent>\n            </Card>\n          )}\n              </TabsContent>\n            </motion.div>\n          )}\n\n          {/* CI/CD Tab */}\n          {activeTab === 'cicd' && (\n            <motion.div\n              key=\"cicd\"\n              variants={tabContent}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n            >\n              <TabsContent value=\"cicd\" className=\"space-y-4\" forceMount>\n                <GitHubBillingCard data={billingHistory} />\n              </TabsContent>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </Tabs>\n\n      {/* Footer */}\n      {latest?.generated && (\n        <footer className=\"pt-8 border-t border-border/50\">\n          <p className=\"text-sm text-muted-foreground\">\n            Last updated: {new Date(latest.generated).toLocaleDateString('en-US', {\n              month: 'short',\n              day: 'numeric',\n              year: 'numeric',\n              hour: '2-digit',\n              minute: '2-digit',\n            })}\n          </p>\n        </footer>\n      )}\n    </div>\n  );\n}\n\n"],"file":"AnalyticsDashboard-EMgMvqgp.js"}