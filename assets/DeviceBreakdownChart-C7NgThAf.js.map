{"version":3,"file":"DeviceBreakdownChart-C7NgThAf.js","sources":["../../src/components/analytics/charts/DeviceBreakdownChart.tsx"],"sourcesContent":["import { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip, TooltipProps } from 'recharts';\nimport { NameType, ValueType } from 'recharts/types/component/DefaultTooltipContent';\n\ninterface DeviceData {\n  device: string;\n  sessions: number;\n  users: number;\n}\n\ninterface DeviceBreakdownChartProps {\n  data: DeviceData[];\n}\n\nconst COLORS = {\n  desktop: 'hsl(var(--chart-1))',\n  mobile: 'hsl(var(--chart-2))',\n  tablet: 'hsl(var(--chart-3))',\n};\n\nfunction CustomTooltip({ active, payload, total }: TooltipProps<ValueType, NameType> & { total: number }) {\n  if (!active || !payload || !payload.length) return null;\n  const data = payload[0];\n  const value = data.value as number;\n  return (\n    <div className=\"bg-popover text-popover-foreground border border-border rounded-lg px-3 py-2 text-sm shadow-md\">\n      <p className=\"font-medium\">{data.name}</p>\n      <p>Sessions: {value.toLocaleString()} ({((value / total) * 100).toFixed(1)}%)</p>\n    </div>\n  );\n}\n\nexport function DeviceBreakdownChart({ data }: DeviceBreakdownChartProps) {\n  if (data.length === 0) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n        No data available\n      </div>\n    );\n  }\n\n  const chartData = data.map((d) => ({\n    name: d.device.charAt(0).toUpperCase() + d.device.slice(1),\n    value: d.sessions,\n    device: d.device,\n  }));\n\n  const total = chartData.reduce((sum, d) => sum + d.value, 0);\n\n  return (\n    <div className=\"h-64 w-full\">\n      <ResponsiveContainer width=\"100%\" height={256}>\n        <PieChart>\n          <Pie\n            data={chartData}\n            cx=\"50%\"\n            cy=\"50%\"\n            innerRadius={40}\n            outerRadius={80}\n            paddingAngle={2}\n            dataKey=\"value\"\n            label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n            labelLine={false}\n          >\n            {chartData.map((entry) => (\n              <Cell\n                key={entry.device}\n                fill={COLORS[entry.device as keyof typeof COLORS] || 'hsl(var(--chart-4))'}\n              />\n            ))}\n          </Pie>\n          <Tooltip content={<CustomTooltip total={total} />} />\n          <Legend\n            verticalAlign=\"bottom\"\n            height={36}\n            formatter={(value) => <span className=\"text-sm\">{value}</span>}\n          />\n        </PieChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n"],"names":["COLORS","CustomTooltip","active","payload","total","data","value","jsxs","jsx","DeviceBreakdownChart","chartData","d","sum","ResponsiveContainer","PieChart","Pie","name","percent","entry","Cell","Tooltip","Legend"],"mappings":"8oBAaA,MAAMA,EAAS,CACb,QAAS,sBACT,OAAQ,sBACR,OAAQ,qBACV,EAEA,SAASC,EAAc,CAAE,OAAAC,EAAQ,QAAAC,EAAS,MAAAC,GAAgE,CACxG,GAAI,CAACF,GAAU,CAACC,GAAW,CAACA,EAAQ,OAAQ,OAAO,KACnD,MAAME,EAAOF,EAAQ,CAAC,EAChBG,EAAQD,EAAK,MACnB,OACEE,EAAAA,KAAC,MAAA,CAAI,UAAU,iGACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAAH,EAAK,KAAK,SACrC,IAAA,CAAE,SAAA,CAAA,aAAWC,EAAM,eAAA,EAAiB,MAAKA,EAAQF,EAAS,KAAK,QAAQ,CAAC,EAAE,IAAA,CAAA,CAAE,CAAA,EAC/E,CAEJ,CAEO,SAASK,EAAqB,CAAE,KAAAJ,GAAmC,CACxE,GAAIA,EAAK,SAAW,EAClB,OACEG,EAAAA,IAAC,MAAA,CAAI,UAAU,8DAA8D,SAAA,oBAE7E,EAIJ,MAAME,EAAYL,EAAK,IAAKM,IAAO,CACjC,KAAMA,EAAE,OAAO,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAE,OAAO,MAAM,CAAC,EACzD,MAAOA,EAAE,SACT,OAAQA,EAAE,MAAA,EACV,EAEIP,EAAQM,EAAU,OAAO,CAACE,EAAKD,IAAMC,EAAMD,EAAE,MAAO,CAAC,EAE3D,OACEH,EAAAA,IAAC,MAAA,CAAI,UAAU,cACb,SAAAA,EAAAA,IAACK,EAAA,CAAoB,MAAM,OAAO,OAAQ,IACxC,SAAAN,OAACO,EAAA,CACC,SAAA,CAAAN,EAAAA,IAACO,EAAA,CACC,KAAML,EACN,GAAG,MACH,GAAG,MACH,YAAa,GACb,YAAa,GACb,aAAc,EACd,QAAQ,QACR,MAAO,CAAC,CAAE,KAAAM,EAAM,QAAAC,CAAA,IAAc,GAAGD,CAAI,KAAKC,EAAU,KAAK,QAAQ,CAAC,CAAC,IACnE,UAAW,GAEV,SAAAP,EAAU,IAAKQ,GACdV,EAAAA,IAACW,EAAA,CAEC,KAAMnB,EAAOkB,EAAM,MAA6B,GAAK,qBAAA,EADhDA,EAAM,MAAA,CAGd,CAAA,CAAA,QAEFE,EAAA,CAAQ,QAASZ,EAAAA,IAACP,EAAA,CAAc,MAAAG,EAAc,EAAI,EACnDI,EAAAA,IAACa,EAAA,CACC,cAAc,SACd,OAAQ,GACR,UAAYf,SAAW,OAAA,CAAK,UAAU,UAAW,SAAAA,CAAA,CAAM,CAAA,CAAA,CACzD,CAAA,CACF,EACF,EACF,CAEJ"}