import{_ as n}from"./index-C80gN8Bw.js";import{K as _,_ as b}from"./KanbanBoard-BPxeb3iF.js";import{i as h,r as i,j as l}from"./vendor-DeyLhXpq.js";import"./theme-CfHJhC9-.js";import"./dropdown-menu-DsCbc20s.js";import"./input-YB48jCN_.js";import"./textarea-CN7b-HjI.js";import"./label-zCgB-xLj.js";import"./manifest-0AgvxBhP.js";import"./monitoring-C74x5Iy6.js";import"./ui-BQCqNqg0.js";const f="https://api.dylanbochman.com",g=t=>/^[a-z0-9][a-z0-9-]{0,48}[a-z0-9]?$/.test(t);function C(){const[t]=h(),[d,s]=i.useState(null),[c,m]=i.useState(null),r=i.useMemo(()=>{const o=t.get("board");return o&&g(o)?o:"roadmap"},[t]),p=t.get("card");return i.useEffect(()=>{s(null),m(null);async function o(){let u=!1;try{const e=await fetch(`${f}/board/${r}`,{credentials:"include"});if(e.ok){const a=await e.json();s({board:a.board,headCommitSha:a.headCommitSha,precompiled:a.precompiled});return}e.status===404&&(u=!0)}catch{console.debug("Worker API unavailable, falling back to precompiled JS")}try{const e=await b(Object.assign({"../../../generated/kanban/house.js":()=>n(()=>import("./house-DX4zlwYp.js").then(a=>a._),[]),"../../../generated/kanban/julias-gardens.js":()=>n(()=>import("./julias-gardens-BZsU5GeJ.js").then(a=>a._),[]),"../../../generated/kanban/manifest.js":()=>n(()=>import("./manifest-0AgvxBhP.js").then(a=>a._),[]),"../../../generated/kanban/roadmap.js":()=>n(()=>import("./roadmap-COLay1Kb.js").then(a=>a._),[])}),`../../../generated/kanban/${r}.js`,6);s({board:e.board,headCommitSha:null,precompiled:!0})}catch(e){m(u?"Board not found. It may have been deleted or not yet created.":e instanceof Error?e.message:"Failed to load board")}}o()},[r]),c?l.jsxs("div",{className:"text-red-500",children:["Failed to load board: ",c]}):d?l.jsx(_,{initialBoard:d.board,boardId:r,initialCardId:p||void 0,initialHeadCommitSha:d.headCommitSha},r):l.jsx("div",{className:"animate-pulse h-96 bg-muted rounded-lg"})}export{C as default};
