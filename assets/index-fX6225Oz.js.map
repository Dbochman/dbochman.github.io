{"version":3,"file":"index-fX6225Oz.js","sources":["../../src/components/projects/k8s-rightsizer/calculations.ts","../../src/components/projects/k8s-rightsizer/index.tsx"],"sourcesContent":["/**\n * K8s Resource Right-Sizer Calculations\n *\n * Core logic for recommending CPU/memory requests and limits\n * based on observed utilization percentiles and risk preference.\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface NormalizedResources {\n  cpu: number;     // millicores\n  memory: number;  // bytes\n}\n\nexport interface ResourceValues {\n  cpu: string;     // e.g., \"500m\", \"2\"\n  memory: string;  // e.g., \"256Mi\", \"1Gi\"\n}\n\nexport interface PercentileData {\n  p50: number;\n  p95: number;\n  p99: number;\n  max: number;\n}\n\nexport interface WorkloadInput {\n  name: string;\n  replicas: number;\n  current: {\n    requests: ResourceValues;\n    limits: ResourceValues;\n  };\n  usage: {\n    cpu: PercentileData;\n    memory: PercentileData;\n  };\n}\n\nexport interface CostBreakdown {\n  cpu: number;      // monthly CPU cost\n  memory: number;   // monthly memory cost\n  total: number;    // monthly total\n  yearly: number;   // annual total\n}\n\nexport interface Recommendation {\n  requests: ResourceValues;\n  limits: ResourceValues;\n  requestsNormalized: NormalizedResources;\n  limitsNormalized: NormalizedResources;\n  reasoning: string[];\n  costs: {\n    current: CostBreakdown;\n    recommended: CostBreakdown;\n    savings: CostBreakdown;  // can be negative for increased allocation\n  };\n  /** @deprecated Use costs.savings instead */\n  savings: {\n    monthly: number;\n    yearly: number;\n  };\n  risk: 'low' | 'medium' | 'high';\n  warnings: string[];\n}\n\nexport type PresetProfile = 'webserver' | 'worker' | 'database' | 'custom';\n\n// ============================================================================\n// Constants\n// ============================================================================\n\nconst MiB = 1024 * 1024;\nconst GiB = 1024 * MiB;\n\n// Power-of-2 MiB values for memory rounding\nconst MEMORY_ROUND_VALUES = [\n  16 * MiB, 32 * MiB, 64 * MiB, 128 * MiB, 256 * MiB, 512 * MiB,\n  1 * GiB, 2 * GiB, 4 * GiB, 8 * GiB, 16 * GiB, 32 * GiB, 64 * GiB,\n];\n\n// Default cost assumptions (approximate cloud pricing)\nexport const DEFAULT_COST_PER_CORE_HOUR = 0.03;\nexport const DEFAULT_COST_PER_GIB_HOUR = 0.004;\nexport const HOURS_PER_MONTH = 730;\n\n// Cloud provider pricing presets (approximate on-demand pricing)\nexport const CLOUD_PRICING = {\n  default: { cpu: 0.03, memory: 0.004, label: 'Default (On-demand)' },\n  aws: { cpu: 0.034, memory: 0.0046, label: 'AWS (US East)' },\n  gcp: { cpu: 0.031, memory: 0.0041, label: 'GCP (US Central)' },\n  azure: { cpu: 0.032, memory: 0.0044, label: 'Azure (East US)' },\n  reserved: { cpu: 0.019, memory: 0.0025, label: 'Reserved/Committed' },\n} as const;\n\nexport type CloudProvider = keyof typeof CLOUD_PRICING;\n\n// Slider range mappings\ninterface SliderConfig {\n  basePercentile: 'p50' | 'p95' | 'p99';\n  safetyMultiplier: number;\n  headroomMultiplier: number;\n  risk: 'low' | 'medium' | 'high';\n}\n\nconst SLIDER_MAPPINGS: { min: number; max: number; config: SliderConfig }[] = [\n  { min: 0, max: 19, config: { basePercentile: 'p50', safetyMultiplier: 1.0, headroomMultiplier: 1.1, risk: 'high' } },\n  { min: 20, max: 39, config: { basePercentile: 'p50', safetyMultiplier: 1.1, headroomMultiplier: 1.2, risk: 'high' } },\n  { min: 40, max: 59, config: { basePercentile: 'p95', safetyMultiplier: 1.1, headroomMultiplier: 1.3, risk: 'medium' } },\n  { min: 60, max: 79, config: { basePercentile: 'p95', safetyMultiplier: 1.2, headroomMultiplier: 1.5, risk: 'low' } },\n  { min: 80, max: 100, config: { basePercentile: 'p99', safetyMultiplier: 1.3, headroomMultiplier: 2.0, risk: 'low' } },\n];\n\n// Preset default slider positions\nexport const PRESET_SLIDER_VALUES: Record<PresetProfile, number> = {\n  webserver: 60,\n  worker: 40,\n  database: 80,\n  custom: 50,\n};\n\n// ============================================================================\n// Unit Parsing\n// ============================================================================\n\n/**\n * Parse CPU string to millicores\n * Examples: \"500m\" -> 500, \"0.5\" -> 500, \"2\" -> 2000\n * Rejects invalid formats like \"500mfoo\" or \"1.5x\"\n */\nexport function parseCpu(value: string): number {\n  const trimmed = value.trim();\n  if (!trimmed) throw new Error('Empty CPU value');\n\n  // Match millicores: \"500m\", \"100m\"\n  const milliMatch = trimmed.match(/^(\\d+(?:\\.\\d+)?)m$/);\n  if (milliMatch) {\n    const num = parseFloat(milliMatch[1]);\n    if (isNaN(num) || num < 0) throw new Error(`Invalid CPU value: ${value}`);\n    return Math.round(num);\n  }\n\n  // Match cores: \"1\", \"0.5\", \"2.5\"\n  const coreMatch = trimmed.match(/^(\\d+(?:\\.\\d+)?)$/);\n  if (coreMatch) {\n    const num = parseFloat(coreMatch[1]);\n    if (isNaN(num) || num < 0) throw new Error(`Invalid CPU value: ${value}`);\n    return Math.round(num * 1000);\n  }\n\n  throw new Error(`Invalid CPU value: ${value}`);\n}\n\n/**\n * Parse memory string to bytes\n * Examples: \"256Mi\" -> 268435456, \"1Gi\" -> 1073741824, \"512M\" -> 512000000\n * Rejects invalid formats like \"1GiB\" (invalid suffix) or \"256Mifoo\"\n */\nexport function parseMemory(value: string): number {\n  const trimmed = value.trim();\n  if (!trimmed) throw new Error('Empty memory value');\n\n  // Binary units (Ki, Mi, Gi, Ti) - must match exactly, case-sensitive for K8s compatibility\n  const binaryMatch = trimmed.match(/^(\\d+(?:\\.\\d+)?)(Ki|Mi|Gi|Ti)$/);\n  if (binaryMatch) {\n    const num = parseFloat(binaryMatch[1]);\n    if (isNaN(num) || num < 0) throw new Error(`Invalid memory value: ${value}`);\n    const unit = binaryMatch[2].toLowerCase();\n    const multipliers: Record<string, number> = {\n      'ki': 1024,\n      'mi': MiB,\n      'gi': GiB,\n      'ti': 1024 * GiB,\n    };\n    return Math.round(num * multipliers[unit]);\n  }\n\n  // Decimal units (K, M, G, T) - single letter only\n  const decimalMatch = trimmed.match(/^(\\d+(?:\\.\\d+)?)(K|M|G|T)$/);\n  if (decimalMatch) {\n    const num = parseFloat(decimalMatch[1]);\n    if (isNaN(num) || num < 0) throw new Error(`Invalid memory value: ${value}`);\n    const unit = decimalMatch[2].toLowerCase();\n    const multipliers: Record<string, number> = {\n      'k': 1000,\n      'm': 1000000,\n      'g': 1000000000,\n      't': 1000000000000,\n    };\n    return Math.round(num * multipliers[unit]);\n  }\n\n  // Plain bytes (integers only for safety)\n  const bytesMatch = trimmed.match(/^(\\d+)$/);\n  if (bytesMatch) {\n    const num = parseInt(bytesMatch[1], 10);\n    if (isNaN(num) || num < 0) throw new Error(`Invalid memory value: ${value}`);\n    return num;\n  }\n\n  throw new Error(`Invalid memory value: ${value}`);\n}\n\n// ============================================================================\n// Unit Formatting\n// ============================================================================\n\n/**\n * Format millicores to CPU string\n * Uses millicores for precision, whole cores for ≥1000m\n */\nexport function formatCpu(millicores: number): string {\n  if (millicores >= 1000 && millicores % 1000 === 0) {\n    return String(millicores / 1000);\n  }\n  return `${Math.round(millicores)}m`;\n}\n\n/**\n * Format bytes to memory string\n * Uses largest binary unit that results in clean value\n */\nexport function formatMemory(bytes: number): string {\n  if (bytes >= GiB && bytes % GiB === 0) {\n    return `${bytes / GiB}Gi`;\n  }\n  if (bytes >= MiB && bytes % MiB === 0) {\n    return `${bytes / MiB}Mi`;\n  }\n  if (bytes >= 1024 && bytes % 1024 === 0) {\n    return `${bytes / 1024}Ki`;\n  }\n  return String(bytes);\n}\n\n// ============================================================================\n// Rounding (Round UP to be conservative)\n// ============================================================================\n\n/**\n * Round CPU up to nearest nice value\n * < 1000m: round to nearest 10m\n * >= 1000m: round to nearest 100m\n */\nexport function roundCpuUp(millicores: number): number {\n  // Round to avoid floating point precision issues before ceiling\n  const rounded = Math.round(millicores * 100) / 100;\n  const step = rounded < 1000 ? 10 : 100;\n  return Math.ceil(rounded / step) * step;\n}\n\n/**\n * Round memory up to nearest power-of-2 MiB\n */\nexport function roundMemoryUp(bytes: number): number {\n  const minBytes = 16 * MiB;\n  if (bytes <= minBytes) return minBytes;\n\n  for (const target of MEMORY_ROUND_VALUES) {\n    if (bytes <= target) return target;\n  }\n\n  // For very large values, round up to nearest GiB\n  return Math.ceil(bytes / GiB) * GiB;\n}\n\n// ============================================================================\n// Percentile Validation & Defaults\n// ============================================================================\n\nexport interface PercentileInput {\n  p50?: number;\n  p95: number;\n  p99?: number;\n  max: number;\n}\n\n/**\n * Validate and fill in missing percentiles\n * Returns complete PercentileData or throws error\n */\nexport function normalizePercentiles(input: PercentileInput): PercentileData {\n  const { p95, max } = input;\n\n  // Fill defaults\n  const p50 = input.p50 ?? p95 * 0.6;\n  const p99 = input.p99 ?? Math.max(p95, max * 0.9);\n\n  // Validate ordering\n  if (p50 > p95 || p95 > p99 || p99 > max) {\n    throw new Error('Percentile values must be in order (P50 ≤ P95 ≤ P99 ≤ Max)');\n  }\n\n  return { p50, p95, p99, max };\n}\n\n// ============================================================================\n// Slider Config\n// ============================================================================\n\nfunction getSliderConfig(slider: number): SliderConfig {\n  for (const mapping of SLIDER_MAPPINGS) {\n    if (slider >= mapping.min && slider <= mapping.max) {\n      return mapping.config;\n    }\n  }\n  // Fallback (shouldn't happen with valid input)\n  return SLIDER_MAPPINGS[2].config;\n}\n\n// ============================================================================\n// Core Recommendation Logic\n// ============================================================================\n\nexport interface RecommendationInput {\n  usage: {\n    cpu: PercentileData;\n    memory: PercentileData;\n  };\n  current: {\n    requests: NormalizedResources;\n    limits: NormalizedResources;\n  };\n  replicas: number;\n  slider: number;\n  costPerCoreHour?: number;\n  costPerGiBHour?: number;\n}\n\nexport function calculateRecommendation(input: RecommendationInput): Recommendation {\n  const {\n    usage,\n    current,\n    replicas,\n    slider,\n    costPerCoreHour = DEFAULT_COST_PER_CORE_HOUR,\n    costPerGiBHour = DEFAULT_COST_PER_GIB_HOUR,\n  } = input;\n\n  // Validate replicas (must be at least 1)\n  const validatedReplicas = Math.max(1, Math.floor(replicas));\n\n  const config = getSliderConfig(slider);\n  const reasoning: string[] = [];\n  const warnings: string[] = [];\n\n  // Calculate raw recommendations\n  const rawCpuRequests = usage.cpu[config.basePercentile] * config.safetyMultiplier;\n  const rawCpuLimits = usage.cpu.max * config.headroomMultiplier;\n  const rawMemRequests = usage.memory[config.basePercentile] * config.safetyMultiplier;\n  const rawMemLimits = usage.memory.max * config.headroomMultiplier;\n\n  reasoning.push(`Based on ${config.basePercentile.toUpperCase()} usage with ${config.safetyMultiplier}x safety multiplier`);\n  reasoning.push(`Limits set at ${config.headroomMultiplier}x observed max`);\n\n  // Apply constraints in order:\n  // 1. Minimums\n  let cpuRequests = Math.max(10, rawCpuRequests);\n  let cpuLimits = Math.max(10, rawCpuLimits);\n  let memRequests = Math.max(16 * MiB, rawMemRequests);\n  let memLimits = Math.max(16 * MiB, rawMemLimits);\n\n  // 2. Round UP\n  cpuRequests = roundCpuUp(cpuRequests);\n  cpuLimits = roundCpuUp(cpuLimits);\n  memRequests = roundMemoryUp(memRequests);\n  memLimits = roundMemoryUp(memLimits);\n\n  // 3. Ensure requests ≤ limits (final step)\n  if (cpuRequests > cpuLimits) {\n    cpuRequests = cpuLimits;\n    warnings.push('CPU requests capped at limits');\n  }\n  if (memRequests > memLimits) {\n    memRequests = memLimits;\n    warnings.push('Memory requests capped at limits');\n  }\n\n  // Check for potential issues\n  if (cpuLimits < usage.cpu.max) {\n    warnings.push('CPU limits below observed max - risk of throttling');\n  }\n  if (memLimits < usage.memory.max) {\n    warnings.push('Memory limits below observed max - risk of OOMKill');\n  }\n\n  // Calculate full cost breakdown\n  // Current costs\n  const currentCpuMonthly = (current.requests.cpu / 1000) * validatedReplicas * costPerCoreHour * HOURS_PER_MONTH;\n  const currentMemMonthly = (current.requests.memory / GiB) * validatedReplicas * costPerGiBHour * HOURS_PER_MONTH;\n  const currentTotal = currentCpuMonthly + currentMemMonthly;\n\n  // Recommended costs\n  const recCpuMonthly = (cpuRequests / 1000) * validatedReplicas * costPerCoreHour * HOURS_PER_MONTH;\n  const recMemMonthly = (memRequests / GiB) * validatedReplicas * costPerGiBHour * HOURS_PER_MONTH;\n  const recTotal = recCpuMonthly + recMemMonthly;\n\n  // Savings (positive = cost reduction, negative = cost increase)\n  const cpuSavings = currentCpuMonthly - recCpuMonthly;\n  const memSavings = currentMemMonthly - recMemMonthly;\n  const totalSavings = cpuSavings + memSavings;\n\n  // Legacy savings field (clamped to 0 for backwards compat)\n  const monthlySavings = Math.max(0, totalSavings);\n  const yearlySavings = monthlySavings * 12;\n\n  if (totalSavings < 0) {\n    reasoning.push('Recommendation increases resource allocation (negative savings)');\n  } else if (totalSavings > 0) {\n    reasoning.push(`Estimated monthly savings: $${totalSavings.toFixed(2)}`);\n  }\n\n  return {\n    requests: {\n      cpu: formatCpu(cpuRequests),\n      memory: formatMemory(memRequests),\n    },\n    limits: {\n      cpu: formatCpu(cpuLimits),\n      memory: formatMemory(memLimits),\n    },\n    requestsNormalized: {\n      cpu: cpuRequests,\n      memory: memRequests,\n    },\n    limitsNormalized: {\n      cpu: cpuLimits,\n      memory: memLimits,\n    },\n    reasoning,\n    costs: {\n      current: {\n        cpu: currentCpuMonthly,\n        memory: currentMemMonthly,\n        total: currentTotal,\n        yearly: currentTotal * 12,\n      },\n      recommended: {\n        cpu: recCpuMonthly,\n        memory: recMemMonthly,\n        total: recTotal,\n        yearly: recTotal * 12,\n      },\n      savings: {\n        cpu: cpuSavings,\n        memory: memSavings,\n        total: totalSavings,\n        yearly: totalSavings * 12,\n      },\n    },\n    savings: {\n      monthly: monthlySavings,\n      yearly: yearlySavings,\n    },\n    risk: config.risk,\n    warnings,\n  };\n}\n\n// ============================================================================\n// YAML Generation\n// ============================================================================\n\nexport function generateYaml(recommendation: Recommendation): string {\n  return `resources:\n  requests:\n    cpu: \"${recommendation.requests.cpu}\"\n    memory: \"${recommendation.requests.memory}\"\n  limits:\n    cpu: \"${recommendation.limits.cpu}\"\n    memory: \"${recommendation.limits.memory}\"`;\n}\n","import { useState, useMemo, useCallback, useEffect, useTransition } from 'react';\nimport { Copy, Check, AlertTriangle, TrendingDown, TrendingUp, Info, HelpCircle } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport { cn } from '@/lib/utils';\nimport { trackToolEvent } from '@/lib/trackToolEvent';\nimport {\n  parseCpu,\n  parseMemory,\n  normalizePercentiles,\n  calculateRecommendation,\n  generateYaml,\n  PRESET_SLIDER_VALUES,\n  CLOUD_PRICING,\n  HOURS_PER_MONTH,\n  type PresetProfile,\n  type PercentileInput,\n  type CloudProvider,\n} from './calculations';\n\ntype ResourceType = 'cpu' | 'memory';\n\ninterface FormState {\n  replicas: string;\n  currentCpuRequests: string;\n  currentCpuLimits: string;\n  currentMemRequests: string;\n  currentMemLimits: string;\n  cpuP50: string;\n  cpuP95: string;\n  cpuP99: string;\n  cpuMax: string;\n  memP50: string;\n  memP95: string;\n  memP99: string;\n  memMax: string;\n}\n\nconst DEFAULT_FORM: FormState = {\n  replicas: '3',\n  currentCpuRequests: '500m',\n  currentCpuLimits: '1',\n  currentMemRequests: '512Mi',\n  currentMemLimits: '1Gi',\n  cpuP50: '100m',\n  cpuP95: '200m',\n  cpuP99: '300m',\n  cpuMax: '400m',\n  memP50: '256Mi',\n  memP95: '400Mi',\n  memP99: '450Mi',\n  memMax: '512Mi',\n};\n\nconst PRESETS: { id: PresetProfile; label: string; description: string }[] = [\n  { id: 'webserver', label: 'Web Server', description: 'Request-response, some bursts' },\n  { id: 'worker', label: 'Worker', description: 'Batch processing, predictable' },\n  { id: 'database', label: 'Database', description: 'Memory-sensitive, avoid OOMKill' },\n  { id: 'custom', label: 'Custom', description: 'Manual slider adjustment' },\n];\n\n// Common CPU values for quick selection\nconst CPU_PRESETS = [\n  { value: '50m', label: '50m', description: '0.05 cores' },\n  { value: '100m', label: '100m', description: '0.1 cores' },\n  { value: '250m', label: '250m', description: '0.25 cores' },\n  { value: '500m', label: '500m', description: '0.5 cores' },\n  { value: '1', label: '1', description: '1 core' },\n  { value: '2', label: '2', description: '2 cores' },\n  { value: '4', label: '4', description: '4 cores' },\n];\n\n// Common memory values for quick selection\nconst MEMORY_PRESETS = [\n  { value: '64Mi', label: '64Mi', description: '64 MiB' },\n  { value: '128Mi', label: '128Mi', description: '128 MiB' },\n  { value: '256Mi', label: '256Mi', description: '256 MiB' },\n  { value: '512Mi', label: '512Mi', description: '512 MiB' },\n  { value: '1Gi', label: '1Gi', description: '1 GiB' },\n  { value: '2Gi', label: '2Gi', description: '2 GiB' },\n  { value: '4Gi', label: '4Gi', description: '4 GiB' },\n  { value: '8Gi', label: '8Gi', description: '8 GiB' },\n];\n\nfunction getRiskColor(risk: 'low' | 'medium' | 'high') {\n  switch (risk) {\n    case 'low': return 'bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20';\n    case 'medium': return 'bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20';\n    case 'high': return 'bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20';\n  }\n}\n\n/**\n * Format cost change as percentage, handling edge cases\n * Returns \"—\" when current is 0 but recommended > 0 (can't calculate %)\n */\nfunction formatCostChangePercent(current: number, savings: number): string {\n  if (current === 0) {\n    // Can't calculate percentage from zero base\n    // If recommended > 0, it's an increase from nothing\n    return savings < 0 ? '+∞' : '—';\n  }\n  const percent = Math.round((savings / current) * 100);\n  return `${savings >= 0 ? '-' : '+'}${Math.abs(percent)}%`;\n}\n\n// Combobox-style input with integrated dropdown\ninterface ResourceInputProps {\n  id: string;\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  placeholder: string;\n  presets: typeof CPU_PRESETS;\n  tooltip: React.ReactNode;\n}\n\nfunction ResourceInput({ id, label, value, onChange, placeholder, presets, tooltip }: ResourceInputProps) {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <div>\n      <div className=\"flex items-center gap-1 mb-1\">\n        <Label htmlFor={id}>{label}</Label>\n        <Tooltip>\n          <TooltipTrigger>\n            <HelpCircle className=\"h-3.5 w-3.5 text-muted-foreground\" />\n          </TooltipTrigger>\n          <TooltipContent className=\"max-w-xs\">\n            {tooltip}\n          </TooltipContent>\n        </Tooltip>\n      </div>\n      <div className=\"relative\">\n        <Input\n          id={id}\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          onFocus={() => setOpen(true)}\n          onBlur={() => setTimeout(() => setOpen(false), 150)}\n          placeholder={placeholder}\n          className=\"pr-8 font-mono\"\n          autoComplete=\"off\"\n        />\n        <button\n          type=\"button\"\n          tabIndex={-1}\n          onClick={() => setOpen(!open)}\n          className=\"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n        >\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" className={cn(\"transition-transform\", open && \"rotate-180\")}>\n            <path d=\"M2.5 4.5L6 8L9.5 4.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n        </button>\n        {open && (\n          <div className=\"absolute z-50 mt-1 w-full min-w-[180px] rounded-md border bg-popover p-1 shadow-md\">\n            <div className=\"px-2 py-1.5 text-xs font-semibold text-muted-foreground\">Common values</div>\n            {presets.map((p) => (\n              <button\n                key={p.value}\n                type=\"button\"\n                onMouseDown={(e) => e.preventDefault()}\n                onClick={() => {\n                  onChange(p.value);\n                  setOpen(false);\n                }}\n                className={cn(\n                  \"flex w-full items-center justify-between rounded-sm px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground\",\n                  value === p.value && \"bg-accent\"\n                )}\n              >\n                <span className=\"font-mono\">{p.label}</span>\n                <span className=\"text-xs text-muted-foreground\">{p.description}</span>\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default function K8sRightsizer() {\n  const [form, setForm] = useState<FormState>(DEFAULT_FORM);\n  const [slider, setSlider] = useState(50);\n  const [preset, setPreset] = useState<PresetProfile>('custom');\n  const [copied, setCopied] = useState(false);\n  const [activeTab, setActiveTab] = useState<ResourceType>('cpu');\n  const [cloudProvider, setCloudProvider] = useState<CloudProvider>('default');\n\n  // Debounced form state for expensive calculations\n  const [debouncedForm, setDebouncedForm] = useState<FormState>(form);\n  const [isPending, startTransition] = useTransition();\n\n  // Debounce form updates (150ms) to avoid recalculating on every keystroke\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      startTransition(() => {\n        setDebouncedForm(form);\n      });\n    }, 150);\n    return () => clearTimeout(timeout);\n  }, [form]);\n\n  const updateField = useCallback((field: keyof FormState, value: string) => {\n    setForm(prev => ({ ...prev, [field]: value }));\n  }, []);\n\n  const handlePresetChange = useCallback((newPreset: PresetProfile) => {\n    setPreset(newPreset);\n    setSlider(PRESET_SLIDER_VALUES[newPreset]);\n    trackToolEvent({ tool_name: 'k8s_rightsizer', action: 'preset_change', event_label: newPreset });\n  }, []);\n\n  const handleSliderChange = useCallback((values: number[]) => {\n    setSlider(values[0]);\n    setPreset('custom');\n  }, []);\n\n  // Compute recommendation using debounced form state for better INP\n  const { recommendation, error } = useMemo(() => {\n    try {\n      // Parse current values (using debouncedForm to avoid recalc on every keystroke)\n      const currentCpu = {\n        requests: parseCpu(debouncedForm.currentCpuRequests),\n        limits: parseCpu(debouncedForm.currentCpuLimits),\n      };\n      const currentMem = {\n        requests: parseMemory(debouncedForm.currentMemRequests),\n        limits: parseMemory(debouncedForm.currentMemLimits),\n      };\n\n      // Parse CPU percentiles\n      const cpuInput: PercentileInput = {\n        p95: parseCpu(debouncedForm.cpuP95),\n        max: parseCpu(debouncedForm.cpuMax),\n      };\n      if (debouncedForm.cpuP50.trim()) cpuInput.p50 = parseCpu(debouncedForm.cpuP50);\n      if (debouncedForm.cpuP99.trim()) cpuInput.p99 = parseCpu(debouncedForm.cpuP99);\n      const cpuPercentiles = normalizePercentiles(cpuInput);\n\n      // Parse memory percentiles\n      const memInput: PercentileInput = {\n        p95: parseMemory(debouncedForm.memP95),\n        max: parseMemory(debouncedForm.memMax),\n      };\n      if (debouncedForm.memP50.trim()) memInput.p50 = parseMemory(debouncedForm.memP50);\n      if (debouncedForm.memP99.trim()) memInput.p99 = parseMemory(debouncedForm.memP99);\n      const memPercentiles = normalizePercentiles(memInput);\n\n      const replicas = Math.max(1, Math.floor(parseInt(debouncedForm.replicas, 10) || 1));\n\n      const pricing = CLOUD_PRICING[cloudProvider];\n      const result = calculateRecommendation({\n        usage: {\n          cpu: cpuPercentiles,\n          memory: memPercentiles,\n        },\n        current: {\n          requests: { cpu: currentCpu.requests, memory: currentMem.requests },\n          limits: { cpu: currentCpu.limits, memory: currentMem.limits },\n        },\n        replicas,\n        slider,\n        costPerCoreHour: pricing.cpu,\n        costPerGiBHour: pricing.memory,\n      });\n\n      return { recommendation: result, error: null, validatedReplicas: replicas };\n    } catch (e) {\n      return { recommendation: null, error: e instanceof Error ? e.message : 'Invalid input', validatedReplicas: 1 };\n    }\n  }, [debouncedForm, slider, cloudProvider]);\n\n  // Use immediate form value for display, debounced value is used in calculation\n  const validatedReplicas = useMemo(() => {\n    return Math.max(1, Math.floor(parseInt(form.replicas, 10) || 1));\n  }, [form.replicas]);\n\n  const yaml = recommendation ? generateYaml(recommendation) : '';\n\n  const handleCopy = useCallback(async () => {\n    if (!yaml) return;\n    try {\n      await navigator.clipboard.writeText(yaml);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n      trackToolEvent({ tool_name: 'k8s_rightsizer', action: 'copy_yaml', event_label: 'yaml' });\n    } catch {\n      // Fallback for browsers without clipboard API or in non-secure contexts\n      console.warn('Clipboard API failed, copy manually');\n    }\n  }, [yaml]);\n\n  const sliderLabel = useMemo(() => {\n    if (slider < 20) return 'Aggressive';\n    if (slider < 40) return 'Efficient';\n    if (slider < 60) return 'Balanced';\n    if (slider < 80) return 'Conservative';\n    return 'Safe';\n  }, [slider]);\n\n  return (\n    <TooltipProvider>\n      <div className=\"space-y-6\">\n        {/* Preset Selection */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-lg\">Workload Profile</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-2\">\n              {PRESETS.map((p) => (\n                <button\n                  key={p.id}\n                  onClick={() => handlePresetChange(p.id)}\n                  className={cn(\n                    'p-3 rounded-lg border text-left transition-colors',\n                    preset === p.id\n                      ? 'border-primary bg-primary/5'\n                      : 'border-border hover:border-muted-foreground/50'\n                  )}\n                >\n                  <div className=\"font-medium text-sm\">{p.label}</div>\n                  <div className=\"text-xs text-muted-foreground\">{p.description}</div>\n                </button>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        <div className=\"grid gap-6 lg:grid-cols-2\">\n          {/* Left: Inputs */}\n          <div className=\"space-y-6\">\n            {/* Current Resources */}\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  Current Configuration\n                  <Tooltip>\n                    <TooltipTrigger>\n                      <Info className=\"h-4 w-4 text-muted-foreground\" />\n                    </TooltipTrigger>\n                    <TooltipContent>\n                      <p>Your current requests/limits from the deployment spec</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-3 gap-3\">\n                  <div>\n                    <Label htmlFor=\"replicas\">Replicas</Label>\n                    <Input\n                      id=\"replicas\"\n                      value={form.replicas}\n                      onChange={(e) => updateField('replicas', e.target.value)}\n                      placeholder=\"3\"\n                    />\n                  </div>\n                  <ResourceInput\n                    id=\"currentCpuRequests\"\n                    label=\"CPU Requests\"\n                    value={form.currentCpuRequests}\n                    onChange={(v) => updateField('currentCpuRequests', v)}\n                    placeholder=\"500m\"\n                    presets={CPU_PRESETS}\n                    tooltip={\n                      <div className=\"space-y-1\">\n                        <p className=\"font-medium\">CPU in millicores (m)</p>\n                        <p>1000m = 1 CPU core</p>\n                        <p className=\"text-xs\">Example: 500m = half a core</p>\n                      </div>\n                    }\n                  />\n                  <ResourceInput\n                    id=\"currentCpuLimits\"\n                    label=\"CPU Limits\"\n                    value={form.currentCpuLimits}\n                    onChange={(v) => updateField('currentCpuLimits', v)}\n                    placeholder=\"1\"\n                    presets={CPU_PRESETS}\n                    tooltip={\n                      <div className=\"space-y-1\">\n                        <p className=\"font-medium\">CPU in millicores (m)</p>\n                        <p>1000m = 1 CPU core</p>\n                        <p className=\"text-xs\">Limits cap max CPU usage</p>\n                      </div>\n                    }\n                  />\n                </div>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <ResourceInput\n                    id=\"currentMemRequests\"\n                    label=\"Memory Requests\"\n                    value={form.currentMemRequests}\n                    onChange={(v) => updateField('currentMemRequests', v)}\n                    placeholder=\"512Mi\"\n                    presets={MEMORY_PRESETS}\n                    tooltip={\n                      <div className=\"space-y-1\">\n                        <p className=\"font-medium\">Memory in binary units</p>\n                        <p>Mi = mebibytes, Gi = gibibytes</p>\n                        <p className=\"text-xs\">1Gi = 1024Mi</p>\n                      </div>\n                    }\n                  />\n                  <ResourceInput\n                    id=\"currentMemLimits\"\n                    label=\"Memory Limits\"\n                    value={form.currentMemLimits}\n                    onChange={(v) => updateField('currentMemLimits', v)}\n                    placeholder=\"1Gi\"\n                    presets={MEMORY_PRESETS}\n                    tooltip={\n                      <div className=\"space-y-1\">\n                        <p className=\"font-medium\">Memory in binary units</p>\n                        <p>Mi = mebibytes, Gi = gibibytes</p>\n                        <p className=\"text-xs\">Exceeding limits causes OOMKill</p>\n                      </div>\n                    }\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Observed Usage */}\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  Observed Usage Percentiles\n                  <Tooltip>\n                    <TooltipTrigger>\n                      <Info className=\"h-4 w-4 text-muted-foreground\" />\n                    </TooltipTrigger>\n                    <TooltipContent className=\"max-w-xs\">\n                      <p>Get these from your monitoring (Prometheus, Datadog, etc.).</p>\n                      <p className=\"mt-1 text-xs\">P95 and Max are required. P50 and P99 are optional.</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as ResourceType)}>\n                  <TabsList className=\"mb-4\">\n                    <TabsTrigger value=\"cpu\">CPU</TabsTrigger>\n                    <TabsTrigger value=\"memory\">Memory</TabsTrigger>\n                  </TabsList>\n\n                  <TabsContent value=\"cpu\" className=\"space-y-3\">\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <ResourceInput\n                        id=\"cpuP50\"\n                        label=\"P50 (optional)\"\n                        value={form.cpuP50}\n                        onChange={(v) => updateField('cpuP50', v)}\n                        placeholder=\"100m\"\n                        presets={CPU_PRESETS}\n                        tooltip={<p>Median CPU usage - 50% of samples are below this</p>}\n                      />\n                      <ResourceInput\n                        id=\"cpuP95\"\n                        label=\"P95 *\"\n                        value={form.cpuP95}\n                        onChange={(v) => updateField('cpuP95', v)}\n                        placeholder=\"200m\"\n                        presets={CPU_PRESETS}\n                        tooltip={<p>95th percentile - 95% of samples are below this</p>}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <ResourceInput\n                        id=\"cpuP99\"\n                        label=\"P99 (optional)\"\n                        value={form.cpuP99}\n                        onChange={(v) => updateField('cpuP99', v)}\n                        placeholder=\"300m\"\n                        presets={CPU_PRESETS}\n                        tooltip={<p>99th percentile - captures peak usage</p>}\n                      />\n                      <ResourceInput\n                        id=\"cpuMax\"\n                        label=\"Max *\"\n                        value={form.cpuMax}\n                        onChange={(v) => updateField('cpuMax', v)}\n                        placeholder=\"400m\"\n                        presets={CPU_PRESETS}\n                        tooltip={<p>Maximum observed CPU usage</p>}\n                      />\n                    </div>\n                  </TabsContent>\n\n                  <TabsContent value=\"memory\" className=\"space-y-3\">\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <ResourceInput\n                        id=\"memP50\"\n                        label=\"P50 (optional)\"\n                        value={form.memP50}\n                        onChange={(v) => updateField('memP50', v)}\n                        placeholder=\"256Mi\"\n                        presets={MEMORY_PRESETS}\n                        tooltip={<p>Median memory usage - 50% of samples are below this</p>}\n                      />\n                      <ResourceInput\n                        id=\"memP95\"\n                        label=\"P95 *\"\n                        value={form.memP95}\n                        onChange={(v) => updateField('memP95', v)}\n                        placeholder=\"400Mi\"\n                        presets={MEMORY_PRESETS}\n                        tooltip={<p>95th percentile - 95% of samples are below this</p>}\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <ResourceInput\n                        id=\"memP99\"\n                        label=\"P99 (optional)\"\n                        value={form.memP99}\n                        onChange={(v) => updateField('memP99', v)}\n                        placeholder=\"450Mi\"\n                        presets={MEMORY_PRESETS}\n                        tooltip={<p>99th percentile - captures peak usage</p>}\n                      />\n                      <ResourceInput\n                        id=\"memMax\"\n                        label=\"Max *\"\n                        value={form.memMax}\n                        onChange={(v) => updateField('memMax', v)}\n                        placeholder=\"512Mi\"\n                        presets={MEMORY_PRESETS}\n                        tooltip={<p>Maximum observed memory usage</p>}\n                      />\n                    </div>\n                  </TabsContent>\n                </Tabs>\n              </CardContent>\n            </Card>\n\n            {/* Risk Slider */}\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-lg\">Risk Preference</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">Efficiency</span>\n                  <span className=\"font-medium\">{sliderLabel}</span>\n                  <span className=\"text-muted-foreground\">Safety</span>\n                </div>\n                <Slider\n                  value={[slider]}\n                  onValueChange={handleSliderChange}\n                  min={0}\n                  max={100}\n                  step={1}\n                  className=\"py-2\"\n                />\n                <div className=\"flex justify-between text-xs text-muted-foreground\">\n                  <span>Lower cost, higher risk</span>\n                  <span>Higher cost, lower risk</span>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Right: Recommendation */}\n          <div className=\"space-y-6\">\n            {error ? (\n              <Card className=\"border-destructive\">\n                <CardContent className=\"pt-6\">\n                  <div className=\"flex items-center gap-2 text-destructive\">\n                    <AlertTriangle className=\"h-5 w-5\" />\n                    <span>{error}</span>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : recommendation ? (\n              <>\n                {/* Recommendation Summary Card */}\n                <Card className={isPending ? 'opacity-70 transition-opacity' : ''}>\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <CardTitle className=\"text-lg flex items-center gap-2\">\n                        Recommendation\n                        {isPending && (\n                          <span className=\"inline-block h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent\" />\n                        )}\n                      </CardTitle>\n                      <Badge variant=\"outline\" className={getRiskColor(recommendation.risk)}>\n                        {recommendation.risk} risk\n                      </Badge>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    {/* Side by side comparison */}\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <div className=\"text-sm font-medium text-muted-foreground mb-2\">Current</div>\n                        <div className=\"space-y-1 text-sm\">\n                          <div>CPU: {form.currentCpuRequests} / {form.currentCpuLimits}</div>\n                          <div>Mem: {form.currentMemRequests} / {form.currentMemLimits}</div>\n                        </div>\n                      </div>\n                      <div>\n                        <div className=\"text-sm font-medium text-muted-foreground mb-2\">Recommended</div>\n                        <div className=\"space-y-1 text-sm\">\n                          <div>CPU: {recommendation.requests.cpu} / {recommendation.limits.cpu}</div>\n                          <div>Mem: {recommendation.requests.memory} / {recommendation.limits.memory}</div>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Warnings */}\n                    {recommendation.warnings.length > 0 && (\n                      <div className=\"space-y-2\">\n                        {recommendation.warnings.map((warning, i) => (\n                          <div key={i} className=\"flex items-center gap-2 text-sm text-yellow-600 dark:text-yellow-400\">\n                            <AlertTriangle className=\"h-4 w-4 shrink-0\" />\n                            <span>{warning}</span>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n\n                    {/* Reasoning */}\n                    <div className=\"text-sm text-muted-foreground space-y-1\">\n                      {recommendation.reasoning.map((r, i) => (\n                        <div key={i}>• {r}</div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* Cost Analysis Card */}\n                <Card>\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <CardTitle className=\"text-lg\">Cost Analysis</CardTitle>\n                      <Select value={cloudProvider} onValueChange={(v) => setCloudProvider(v as CloudProvider)}>\n                        <SelectTrigger className=\"w-[160px] h-8 text-xs\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {Object.entries(CLOUD_PRICING).map(([key, { label }]) => (\n                            <SelectItem key={key} value={key} className=\"text-xs\">\n                              {label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    {/* Cost comparison table */}\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full text-sm\">\n                        <thead>\n                          <tr className=\"text-muted-foreground\">\n                            <th className=\"text-left font-medium py-2\"></th>\n                            <th className=\"text-right font-medium py-2 px-2\">Current</th>\n                            <th className=\"text-right font-medium py-2 px-2\">Recommended</th>\n                            <th className=\"text-right font-medium py-2 px-2\">Change</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr>\n                            <td className=\"py-1.5 text-muted-foreground\">CPU</td>\n                            <td className=\"py-1.5 px-2 text-right font-mono\">\n                              ${recommendation.costs.current.cpu.toFixed(2)}/mo\n                            </td>\n                            <td className=\"py-1.5 px-2 text-right font-mono\">\n                              ${recommendation.costs.recommended.cpu.toFixed(2)}/mo\n                            </td>\n                            <td className={cn(\n                              \"py-1.5 px-2 text-right font-mono\",\n                              recommendation.costs.savings.cpu > 0 && \"text-green-600 dark:text-green-400\",\n                              recommendation.costs.savings.cpu < 0 && \"text-red-600 dark:text-red-400\"\n                            )}>\n                              {formatCostChangePercent(recommendation.costs.current.cpu, recommendation.costs.savings.cpu)}\n                            </td>\n                          </tr>\n                          <tr>\n                            <td className=\"py-1.5 text-muted-foreground\">Memory</td>\n                            <td className=\"py-1.5 px-2 text-right font-mono\">\n                              ${recommendation.costs.current.memory.toFixed(2)}/mo\n                            </td>\n                            <td className=\"py-1.5 px-2 text-right font-mono\">\n                              ${recommendation.costs.recommended.memory.toFixed(2)}/mo\n                            </td>\n                            <td className={cn(\n                              \"py-1.5 px-2 text-right font-mono\",\n                              recommendation.costs.savings.memory > 0 && \"text-green-600 dark:text-green-400\",\n                              recommendation.costs.savings.memory < 0 && \"text-red-600 dark:text-red-400\"\n                            )}>\n                              {formatCostChangePercent(recommendation.costs.current.memory, recommendation.costs.savings.memory)}\n                            </td>\n                          </tr>\n                          <tr className=\"border-t border-border\">\n                            <td className=\"py-2 font-medium\">Total</td>\n                            <td className=\"py-2 px-2 text-right font-mono font-medium\">\n                              ${recommendation.costs.current.total.toFixed(2)}/mo\n                            </td>\n                            <td className=\"py-2 px-2 text-right font-mono font-medium\">\n                              ${recommendation.costs.recommended.total.toFixed(2)}/mo\n                            </td>\n                            <td className={cn(\n                              \"py-2 px-2 text-right font-mono font-medium\",\n                              recommendation.costs.savings.total > 0 && \"text-green-600 dark:text-green-400\",\n                              recommendation.costs.savings.total < 0 && \"text-red-600 dark:text-red-400\"\n                            )}>\n                              {recommendation.costs.savings.total >= 0 ? '-' : '+'}$\n                              {Math.abs(recommendation.costs.savings.total).toFixed(2)}\n                            </td>\n                          </tr>\n                          <tr className=\"text-muted-foreground\">\n                            <td className=\"py-1\"></td>\n                            <td className=\"py-1 px-2 text-right font-mono text-xs\">\n                              ${recommendation.costs.current.yearly.toFixed(0)}/yr\n                            </td>\n                            <td className=\"py-1 px-2 text-right font-mono text-xs\">\n                              ${recommendation.costs.recommended.yearly.toFixed(0)}/yr\n                            </td>\n                            <td className={cn(\n                              \"py-1 px-2 text-right font-mono text-xs\",\n                              recommendation.costs.savings.yearly > 0 && \"text-green-600 dark:text-green-400\",\n                              recommendation.costs.savings.yearly < 0 && \"text-red-600 dark:text-red-400\"\n                            )}>\n                              {recommendation.costs.savings.yearly >= 0 ? '-' : '+'}$\n                              {Math.abs(recommendation.costs.savings.yearly).toFixed(0)}/yr\n                            </td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n\n                    {/* Summary indicator */}\n                    {recommendation.costs.savings.total > 0 ? (\n                      <div className=\"flex items-center gap-2 p-3 rounded-lg bg-green-500/10 text-green-600 dark:text-green-400\">\n                        <TrendingDown className=\"h-5 w-5 shrink-0\" />\n                        <div>\n                          <div className=\"font-medium\">\n                            ${recommendation.costs.savings.total.toFixed(2)}/mo savings\n                          </div>\n                          <div className=\"text-xs opacity-80\">\n                            ${recommendation.costs.savings.yearly.toFixed(0)}/year across {validatedReplicas} replica{validatedReplicas !== 1 ? 's' : ''}\n                          </div>\n                        </div>\n                      </div>\n                    ) : recommendation.costs.savings.total < 0 ? (\n                      <div className=\"flex items-center gap-2 p-3 rounded-lg bg-amber-500/10 text-amber-600 dark:text-amber-400\">\n                        <TrendingUp className=\"h-5 w-5 shrink-0\" />\n                        <div>\n                          <div className=\"font-medium\">\n                            +${Math.abs(recommendation.costs.savings.total).toFixed(2)}/mo increase\n                          </div>\n                          <div className=\"text-xs opacity-80\">\n                            Adds headroom for reliability\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"flex items-center gap-2 p-3 rounded-lg bg-muted text-muted-foreground\">\n                        <Info className=\"h-5 w-5 shrink-0\" />\n                        <div className=\"text-sm\">\n                          No cost change with current recommendations\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Calculation note */}\n                    <div className=\"text-xs text-muted-foreground\">\n                      {validatedReplicas} replica{validatedReplicas !== 1 ? 's' : ''} x (CPU + Memory) x {HOURS_PER_MONTH} hrs/month at {CLOUD_PRICING[cloudProvider].label} rates\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* YAML Output */}\n                <Card>\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <CardTitle className=\"text-lg\">YAML Snippet</CardTitle>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={handleCopy}\n                        className=\"gap-2\"\n                      >\n                        {copied ? (\n                          <>\n                            <Check className=\"h-4 w-4\" />\n                            Copied\n                          </>\n                        ) : (\n                          <>\n                            <Copy className=\"h-4 w-4\" />\n                            Copy\n                          </>\n                        )}\n                      </Button>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <pre className=\"p-4 rounded-lg bg-muted text-sm font-mono overflow-x-auto\">\n                      {yaml}\n                    </pre>\n                  </CardContent>\n                </Card>\n              </>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </TooltipProvider>\n  );\n}\n"],"names":["MiB","GiB","MEMORY_ROUND_VALUES","DEFAULT_COST_PER_CORE_HOUR","DEFAULT_COST_PER_GIB_HOUR","HOURS_PER_MONTH","CLOUD_PRICING","SLIDER_MAPPINGS","PRESET_SLIDER_VALUES","parseCpu","value","trimmed","milliMatch","num","coreMatch","parseMemory","binaryMatch","unit","multipliers","decimalMatch","bytesMatch","formatCpu","millicores","formatMemory","bytes","roundCpuUp","rounded","step","roundMemoryUp","minBytes","target","normalizePercentiles","input","p95","max","p50","p99","getSliderConfig","slider","mapping","calculateRecommendation","usage","current","replicas","costPerCoreHour","costPerGiBHour","validatedReplicas","config","reasoning","warnings","rawCpuRequests","rawCpuLimits","rawMemRequests","rawMemLimits","cpuRequests","cpuLimits","memRequests","memLimits","currentCpuMonthly","currentMemMonthly","currentTotal","recCpuMonthly","recMemMonthly","recTotal","cpuSavings","memSavings","totalSavings","monthlySavings","yearlySavings","generateYaml","recommendation","DEFAULT_FORM","PRESETS","CPU_PRESETS","MEMORY_PRESETS","getRiskColor","risk","formatCostChangePercent","savings","percent","ResourceInput","id","label","onChange","placeholder","presets","tooltip","open","setOpen","useState","jsxs","jsx","Label","Tooltip","TooltipTrigger","HelpCircle","TooltipContent","Input","e","cn","K8sRightsizer","form","setForm","setSlider","preset","setPreset","copied","setCopied","activeTab","setActiveTab","cloudProvider","setCloudProvider","debouncedForm","setDebouncedForm","isPending","startTransition","useTransition","useEffect","timeout","updateField","useCallback","field","prev","handlePresetChange","newPreset","trackToolEvent","handleSliderChange","values","error","useMemo","currentCpu","currentMem","cpuInput","cpuPercentiles","memInput","memPercentiles","pricing","yaml","handleCopy","sliderLabel","TooltipProvider","Card","CardHeader","CardTitle","CardContent","p","Info","v","Tabs","TabsList","TabsTrigger","TabsContent","Slider","AlertTriangle","Fragment","Badge","warning","i","r","Select","SelectTrigger","SelectValue","SelectContent","key","SelectItem","TrendingDown","TrendingUp","Button","Check","Copy"],"mappings":"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"}