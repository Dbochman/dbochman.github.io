const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BillingTrendChart-ryYnr6-x.js","assets/vendor-DeyLhXpq.js","assets/monitoring-C74x5Iy6.js","assets/ui-BQCqNqg0.js","assets/CategoricalChart-duV1COC7.js","assets/index-C80gN8Bw.js","assets/theme-CfHJhC9-.js","assets/index-jxszhRjV.css","assets/string-B1tyo_-o.js","assets/band-CquvqAHh.js","assets/init-Dmth1JHB.js","assets/ordinal-DILIJJjt.js","assets/linear-DQdcXjjB.js","assets/defaultLocale-DX6XiGOO.js","assets/time-CutwCmSq.js","assets/AreaChart-nwQ3LCOb.js","assets/getRadiusAndStrokeWidthFromDot-Ygmr1NzX.js","assets/CartesianChart-CwdFezkh.js","assets/graphicalItemSelectors-CWW1-rcR.js","assets/BlogTrafficChart-O8HGRTbv.js","assets/Legend-VtQ-yhzb.js","assets/Symbols-CIEB9ePZ.js","assets/math-CRUJxRjv.js","assets/BlogTagBreakdownChart-B819PMF7.js","assets/BarChart-D5FL-1Qk.js","assets/tooltipContext-BZteuLS_.js","assets/ActiveShapeUtils-DxNGgqWV.js","assets/ErrorBarContext-EZSLdsfv.js","assets/SessionsTrendChart-RvSmk7dj.js","assets/DeviceBreakdownChart-C7NgThAf.js","assets/PieChart-BYAijRwB.js","assets/TrafficSourcesChart-B3GSWpOP.js","assets/LighthouseHistoryChart-C2FUrSrM.js","assets/ReferenceLine-CsS3UFc3.js","assets/SearchPerformanceChart-BY5EnBgd.js"])))=>i.map(i=>d[i]);
import{C as c,a as x,b as f,e as d,c as z,h as oe,i as ce,j as de,k as me,_ as M,m as _,s as xe,n as G,v as $}from"./index-C80gN8Bw.js";import{r as m,j as e,aq as ne,T as ue,ap as he,av as J,aw as ge,ax as pe,g as je,d as fe,ay as se,az as be,aA as Ne,F as ye,ao as ve,aB as we,aC as Se,G as te,aD as ae,aE as H,aF as Te}from"./vendor-DeyLhXpq.js";import{T as Pe,a as B}from"./tabs-Cta2-_OZ.js";import{R as Ce}from"./responsive-tabs-DqFY1am2.js";import{P as le}from"./progress-RJ5Nz_g0.js";import{a as ke}from"./index-pVHqBa-9.js";import{A as Le}from"./index-DJOPpxvg.js";function Q(s){const t=new Map;for(const a of s){const r=t.get(a.date);r?a.timestamp&&r.timestamp&&a.timestamp>r.timestamp&&t.set(a.date,a):t.set(a.date,a)}return Array.from(t.values()).sort((a,r)=>a.date.localeCompare(r.date))}async function F(s){try{const t=await fetch(s);return t.status===404?{status:"missing"}:t.ok?{status:"success",data:await t.json()}:{status:"error",message:`HTTP ${t.status}: ${t.statusText}`}}catch(t){return{status:"error",message:t instanceof Error?t.message:"Network error"}}}function _e(){const[s,t]=m.useState({latest:null,ga4History:[],searchHistory:[],lighthouseSummary:[],billingHistory:[],isLoading:!0,error:null,warning:null});return m.useEffect(()=>{async function a(){const[r,n,o,u,N]=await Promise.all([F("/metrics/latest.json"),F("/metrics/ga4-history.json"),F("/metrics/search-console-history.json"),F("/lighthouse-reports/summary.json"),F("/metrics/github-billing-history.json")]),h=[],g=[],i=[{name:"latest.json",result:r},{name:"ga4-history.json",result:n},{name:"search-console-history.json",result:o},{name:"lighthouse summary",result:u},{name:"github-billing-history.json",result:N}];for(const{name:L,result:D}of i)D.status==="missing"?h.push(L):D.status==="error"&&g.push(`${L}: ${D.message}`);if(g.length>0){t(L=>({...L,isLoading:!1,error:`Failed to load: ${g.join("; ")}`,warning:null}));return}const P=h.length>0?`Some metrics data unavailable: ${h.join(", ")}`:null;t({latest:r.status==="success"?r.data:null,ga4History:n.status==="success"?Q(n.data):[],searchHistory:o.status==="success"?Q(o.data):[],lighthouseSummary:u.status==="success"?u.data:[],billingHistory:N.status==="success"?Q(N.data):[],isLoading:!1,error:null,warning:P})}a()},[]),s}const k=m.memo(function({title:t,value:a,icon:r,subtitle:n,trend:o,status:u}){const N={good:"text-emerald-500",warning:"text-amber-500",critical:"text-red-500"};return e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:t}),r&&e.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsx("div",{className:z("text-2xl font-bold",u&&N[u]),children:a}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n}),o!==void 0&&e.jsxs("div",{className:z("flex items-center text-xs",o>=0?"text-emerald-500":"text-red-500"),children:[o>=0?e.jsx(ne,{className:"h-3 w-3 mr-1"}):e.jsx(ue,{className:"h-3 w-3 mr-1"}),Math.abs(o).toFixed(0),"%"]})]})]})]})}),Ae=[{label:"LCP",key:"lcp",unit:"s",thresholds:{good:2.5,poor:4},parse:s=>parseFloat(s.replace(/[^\d.]/g,""))},{label:"FCP",key:"fcp",unit:"s",thresholds:{good:1.8,poor:3},parse:s=>parseFloat(s.replace(/[^\d.]/g,""))},{label:"CLS",key:"cls",unit:"",thresholds:{good:.1,poor:.25},parse:s=>parseFloat(s)||0},{label:"TBT",key:"tbt",unit:"ms",thresholds:{good:200,poor:600},parse:s=>parseFloat(s.replace(/[^\d.]/g,""))}];function Ve(s,t){return s<=t.good?"good":s<=t.poor?"warning":"critical"}function Me({data:s}){if(s.length===0)return e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Core Web Vitals"})}),e.jsx(d,{children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"No data available"})})]});const t=s.find(a=>a.page==="home")??s[0];return e.jsxs(c,{children:[e.jsxs(x,{children:[e.jsx(f,{children:"Core Web Vitals"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Based on ",t.page," page"]})]}),e.jsx(d,{className:"space-y-4",children:Ae.map(a=>{const r=t[a.key],n=a.parse(r),o=Ve(n,a.thresholds),u=Math.min(n/a.thresholds.poor*100,100),N={good:"Good",warning:"Needs Improvement",critical:"Poor"};return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:a.label}),e.jsxs("span",{className:z("font-mono",{"text-emerald-500":o==="good","text-amber-500":o==="warning","text-red-500":o==="critical"}),children:[r,e.jsxs("span",{className:"text-muted-foreground text-xs ml-2",children:["(",N[o],")"]})]})]}),e.jsx(le,{value:u,className:"h-2","aria-label":`${a.label}: ${r}`}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Good: ≤",a.thresholds.good,a.unit]}),e.jsxs("span",{children:["Poor: >",a.thresholds.poor,a.unit]})]})]},a.key)})})]})}const De=[{key:"LCP",label:"Largest Contentful Paint",thresholds:{good:2500,poor:4e3},format:s=>`${(s/1e3).toFixed(2)}s`},{key:"FCP",label:"First Contentful Paint",thresholds:{good:1800,poor:3e3},format:s=>`${(s/1e3).toFixed(2)}s`},{key:"CLS",label:"Cumulative Layout Shift",thresholds:{good:.1,poor:.25},format:s=>s.toFixed(4)},{key:"INP",label:"Interaction to Next Paint",thresholds:{good:200,poor:500},format:s=>`${Math.round(s)}ms`},{key:"TTFB",label:"Time to First Byte",thresholds:{good:800,poor:1800},format:s=>`${Math.round(s)}ms`}];function Re(s,t){return s<=t.good?"good":s<=t.poor?"warning":"critical"}function $e({data:s}){if(!s||!s.metrics||Object.keys(s.metrics).length===0)return e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Real User Metrics"})}),e.jsx(d,{children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"No RUM data available yet. Data will appear after users visit the site."})})]});const t={good:"Good",warning:"Needs Improvement",critical:"Poor"};return e.jsxs(c,{children:[e.jsxs(x,{children:[e.jsx(f,{children:"Real User Metrics"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Field data from ",s.metrics.LCP?.count||s.metrics.FCP?.count||0,"+ sessions"]})]}),e.jsx(d,{className:"space-y-4",children:De.map(a=>{const r=s.metrics[a.key];if(!r)return null;const n=r.average,o=Re(n,a.thresholds),u=Math.min(n/a.thresholds.poor*100,100);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:a.key}),e.jsxs("span",{className:z("font-mono",{"text-emerald-500":o==="good","text-amber-500":o==="warning","text-red-500":o==="critical"}),children:[a.format(n),e.jsxs("span",{className:"text-muted-foreground text-xs ml-2",children:["(",t[o],")"]})]})]}),e.jsx(le,{value:u,className:"h-2","aria-label":`${a.key}: ${a.format(n)}`}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Good: ≤",a.key==="CLS"?a.thresholds.good:`${a.thresholds.good}ms`]}),e.jsxs("span",{children:["Poor: >",a.key==="CLS"?a.thresholds.poor:`${a.thresholds.poor}ms`]})]})]},a.key)})})]})}function K({score:s}){const t=s>=90?"good":s>=70?"warning":"critical";return e.jsx("span",{className:z("inline-flex items-center justify-center w-10 h-6 rounded text-xs font-medium",{"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":t==="good","bg-amber-500/20 text-amber-600 dark:text-amber-400":t==="warning","bg-red-500/20 text-red-600 dark:text-red-400":t==="critical"}),children:s})}function Be({data:s}){return s.length===0?e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Lighthouse Scores by Page"})}),e.jsx(d,{children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"No data available"})})]}):e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Lighthouse Scores by Page"})}),e.jsx(d,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 font-medium",children:"Page"}),e.jsx("th",{className:"text-center py-2 font-medium",children:"Perf"}),e.jsx("th",{className:"text-center py-2 font-medium",children:"A11y"}),e.jsx("th",{className:"text-center py-2 font-medium",children:"SEO"}),e.jsx("th",{className:"text-center py-2 font-medium",children:"BP"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"LCP"}),e.jsx("th",{className:"text-right py-2 font-medium",children:"CLS"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"border-b border-border/50",children:[e.jsx("td",{className:"py-2",children:e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:t.page})}),e.jsx("td",{className:"text-center py-2",children:e.jsx(K,{score:t.performance})}),e.jsx("td",{className:"text-center py-2",children:e.jsx(K,{score:t.accessibility})}),e.jsx("td",{className:"text-center py-2",children:e.jsx(K,{score:t.seo})}),e.jsx("td",{className:"text-center py-2",children:e.jsx(K,{score:t.bestPractices})}),e.jsx("td",{className:"text-right py-2 font-mono text-xs",children:t.lcp}),e.jsx("td",{className:"text-right py-2 font-mono text-xs",children:t.cls})]},t.page))})]})})})]})}const Fe=[/this-page-does-not-exist/i,/test-route/i,/404-test/i,/non-existent/i,/__test__/i,/\/e2e\//i],Ie=[/wp-admin/i,/wp-login/i,/wp-content/i,/xmlrpc\.php/i,/\.env/i,/\.git/i,/\.php$/i,/admin/i,/phpmyadmin/i,/\.sql/i,/\.bak/i,/\.zip/i,/\.tar/i,/cgi-bin/i,/\.asp/i,/\.aspx/i];function Ee(s){const t=s.page;for(const r of Fe)if(r.test(t))return{...s,trafficType:"ci",reason:`Matches test pattern: ${r.source}`};for(const r of Ie)if(r.test(t))return{...s,trafficType:"bot",reason:`Matches bot probe pattern: ${r.source}`};const a=s.users>0?s.sessions/s.users:1;return a>=.95&&a<=1.05&&s.sessions>=50?{...s,trafficType:"synthetic",reason:`Near 1:1 session/user ratio (${a.toFixed(2)}) suggests automated traffic`}:{...s,trafficType:"human",reason:"Normal traffic pattern"}}function ze(s){const t=s.map(Ee);let a=0,r=0,n=0,o=0;const u=[];for(const g of t)switch(g.trafficType){case"human":a+=g.sessions;break;case"ci":r+=g.sessions,u.push(g);break;case"bot":n+=g.sessions,u.push(g);break;case"synthetic":o+=g.sessions,u.push(g);break}const N=a+r+n+o,h=r+n+o;return{totalSessions:N,humanSessions:a,ciSessions:r,botSessions:n,syntheticSessions:o,humanPercentage:N>0?a/N*100:100,syntheticPercentage:N>0?h/N*100:0,flaggedPages:u.sort((g,i)=>i.sessions-g.sessions)}}function Oe(s){switch(s){case"human":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"ci":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"bot":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";case"synthetic":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}}function Ue({topPages:s}){const t=m.useMemo(()=>ze(s),[s]);return e.jsxs(c,{children:[e.jsx(x,{className:"pb-3",children:e.jsxs(f,{className:"text-base font-medium flex items-center gap-2",children:["Traffic Quality",e.jsx(oe,{children:e.jsxs(ce,{children:[e.jsx(de,{children:e.jsx(he,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(me,{className:"max-w-xs",children:e.jsx("p",{children:"Estimates traffic quality based on URL patterns and session/user ratios. CI traffic from automated tests and bot probes are flagged."})})]})})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-green-100 dark:bg-green-900/30",children:e.jsx(J,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Human"}),e.jsx("p",{className:"text-sm font-medium tabular-nums",children:t.humanSessions.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-blue-100 dark:bg-blue-900/30",children:e.jsx(ge,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"CI"}),e.jsx("p",{className:"text-sm font-medium tabular-nums",children:t.ciSessions.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-orange-100 dark:bg-orange-900/30",children:e.jsx(pe,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bot"}),e.jsx("p",{className:"text-sm font-medium tabular-nums",children:t.botSessions.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-yellow-100 dark:bg-yellow-900/30",children:e.jsx(je,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Synthetic"}),e.jsx("p",{className:"text-sm font-medium tabular-nums",children:t.syntheticSessions.toLocaleString()})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Traffic Composition"}),e.jsxs("span",{children:[t.humanPercentage.toFixed(1),"% human"]})]}),e.jsxs("div",{className:"h-2 rounded-full bg-muted overflow-hidden flex",children:[t.humanSessions>0&&e.jsx("div",{className:"bg-green-500 h-full",style:{width:`${t.humanSessions/t.totalSessions*100}%`}}),t.ciSessions>0&&e.jsx("div",{className:"bg-blue-500 h-full",style:{width:`${t.ciSessions/t.totalSessions*100}%`}}),t.botSessions>0&&e.jsx("div",{className:"bg-orange-500 h-full",style:{width:`${t.botSessions/t.totalSessions*100}%`}}),t.syntheticSessions>0&&e.jsx("div",{className:"bg-yellow-500 h-full",style:{width:`${t.syntheticSessions/t.totalSessions*100}%`}})]})]}),t.flaggedPages.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Flagged Pages"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:t.flaggedPages.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-center justify-between text-xs py-1 border-b border-border/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium uppercase ${Oe(a.trafficType)}`,children:a.trafficType}),e.jsx("span",{className:"font-mono truncate max-w-[150px]",children:a.page})]}),e.jsx("span",{className:"text-muted-foreground tabular-nums",children:a.sessions.toLocaleString()})]},a.page))}),t.flaggedPages.length>5&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",t.flaggedPages.length-5," more flagged"]})]}),t.flaggedPages.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:"No synthetic traffic detected in top pages"})]})]})}const Ge=m.lazy(()=>M(()=>import("./BillingTrendChart-ryYnr6-x.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])).then(s=>({default:s.BillingTrendChart}))),He=m.memo(function({data:t}){if(t.length===0)return e.jsx(c,{children:e.jsx(d,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No GitHub Actions billing data available yet."})})});const a=t[t.length-1],{summary:r,byRunner:n,byRepository:o,storage:u,period:N}=a,h=r.totalGrossAmount>0?(r.totalDiscountAmount/r.totalGrossAmount*100).toFixed(0):"100";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:"Total Minutes"}),e.jsx(fe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.totalMinutes.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:N.description})]})]}),e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:"Savings"}),e.jsx(se,{className:"h-4 w-4 text-emerald-500"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"text-2xl font-bold text-emerald-500",children:["$",r.totalDiscountAmount.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h,"% from free tier"]})]})]}),e.jsxs(c,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:"Net Cost"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:`text-2xl font-bold ${r.totalNetAmount===0?"text-emerald-500":""}`,children:["$",r.totalNetAmount.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"actual spend"})]})]})]}),t.length>1&&e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Minutes Over Time"})}),e.jsx(d,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"h-48 bg-muted rounded animate-pulse"}),children:e.jsx(Ge,{data:t})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(c,{children:[e.jsx(x,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"Resource Usage"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-3",children:[Object.entries(n).filter(([,g])=>g.minutes>0).map(([g,i])=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[e.jsxs("span",{className:"text-sm font-medium capitalize",children:[g," runners"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-sm tabular-nums",children:[i.minutes.toLocaleString()," min"]}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["($",i.grossAmount.toFixed(2),")"]})]})]},g)),u.gbHours>0&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Artifact storage"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-sm tabular-nums",children:[u.gbHours.toFixed(2)," GB-hrs"]}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["($",u.grossAmount.toFixed(2),")"]})]})]})]})})]}),e.jsxs(c,{children:[e.jsx(x,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Usage by Repository"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:o.slice(0,5).map(g=>{const i=r.totalMinutes>0?(g.minutes/r.totalMinutes*100).toFixed(0):0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-mono truncate max-w-[180px]",children:g.name}),e.jsxs("span",{className:"text-sm tabular-nums",children:[g.minutes.toLocaleString()," min"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:e.jsx("div",{className:"bg-primary rounded-full h-1.5 transition-all",style:{width:`${i}%`}})})]},g.name)})})})]})]})]})}),Ke=m.lazy(()=>M(()=>import("./BlogTrafficChart-O8HGRTbv.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22])).then(s=>({default:s.BlogTrafficChart}))),We=m.lazy(()=>M(()=>import("./BlogTagBreakdownChart-B819PMF7.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,13,14,24,25,26,21,22,27,17,18])).then(s=>({default:s.BlogTagBreakdownChart})));function Y(s){return s.replace("/blog/","").replace(/\/$/,"")}const qe={"adventures-in-ai-assisted-web-development":"2026-01-05-notes-on-building-this-site-together","2025-01-07-adventures-in-ai-assisted-web-development":"2026-01-05-notes-on-building-this-site-together","2026-01-getting-started-with-sre":"hello-world","2026-02-04-andre-collaborative-music-queue":"2026-02-04-echonest-collaborative-music-queue","2026-01-24-postmortems-that-actually-change-things":"2026-01-24-retrospectives-that-actually-change-things","2026-01-23-slo-math-most-teams-get-wrong":"2026-01-21-the-slo-math-most-teams-get-wrong"};function Qe(s){return s.replace(/^2025-/,"2026-")}function Ye(s){const t=new Map(s.map(n=>[n.slug,n])),a=new Map;for(const n of s){const o=n.slug.replace(/^\d{4}-\d{2}-\d{2}-/,"");a.set(o,n)}const r=new Map;for(const n of s){const o=n.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");r.set(o,n)}return{bySlug:t,byStrippedSlug:a,byTitleKey:r}}function I(s,t){const a=qe[s];if(a){const h=t.bySlug.get(a);if(h)return h}const r=t.bySlug.get(s);if(r)return r;const n=Qe(s);if(n!==s){const h=t.bySlug.get(n);if(h)return h}const o=s.replace(/^\d{4}-\d{2}-\d{2}-/,""),u=t.byStrippedSlug.get(o);if(u)return u;const N=o.replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");if(N.length>=10){const h=t.byTitleKey.get(N);if(h)return h}}function E(s){const t=new Map;for(const a of s.topPages??[]){if(!a.page.startsWith("/blog/")||a.page==="/blog/"||a.page==="/blog")continue;const r=a.page.replace(/\/$/,""),n=t.get(r);n?(n.sessions+=a.sessions,n.users+=a.users,n.pageViews+=a.pageViews):t.set(r,{sessions:a.sessions,users:a.users,pageViews:a.pageViews})}return t}function Je({ga4History:s,latestGA4:t}){const[a,r]=m.useState("sessions"),[n,o]=m.useState(!1),[u,N]=m.useState("totalSessions"),[h,g]=m.useState(!1),i=m.useMemo(()=>ke(),[]),P=m.useMemo(()=>Ye(i),[i]),L=m.useMemo(()=>{const l=E(t??{topPages:[]}),j=Array.from(l.entries()).map(([p,v])=>{const S=Y(p),C=I(S,P);return{path:p,slug:S,title:C?.title??S,author:C?.author??"—",date:C?.date??"",tags:C?.tags??[],category:C?.category??"Uncategorized",readingTime:C?.readingTime??"—",matched:!!C,...v}}),y=j.reduce((p,v)=>p+v.sessions,0),w=j.length>0?j.reduce((p,v)=>v.sessions>p.sessions?v:p,j[0]):null;return{rows:j,totalSessions:y,topPost:w}},[t,P]),D=m.useMemo(()=>{if(s.length<2)return;const l=[...s].sort((v,S)=>new Date(S.date).getTime()-new Date(v.date).getTime()),j=l[0],y=l[1];if(!j||!y)return;const w=Array.from(E(j).values()).reduce((v,S)=>v+S.sessions,0),p=Array.from(E(y).values()).reduce((v,S)=>v+S.sessions,0);if(p!==0)return Math.round((w-p)/p*100)},[s]),A=m.useMemo(()=>{const l=new Map;for(const p of s){const v=E(p);for(const[S,C]of v){const X=Y(S),Z=I(X,P)?.slug??X,R=l.get(Z);if(R){R.totalSessions+=C.sessions,R.totalViews+=C.pageViews;const ee=new Date(p.date).getTime();ee<new Date(R.firstSeen).getTime()&&(R.firstSeen=p.date),ee>new Date(R.lastSeen).getTime()&&(R.lastSeen=p.date)}else l.set(Z,{totalSessions:C.sessions,totalViews:C.pageViews,firstSeen:p.date,lastSeen:p.date})}}const j=s.length>0?[...s].sort((p,v)=>new Date(v.date).getTime()-new Date(p.date).getTime())[0].date:"",y=Array.from(l.entries()).map(([p,v])=>{const S=I(p,P);return{slug:p,title:S?.title??p,matched:!!S,recentlyActive:v.lastSeen===j,...v}}),w=y.reduce((p,v)=>p+v.totalViews,0);return{rows:y,totalAllTimeViews:w}},[s,P]),V=m.useMemo(()=>{const l=new Map;for(const j of s){const y=E(j);for(const[w,p]of y){const v=Y(w),S=I(v,P);if(S)for(const C of S.tags)l.set(C,(l.get(C)??0)+p.sessions)}}return Array.from(l.entries()).map(([j,y])=>({tag:j,sessions:y})).sort((j,y)=>y.sessions-j.sessions)},[s,P]),b=m.useMemo(()=>[...L.rows].sort((j,y)=>{let w=0;switch(a){case"title":w=j.title.localeCompare(y.title);break;case"date":w=new Date(j.date||0).getTime()-new Date(y.date||0).getTime();break;case"sessions":w=j.sessions-y.sessions;break;case"users":w=j.users-y.users;break;case"pageViews":w=j.pageViews-y.pageViews;break}return n?w:-w}).slice(0,5),[L.rows,a,n]),T=m.useMemo(()=>[...A.rows].sort((j,y)=>{let w=0;switch(u){case"title":w=j.title.localeCompare(y.title);break;case"totalSessions":w=j.totalSessions-y.totalSessions;break;case"totalViews":w=j.totalViews-y.totalViews;break}return h?w:-w}),[A.rows,u,h]),O=l=>{a===l?o(!n):(r(l),o(!1))},W=l=>{u===l?g(!h):(N(l),g(!1))},U=l=>a===l?n?" ↑":" ↓":null,q=l=>u===l?h?" ↑":" ↓":null,ie=({active:l})=>l?e.jsx(ne,{className:"w-3 h-3 text-green-500 inline ml-1"}):e.jsx(Se,{className:"w-3 h-3 text-muted-foreground inline ml-1"});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(k,{title:"Blog Sessions (7d)",value:L.totalSessions.toLocaleString(),icon:J,trend:D}),e.jsx(k,{title:"Total Blog Posts",value:i.length.toLocaleString(),icon:ye}),e.jsx(k,{title:"Top Post (7d)",value:L.topPost?.title??"—",icon:ve,subtitle:L.topPost?`${L.topPost.sessions} sessions`:void 0}),e.jsx(k,{title:"All-Time Views",value:A.totalAllTimeViews.toLocaleString(),icon:we,subtitle:"cumulative blog page views"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:e.jsxs(c,{className:"lg:col-span-2",children:[e.jsx(x,{children:e.jsx(f,{children:"Blog Traffic Over Time"})}),e.jsx(d,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-muted rounded animate-pulse"}),children:e.jsx(Ke,{data:s,postLookups:P,matchPost:I})})})]})}),e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Tag Breakdown (All-Time)"})}),e.jsx(d,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-muted rounded animate-pulse"}),children:e.jsx(We,{tagData:V})})})]}),b.length>0&&e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Post Performance (7d)"})}),e.jsx(d,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsxs("th",{className:"text-left py-2 font-medium cursor-pointer select-none",onClick:()=>O("title"),children:["Title",U("title")]}),e.jsxs("th",{className:"text-left py-2 pl-4 font-medium hidden md:table-cell cursor-pointer select-none",onClick:()=>O("date"),children:["Date",U("date")]}),e.jsxs("th",{className:"text-right py-2 pl-4 font-medium cursor-pointer select-none",onClick:()=>O("sessions"),children:["Sessions",U("sessions")]}),e.jsxs("th",{className:"text-right py-2 pl-4 font-medium hidden sm:table-cell cursor-pointer select-none",onClick:()=>O("pageViews"),children:["Views",U("pageViews")]})]})}),e.jsx("tbody",{children:b.map(l=>e.jsxs("tr",{className:"border-b border-border/50",children:[e.jsx("td",{className:"py-2 truncate max-w-[250px]",title:l.title,children:l.title}),e.jsx("td",{className:"py-2 pl-4 font-mono text-xs text-muted-foreground hidden md:table-cell",children:l.date}),e.jsx("td",{className:"text-right py-2 pl-4 tabular-nums",children:l.sessions.toLocaleString()}),e.jsx("td",{className:"text-right py-2 pl-4 tabular-nums hidden sm:table-cell",children:l.pageViews.toLocaleString()})]},l.path))})]})})})]}),T.length>0&&e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"All-Time Leaderboard"})}),e.jsx(d,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsxs("th",{className:"text-left py-2 font-medium cursor-pointer select-none",onClick:()=>W("title"),children:["Title",q("title")]}),e.jsxs("th",{className:"text-right py-2 pl-4 font-medium cursor-pointer select-none",onClick:()=>W("totalSessions"),children:["Sessions",q("totalSessions")]}),e.jsxs("th",{className:"text-right py-2 pl-4 font-medium hidden sm:table-cell cursor-pointer select-none",onClick:()=>W("totalViews"),children:["Views",q("totalViews")]}),e.jsx("th",{className:"text-left py-2 pl-4 font-medium hidden md:table-cell",children:"First Seen"}),e.jsx("th",{className:"text-center py-2 pl-4 font-medium hidden lg:table-cell",children:"Trend"})]})}),e.jsx("tbody",{children:T.map(l=>e.jsxs("tr",{className:"border-b border-border/50",children:[e.jsx("td",{className:"py-2 truncate max-w-[250px]",title:l.title,children:l.title}),e.jsx("td",{className:"text-right py-2 pl-4 tabular-nums",children:l.totalSessions.toLocaleString()}),e.jsx("td",{className:"text-right py-2 pl-4 tabular-nums hidden sm:table-cell",children:l.totalViews.toLocaleString()}),e.jsx("td",{className:"py-2 pl-4 font-mono text-xs text-muted-foreground hidden md:table-cell",children:l.firstSeen}),e.jsx("td",{className:"text-center py-2 pl-4 hidden lg:table-cell",children:e.jsx(ie,{active:l.recentlyActive})})]},l.slug))})]})})})]})]})}const Xe=m.lazy(()=>M(()=>import("./SessionsTrendChart-RvSmk7dj.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])).then(s=>({default:s.SessionsTrendChart}))),Ze=m.lazy(()=>M(()=>import("./DeviceBreakdownChart-C7NgThAf.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,8,9,10,11,12,13,14,30,25,26,21,22,20])).then(s=>({default:s.DeviceBreakdownChart}))),es=m.lazy(()=>M(()=>import("./TrafficSourcesChart-B3GSWpOP.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,8,9,10,11,12,13,14,24,25,26,21,22,27,17,18])).then(s=>({default:s.TrafficSourcesChart}))),ss=m.lazy(()=>M(()=>import("./LighthouseHistoryChart-C2FUrSrM.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,24,25,26,21,22,27,17,18,33])).then(s=>({default:s.LighthouseHistoryChart}))),ts=m.lazy(()=>M(()=>import("./SearchPerformanceChart-BY5EnBgd.js"),__vite__mapDeps([34,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22])).then(s=>({default:s.SearchPerformanceChart}))),re=[{value:"search",label:"Search"},{value:"traffic",label:"Traffic"},{value:"blog",label:"Blog"},{value:"performance",label:"Performance",mobileLabel:"Perf"},{value:"tools",label:"Tools"},{value:"cicd",label:"CI/CD"}];function ms(){const{latest:s,ga4History:t,searchHistory:a,lighthouseSummary:r,billingHistory:n,isLoading:o,error:u,warning:N}=_e(),[h,g]=m.useState("search");if(o)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading analytics data..."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((b,T)=>e.jsxs(c,{className:"animate-pulse",children:[e.jsx(x,{className:"pb-2",children:e.jsx("div",{className:"h-4 bg-muted rounded w-24"})}),e.jsx(d,{children:e.jsx("div",{className:"h-8 bg-muted rounded w-16"})})]},T))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-10 bg-muted rounded w-64 animate-pulse"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(c,{className:"lg:col-span-2 animate-pulse",children:[e.jsx(x,{children:e.jsx("div",{className:"h-6 bg-muted rounded w-40"})}),e.jsx(d,{children:e.jsx("div",{className:"h-64 bg-muted rounded"})})]}),e.jsxs(c,{className:"animate-pulse",children:[e.jsx(x,{children:e.jsx("div",{className:"h-6 bg-muted rounded w-36"})}),e.jsx(d,{children:e.jsx("div",{className:"h-64 bg-muted rounded"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(c,{className:"animate-pulse",children:[e.jsx(x,{children:e.jsx("div",{className:"h-6 bg-muted rounded w-32"})}),e.jsx(d,{children:e.jsx("div",{className:"h-64 bg-muted rounded"})})]}),e.jsxs(c,{className:"animate-pulse",children:[e.jsx(x,{children:e.jsx("div",{className:"h-6 bg-muted rounded w-28"})}),e.jsx(d,{children:e.jsx("div",{className:"h-48 bg-muted rounded"})})]})]}),e.jsxs(c,{className:"animate-pulse",children:[e.jsx(x,{children:e.jsx("div",{className:"h-6 bg-muted rounded w-32"})}),e.jsx(d,{children:e.jsx("div",{className:"h-64 bg-muted rounded"})})]})]})]});if(u)return e.jsx(c,{className:"border-destructive",role:"alert",children:e.jsx(d,{className:"pt-6",children:e.jsxs("p",{className:"text-destructive",children:["Failed to load analytics data: ",u]})})});const i=t[t.length-1],P=t[t.length-2],L=i?.toolInteractions?re:re.filter(b=>b.value!=="tools"),D=i?.summary?.sessions!=null&&P?.summary?.sessions!=null&&P.summary.sessions>0?(i.summary.sessions-P.summary.sessions)/P.summary.sessions*100:void 0,A=r.length>0?Math.round(r.reduce((b,T)=>b+T.performance,0)/r.length):null,V=a[a.length-1];return e.jsxs("div",{className:"space-y-6",children:[N&&e.jsx(c,{className:"border-yellow-500/50 bg-yellow-500/10",role:"status",children:e.jsx(d,{className:"pt-6",children:e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:N})})}),e.jsxs(_.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",variants:xe,initial:"hidden",animate:"visible",children:[e.jsx(_.div,{variants:G,children:e.jsx(k,{title:"Sessions (7d)",value:i?.summary?.sessions?.toLocaleString()??"—",icon:J,trend:D})}),e.jsx(_.div,{variants:G,children:e.jsx(k,{title:"Lighthouse Perf",value:A!==null?`${A}`:"—",icon:te,subtitle:"avg across pages",status:A!==null?A>=90?"good":A>=70?"warning":"critical":void 0})}),e.jsx(_.div,{variants:G,children:e.jsx(k,{title:"Impressions (7d)",value:V?.summary?.totalImpressions?.toLocaleString()??"—",icon:ae})}),e.jsx(_.div,{variants:G,children:e.jsx(k,{title:"Bounce Rate",value:i?.summary?.bounceRate!=null?`${(i.summary.bounceRate*100).toFixed(0)}%`:"—",icon:H,status:i?.summary?.bounceRate!=null?i.summary.bounceRate<=.5?"good":i.summary.bounceRate<=.7?"warning":"critical":void 0})})]}),e.jsxs(Pe,{value:h,onValueChange:g,className:"space-y-4",children:[e.jsx(Ce,{items:L,value:h,onValueChange:g,tabsListClassName:"w-full sm:w-auto"}),e.jsxs(Le,{mode:"wait",children:[h==="traffic"&&e.jsx(_.div,{variants:$,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(B,{value:"traffic",className:"space-y-4",forceMount:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(c,{className:"lg:col-span-2",children:[e.jsx(x,{children:e.jsx(f,{children:"Sessions Over Time"})}),e.jsx(d,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-muted rounded animate-pulse"}),children:e.jsx(Xe,{data:t})})})]}),e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Device Breakdown"})}),e.jsx(d,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-muted rounded animate-pulse"}),children:e.jsx(Ze,{data:i?.deviceBreakdown??[]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Traffic Sources"})}),e.jsx(d,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-muted rounded animate-pulse"}),children:e.jsx(es,{data:i?.trafficSources})})})]}),i?.trafficSources?.sources&&i.trafficSources.sources.length>0&&e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Top Referrers"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:i.trafficSources.sources.slice(0,6).map((b,T)=>e.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-border/50 last:border-0",children:[e.jsxs("span",{className:"text-sm font-mono truncate max-w-[200px]",children:[b.source," / ",b.medium]}),e.jsx("span",{className:"text-sm tabular-nums text-muted-foreground",children:b.sessions.toLocaleString()})]},T))})})]}),i?.topPages&&i.topPages.length>0&&e.jsx(Ue,{topPages:i.topPages})]}),i?.topPages&&i.topPages.length>0&&e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Top Pages (7d)"})}),e.jsx(d,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 font-medium",children:"Page"}),e.jsx("th",{className:"text-right py-2 pl-4 font-medium",children:"Sessions"}),e.jsx("th",{className:"text-right py-2 pl-4 font-medium",children:"Users"}),e.jsx("th",{className:"text-right py-2 pl-4 font-medium hidden sm:table-cell",children:"Views"})]})}),e.jsx("tbody",{children:i.topPages.slice(0,10).map(b=>e.jsxs("tr",{className:"border-b border-border/50",children:[e.jsx("td",{className:"py-2 font-mono text-xs truncate max-w-[150px] sm:max-w-[200px]",children:b.page}),e.jsx("td",{className:"text-right py-2 pl-4 tabular-nums",children:b.sessions.toLocaleString()}),e.jsx("td",{className:"text-right py-2 pl-4 tabular-nums",children:b.users.toLocaleString()}),e.jsx("td",{className:"text-right py-2 pl-4 tabular-nums hidden sm:table-cell",children:b.pageViews.toLocaleString()})]},b.page))})]})})})]})]})},"traffic"),h==="blog"&&e.jsx(_.div,{variants:$,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx(B,{value:"blog",className:"space-y-4",forceMount:!0,children:e.jsx(Je,{ga4History:t,latestGA4:i})})},"blog"),h==="performance"&&e.jsx(_.div,{variants:$,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(B,{value:"performance",className:"space-y-4",forceMount:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Lab Data (Lighthouse)"}),e.jsx(Me,{data:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Field Data (Real Users)"}),e.jsx($e,{data:s?.webVitals})]})]}),e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Lighthouse Scores by Page"})}),e.jsx(d,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-muted rounded animate-pulse"}),children:e.jsx(ss,{data:r})})})]}),e.jsx(Be,{data:r})]})},"performance"),h==="search"&&e.jsx(_.div,{variants:$,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(B,{value:"search",className:"space-y-4",forceMount:!0,children:[e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{children:"Search Performance"})}),e.jsx(d,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-muted rounded animate-pulse"}),children:e.jsx(ts,{data:a})})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(k,{title:"Clicks",value:V?.summary?.totalClicks?.toLocaleString()??"—",icon:H}),e.jsx(k,{title:"Impressions",value:V?.summary?.totalImpressions?.toLocaleString()??"—",icon:ae}),e.jsx(k,{title:"CTR",value:V?.summary?.averageCTR!=null?`${(V.summary.averageCTR*100).toFixed(1)}%`:"—",icon:H}),e.jsx(k,{title:"Avg Position",value:V?.summary?.averagePosition?.toFixed(1)??"—",icon:te})]})]})},"search"),h==="tools"&&e.jsx(_.div,{variants:$,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx(B,{value:"tools",className:"space-y-4",forceMount:!0,children:i?.toolInteractions?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(k,{title:"Tool Interactions (7d)",value:i.toolInteractions.total.toLocaleString(),icon:Te}),i.toolInteractions.byTool.slice(0,3).map(b=>e.jsx(k,{title:b.name.replace(/_/g," ").replace(/\b\w/g,T=>T.toUpperCase()),value:b.total.toLocaleString(),icon:H,subtitle:"interactions"},b.name))]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:i.toolInteractions.byTool.map(b=>e.jsxs(c,{children:[e.jsx(x,{children:e.jsx(f,{className:"text-lg",children:b.name.replace(/_/g," ").replace(/\b\w/g,T=>T.toUpperCase())})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:b.actions.map(T=>e.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-border/50 last:border-0",children:[e.jsx("span",{className:"text-sm font-mono",children:T.action.replace(/_/g," ")}),e.jsx("span",{className:"text-sm tabular-nums text-muted-foreground",children:T.count.toLocaleString()})]},T.action))})})]},b.name))})]}):e.jsx(c,{children:e.jsx(d,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No tool interaction data available yet. Tool events will appear here once users interact with the SRE tools."})})})})},"tools"),h==="cicd"&&e.jsx(_.div,{variants:$,initial:"hidden",animate:"visible",exit:"exit",children:e.jsx(B,{value:"cicd",className:"space-y-4",forceMount:!0,children:e.jsx(He,{data:n})})},"cicd")]})]}),s?.generated&&e.jsx("footer",{className:"pt-8 border-t border-border/50",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date(s.generated).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})})]})}export{ms as A};
