const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mermaid.core-ClpRdFMX.js","assets/index-C80gN8Bw.js","assets/vendor-DeyLhXpq.js","assets/monitoring-C74x5Iy6.js","assets/ui-BQCqNqg0.js","assets/theme-CfHJhC9-.js","assets/index-jxszhRjV.css","assets/string-B1tyo_-o.js","assets/math-CRUJxRjv.js"])))=>i.map(i=>d[i]);
import{c as $,f as o,_ as K}from"./index-C80gN8Bw.js";import{r as n,j as e,J as L,K as q,N as S,O as H,Q as U,U as G}from"./vendor-DeyLhXpq.js";let y=null,b=null,B="";function c(m,t){if(typeof window>"u")return t;const g=getComputedStyle(document.documentElement).getPropertyValue(m).trim();return g?`hsl(${g})`:t}async function J(){return y||b||(b=K(()=>import("./mermaid.core-ClpRdFMX.js").then(m=>m.b8),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(m=>(y=m.default,y)),b)}async function Q(){const m=await J(),t=[c("--background","#0b0f19"),c("--card","#111827"),c("--muted","#111827"),c("--foreground","#f9fafb"),c("--muted-foreground","#9ca3af"),c("--border","#1f2937")].join("|");return B!==t&&(m.initialize({startOnLoad:!1,securityLevel:"strict",theme:"base",themeVariables:{background:"transparent",primaryColor:c("--muted","#111827"),primaryTextColor:c("--foreground","#f9fafb"),primaryBorderColor:c("--border","#1f2937"),secondaryColor:c("--card","#111827"),secondaryTextColor:c("--foreground","#f9fafb"),tertiaryColor:c("--background","#0b0f19"),lineColor:c("--muted-foreground","#9ca3af"),edgeLabelBackground:c("--background","#0b0f19"),fontFamily:"inherit"}}),B=t),m}function ee({code:m,nodes:t,speed:g=1500,onComplete:j,onLinkClick:V}){const E=`mermaid-anim-${n.useId().replace(/[:]/g,"")}`,N=n.useRef(null),[p,_]=n.useState(""),[D,P]=n.useState(null),[a,x]=n.useState(-1),[v,u]=n.useState(!1),[k,f]=n.useState(!1);n.useEffect(()=>{let s=!0;return(async()=>{try{const d=await Q();if(!s)return;const{svg:h}=await d.render(E,m);if(!s)return;_(h),P(null)}catch(d){if(!s)return;_(""),P(d instanceof Error?d.message:"Unable to render diagram")}})(),()=>{s=!1}},[m,E]),n.useEffect(()=>{if(!N.current||!p||t.length===0)return;const s=N.current.querySelector("svg");if(!s)return;let i=null;t.forEach((d,h)=>{const l=s.querySelector(`[id*="flowchart-${d.id}-"]`);l&&(l.classList.remove("node-active","node-past","node-future","node-decision","node-link"),a===-1?l.classList.add("node-future"):h===a?(l.classList.add("node-active"),i=l,d.type==="decision"?l.classList.add("node-decision"):d.type==="link"&&l.classList.add("node-link")):h<a?l.classList.add("node-past"):l.classList.add("node-future"))}),i&&a>=0&&i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},[p,t,a]),n.useEffect(()=>{if(!v||k||t.length===0)return;const s=a>=0?t[a]:null,i=s?.type==="decision";if(s?.terminal){u(!1),j?.();return}const h=setInterval(()=>{x(l=>{const I=(l>=0?t[l]:null)?.continueAt??l+1;if(I>=t.length)return u(!1),j?.(),l;const A=t[I];return(A?.type==="decision"||A?.type==="link")&&(f(!0),u(!1)),I})},i?1e4:g);return()=>clearInterval(h)},[v,k,t,g,a,j]);const R=n.useCallback(()=>{const s=a>=0&&t[a]?.terminal;(a===-1||a>=t.length-1||s)&&x(0),u(!0),f(!1)},[a,t]),M=n.useCallback(()=>{u(!1)},[]),w=n.useCallback(()=>{x(-1),u(!1),f(!1)},[]),O=n.useCallback(()=>{const i=(a>=0?t[a]:null)?.continueAt??a+1;if(i<t.length){const d=t[i];x(i),d?.type==="link"||d?.type==="decision"?(f(!0),u(!1)):f(!1)}},[a,t]),C=n.useCallback(()=>{if(a>0){const s=a-1,i=t[s];x(s),u(!1),i?.type==="link"||i?.type==="decision"?f(!0):f(!1)}},[a,t]),T=n.useCallback(s=>{x(s);const i=t[s];i?.type==="link"||i?.type==="decision"?(f(!0),u(!1)):(f(!1),u(!0))},[t]);if(D)return e.jsx("div",{className:"rounded-md border border-dashed p-4 text-sm text-muted-foreground",children:D});if(!p)return e.jsx("div",{className:"rounded-md border border-dashed p-4 text-sm text-muted-foreground",children:"Rendering diagram..."});const F=a===-1?0:(a+1)/t.length*100,r=a>=0?t[a]:null,z=(a>=t.length-1||r?.terminal)&&!v;return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid lg:grid-cols-5 gap-4",children:[e.jsxs("div",{ref:N,className:$("lg:col-span-3 overflow-x-auto animated-mermaid [&_svg_*]:animate-none! rounded-lg bg-muted/30 p-4",a>=0&&"animation-active"),children:[e.jsx("style",{children:`
          /* Override global * transition */
          .animated-mermaid svg,
          .animated-mermaid svg * {
            transition: none !important;
          }

          .animated-mermaid.animation-active .node-future {
            opacity: 0.25;
          }

          .animated-mermaid.animation-active .node-past {
            opacity: 0.6;
          }

          .animated-mermaid.animation-active .node-active {
            opacity: 1;
          }

          .animated-mermaid.animation-active .node-active rect,
          .animated-mermaid.animation-active .node-active polygon,
          .animated-mermaid.animation-active .node-active circle {
            stroke: hsl(var(--primary));
            stroke-width: 2px;
          }

          /* Decision nodes get amber stroke */
          .animated-mermaid.animation-active .node-decision polygon {
            stroke: hsl(45 93% 47%);
          }

          /* Link nodes get blue stroke */
          .animated-mermaid.animation-active .node-link rect,
          .animated-mermaid.animation-active .node-link polygon {
            stroke: hsl(217 91% 60%);
          }
        `}),e.jsx("div",{"aria-label":"Animated Mermaid diagram",dangerouslySetInnerHTML:{__html:p}})]}),e.jsx("div",{className:"lg:col-span-2 bg-card rounded-lg border p-5 flex flex-col justify-center min-h-[200px] lg:sticky lg:top-[calc(50vh-100px)] lg:self-start",children:r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:["Step ",a+1," of ",t.length]}),r.type==="decision"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-600 dark:text-amber-400",children:"Decision"}),r.type==="link"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-600 dark:text-blue-400",children:"Link"})]}),e.jsx("h3",{className:"text-lg font-semibold",children:r.label})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),e.jsx("div",{className:"h-1.5 bg-muted rounded-full",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${F}%`}})}),k&&r.branches&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:C,disabled:a<=0,children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(o,{onClick:()=>T(r.branches[0][1]),size:"sm",variant:"outline",className:"flex-1",children:r.branches[0][0]}),e.jsx(o,{onClick:()=>T(r.branches[1][1]),size:"sm",variant:"outline",className:"flex-1",children:r.branches[1][0]})]}),r.type==="link"&&r.linkTo&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:C,disabled:a<=0,children:e.jsx(L,{className:"h-4 w-4"})}),e.jsxs(o,{onClick:()=>V?.(r.linkTo),size:"sm",variant:"outline",className:"gap-2 flex-1",children:[e.jsx(q,{className:"h-4 w-4"}),"View Details"]}),a<t.length-1?e.jsx(o,{onClick:()=>{f(!1),u(!0)},size:"sm",variant:"outline",className:"flex-1",children:"Continue"}):e.jsx(o,{onClick:w,size:"sm",variant:"outline",children:e.jsx(S,{className:"h-4 w-4"})})]}),!k&&r.type!=="link"&&e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:C,disabled:a<=0,children:e.jsx(L,{className:"h-4 w-4"})}),v?e.jsxs(o,{variant:"outline",size:"sm",onClick:M,className:"gap-2 flex-1",children:[e.jsx(U,{className:"h-4 w-4"}),"Pause"]}):e.jsxs(o,{variant:"outline",size:"sm",onClick:R,className:"gap-2 flex-1",children:[e.jsx(H,{className:"h-4 w-4"}),z?"Replay":"Resume"]}),!z&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"outline",size:"sm",onClick:O,children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(o,{variant:"outline",size:"sm",onClick:w,children:e.jsx(S,{className:"h-4 w-4"})})]})]})]}):z?e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx("div",{className:"text-4xl",children:"✅"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Walkthrough Complete"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You've completed this flowchart walkthrough."}),e.jsxs(o,{onClick:w,variant:"outline",size:"sm",className:"mt-2",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Start Over"]})]}):e.jsxs("button",{onClick:R,className:"space-y-4 text-center w-full cursor-pointer hover:opacity-80 transition-opacity",children:[e.jsx("div",{className:"text-4xl",children:"▶️"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Ready to Begin"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to walk through this flowchart step by step."})]})})]})})}export{ee as A};
