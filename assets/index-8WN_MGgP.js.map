{"version":3,"file":"index-8WN_MGgP.js","sources":["../../src/components/projects/oncall-coverage/models.ts","../../src/components/projects/oncall-coverage/types.ts","../../src/components/projects/oncall-coverage/CoverageHeatmap.tsx","../../src/components/projects/oncall-coverage/DailyHeatmap.tsx","../../src/components/projects/oncall-coverage/WeeklyHeatmap.tsx","../../src/components/projects/oncall-coverage/MonthlyHeatmap.tsx","../../src/components/projects/oncall-coverage/BusinessHoursTimeline.tsx","../../src/components/projects/oncall-coverage/MetricsPanel.tsx","../../src/components/projects/oncall-coverage/TeamList.tsx","../../src/components/projects/oncall-coverage/Tradeoffs.tsx","../../src/components/projects/oncall-coverage/index.tsx"],"sourcesContent":["import type { CoverageModel, CoverageSlot } from './types';\n\n// Helper to create a full week of coverage slots\nfunction createWeekCoverage(\n  pattern: (day: number, hour: number) => { covered: boolean; members: string[] }\n): CoverageSlot[][] {\n  const week: CoverageSlot[][] = [];\n  for (let day = 0; day < 7; day++) {\n    const daySlots: CoverageSlot[] = [];\n    for (let hour = 0; hour < 24; hour++) {\n      const { covered, members } = pattern(day, hour);\n      daySlots.push({\n        hourUtc: hour,\n        dayOfWeek: day,\n        covered,\n        coveringMembers: members,\n      });\n    }\n    week.push(daySlots);\n  }\n  return week;\n}\n\nfunction pickByDay(members: string[], day: number, offset = 0): string {\n  return members[(day + offset) % members.length];\n}\n\n// Model 1: Follow-the-Sun (3 Regions) - The healthiest option\nconst followTheSun: CoverageModel = {\n  id: 'follow-the-sun',\n  name: 'Follow-the-Sun (3 Regions)',\n  description: 'Three regional teams hand off coverage during business hours. Zero night shifts - the healthiest model for distributed teams.',\n  rotationType: 'daily',\n  team: [\n    // US Region - 2 people in New York timezone\n    { name: 'Alex (US)', timezone: 'America/New_York', region: 'US', workingHours: '9am-5pm ET (14-22 UTC)', hoursPerWeek: 20, nightHours: 0, weekendHours: 4 },\n    { name: 'Jordan (US)', timezone: 'America/New_York', region: 'US', workingHours: '9am-5pm ET (14-22 UTC)', hoursPerWeek: 20, nightHours: 0, weekendHours: 4 },\n    // EU Region - 2 people in London timezone\n    { name: 'Emma (EU)', timezone: 'Europe/London', region: 'EU', workingHours: '9am-5pm GMT (9-17 UTC)', hoursPerWeek: 20, nightHours: 0, weekendHours: 4 },\n    { name: 'Liam (EU)', timezone: 'Europe/London', region: 'EU', workingHours: '9am-5pm GMT (9-17 UTC)', hoursPerWeek: 20, nightHours: 0, weekendHours: 4 },\n    // APAC Region - 2 people in Tokyo timezone\n    { name: 'Yuki (APAC)', timezone: 'Asia/Tokyo', region: 'APAC', workingHours: '9am-5pm JST (0-8 UTC)', hoursPerWeek: 20, nightHours: 0, weekendHours: 4 },\n    { name: 'Hana (APAC)', timezone: 'Asia/Tokyo', region: 'APAC', workingHours: '9am-5pm JST (0-8 UTC)', hoursPerWeek: 20, nightHours: 0, weekendHours: 4 },\n  ],\n  coverage: createWeekCoverage((day, hour) => {\n    const isWeekday = day >= 1 && day <= 5;\n    const apac = ['Yuki (APAC)', 'Hana (APAC)'];\n    const eu = ['Emma (EU)', 'Liam (EU)'];\n    const us = ['Alex (US)', 'Jordan (US)'];\n\n    // Pick primary and secondary within each region (rotate by day)\n    const apacPrimary = pickByDay(apac, day);\n    const apacSecondary = pickByDay(apac, day, 1);\n    const euPrimary = pickByDay(eu, day);\n    const euSecondary = pickByDay(eu, day, 1);\n    const usPrimary = pickByDay(us, day);\n    const usSecondary = pickByDay(us, day, 1);\n\n    // UTC coverage with overlaps for handoffs:\n    // APAC: 0-8 UTC (9am-5pm JST)\n    // EU: 9-17 UTC (9am-5pm GMT)\n    // US: 14-22 UTC (9am-5pm ET)\n\n    if (hour >= 0 && hour < 8) {\n      // APAC shift: 0-8 UTC\n      return { covered: true, members: [apacPrimary, apacSecondary] };\n    }\n    if (hour === 8) {\n      // APAC/EU handoff hour\n      return { covered: true, members: [apacPrimary, euPrimary] };\n    }\n    if (hour >= 9 && hour < 14) {\n      // EU shift: 9-14 UTC (before US overlap)\n      return { covered: true, members: [euPrimary, euSecondary] };\n    }\n    if (hour >= 14 && hour < 17) {\n      // EU/US overlap: 14-17 UTC\n      return { covered: true, members: [euPrimary, usPrimary] };\n    }\n    if (hour >= 17 && hour < 22) {\n      // US shift: 17-22 UTC (after EU overlap)\n      return { covered: true, members: [usPrimary, usSecondary] };\n    }\n    if (hour >= 22 && hour < 24) {\n      // US/APAC handoff: 22-24 UTC\n      return { covered: true, members: [usPrimary, apacPrimary] };\n    }\n\n    // Weekends - rotate through all team members\n    if (!isWeekday) {\n      const allMembers = [...apac, ...eu, ...us];\n      const weekendPrimary = pickByDay(allMembers, day);\n      const weekendSecondary = pickByDay(allMembers, day, 1);\n      return { covered: true, members: [weekendPrimary, weekendSecondary] };\n    }\n\n    return { covered: false, members: [] };\n  }),\n  metrics: {\n    coveragePercent: 100,\n    nightHoursPerPerson: 0,\n    weekendHoursPerPerson: 8,\n    hoursPerWeekPerPerson: 28,\n    teamSize: 6,\n    shiftLength: '8h',\n    rotation: 'Daily handoffs between regions',\n    onCallFrequency: 'Every other day (within region)',\n    handoffsPerWeek: 21,\n  },\n  tradeoffs: {\n    pros: [\n      'Zero night shifts - everyone works business hours only',\n      'Fastest response - always someone awake and alert',\n      'Most sustainable for long-term team health',\n      'Natural overlap windows enable smooth handoffs',\n      'Primary + secondary redundancy within each shift',\n    ],\n    cons: [\n      'Requires distributed team across 3 time zones',\n      'More handoffs (3/day) increases coordination needs',\n      'Weekend coverage rotated across all members',\n      'Communication overhead across regions',\n    ],\n  },\n};\n\n// Model 2: Weekly Rotation (24/7) - With primary + secondary\nconst weeklyRotation: CoverageModel = {\n  id: 'weekly-rotation',\n  name: 'Weekly Rotation (8-person)',\n  description: 'Primary + secondary each week, rotating through 8 team members. Secondary provides escalation backup and shadows before becoming primary.',\n  rotationType: 'weekly',\n  rotationWeeks: 8,\n  team: [\n    { name: 'Alex', timezone: 'America/New_York', region: 'Single', workingHours: 'Week 1 Primary, Week 8 Secondary', hoursPerWeek: 42, nightHours: 14, weekendHours: 12 },\n    { name: 'Jordan', timezone: 'America/New_York', region: 'Single', workingHours: 'Week 2 Primary, Week 1 Secondary', hoursPerWeek: 42, nightHours: 14, weekendHours: 12 },\n    { name: 'Taylor', timezone: 'America/New_York', region: 'Single', workingHours: 'Week 3 Primary, Week 2 Secondary', hoursPerWeek: 42, nightHours: 14, weekendHours: 12 },\n    { name: 'Morgan', timezone: 'America/New_York', region: 'Single', workingHours: 'Week 4 Primary, Week 3 Secondary', hoursPerWeek: 42, nightHours: 14, weekendHours: 12 },\n    { name: 'Casey', timezone: 'America/New_York', region: 'Single', workingHours: 'Week 5 Primary, Week 4 Secondary', hoursPerWeek: 42, nightHours: 14, weekendHours: 12 },\n    { name: 'Riley', timezone: 'America/New_York', region: 'Single', workingHours: 'Week 6 Primary, Week 5 Secondary', hoursPerWeek: 42, nightHours: 14, weekendHours: 12 },\n    { name: 'Quinn', timezone: 'America/New_York', region: 'Single', workingHours: 'Week 7 Primary, Week 6 Secondary', hoursPerWeek: 42, nightHours: 14, weekendHours: 12 },\n    { name: 'Avery', timezone: 'America/New_York', region: 'Single', workingHours: 'Week 8 Primary, Week 7 Secondary', hoursPerWeek: 42, nightHours: 14, weekendHours: 12 },\n  ],\n  // This week: Alex is primary, Jordan is secondary\n  coverage: createWeekCoverage(() => ({ covered: true, members: ['Alex', 'Jordan'] })),\n  metrics: {\n    coveragePercent: 100,\n    nightHoursPerPerson: 14, // 56h nights √ó 2 roles / 8 people\n    weekendHoursPerPerson: 12, // 48h weekend √ó 2 roles / 8 people\n    hoursPerWeekPerPerson: 42, // 168h √ó 2 roles / 8 people\n    teamSize: 8,\n    shiftLength: '168h (full week)',\n    rotation: 'Weekly (Primary + Secondary)',\n    onCallFrequency: '1 week primary + 1 week secondary every 8 weeks',\n    handoffsPerWeek: 1,\n  },\n  tradeoffs: {\n    pros: [\n      'Built-in escalation path for complex incidents',\n      'Secondary shadows before becoming primary',\n      'Clear accountability with safety net',\n      'Only 1 handoff/week minimizes miscommunication',\n    ],\n    cons: [\n      'Two people committed each week (primary + secondary)',\n      'On-call week includes nights and weekends',\n      'Higher total burden than single-person rotation',\n      'Requires clear primary vs secondary responsibilities',\n    ],\n  },\n};\n\n// Model 3: 12-Hour Shifts - APAC + US West (nearly opposite timezones)\nconst twelveHourShifts: CoverageModel = {\n  id: '12-hour-shifts',\n  name: 'APAC + US West (12h)',\n  description: 'Two 12-hour shifts with APAC (11am-11pm Tokyo) and US West (6am-6pm LA). Nearly opposite timezones mean both teams work reasonable daytime hours.',\n  rotationType: 'shift',\n  team: [\n    // APAC team (Tokyo) - covers 02:00-14:00 UTC (11am-11pm JST)\n    { name: 'Yuki (APAC)', timezone: 'Asia/Tokyo', region: 'APAC', workingHours: '11am-11pm JST (02-14 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Hana (APAC)', timezone: 'Asia/Tokyo', region: 'APAC', workingHours: '11am-11pm JST (02-14 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Kenji (APAC)', timezone: 'Asia/Tokyo', region: 'APAC', workingHours: '11am-11pm JST (02-14 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Sakura (APAC)', timezone: 'Asia/Tokyo', region: 'APAC', workingHours: '11am-11pm JST (02-14 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Ren (APAC)', timezone: 'Asia/Tokyo', region: 'APAC', workingHours: '11am-11pm JST (02-14 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Aoi (APAC)', timezone: 'Asia/Tokyo', region: 'APAC', workingHours: '11am-11pm JST (02-14 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    // US West team (Los Angeles) - covers 14:00-02:00 UTC (6am-6pm PST)\n    { name: 'Alex (US)', timezone: 'America/Los_Angeles', region: 'US', workingHours: '6am-6pm PT (14-02 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Jordan (US)', timezone: 'America/Los_Angeles', region: 'US', workingHours: '6am-6pm PT (14-02 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Taylor (US)', timezone: 'America/Los_Angeles', region: 'US', workingHours: '6am-6pm PT (14-02 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Morgan (US)', timezone: 'America/Los_Angeles', region: 'US', workingHours: '6am-6pm PT (14-02 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Sam (US)', timezone: 'America/Los_Angeles', region: 'US', workingHours: '6am-6pm PT (14-02 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n    { name: 'Jamie (US)', timezone: 'America/Los_Angeles', region: 'US', workingHours: '6am-6pm PT (14-02 UTC)', hoursPerWeek: 28, nightHours: 0, weekendHours: 4 },\n  ],\n  coverage: createWeekCoverage((day, hour) => {\n    // APAC shift: 02-14 UTC (11am-11pm Tokyo)\n    // US West shift: 14-02 UTC (6am-6pm LA)\n    const apacTeam = ['Yuki (APAC)', 'Hana (APAC)', 'Kenji (APAC)', 'Sakura (APAC)', 'Ren (APAC)', 'Aoi (APAC)'];\n    const usTeam = ['Alex (US)', 'Jordan (US)', 'Taylor (US)', 'Morgan (US)', 'Sam (US)', 'Jamie (US)'];\n\n    if (hour >= 2 && hour < 14) {\n      // APAC shift: 02-14 UTC\n      const primary = pickByDay(apacTeam, day);\n      const backup = pickByDay(apacTeam, day, 3);\n      return { covered: true, members: [primary, backup] };\n    }\n    // US West shift: 14-02 UTC (wraps around midnight)\n    const primary = pickByDay(usTeam, day);\n    const backup = pickByDay(usTeam, day, 3);\n    return { covered: true, members: [primary, backup] };\n  }),\n  metrics: {\n    coveragePercent: 100,\n    nightHoursPerPerson: 0, // Both teams work daytime in their timezone\n    weekendHoursPerPerson: 4, // Weekend duty distributed across all 12\n    hoursPerWeekPerPerson: 28, // 168h √ó 2 roles / 12 people\n    teamSize: 12,\n    shiftLength: '12h',\n    rotation: 'Regional shifts with rotating primary/backup',\n    onCallFrequency: '~2 shifts/week within region',\n    handoffsPerWeek: 14, // 2/day √ó 7 days\n  },\n  tradeoffs: {\n    pros: [\n      'Zero night shifts - both teams work daytime hours',\n      'Clean 12h handoff with no gaps',\n      '12h shifts balance continuity vs. fatigue',\n      'Primary + backup ensures escalation path',\n    ],\n    cons: [\n      'Requires teams in APAC and US West specifically',\n      'Slightly shifted hours (11am-11pm Tokyo, 6am-6pm LA)',\n      'Larger team size required (12 people)',\n      'Communication across 17-hour timezone gap',\n    ],\n  },\n};\n\n// Model 4: US Business Hours + On-Call - 24/7 with enhanced business hours\nconst businessHoursOnly: CoverageModel = {\n  id: 'business-hours',\n  name: 'US Daytime + Rotating On-Call',\n  description: '24/7 coverage with Primary + Secondary during US business hours (9am ET - 5pm PT), Primary only for nights and weekends.',\n  rotationType: 'daily',\n  team: [\n    // East Coast (New York) - primary 9am-2pm ET = 14:00-19:00 UTC\n    { name: 'Alex (ET)', timezone: 'America/New_York', region: 'US', workingHours: 'Primary 9am-2pm ET (14-19 UTC) + rotating nights/weekends', hoursPerWeek: 28, nightHours: 10, weekendHours: 8 },\n    { name: 'Jordan (ET)', timezone: 'America/New_York', region: 'US', workingHours: 'Primary 9am-2pm ET (14-19 UTC) + rotating nights/weekends', hoursPerWeek: 28, nightHours: 10, weekendHours: 8 },\n    { name: 'Taylor (ET)', timezone: 'America/New_York', region: 'US', workingHours: 'Primary 9am-2pm ET (14-19 UTC) + rotating nights/weekends', hoursPerWeek: 28, nightHours: 10, weekendHours: 8 },\n    // West Coast (Los Angeles) - primary 11am-5pm PT = 19:00-01:00 UTC\n    { name: 'Morgan (PT)', timezone: 'America/Los_Angeles', region: 'US', workingHours: 'Primary 11am-5pm PT (19-01 UTC) + rotating nights/weekends', hoursPerWeek: 28, nightHours: 10, weekendHours: 8 },\n    { name: 'Casey (PT)', timezone: 'America/Los_Angeles', region: 'US', workingHours: 'Primary 11am-5pm PT (19-01 UTC) + rotating nights/weekends', hoursPerWeek: 28, nightHours: 10, weekendHours: 8 },\n    { name: 'Riley (PT)', timezone: 'America/Los_Angeles', region: 'US', workingHours: 'Primary 11am-5pm PT (19-01 UTC) + rotating nights/weekends', hoursPerWeek: 28, nightHours: 10, weekendHours: 8 },\n  ],\n  coverage: createWeekCoverage((day, hour) => {\n    const isWeekday = day >= 1 && day <= 5;\n    const etTeam = ['Alex (ET)', 'Jordan (ET)', 'Taylor (ET)'];\n    const ptTeam = ['Morgan (PT)', 'Casey (PT)', 'Riley (PT)'];\n    // Interleave ET/PT for balanced off-hours rotation\n    const onCallRotation = ['Alex (ET)', 'Morgan (PT)', 'Jordan (ET)', 'Casey (PT)', 'Taylor (ET)', 'Riley (PT)'];\n\n    const etPrimary = etTeam[day % etTeam.length];\n    const ptPrimary = ptTeam[day % ptTeam.length];\n    const onCallPrimary = onCallRotation[day % onCallRotation.length];\n\n    // Business hours: 9am ET - 5pm PT = 14:00-01:00 UTC\n    const isBusinessHours = isWeekday && (hour >= 14 || hour < 1);\n\n    if (isBusinessHours) {\n      if (hour >= 14 && hour < 17) {\n        // ET only: 9am-12pm ET (before PT starts)\n        return { covered: true, members: [etPrimary, onCallPrimary !== etPrimary ? onCallPrimary : ptPrimary] };\n      }\n      if (hour >= 17 && hour < 19) {\n        // Early overlap: ET primary, PT secondary (12pm-2pm ET / 9am-11am PT)\n        return { covered: true, members: [etPrimary, ptPrimary] };\n      }\n      if (hour >= 19 && hour < 22) {\n        // Late overlap: PT primary, ET secondary (2pm-5pm ET / 11am-2pm PT)\n        return { covered: true, members: [ptPrimary, etPrimary] };\n      }\n      if (hour >= 22 || hour < 1) {\n        // PT only: 2pm-5pm PT (after ET ends)\n        return { covered: true, members: [ptPrimary, onCallPrimary !== ptPrimary ? onCallPrimary : etPrimary] };\n      }\n    }\n\n    // Off-hours: Primary only (nights 01:00-14:00 UTC weekdays, all weekend)\n    return { covered: true, members: [onCallPrimary] };\n  }),\n  metrics: {\n    coveragePercent: 100,\n    nightHoursPerPerson: 10,\n    weekendHoursPerPerson: 8,\n    hoursPerWeekPerPerson: 28,\n    teamSize: 6,\n    shiftLength: '8h business + rotating on-call',\n    rotation: 'Daily rotation, coast-based during business hours',\n    onCallFrequency: '~5 days per week (mix of business + on-call)',\n    handoffsPerWeek: 14,\n  },\n  tradeoffs: {\n    pros: [\n      '24/7 coverage for all incidents',\n      'Enhanced coverage (Primary + Secondary) during peak hours',\n      'Off-hours incidents get immediate response',\n      'Balanced burden across team',\n    ],\n    cons: [\n      'Everyone takes some night/weekend on-call',\n      'Off-hours have reduced redundancy (no secondary)',\n      'Requires staff on both coasts',\n      'Higher overall on-call burden than business-hours-only',\n    ],\n  },\n};\n\nexport const COVERAGE_MODELS: CoverageModel[] = [\n  followTheSun,\n  weeklyRotation,\n  twelveHourShifts,\n  businessHoursOnly,\n];\n\nexport function getModelById(id: string): CoverageModel | undefined {\n  return COVERAGE_MODELS.find((m) => m.id === id);\n}\n","export type Region = 'US' | 'EU' | 'APAC' | 'Single';\n\nexport interface TeamMember {\n  name: string;\n  timezone: string;\n  region: Region;\n  workingHours: string; // e.g., \"9am-5pm ET\"\n  hoursPerWeek: number;\n  nightHours: number;\n  weekendHours: number;\n}\n\nexport interface CoverageSlot {\n  hourUtc: number; // 0-23\n  dayOfWeek: number; // 0=Sunday, 1=Monday, ..., 6=Saturday\n  covered: boolean;\n  coveringMembers: string[]; // member names\n}\n\nexport interface ModelMetrics {\n  coveragePercent: number;\n  nightHoursPerPerson: number;\n  weekendHoursPerPerson: number;\n  hoursPerWeekPerPerson: number;\n  teamSize: number;\n  shiftLength: string; // e.g., \"8h\", \"12h\", \"24h\"\n  rotation: string; // e.g., \"Weekly\", \"Daily handoff\"\n  onCallFrequency: string; // e.g., \"1 week every 8 weeks\"\n  handoffsPerWeek: number; // number of shift transitions per week\n}\n\nexport interface ModelTradeoffs {\n  pros: string[];\n  cons: string[];\n}\n\nexport type RotationType = 'weekly' | 'daily' | 'shift';\n\nexport interface CoverageModel {\n  id: string;\n  name: string;\n  description: string;\n  rotationType: RotationType; // Determines which heatmap view to show\n  rotationWeeks?: number; // For weekly rotations, how many weeks in the cycle\n  team: TeamMember[];\n  coverage: CoverageSlot[][]; // 7 days x 24 hours\n  metrics: ModelMetrics;\n  tradeoffs: ModelTradeoffs;\n}\n\nexport const DAYS_SHORT = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'] as const;\n\n// Region colors for team list - using darker shades for WCAG AA contrast\nexport const REGION_COLORS: Record<Region, { bg: string; text: string }> = {\n  US: { bg: 'bg-emerald-700', text: 'text-emerald-700' },\n  EU: { bg: 'bg-rose-600', text: 'text-rose-600' },\n  APAC: { bg: 'bg-violet-600', text: 'text-violet-600' },\n  Single: { bg: 'bg-purple-600', text: 'text-purple-600' },\n};\n\n// Member colors for rotation views (index-based, pastel; strips use darker shades for WCAG AA contrast)\nexport const MEMBER_COLORS = [\n  { bg: 'bg-emerald-200 dark:bg-emerald-800', strip: 'bg-emerald-600 dark:bg-emerald-600', text: 'text-emerald-800 dark:text-emerald-200' },\n  { bg: 'bg-rose-200 dark:bg-rose-800', strip: 'bg-rose-600 dark:bg-rose-600', text: 'text-rose-800 dark:text-rose-200' },\n  { bg: 'bg-violet-200 dark:bg-violet-800', strip: 'bg-violet-600 dark:bg-violet-600', text: 'text-violet-800 dark:text-violet-200' },\n  { bg: 'bg-amber-200 dark:bg-amber-800', strip: 'bg-amber-600 dark:bg-amber-600', text: 'text-amber-800 dark:text-amber-200' },\n  { bg: 'bg-sky-200 dark:bg-sky-800', strip: 'bg-sky-600 dark:bg-sky-600', text: 'text-sky-800 dark:text-sky-200' },\n  { bg: 'bg-pink-200 dark:bg-pink-800', strip: 'bg-pink-600 dark:bg-pink-600', text: 'text-pink-800 dark:text-pink-200' },\n  { bg: 'bg-teal-200 dark:bg-teal-800', strip: 'bg-teal-600 dark:bg-teal-600', text: 'text-teal-800 dark:text-teal-200' },\n  { bg: 'bg-orange-200 dark:bg-orange-800', strip: 'bg-orange-600 dark:bg-orange-600', text: 'text-orange-800 dark:text-orange-200' },\n];\n\n// Timezone to label mapping\nexport const TIMEZONE_LABELS: Record<string, string> = {\n  'Asia/Tokyo': 'APAC (Tokyo)',\n  'Asia/Singapore': 'APAC (Singapore)',\n  'Asia/Shanghai': 'APAC (Shanghai)',\n  'Europe/London': 'EU (London)',\n  'Europe/Paris': 'EU (Paris)',\n  'Europe/Berlin': 'EU (Berlin)',\n  'America/New_York': 'US (New York)',\n  'America/Los_Angeles': 'US (Los Angeles)',\n  'America/Chicago': 'US (Chicago)',\n};\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport type { CoverageSlot } from './types';\nimport { DAYS_SHORT } from './types';\n\ninterface CoverageHeatmapProps {\n  coverage: CoverageSlot[][];\n}\n\nexport function CoverageHeatmap({ coverage }: CoverageHeatmapProps) {\n  const hourLabels = [0, 3, 6, 9, 12, 15, 18, 21];\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-2\">\n        <CardTitle as=\"h2\" className=\"text-base\">Weekly Coverage Heatmap</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-1\">\n          {/* Hour labels */}\n          <div className=\"flex\">\n            <div className=\"w-10 shrink-0\" />\n            <div className=\"flex-1 flex\">\n              {hourLabels.map((hour) => (\n                <div\n                  key={hour}\n                  className=\"text-[10px] text-muted-foreground\"\n                  style={{ width: `${(3 / 24) * 100}%` }}\n                >\n                  {hour}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Days - start with Monday */}\n          {[1, 2, 3, 4, 5, 6, 0].map((dayIndex) => (\n            <div key={dayIndex} className=\"flex items-center\">\n              <div className=\"w-10 shrink-0 text-xs text-muted-foreground\">\n                {DAYS_SHORT[dayIndex]}\n              </div>\n              <div className=\"flex-1 flex h-7 rounded overflow-hidden\">\n                {coverage[dayIndex]?.map((slot, hour) => {\n                  const memberCount = slot.coveringMembers.length;\n                  let bgColor = 'bg-red-500/80'; // Gap\n                  if (memberCount === 1) {\n                    bgColor = 'bg-yellow-500/80'; // Single coverage\n                  } else if (memberCount >= 2) {\n                    bgColor = 'bg-green-500/80'; // Good coverage\n                  }\n\n                  return (\n                    <div\n                      key={hour}\n                      className={`\n                        flex-1 border-r border-background/30 last:border-r-0\n                        ${slot.covered ? bgColor : 'bg-red-500/80'}\n                        transition-colors\n                      `}\n                      title={`${DAYS_SHORT[dayIndex]} ${hour}:00 UTC\\n${\n                        slot.covered\n                          ? `Covered by: ${slot.coveringMembers.join(', ')}`\n                          : 'No coverage'\n                      }`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          ))}\n\n          {/* Legend */}\n          <div className=\"flex flex-wrap items-center gap-x-4 gap-y-1 pt-3 text-xs text-muted-foreground\">\n            <span>Times in UTC</span>\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-4 h-4 rounded bg-green-500/80\" />\n              <span>2+ people</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-4 h-4 rounded bg-yellow-500/80\" />\n              <span>1 person</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-4 h-4 rounded bg-red-500/80\" />\n              <span>Gap</span>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useMemo, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport type { CoverageSlot, TeamMember } from './types';\n\ninterface DailyHeatmapProps {\n  coverage: CoverageSlot[][];\n  team: TeamMember[];\n  dayIndex?: number; // 0=Sun, 1=Mon, etc. Default to Monday\n}\n\n// Colors for regions/timezones (using darker shades for WCAG AA contrast with white text)\nconst REGION_COLORS: Record<string, { bg: string; text: string }> = {\n  'Asia/Tokyo': { bg: 'bg-violet-600 dark:bg-violet-600', text: 'text-white' },\n  'Asia/Singapore': { bg: 'bg-violet-600 dark:bg-violet-600', text: 'text-white' },\n  'Asia/Shanghai': { bg: 'bg-violet-600 dark:bg-violet-600', text: 'text-white' },\n  'Europe/London': { bg: 'bg-rose-600 dark:bg-rose-600', text: 'text-white' },\n  'Europe/Paris': { bg: 'bg-rose-600 dark:bg-rose-600', text: 'text-white' },\n  'Europe/Berlin': { bg: 'bg-rose-600 dark:bg-rose-600', text: 'text-white' },\n  'America/New_York': { bg: 'bg-emerald-700 dark:bg-emerald-600', text: 'text-white' },\n  'America/Los_Angeles': { bg: 'bg-sky-600 dark:bg-sky-600', text: 'text-white' },\n  'America/Chicago': { bg: 'bg-emerald-700 dark:bg-emerald-600', text: 'text-white' },\n};\n\nconst TIMEZONE_LABELS: Record<string, string> = {\n  'Asia/Tokyo': 'APAC (Tokyo)',\n  'Asia/Singapore': 'APAC (Singapore)',\n  'Asia/Shanghai': 'APAC (Shanghai)',\n  'Europe/London': 'EU (London)',\n  'Europe/Paris': 'EU (Paris)',\n  'Europe/Berlin': 'EU (Berlin)',\n  'America/New_York': 'US East (ET)',\n  'America/Los_Angeles': 'US West (PT)',\n  'America/Chicago': 'US Central (CT)',\n};\n\n// Colors for shift types (single-site models) - using darker shades for WCAG AA contrast\nconst SHIFT_COLORS: Record<string, { bg: string; text: string }> = {\n  'day': { bg: 'bg-amber-600 dark:bg-amber-600', text: 'text-white' },\n  'night': { bg: 'bg-indigo-600 dark:bg-indigo-600', text: 'text-white' },\n};\n\n// Helper to format hour with padding\nfunction formatHour(h: number): string {\n  return `${h.toString().padStart(2, '0')}:00`;\n}\n\n// Module-level cache for DateTimeFormat instances (expensive to create)\nconst dateTimeFormatCache = new Map<string, Intl.DateTimeFormat>();\n\nfunction getDateTimeFormatter(timezone: string): Intl.DateTimeFormat {\n  if (!dateTimeFormatCache.has(timezone)) {\n    dateTimeFormatCache.set(\n      timezone,\n      new Intl.DateTimeFormat('en-US', {\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: false,\n        timeZone: timezone,\n      })\n    );\n  }\n  return dateTimeFormatCache.get(timezone)!;\n}\n\n// Helper to convert UTC hour to local time string using Intl (handles DST)\nfunction utcToLocal(utcHour: number, timezone: string): string {\n  try {\n    // Create a date at the given UTC hour (use a recent date for accurate DST)\n    const date = new Date();\n    date.setUTCHours(utcHour, 0, 0, 0);\n\n    const formatter = getDateTimeFormatter(timezone);\n    return formatter.format(date);\n  } catch {\n    // Fallback if timezone is invalid\n    return formatHour(utcHour);\n  }\n}\n\n// Get short timezone label\nfunction getTimezoneLabel(timezone: string): string {\n  const labels: Record<string, string> = {\n    'America/New_York': 'ET',\n    'America/Los_Angeles': 'PT',\n    'America/Chicago': 'CT',\n    'Europe/London': 'GMT',\n    'Europe/Paris': 'CET',\n    'Europe/Berlin': 'CET',\n    'Asia/Tokyo': 'JST',\n    'Asia/Singapore': 'SGT',\n    'Asia/Shanghai': 'CST',\n  };\n  return labels[timezone] || timezone.split('/').pop() || '';\n}\n\n// Helper to build rich tooltips\nfunction buildTooltip(lines: (string | null | undefined | false)[]): string {\n  return lines.filter(Boolean).join('\\n');\n}\n\ninterface CoverageBlock {\n  startHour: number;\n  endHour: number;\n  key: string | null; // timezone or shift type\n  label: string | null;\n}\n\n// Determine if a member is day or night shift based on workingHours\nfunction getShiftType(member: TeamMember): 'day' | 'night' | 'rotating' | null {\n  const hours = member.workingHours.toLowerCase();\n  if (hours.includes('rotating')) return 'rotating'; // Everyone rotates through both\n  if (hours.includes('night shift')) return 'night';\n  if (hours.includes('day shift')) return 'day';\n  return null;\n}\n\n// For rotating shifts, determine shift by hour (0-12 = night, 12-24 = day)\nfunction getShiftByHour(hour: number): 'day' | 'night' {\n  return hour < 12 ? 'night' : 'day';\n}\n\n// Group contiguous hours by grouping key (timezone or shift)\nfunction getCoverageBlocks(\n  daySlots: CoverageSlot[],\n  memberMap: Map<string, { key: string; label: string }>,\n  memberIndex: number,\n  useRotatingShifts = false\n): CoverageBlock[] {\n  const blocks: CoverageBlock[] = [];\n  let current: CoverageBlock | null = null;\n\n  for (let hour = 0; hour < 24; hour++) {\n    const slot = daySlots[hour];\n    const memberName = slot?.coveringMembers[memberIndex] || null;\n\n    // For rotating shifts, determine key by hour not by member\n    let key: string | null;\n    let label: string | null;\n    if (useRotatingShifts && memberName) {\n      const shift = getShiftByHour(hour);\n      key = shift;\n      label = shift === 'day' ? 'Day Shift' : 'Night Shift';\n    } else {\n      const info = memberName ? memberMap.get(memberName) : null;\n      key = info?.key || null;\n      label = info?.label || null;\n    }\n\n    if (current && current.key === key) {\n      current.endHour = hour + 1;\n    } else {\n      if (current) blocks.push(current);\n      current = { startHour: hour, endHour: hour + 1, key, label };\n    }\n  }\n  if (current) blocks.push(current);\n\n  return blocks;\n}\n\nexport function DailyHeatmap({ coverage, team, dayIndex = 1 }: DailyHeatmapProps) {\n  // Memoize shift detection to avoid recalculating on every render\n  const { uniqueTimezones, hasRotatingShifts, useShiftMode } = useMemo(() => {\n    const timezones = [...new Set(team.map((m) => m.timezone))];\n    const singleSite = timezones.length === 1;\n    const shiftTypes = team.map((m) => getShiftType(m));\n    const shifts = shiftTypes.some((s) => s !== null);\n    const rotating = shiftTypes.some((s) => s === 'rotating');\n    return {\n      uniqueTimezones: timezones,\n      hasRotatingShifts: rotating,\n      useShiftMode: singleSite && shifts,\n    };\n  }, [team]);\n\n  // Memoize memberMap and legendItems computation\n  const { memberMap, legendItems } = useMemo(() => {\n    const map = new Map<string, { key: string; label: string }>();\n    const items: { key: string; label: string; colors: { bg: string } }[] = [];\n\n    if (useShiftMode) {\n      // Shift-based mode (fixed or rotating)\n      team.forEach((member) => {\n        const shift = getShiftType(member);\n        if (shift === 'rotating') {\n          // For rotating, member doesn't have fixed shift - will be determined by hour\n          map.set(member.name, { key: 'rotating', label: 'Rotating' });\n        } else if (shift) {\n          const label = shift === 'day' ? 'Day Shift' : 'Night Shift';\n          map.set(member.name, { key: shift, label });\n        }\n      });\n      items.push(\n        { key: 'day', label: 'Day Shift', colors: SHIFT_COLORS['day'] },\n        { key: 'night', label: 'Night Shift', colors: SHIFT_COLORS['night'] }\n      );\n    } else {\n      // Timezone-based mode\n      team.forEach((member) => {\n        const tz = member.timezone;\n        const label = TIMEZONE_LABELS[tz] || tz;\n        map.set(member.name, { key: tz, label });\n      });\n      uniqueTimezones.forEach((tz) => {\n        items.push({\n          key: tz,\n          label: TIMEZONE_LABELS[tz] || tz,\n          colors: REGION_COLORS[tz] || { bg: 'bg-zinc-400' },\n        });\n      });\n    }\n\n    return { memberMap: map, legendItems: items };\n  }, [team, useShiftMode, uniqueTimezones]);\n\n  // Memoize coverage blocks computation\n  const { primaryBlocks, secondaryBlocks } = useMemo(() => {\n    const slots = coverage[dayIndex] || [];\n    return {\n      primaryBlocks: getCoverageBlocks(slots, memberMap, 0, useShiftMode && hasRotatingShifts),\n      secondaryBlocks: getCoverageBlocks(slots, memberMap, 1, useShiftMode && hasRotatingShifts),\n    };\n  }, [coverage, dayIndex, memberMap, useShiftMode, hasRotatingShifts]);\n\n  // Memoize getColors callback\n  const getColors = useCallback(\n    (key: string | null) => {\n      if (!key) return null;\n      if (useShiftMode) return SHIFT_COLORS[key];\n      return REGION_COLORS[key];\n    },\n    [useShiftMode]\n  );\n\n  // Memoize renderTimeline to prevent unnecessary re-renders\n  const renderTimeline = useCallback(\n    (blocks: CoverageBlock[], title: string) => (\n    <div className=\"space-y-2\">\n      <h3 className=\"text-sm font-medium text-muted-foreground\">{title}</h3>\n      <div className=\"relative h-12 bg-zinc-200 dark:bg-zinc-700 rounded-lg overflow-hidden\">\n        {blocks.map((block, index) => {\n          const widthPercent = ((block.endHour - block.startHour) / 24) * 100;\n          const leftPercent = (block.startHour / 24) * 100;\n          const colors = getColors(block.key);\n          // Only show label for blocks wider than 20% (~5 hours)\n          const showLabel = block.label && widthPercent >= 20;\n          const duration = block.endHour - block.startHour;\n\n          // Build local time conversions if we have a timezone key\n          const hasTimezone = block.key && !['day', 'night', 'rotating'].includes(block.key);\n          const localStart = hasTimezone && block.key ? utcToLocal(block.startHour, block.key) : null;\n          const localEnd = hasTimezone && block.key ? utcToLocal(block.endHour % 24, block.key) : null;\n          const tzLabel = hasTimezone && block.key ? getTimezoneLabel(block.key) : null;\n\n          const tooltip = buildTooltip([\n            `‚è∞ ${formatHour(block.startHour)} - ${formatHour(block.endHour)} UTC`,\n            localStart && localEnd && tzLabel && `üè† ${localStart} - ${localEnd} ${tzLabel}`,\n            `‚è±Ô∏è Duration: ${duration}h`,\n            '',\n            block.label ? `üë§ ${block.label}` : '‚ö†Ô∏è No coverage',\n            title === 'Primary' && '   Handles all incoming incidents',\n            title === 'Secondary' && '   Escalation backup for primary',\n          ]);\n\n          return (\n            <div\n              key={index}\n              className={`absolute top-0 bottom-0 flex items-center justify-center ${colors?.bg || 'bg-zinc-300 dark:bg-zinc-600'}`}\n              style={{ left: `${leftPercent}%`, width: `${widthPercent}%` }}\n              title={tooltip}\n            >\n              {showLabel && (\n                <span className={`text-sm font-semibold ${colors?.text || 'text-zinc-500'} truncate px-1`}>\n                  {block.label}\n                </span>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n    ),\n    [getColors]\n  );\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle as=\"h2\" className=\"text-base\">Daily Coverage (24 Hours UTC)</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {/* Primary Coverage */}\n          {renderTimeline(primaryBlocks, 'Primary')}\n\n          {/* Secondary Coverage */}\n          {renderTimeline(secondaryBlocks, 'Secondary')}\n\n          {/* Hour labels */}\n          <div className=\"flex justify-between text-xs text-muted-foreground\">\n            <span>0:00</span>\n            <span>6:00</span>\n            <span>12:00</span>\n            <span>18:00</span>\n            <span>24:00</span>\n          </div>\n\n          {/* Legend */}\n          <div className=\"flex flex-wrap items-center gap-4 pt-2 border-t text-xs\">\n            {legendItems.map((item) => (\n              <div key={item.key} className=\"flex items-center gap-1.5\">\n                <div className={`w-3 h-3 rounded ${item.colors.bg}`} />\n                <span>{item.label}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport type { CoverageSlot, TeamMember } from './types';\n\ninterface WeeklyHeatmapProps {\n  coverage: CoverageSlot[][];\n  team: TeamMember[];\n}\n\n// Pastel colors for team members (strips use darker shades for WCAG AA contrast with white text)\nconst MEMBER_COLORS = [\n  { bg: 'bg-emerald-200 dark:bg-emerald-800', strip: 'bg-emerald-600 dark:bg-emerald-600', text: 'text-emerald-800 dark:text-emerald-200' },\n  { bg: 'bg-rose-200 dark:bg-rose-800', strip: 'bg-rose-600 dark:bg-rose-600', text: 'text-rose-800 dark:text-rose-200' },\n  { bg: 'bg-violet-200 dark:bg-violet-800', strip: 'bg-violet-600 dark:bg-violet-600', text: 'text-violet-800 dark:text-violet-200' },\n  { bg: 'bg-amber-200 dark:bg-amber-800', strip: 'bg-amber-600 dark:bg-amber-600', text: 'text-amber-800 dark:text-amber-200' },\n  { bg: 'bg-sky-200 dark:bg-sky-800', strip: 'bg-sky-600 dark:bg-sky-600', text: 'text-sky-800 dark:text-sky-200' },\n  { bg: 'bg-pink-200 dark:bg-pink-800', strip: 'bg-pink-600 dark:bg-pink-600', text: 'text-pink-800 dark:text-pink-200' },\n  { bg: 'bg-teal-200 dark:bg-teal-800', strip: 'bg-teal-600 dark:bg-teal-600', text: 'text-teal-800 dark:text-teal-200' },\n  { bg: 'bg-orange-200 dark:bg-orange-800', strip: 'bg-orange-600 dark:bg-orange-600', text: 'text-orange-800 dark:text-orange-200' },\n];\n\nconst DAYS_FULL = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\nexport function WeeklyHeatmap({ coverage, team }: WeeklyHeatmapProps) {\n  // Map members to colors\n  const memberColorMap = new Map<string, typeof MEMBER_COLORS[0]>();\n  team.forEach((member, index) => {\n    memberColorMap.set(member.name, MEMBER_COLORS[index % MEMBER_COLORS.length]);\n  });\n\n  const getDisplayName = (name: string) => name.replace(/\\s*\\(.*\\)/, '');\n\n  // Get primary and secondary for each day (find first covered slot)\n  const getDayAssignment = (dayIndex: number) => {\n    const daySlots = coverage[dayIndex] || [];\n    // Find first covered slot in the day\n    const coveredSlot = daySlots.find((slot) => slot.covered && slot.coveringMembers.length > 0);\n    const primary = coveredSlot?.coveringMembers[0] || null;\n    const secondary = coveredSlot?.coveringMembers[1] || null;\n    const hasCoverage = !!coveredSlot;\n    return { primary, secondary, hasCoverage };\n  };\n\n  // Monday first order\n  const dayOrder = [1, 2, 3, 4, 5, 6, 0];\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle as=\"h2\" className=\"text-base\">Weekly Coverage</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-7 gap-2\">\n          {dayOrder.map((dayIndex) => {\n            const { primary, secondary, hasCoverage } = getDayAssignment(dayIndex);\n            const primaryColors = primary ? memberColorMap.get(primary) : null;\n            const secondaryColors = secondary ? memberColorMap.get(secondary) : null;\n            const primaryName = primary ? getDisplayName(primary) : null;\n            const secondaryName = secondary ? getDisplayName(secondary) : null;\n            const isPrimaryOnly = hasCoverage && !secondary;\n\n            return (\n              <div\n                key={dayIndex}\n                className={`rounded overflow-hidden flex flex-col ${\n                  !hasCoverage ? 'opacity-50' : isPrimaryOnly ? 'opacity-80' : ''\n                }`}\n                title={`${DAYS_FULL[dayIndex]}${hasCoverage ? `\\nPrimary: ${primaryName}${secondaryName ? `\\nSecondary: ${secondaryName}` : ' (on-call)'}` : '\\nNo coverage'}`}\n              >\n                {/* Day label */}\n                <div className={`text-xs font-medium text-muted-foreground text-center py-1 ${\n                  isPrimaryOnly ? 'bg-zinc-200 dark:bg-zinc-700' : 'bg-zinc-100 dark:bg-zinc-800'\n                }`}>\n                  {DAYS_FULL[dayIndex].slice(0, 3)}\n                </div>\n\n                {/* Primary section */}\n                <div\n                  className={`flex-1 min-h-[60px] ${primaryColors?.bg || 'bg-zinc-200 dark:bg-zinc-700'} flex flex-col items-center justify-center p-2`}\n                >\n                  <span\n                    className={`text-sm font-semibold truncate w-full text-center ${primaryColors?.text || 'text-zinc-500 dark:text-zinc-400'}`}\n                  >\n                    {hasCoverage ? primaryName : 'No coverage'}\n                  </span>\n                  {isPrimaryOnly && (\n                    <span className=\"text-xs opacity-75 mt-0.5\">on-call</span>\n                  )}\n                </div>\n\n                {/* Secondary section */}\n                {secondaryColors && secondaryName && (\n                  <div\n                    className={`h-7 ${secondaryColors.strip} flex items-center justify-center px-1`}\n                  >\n                    <span className=\"text-xs font-medium text-white dark:text-zinc-900 truncate\">\n                      {secondaryName}\n                    </span>\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Legend */}\n        <div className=\"flex flex-wrap items-center gap-x-4 gap-y-2 pt-4 border-t mt-4 text-xs\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex flex-col w-4 h-5 rounded overflow-hidden\">\n              <div className=\"flex-1 bg-zinc-300 dark:bg-zinc-600\" />\n              <div className=\"h-1.5 bg-zinc-500 dark:bg-zinc-400\" />\n            </div>\n            <span className=\"text-muted-foreground\">Primary / Secondary</span>\n          </div>\n          <div className=\"h-4 border-l border-zinc-300 dark:border-zinc-600\" />\n          {team.slice(0, 8).map((member, index) => {\n            const colors = MEMBER_COLORS[index % MEMBER_COLORS.length];\n            const displayName = getDisplayName(member.name);\n            return (\n              <div key={member.name} className=\"flex items-center gap-1\">\n                <div className={`w-3 h-3 rounded ${colors.bg}`} />\n                <span>{displayName}</span>\n              </div>\n            );\n          })}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useMemo, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { MEMBER_COLORS } from './types';\nimport type { TeamMember } from './types';\n\ninterface MonthlyHeatmapProps {\n  team: TeamMember[];\n  rotationWeeks?: number;\n  rotationType?: 'weekly' | 'daily' | 'shift';\n}\n\nconst DAYS_OF_WEEK = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\nconst DAYS_FULL = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\n\n// Helper to build rich tooltips\nfunction buildTooltip(lines: (string | null | undefined | false)[]): string {\n  return lines.filter(Boolean).join('\\n');\n}\n\nexport function MonthlyHeatmap({ team, rotationWeeks, rotationType = 'weekly' }: MonthlyHeatmapProps) {\n  // Memoize active/rotation members computation\n  const { cycleLength, rotationMembers } = useMemo(() => {\n    const active = team.filter(\n      (m) =>\n        !m.workingHours.toLowerCase().includes('backup') &&\n        m.hoursPerWeek > 0\n    );\n    const cycle = rotationWeeks || active.length || 8;\n    const rotation = active.length > 0 ? active : team.slice(0, cycle);\n    return { cycleLength: cycle, rotationMembers: rotation };\n  }, [team, rotationWeeks]);\n\n  // Create Map for O(1) member index lookups (instead of indexOf which is O(n))\n  const memberIndexMap = useMemo(() => {\n    const map = new Map<TeamMember, number>();\n    rotationMembers.forEach((member, idx) => map.set(member, idx));\n    return map;\n  }, [rotationMembers]);\n\n  // Memoize getMemberColor callback\n  const getMemberColor = useCallback((memberIndex: number) => {\n    return MEMBER_COLORS[memberIndex % MEMBER_COLORS.length];\n  }, []);\n\n  // Memoize getDisplayName callback\n  const getDisplayName = useCallback((name: string) => name.replace(/\\s*\\(.*\\)/, ''), []);\n\n  // Memoize regional shift calculations\n  const { isRegionalShift, euMembers, apacMembers, usMembers, dayShiftMembers } = useMemo(() => {\n    const timezones = [...new Set(rotationMembers.map((m) => m.timezone))];\n    const regional = rotationType === 'shift' && timezones.length > 1;\n    const eu = rotationMembers.filter((m) => m.region === 'EU');\n    const apac = rotationMembers.filter((m) => m.region === 'APAC');\n    const us = rotationMembers.filter((m) => m.region === 'US');\n    const dayShift = eu.length > 0 ? eu : apac;\n    return {\n      isRegionalShift: regional,\n      euMembers: eu,\n      apacMembers: apac,\n      usMembers: us,\n      dayShiftMembers: dayShift,\n    };\n  }, [rotationMembers, rotationType]);\n\n  // Memoize getTimezoneShort callback\n  const getTimezoneShort = useCallback((member: TeamMember): string => {\n    if (member.timezone.includes('New_York')) return 'ET';\n    if (member.timezone.includes('Los_Angeles')) return 'PT';\n    if (member.timezone.includes('Chicago')) return 'CT';\n    if (member.timezone.includes('London')) return 'GMT';\n    if (member.timezone.includes('Tokyo')) return 'JST';\n    if (member.timezone.includes('Singapore') || member.timezone.includes('Shanghai')) return 'SGT';\n    return member.region;\n  }, []);\n\n  // Memoize days array computation - uses Map lookup (O(1)) instead of indexOf (O(n))\n  const days = useMemo(() => Array.from({ length: 30 }, (_, dayIndex) => {\n    const dayOfWeek = dayIndex % 7; // 0=Mon, 1=Tue, ..., 5=Sat, 6=Sun\n    const isWeekend = dayOfWeek >= 5;\n\n    if (rotationType === 'shift') {\n      if (isRegionalShift && dayShiftMembers.length > 0 && usMembers.length > 0) {\n        // Regional shift: APAC/EU covers first 12h, US covers second 12h\n        const dayPrimaryIdx = dayIndex % dayShiftMembers.length;\n        const dayBackupIdx = (dayIndex + Math.floor(dayShiftMembers.length / 2)) % dayShiftMembers.length;\n        const usPrimaryIndex = dayIndex % usMembers.length;\n        const usBackupIndex = (dayIndex + Math.floor(usMembers.length / 2)) % usMembers.length;\n\n        // Use Map lookup (O(1)) instead of indexOf (O(n))\n        const dayPrimaryColorIndex = memberIndexMap.get(dayShiftMembers[dayPrimaryIdx]) ?? 0;\n        const usPrimaryColorIndex = memberIndexMap.get(usMembers[usPrimaryIndex]) ?? 0;\n\n        return {\n          dayNumber: dayIndex + 1,\n          dayOfWeek,\n          // Day shift = APAC or EU team\n          dayPrimary: dayShiftMembers[dayPrimaryIdx],\n          dayPrimaryColorIndex: dayPrimaryColorIndex,\n          dayBackup: dayShiftMembers[dayBackupIdx],\n          dayBackupColorIndex: memberIndexMap.get(dayShiftMembers[dayBackupIdx]) ?? 0,\n          // Evening/Night shift = US team\n          nightPrimary: usMembers[usPrimaryIndex],\n          nightPrimaryColorIndex: usPrimaryColorIndex,\n          nightBackup: usMembers[usBackupIndex],\n          nightBackupColorIndex: memberIndexMap.get(usMembers[usBackupIndex]) ?? 0,\n          isWeekend,\n          isShift: true as const,\n          isDaily: false as const,\n          isRegional: true as const,\n        };\n      }\n\n      // Rotating shift: everyone cycles through both day and night\n      const dayPrimaryIndex = dayIndex % rotationMembers.length;\n      const dayBackupIndex = (dayIndex + 3) % rotationMembers.length;\n      const nightPrimaryIndex = (dayIndex + 6) % rotationMembers.length;\n      const nightBackupIndex = (dayIndex + 9) % rotationMembers.length;\n\n      return {\n        dayNumber: dayIndex + 1,\n        dayOfWeek,\n        // Day shift\n        dayPrimary: rotationMembers[dayPrimaryIndex],\n        dayPrimaryColorIndex: dayPrimaryIndex,\n        dayBackup: rotationMembers[dayBackupIndex],\n        dayBackupColorIndex: dayBackupIndex,\n        // Night shift\n        nightPrimary: rotationMembers[nightPrimaryIndex],\n        nightPrimaryColorIndex: nightPrimaryIndex,\n        nightBackup: rotationMembers[nightBackupIndex],\n        nightBackupColorIndex: nightBackupIndex,\n        isWeekend,\n        isShift: true as const,\n        isDaily: false as const,\n        isRegional: false as const,\n      };\n    }\n\n    if (rotationType === 'daily') {\n      // Daily rotation - rotates through all team members\n      const primaryIndex = dayIndex % rotationMembers.length;\n      // Secondary is offset (different person)\n      const secondaryIndex = (dayIndex + Math.floor(rotationMembers.length / 2)) % rotationMembers.length;\n      // Weekends: primary only (no secondary)\n      const hasSecondary = !isWeekend;\n\n      return {\n        dayNumber: dayIndex + 1,\n        dayOfWeek,\n        primary: rotationMembers[primaryIndex],\n        primaryColorIndex: primaryIndex,\n        secondary: hasSecondary ? rotationMembers[secondaryIndex] : null,\n        secondaryColorIndex: hasSecondary ? secondaryIndex : -1,\n        isWeekend,\n        isShift: false as const,\n        isDaily: true as const,\n        hasCoverage: true, // 24/7 coverage\n      };\n    }\n\n    // Weekly rotation (default)\n    const weekNumber = Math.floor(dayIndex / 7);\n    const primaryIndex = weekNumber % rotationMembers.length;\n    const secondaryIndex = (primaryIndex + 1) % rotationMembers.length;\n\n    return {\n      dayNumber: dayIndex + 1,\n      dayOfWeek,\n      primary: rotationMembers[primaryIndex],\n      primaryColorIndex: primaryIndex,\n      secondary: rotationMembers[secondaryIndex],\n      secondaryColorIndex: secondaryIndex,\n      isWeekend,\n      isShift: false as const,\n      isDaily: false as const,\n    };\n  }), [rotationType, isRegionalShift, dayShiftMembers, usMembers, rotationMembers, memberIndexMap]);\n\n  // Memoize weeks grid computation\n  const weeks = useMemo(() => {\n    const result: (typeof days[0] | null)[][] = [];\n    for (let i = 0; i < 5; i++) {\n      const week: (typeof days[0] | null)[] = [];\n      for (let j = 0; j < 7; j++) {\n        const dayIndex = i * 7 + j;\n        week.push(dayIndex < 30 ? days[dayIndex] : null);\n      }\n      result.push(week);\n    }\n    return result;\n  }, [days]);\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle as=\"h2\" className=\"text-base\">Monthly Coverage (30 Days)</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-2\">\n          {/* Day of week headers */}\n          <div className=\"grid grid-cols-7 gap-1\">\n            {DAYS_OF_WEEK.map((day) => (\n              <div\n                key={day}\n                className=\"text-xs font-medium text-muted-foreground text-center py-1\"\n              >\n                {day}\n              </div>\n            ))}\n          </div>\n\n          {/* Calendar grid */}\n          <div className=\"space-y-1\">\n            {weeks.map((week, weekIndex) => (\n              <div key={weekIndex} className=\"grid grid-cols-7 gap-1\">\n                {week.map((day, dayIndex) => {\n                  if (!day) {\n                    return (\n                      <div\n                        key={dayIndex}\n                        className=\"aspect-square rounded bg-zinc-100 dark:bg-zinc-800/30\"\n                      />\n                    );\n                  }\n\n                  // Shift-based rendering (day/night)\n                  if (day.isShift) {\n                    const dayColors = getMemberColor(day.dayPrimaryColorIndex);\n                    const nightColors = getMemberColor(day.nightPrimaryColorIndex);\n                    const dayName = getDisplayName(day.dayPrimary.name);\n                    const nightName = getDisplayName(day.nightPrimary.name);\n                    const dayTz = getTimezoneShort(day.dayPrimary);\n                    const nightTz = getTimezoneShort(day.nightPrimary);\n\n                    const shiftTooltip = buildTooltip([\n                      `üìÖ ${DAYS_FULL[day.dayOfWeek]} (Day ${day.dayNumber})`,\n                      day.isWeekend && 'üóìÔ∏è Weekend',\n                      '',\n                      `‚òÄÔ∏è Day Shift (12h)`,\n                      `   Primary: ${dayName} (${dayTz})`,\n                      day.dayBackup && `   Backup: ${getDisplayName(day.dayBackup.name)}`,\n                      '',\n                      `üåô Night Shift (12h)`,\n                      `   Primary: ${nightName} (${nightTz})`,\n                      day.nightBackup && `   Backup: ${getDisplayName(day.nightBackup.name)}`,\n                    ]);\n\n                    return (\n                      <div\n                        key={dayIndex}\n                        className={`aspect-square rounded overflow-hidden flex flex-col ${\n                          day.isWeekend ? 'opacity-80' : ''\n                        }`}\n                        title={shiftTooltip}\n                      >\n                        {/* Day number */}\n                        <div className=\"text-[10px] text-muted-foreground text-center bg-zinc-100 dark:bg-zinc-800/50 py-0.5\">\n                          {day.dayNumber}\n                        </div>\n                        {/* Day shift - top half */}\n                        <div\n                          className={`flex-1 ${dayColors.bg} flex items-center justify-center`}\n                          title={`‚òÄÔ∏è Day Shift: ${dayName} (${dayTz})`}\n                        >\n                          <span className={`text-[10px] font-semibold ${dayColors.text} truncate px-0.5`}>\n                            {dayName}\n                          </span>\n                        </div>\n                        {/* Night shift - bottom half */}\n                        <div\n                          className={`flex-1 ${nightColors.strip} flex items-center justify-center`}\n                          title={`üåô Night Shift: ${nightName} (${nightTz})`}\n                        >\n                          <span className=\"text-[10px] font-semibold text-white dark:text-zinc-900 truncate px-0.5\">\n                            {nightName}\n                          </span>\n                        </div>\n                      </div>\n                    );\n                  }\n\n                  // Daily rotation with weekend gaps\n                  if (day.isDaily && !day.hasCoverage) {\n                    return (\n                      <div\n                        key={dayIndex}\n                        className=\"aspect-square rounded overflow-hidden flex flex-col opacity-50\"\n                        title={`Day ${day.dayNumber}\\nNo coverage (weekend)`}\n                      >\n                        <div className=\"flex-1 bg-zinc-200 dark:bg-zinc-700 flex flex-col items-center justify-center p-1\">\n                          <span className=\"text-xs text-muted-foreground leading-tight\">\n                            {day.dayNumber}\n                          </span>\n                          <span className=\"text-[10px] text-zinc-500 dark:text-zinc-400\">\n                            Off\n                          </span>\n                        </div>\n                      </div>\n                    );\n                  }\n\n                  // Weekly/Daily rotation rendering (primary/secondary)\n                  const primaryColors = day.primary ? getMemberColor(day.primaryColorIndex) : null;\n                  const secondaryColors = day.secondary ? getMemberColor(day.secondaryColorIndex) : null;\n                  const primaryName = day.primary ? getDisplayName(day.primary.name) : 'None';\n                  const secondaryName = day.secondary ? getDisplayName(day.secondary.name) : null;\n                  const primaryTz = day.primary ? getTimezoneShort(day.primary) : '';\n                  const secondaryTz = day.secondary ? getTimezoneShort(day.secondary) : '';\n                  const weekNum = Math.floor((day.dayNumber - 1) / 7) + 1;\n\n                  const rotationTooltip = buildTooltip([\n                    `üìÖ ${DAYS_FULL[day.dayOfWeek]} (Day ${day.dayNumber})`,\n                    rotationType === 'weekly' && `üìÜ Week ${weekNum} of ${cycleLength}`,\n                    day.isWeekend && 'üóìÔ∏è Weekend',\n                    '',\n                    `üë§ Primary: ${primaryName}${primaryTz ? ` (${primaryTz})` : ''}`,\n                    day.primary?.workingHours && `   ${day.primary.workingHours}`,\n                    secondaryName && '',\n                    secondaryName && `üë• Secondary: ${secondaryName}${secondaryTz ? ` (${secondaryTz})` : ''}`,\n                    day.secondary?.workingHours && `   ${day.secondary.workingHours}`,\n                    '',\n                    rotationType === 'weekly' ? '‚è±Ô∏è 24/7 coverage for the week' : '‚è±Ô∏è 24h shift',\n                  ]);\n\n                  return (\n                    <div\n                      key={dayIndex}\n                      className={`aspect-square rounded overflow-hidden flex flex-col ${\n                        day.isWeekend ? 'opacity-80' : ''\n                      }`}\n                      title={rotationTooltip}\n                    >\n                      {/* Primary section - main cell */}\n                      <div\n                        className={`flex-1 ${primaryColors?.bg || 'bg-zinc-200 dark:bg-zinc-700'} flex flex-col items-center justify-center p-1`}\n                      >\n                        <span className=\"text-xs text-muted-foreground leading-tight\">\n                          {day.dayNumber}\n                        </span>\n                        <span\n                          className={`text-xs font-semibold truncate w-full text-center leading-tight ${primaryColors?.text || 'text-zinc-600'}`}\n                        >\n                          {primaryName}\n                        </span>\n                      </div>\n\n                      {/* Secondary section - bottom strip */}\n                      {secondaryColors && secondaryName && (\n                        <div\n                          className={`h-6 ${secondaryColors.strip} flex items-center justify-center px-1`}\n                          title={`üë• Secondary: ${secondaryName}${secondaryTz ? ` (${secondaryTz})` : ''}`}\n                        >\n                          <span className=\"text-[11px] font-medium text-white dark:text-zinc-900 truncate\">\n                            {secondaryName}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            ))}\n          </div>\n\n          {/* Legend */}\n          <div className=\"flex flex-wrap items-center gap-x-4 gap-y-2 pt-3 border-t text-xs\">\n            {rotationType === 'shift' ? (\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex flex-col w-4 h-4 rounded overflow-hidden\">\n                  <div className=\"flex-1 bg-zinc-300 dark:bg-zinc-600\" />\n                  <div className=\"flex-1 bg-zinc-500 dark:bg-zinc-400\" />\n                </div>\n                <span className=\"text-muted-foreground\">\n                  {isRegionalShift\n                    ? apacMembers.length > 0\n                      ? 'APAC / US'\n                      : 'EU / US'\n                    : 'Day / Night'}\n                </span>\n              </div>\n            ) : (\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex flex-col w-4 h-4 rounded overflow-hidden\">\n                  <div className=\"flex-1 bg-zinc-300 dark:bg-zinc-600\" />\n                  <div className=\"h-1 bg-zinc-500 dark:bg-zinc-400\" />\n                </div>\n                <span className=\"text-muted-foreground\">Primary / Secondary</span>\n              </div>\n            )}\n            <div className=\"h-4 border-l border-zinc-300 dark:border-zinc-600\" />\n            {rotationMembers.map((member, index) => {\n              const colors = getMemberColor(index);\n              const displayName = getDisplayName(member.name);\n              return (\n                <div key={member.name} className=\"flex items-center gap-1\">\n                  <div className={`w-3 h-3 rounded ${colors.bg}`} />\n                  <span>{displayName}</span>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Cycle info */}\n          <p className=\"text-xs text-muted-foreground pt-1\">\n            {rotationType === 'shift'\n              ? isRegionalShift\n                ? apacMembers.length > 0\n                  ? `${apacMembers.length} APAC + ${usMembers.length} US. APAC covers 02-14 UTC (daytime Tokyo), US covers 14-02 UTC (daytime LA). Each region rotates within their shift.`\n                  : `${euMembers.length} EU + ${usMembers.length} US. EU covers daytime, US covers evening/night. Each region rotates within their shift.`\n                : `${rotationMembers.length}-person rotation. Each person cycles through both day and night shifts over ${rotationMembers.length} days.`\n              : rotationType === 'daily'\n                ? `${rotationMembers.length}-person daily rotation. Primary 24/7, Secondary during business hours only (weekdays).`\n                : `${cycleLength}-week rotation. Secondary shadows primary before taking over the next week.`}\n          </p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\ninterface BusinessHoursTimelineProps {\n  etPrimaryHours: { start: number; end: number }; // UTC hours when ET is primary\n  ptPrimaryHours: { start: number; end: number }; // UTC hours when PT is primary\n  overlapHours: { start: number; end: number }; // UTC hours when both coasts overlap\n}\n\n// Colors matching DailyHeatmap\nconst COLORS = {\n  et: { bg: 'bg-emerald-700 dark:bg-emerald-600', text: 'text-white' },\n  pt: { bg: 'bg-sky-500 dark:bg-sky-600', text: 'text-white' },\n  rotating: { bg: 'bg-zinc-400 dark:bg-zinc-600', text: 'text-white' },\n};\n\n// Helper to build rich tooltips\nfunction buildTooltip(lines: (string | null | undefined | false)[]): string {\n  return lines.filter(Boolean).join('\\n');\n}\n\n// Convert UTC hour to local time using Intl (handles DST)\nfunction utcToLocal(utcHour: number, timezone: string): string {\n  try {\n    const date = new Date();\n    date.setUTCHours(utcHour % 24, 0, 0, 0);\n\n    const formatter = new Intl.DateTimeFormat('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n      timeZone: timezone,\n    });\n    return formatter.format(date);\n  } catch {\n    return `${(utcHour % 24).toString().padStart(2, '0')}:00`;\n  }\n}\n\nfunction utcToET(utcHour: number): string {\n  return utcToLocal(utcHour, 'America/New_York');\n}\n\nfunction utcToPT(utcHour: number): string {\n  return utcToLocal(utcHour, 'America/Los_Angeles');\n}\n\nexport function BusinessHoursTimeline({\n  etPrimaryHours = { start: 14, end: 19 },\n  ptPrimaryHours = { start: 19, end: 25 }, // 25 = 01:00 next day\n  overlapHours = { start: 17, end: 22 }, // When both coasts are working\n}: BusinessHoursTimelineProps) {\n  // Business hours span from ET start to PT end (wrapping midnight)\n  const businessStart = etPrimaryHours.start; // 14:00 UTC\n  const businessEnd = ptPrimaryHours.end; // 01:00 UTC (25 in 24h+ notation)\n  const businessDuration = businessEnd - businessStart; // 11 hours\n\n  // Primary row segments\n  const etPrimaryWidth = ((etPrimaryHours.end - etPrimaryHours.start) / businessDuration) * 100;\n  const ptPrimaryWidth = ((ptPrimaryHours.end - ptPrimaryHours.start) / businessDuration) * 100;\n\n  // Secondary row segments:\n  // 14-17: Rotating (ET only in office)\n  // 17-19: PT secondary (overlap, ET primary)\n  // 19-22: ET secondary (overlap, PT primary)\n  // 22-01: Rotating (PT only in office)\n  const etOnlyWidth = ((overlapHours.start - businessStart) / businessDuration) * 100; // 14-17\n  const ptSecondaryWidth = ((etPrimaryHours.end - overlapHours.start) / businessDuration) * 100; // 17-19\n  const etSecondaryWidth = ((overlapHours.end - etPrimaryHours.end) / businessDuration) * 100; // 19-22\n  const ptOnlyWidth = ((businessEnd - overlapHours.end) / businessDuration) * 100; // 22-01\n\n  // Off-hours: 01:00-14:00 UTC = 13 hours\n  const offHoursStart = 1;\n  const offHoursEnd = 14;\n\n  const formatHour = (h: number) => {\n    if (h >= 24) return `0${h - 24}:00`;\n    return `${h}:00`;\n  };\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle as=\"h2\" className=\"text-base\">Daily Coverage Pattern</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {/* Business Hours Section */}\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <h4 className=\"text-sm font-medium\">Business Hours</h4>\n              <span className=\"text-xs text-muted-foreground\">\n                {formatHour(businessStart)} - {formatHour(businessEnd)} UTC\n              </span>\n            </div>\n\n            {/* Primary Row */}\n            <div className=\"space-y-1\">\n              <span className=\"text-xs text-muted-foreground\">Primary</span>\n              <div className=\"relative h-10 rounded-lg overflow-hidden flex\">\n                <div\n                  className={`${COLORS.et.bg} flex items-center justify-center`}\n                  style={{ width: `${etPrimaryWidth}%` }}\n                  title={buildTooltip([\n                    'üë§ US East (ET) - Primary',\n                    '',\n                    `‚è∞ ${formatHour(etPrimaryHours.start)} - ${formatHour(etPrimaryHours.end)} UTC`,\n                    `üè† ${utcToET(etPrimaryHours.start)} - ${utcToET(etPrimaryHours.end)} ET`,\n                    `‚è±Ô∏è Duration: ${etPrimaryHours.end - etPrimaryHours.start}h`,\n                    '',\n                    'üìã Handles all incoming incidents',\n                  ])}\n                >\n                  <span className={`text-sm font-semibold ${COLORS.et.text}`}>US East</span>\n                </div>\n                <div\n                  className={`${COLORS.pt.bg} flex items-center justify-center`}\n                  style={{ width: `${ptPrimaryWidth}%` }}\n                  title={buildTooltip([\n                    'üë§ US West (PT) - Primary',\n                    '',\n                    `‚è∞ ${formatHour(ptPrimaryHours.start)} - ${formatHour(ptPrimaryHours.end > 24 ? ptPrimaryHours.end - 24 : ptPrimaryHours.end)} UTC`,\n                    `üè† ${utcToPT(ptPrimaryHours.start)} - ${utcToPT(ptPrimaryHours.end > 24 ? ptPrimaryHours.end - 24 : ptPrimaryHours.end)} PT`,\n                    `‚è±Ô∏è Duration: ${ptPrimaryHours.end - ptPrimaryHours.start}h`,\n                    '',\n                    'üìã Handles all incoming incidents',\n                  ])}\n                >\n                  <span className={`text-sm font-semibold ${COLORS.pt.text}`}>US West</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Secondary Row */}\n            <div className=\"space-y-1\">\n              <span className=\"text-xs text-muted-foreground\">Secondary</span>\n              <div className=\"relative h-10 rounded-lg overflow-hidden flex\">\n                {/* 14-17: Rotating (only ET in office) */}\n                <div\n                  className={`${COLORS.rotating.bg} flex items-center justify-center`}\n                  style={{ width: `${etOnlyWidth}%` }}\n                  title={buildTooltip([\n                    'üîÑ Rotating Secondary',\n                    '',\n                    `‚è∞ ${formatHour(businessStart)} - ${formatHour(overlapHours.start)} UTC`,\n                    `‚è±Ô∏è Duration: ${overlapHours.start - businessStart}h`,\n                    '',\n                    'üìã Only ET in office - secondary from on-call rotation',\n                  ])}\n                >\n                  <span className={`text-xs font-medium ${COLORS.rotating.text}`}>Rotating</span>\n                </div>\n                {/* 17-19: PT secondary */}\n                <div\n                  className={`${COLORS.pt.bg} flex items-center justify-center`}\n                  style={{ width: `${ptSecondaryWidth}%` }}\n                  title={buildTooltip([\n                    'üë• US West (PT) - Secondary',\n                    '',\n                    `‚è∞ ${formatHour(overlapHours.start)} - ${formatHour(etPrimaryHours.end)} UTC`,\n                    `üè† ${utcToPT(overlapHours.start)} - ${utcToPT(etPrimaryHours.end)} PT`,\n                    `‚è±Ô∏è Duration: ${etPrimaryHours.end - overlapHours.start}h`,\n                    '',\n                    'üìã Escalation backup while ET is primary',\n                  ])}\n                >\n                  <span className={`text-xs font-medium ${COLORS.pt.text}`}>US West</span>\n                </div>\n                {/* 19-22: ET secondary */}\n                <div\n                  className={`${COLORS.et.bg} flex items-center justify-center`}\n                  style={{ width: `${etSecondaryWidth}%` }}\n                  title={buildTooltip([\n                    'üë• US East (ET) - Secondary',\n                    '',\n                    `‚è∞ ${formatHour(etPrimaryHours.end)} - ${formatHour(overlapHours.end)} UTC`,\n                    `üè† ${utcToET(etPrimaryHours.end)} - ${utcToET(overlapHours.end)} ET`,\n                    `‚è±Ô∏è Duration: ${overlapHours.end - etPrimaryHours.end}h`,\n                    '',\n                    'üìã Escalation backup while PT is primary',\n                  ])}\n                >\n                  <span className={`text-xs font-medium ${COLORS.et.text}`}>US East</span>\n                </div>\n                {/* 22-01: Rotating (only PT in office) */}\n                <div\n                  className={`${COLORS.rotating.bg} flex items-center justify-center`}\n                  style={{ width: `${ptOnlyWidth}%` }}\n                  title={buildTooltip([\n                    'üîÑ Rotating Secondary',\n                    '',\n                    `‚è∞ ${formatHour(overlapHours.end)} - ${formatHour(businessEnd > 24 ? businessEnd - 24 : businessEnd)} UTC`,\n                    `‚è±Ô∏è Duration: ${businessEnd - overlapHours.end}h`,\n                    '',\n                    'üìã Only PT in office - secondary from on-call rotation',\n                  ])}\n                >\n                  <span className={`text-xs font-medium ${COLORS.rotating.text}`}>Rotating</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Time labels */}\n            <div className=\"flex justify-between text-xs text-muted-foreground\">\n              <span>{formatHour(businessStart)}</span>\n              <span>{formatHour(overlapHours.start)}</span>\n              <span>{formatHour(etPrimaryHours.end)}</span>\n              <span>{formatHour(overlapHours.end)}</span>\n              <span>{formatHour(businessEnd)}</span>\n            </div>\n          </div>\n\n          {/* Off-Hours Section */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <h4 className=\"text-sm font-medium\">Off-Hours</h4>\n              <span className=\"text-xs text-muted-foreground\">\n                0{offHoursStart}:00 - {offHoursEnd}:00 UTC\n              </span>\n            </div>\n            <div className=\"relative h-10 rounded-lg overflow-hidden flex\">\n              <div\n                className={`w-full ${COLORS.rotating.bg} flex items-center justify-center`}\n                title={buildTooltip([\n                  'üîÑ Rotating On-Call',\n                  '',\n                  `‚è∞ 0${offHoursStart}:00 - ${offHoursEnd}:00 UTC`,\n                  `‚è±Ô∏è Duration: ${offHoursEnd - offHoursStart}h`,\n                  '',\n                  'üë§ Primary only (no secondary coverage)',\n                  'üîÅ Alternates between ET and PT daily:',\n                  '   Mon: PT, Tue: ET, Wed: PT, Thu: ET...',\n                  '',\n                  'üìã Handles all incidents until business hours resume',\n                ])}\n              >\n                <span className={`text-sm font-semibold ${COLORS.rotating.text}`}>\n                  Rotating On-Call (Primary Only)\n                </span>\n              </div>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Single on-call rotates daily between ET and PT team members\n            </p>\n          </div>\n\n          {/* Legend */}\n          <div className=\"flex flex-wrap items-center gap-4 pt-2 border-t text-xs\">\n            <div className=\"flex items-center gap-1.5\">\n              <div className={`w-3 h-3 rounded ${COLORS.et.bg}`} />\n              <span>US East (ET)</span>\n            </div>\n            <div className=\"flex items-center gap-1.5\">\n              <div className={`w-3 h-3 rounded ${COLORS.pt.bg}`} />\n              <span>US West (PT)</span>\n            </div>\n            <div className=\"flex items-center gap-1.5\">\n              <div className={`w-3 h-3 rounded ${COLORS.rotating.bg}`} />\n              <span>Rotating</span>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport type { ModelMetrics } from './types';\n\ninterface MetricsPanelProps {\n  metrics: ModelMetrics;\n}\n\nexport function MetricsPanel({ metrics }: MetricsPanelProps) {\n  return (\n    <Card>\n      <CardHeader className=\"pb-2\">\n        <CardTitle as=\"h2\" className=\"text-sm font-medium\">Key Metrics</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4\">\n          <MetricBox\n            label=\"Coverage\"\n            value={`${metrics.coveragePercent}%`}\n            highlight={metrics.coveragePercent === 100}\n          />\n          <MetricBox\n            label=\"Team Size\"\n            value={`${metrics.teamSize}`}\n          />\n          <MetricBox\n            label=\"Shift Length\"\n            value={metrics.shiftLength}\n          />\n          <MetricBox\n            label=\"Handoffs/Week\"\n            value={`${metrics.handoffsPerWeek}`}\n            warning={metrics.handoffsPerWeek > 14}\n          />\n          <MetricBox\n            label=\"Night Hours\"\n            value={`${metrics.nightHoursPerPerson}h`}\n            highlight={metrics.nightHoursPerPerson === 0}\n            warning={metrics.nightHoursPerPerson > 10}\n          />\n          <MetricBox\n            label=\"Weekend Hours\"\n            value={`${metrics.weekendHoursPerPerson}h`}\n          />\n          <MetricBox\n            label=\"Hours/Week\"\n            value={`${metrics.hoursPerWeekPerPerson}h`}\n          />\n          <MetricBox\n            label=\"Frequency\"\n            value={metrics.onCallFrequency}\n            small\n          />\n        </div>\n        <div className=\"mt-4 pt-3 border-t text-sm text-muted-foreground\">\n          <span className=\"font-medium\">Rotation:</span> {metrics.rotation}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\ninterface MetricBoxProps {\n  label: string;\n  value: string;\n  highlight?: boolean;\n  warning?: boolean;\n  small?: boolean;\n}\n\nfunction MetricBox({ label, value, highlight, warning, small }: MetricBoxProps) {\n  return (\n    <div className=\"space-y-1\">\n      <div className=\"text-xs text-muted-foreground\">{label}</div>\n      <div\n        className={`font-semibold ${small ? 'text-sm' : 'text-lg'} ${\n          highlight\n            ? 'text-green-600 dark:text-green-400'\n            : warning\n              ? 'text-amber-600 dark:text-amber-400'\n              : ''\n        }`}\n      >\n        {value}\n      </div>\n    </div>\n  );\n}\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport type { TeamMember } from './types';\nimport { MEMBER_COLORS, REGION_COLORS, TIMEZONE_LABELS } from './types';\n\ninterface TeamListProps {\n  team: TeamMember[];\n}\n\n// Timezone-based colors (matches DailyHeatmap)\nconst TIMEZONE_COLORS: Record<string, { bg: string }> = {\n  'America/New_York': { bg: 'bg-emerald-700 dark:bg-emerald-600' },\n  'America/Los_Angeles': { bg: 'bg-sky-500 dark:bg-sky-600' },\n  'America/Chicago': { bg: 'bg-emerald-700 dark:bg-emerald-600' },\n  'Europe/London': { bg: 'bg-rose-400 dark:bg-rose-600' },\n  'Asia/Tokyo': { bg: 'bg-violet-400 dark:bg-violet-600' },\n};\n\nexport function TeamList({ team }: TeamListProps) {\n  // Determine coloring mode based on team composition\n  const isSingleRegion = team.every((m) => m.region === 'Single');\n  const uniqueTimezones = [...new Set(team.map((m) => m.timezone))];\n  const isUSOnly = team.every((m) => m.region === 'US') && uniqueTimezones.length > 1;\n\n  // Get color for a team member based on mode\n  const getMemberColor = (member: TeamMember, index: number): string => {\n    if (isSingleRegion) {\n      return MEMBER_COLORS[index % MEMBER_COLORS.length].strip;\n    }\n    if (isUSOnly) {\n      return TIMEZONE_COLORS[member.timezone]?.bg || REGION_COLORS[member.region].bg;\n    }\n    return REGION_COLORS[member.region].bg;\n  };\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-2\">\n        <CardTitle as=\"h2\" className=\"text-sm font-medium\">Sample Team</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-2\">\n          {team.map((member, index) => {\n            const colorClass = getMemberColor(member, index);\n            const tzLabel = TIMEZONE_LABELS[member.timezone] || member.region;\n            return (\n              <div\n                key={index}\n                className=\"flex items-center gap-3 p-2 rounded-lg bg-zinc-50 dark:bg-zinc-900/50\"\n              >\n                {/* Color indicator */}\n                <div\n                  className={`w-2 h-8 rounded-full ${colorClass}`}\n                  title={tzLabel}\n                />\n\n                {/* Name and schedule */}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-sm font-medium truncate\">{member.name}</div>\n                  <div className=\"text-xs text-muted-foreground truncate\">\n                    {member.workingHours}\n                  </div>\n                </div>\n\n                {/* Stats */}\n                <div className=\"flex gap-4 text-xs text-muted-foreground shrink-0\">\n                  <span title=\"Hours per week\">{member.hoursPerWeek}h/wk</span>\n                  {member.nightHours > 0 && (\n                    <span\n                      className=\"text-amber-600 dark:text-amber-400\"\n                      title=\"Night hours\"\n                    >\n                      {member.nightHours}h nights\n                    </span>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Legend */}\n        <div className=\"flex flex-wrap gap-4 mt-3 pt-3 border-t text-xs text-muted-foreground\">\n          {isSingleRegion ? (\n            <span>Time Zone Agnostic</span>\n          ) : isUSOnly ? (\n            // Show US East / Central / West based on what timezones are present\n            <>\n              {uniqueTimezones.includes('America/New_York') && (\n                <div className=\"flex items-center gap-1.5\">\n                  <div className={`w-3 h-3 rounded ${TIMEZONE_COLORS['America/New_York'].bg}`} />\n                  <span>US East</span>\n                </div>\n              )}\n              {uniqueTimezones.includes('America/Chicago') && (\n                <div className=\"flex items-center gap-1.5\">\n                  <div className={`w-3 h-3 rounded ${TIMEZONE_COLORS['America/Chicago'].bg}`} />\n                  <span>US Central</span>\n                </div>\n              )}\n              {uniqueTimezones.includes('America/Los_Angeles') && (\n                <div className=\"flex items-center gap-1.5\">\n                  <div className={`w-3 h-3 rounded ${TIMEZONE_COLORS['America/Los_Angeles'].bg}`} />\n                  <span>US West</span>\n                </div>\n              )}\n            </>\n          ) : (\n            // Show regions with their colors\n            uniqueTimezones.map((tz) => {\n              const member = team.find((m) => m.timezone === tz);\n              if (!member) return null;\n              const color = REGION_COLORS[member.region];\n              const label = TIMEZONE_LABELS[tz] || member.region;\n              return (\n                <div key={tz} className=\"flex items-center gap-1.5\">\n                  <div className={`w-3 h-3 rounded ${color.bg}`} />\n                  <span>{label}</span>\n                </div>\n              );\n            })\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Check, AlertTriangle } from 'lucide-react';\nimport type { ModelTradeoffs } from './types';\n\ninterface TradeoffsProps {\n  tradeoffs: ModelTradeoffs;\n}\n\nexport function Tradeoffs({ tradeoffs }: TradeoffsProps) {\n  return (\n    <Card>\n      <CardHeader className=\"pb-2\">\n        <CardTitle as=\"h2\" className=\"text-sm font-medium\">Tradeoffs</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid gap-4 sm:grid-cols-2\">\n          {/* Pros */}\n          <div className=\"space-y-2\">\n            <h3 className=\"text-xs font-medium text-green-600 dark:text-green-400 uppercase tracking-wide\">\n              Advantages\n            </h3>\n            <ul className=\"space-y-1.5\">\n              {tradeoffs.pros.map((pro, index) => (\n                <li key={index} className=\"flex items-start gap-2 text-sm\">\n                  <Check className=\"w-4 h-4 text-green-500 shrink-0 mt-0.5\" />\n                  <span>{pro}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Cons */}\n          <div className=\"space-y-2\">\n            <h3 className=\"text-xs font-medium text-amber-600 dark:text-amber-400 uppercase tracking-wide\">\n              Considerations\n            </h3>\n            <ul className=\"space-y-1.5\">\n              {tradeoffs.cons.map((con, index) => (\n                <li key={index} className=\"flex items-start gap-2 text-sm\">\n                  <AlertTriangle className=\"w-4 h-4 text-amber-500 shrink-0 mt-0.5\" />\n                  <span>{con}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useState } from 'react';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { COVERAGE_MODELS, getModelById } from './models';\nimport { CoverageHeatmap } from './CoverageHeatmap';\nimport { DailyHeatmap } from './DailyHeatmap';\nimport { WeeklyHeatmap } from './WeeklyHeatmap';\nimport { MonthlyHeatmap } from './MonthlyHeatmap';\nimport { BusinessHoursTimeline } from './BusinessHoursTimeline';\nimport { MetricsPanel } from './MetricsPanel';\nimport { TeamList } from './TeamList';\nimport { Tradeoffs } from './Tradeoffs';\nimport { trackToolEvent } from '@/lib/trackToolEvent';\n\nexport default function OncallCoverage() {\n  const [selectedModelId, setSelectedModelId] = useState(COVERAGE_MODELS[0].id);\n  const model = getModelById(selectedModelId) ?? COVERAGE_MODELS[0];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Intro */}\n      <p className=\"text-muted-foreground\">\n        Compare different on-call coverage models to find the right fit for your team.\n        Select a model to see how it distributes coverage, burden, and tradeoffs.\n      </p>\n\n      {/* Model selector */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center gap-2\">\n        <label className=\"text-sm font-medium shrink-0\">Coverage Model:</label>\n        <Select value={selectedModelId} onValueChange={(value) => {\n          setSelectedModelId(value);\n          trackToolEvent({ tool_name: 'oncall_coverage', action: 'model_select', event_label: value });\n        }}>\n          <SelectTrigger className=\"w-full sm:w-80\" aria-label=\"Select coverage model\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            {COVERAGE_MODELS.map((m) => (\n              <SelectItem key={m.id} value={m.id}>\n                {m.name}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Screen reader announcement for model change (concise) */}\n      <div role=\"status\" aria-live=\"polite\" className=\"sr-only\">\n        Selected: {model.name}\n      </div>\n\n      {/* Model description */}\n      <p className=\"text-sm text-muted-foreground border-l-2 border-primary/30 pl-3\">\n        {model.description}\n      </p>\n\n      {/* Visualizations */}\n      <div className=\"space-y-6\">\n        {/* Coverage levels heatmap (not for follow-the-sun, weekly-rotation, or 12-hour-shifts) */}\n        {!['follow-the-sun', 'weekly-rotation', '12-hour-shifts'].includes(model.id) && (\n          <CoverageHeatmap coverage={model.coverage} />\n        )}\n\n        {/* Daily view - 24 hours (not for weekly-rotation or business-hours) */}\n        {!['weekly-rotation', 'business-hours'].includes(model.id) && (\n          <DailyHeatmap coverage={model.coverage} team={model.team} />\n        )}\n\n        {/* Business hours timeline (only for business-hours model) */}\n        {model.id === 'business-hours' && (\n          <BusinessHoursTimeline\n            etPrimaryHours={{ start: 14, end: 19 }}\n            ptPrimaryHours={{ start: 19, end: 25 }}\n            overlapHours={{ start: 17, end: 22 }}\n          />\n        )}\n\n        {/* Weekly view - 7 days (only for models where it adds value) */}\n        {!['follow-the-sun', 'weekly-rotation', '12-hour-shifts', 'business-hours'].includes(model.id) && (\n          <WeeklyHeatmap coverage={model.coverage} team={model.team} />\n        )}\n\n        {/* Monthly rotation view - 30 days */}\n        {!['follow-the-sun', 'business-hours', '12-hour-shifts'].includes(model.id) && (\n          <MonthlyHeatmap\n            team={model.team}\n            rotationWeeks={model.rotationWeeks}\n            rotationType={model.rotationType}\n          />\n        )}\n\n        {/* Metrics */}\n        <MetricsPanel metrics={model.metrics} />\n\n        {/* Team */}\n        <TeamList team={model.team} />\n\n        {/* Tradeoffs */}\n        <Tradeoffs tradeoffs={model.tradeoffs} />\n      </div>\n    </div>\n  );\n}\n"],"names":["createWeekCoverage","pattern","week","day","daySlots","hour","covered","members","pickByDay","offset","followTheSun","isWeekday","apac","eu","us","apacPrimary","apacSecondary","euPrimary","euSecondary","usPrimary","usSecondary","allMembers","weekendPrimary","weekendSecondary","weeklyRotation","twelveHourShifts","apacTeam","usTeam","primary","backup","businessHoursOnly","etTeam","ptTeam","onCallRotation","etPrimary","ptPrimary","onCallPrimary","COVERAGE_MODELS","getModelById","id","m","DAYS_SHORT","REGION_COLORS","MEMBER_COLORS","TIMEZONE_LABELS","CoverageHeatmap","coverage","hourLabels","Card","jsx","CardHeader","CardTitle","CardContent","jsxs","dayIndex","slot","memberCount","bgColor","SHIFT_COLORS","formatHour","h","dateTimeFormatCache","getDateTimeFormatter","timezone","utcToLocal","utcHour","date","getTimezoneLabel","buildTooltip","lines","getShiftType","member","hours","getShiftByHour","getCoverageBlocks","memberMap","memberIndex","useRotatingShifts","blocks","current","memberName","key","label","shift","info","DailyHeatmap","team","uniqueTimezones","hasRotatingShifts","useShiftMode","useMemo","timezones","singleSite","shiftTypes","shifts","s","rotating","legendItems","map","items","tz","primaryBlocks","secondaryBlocks","slots","getColors","useCallback","renderTimeline","title","block","index","widthPercent","leftPercent","colors","showLabel","duration","hasTimezone","localStart","localEnd","tzLabel","tooltip","item","DAYS_FULL","WeeklyHeatmap","memberColorMap","getDisplayName","name","getDayAssignment","coveredSlot","secondary","dayOrder","hasCoverage","primaryColors","secondaryColors","primaryName","secondaryName","isPrimaryOnly","displayName","DAYS_OF_WEEK","MonthlyHeatmap","rotationWeeks","rotationType","cycleLength","rotationMembers","active","cycle","rotation","memberIndexMap","idx","getMemberColor","isRegionalShift","euMembers","apacMembers","usMembers","dayShiftMembers","regional","dayShift","getTimezoneShort","days","_","dayOfWeek","isWeekend","dayPrimaryIdx","dayBackupIdx","usPrimaryIndex","usBackupIndex","dayPrimaryColorIndex","usPrimaryColorIndex","dayPrimaryIndex","dayBackupIndex","nightPrimaryIndex","nightBackupIndex","primaryIndex","secondaryIndex","hasSecondary","weeks","result","i","j","weekIndex","dayColors","nightColors","dayName","nightName","dayTz","nightTz","shiftTooltip","primaryTz","secondaryTz","weekNum","rotationTooltip","COLORS","utcToET","utcToPT","BusinessHoursTimeline","etPrimaryHours","ptPrimaryHours","overlapHours","businessStart","businessEnd","businessDuration","etPrimaryWidth","ptPrimaryWidth","etOnlyWidth","ptSecondaryWidth","etSecondaryWidth","ptOnlyWidth","offHoursStart","offHoursEnd","MetricsPanel","metrics","MetricBox","value","highlight","warning","small","TIMEZONE_COLORS","TeamList","isSingleRegion","isUSOnly","colorClass","Fragment","color","Tradeoffs","tradeoffs","pro","Check","con","AlertTriangle","OncallCoverage","selectedModelId","setSelectedModelId","useState","model","Select","trackToolEvent","SelectTrigger","SelectValue","SelectContent","SelectItem"],"mappings":"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"}