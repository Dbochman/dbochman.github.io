{"version":3,"file":"index-CDo4jO3n.js","sources":["../../src/components/ui/toggle.tsx","../../src/components/ui/toggle-group.tsx","../../src/components/projects/cli-playground/types.ts","../../src/components/projects/cli-playground/TopBar.tsx","../../src/components/projects/cli-playground/CommandRow.tsx","../../src/components/projects/cli-playground/Workspace.tsx","../../src/components/projects/cli-playground/explainer.ts","../../src/components/projects/cli-playground/LearnHeader.tsx","../../src/components/projects/cli-playground/engines/kubectl.ts","../../src/components/projects/cli-playground/engines.ts","../../src/components/projects/cli-playground/index.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","import * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","export type Tool = 'jq' | 'grep' | 'sed' | 'awk' | 'kubectl';\nexport type Mode = 'learn' | 'playground';\n\nexport interface ToolState {\n  tool: Tool;\n  input: string;\n  command: string;\n  output: string;\n  error?: string;\n  isLoading: boolean;\n}\n\nexport interface PersistedToolState {\n  input: string;\n  command: string;\n  presetIndex: number;\n}\n\nexport interface CommandExplanation {\n  summary: string;\n  flags: { flag: string; meaning: string }[];\n  tryNext: { label: string; command: string }[];\n}\n\nexport interface ToolPreset {\n  name: string;\n  description: string;\n  input: string;\n  command: string;\n  expectedOutputIncludes?: string;\n  expectedOutputRegex?: string;\n  // kubectl-specific fields\n  fixture?: string; // Which cluster fixture to use\n  namespace?: string; // Default namespace for the lesson\n  objective?: string; // Learning objective (shown in Learn mode)\n}\n\nexport interface ToolConfig {\n  name: string;\n  description: string;\n  placeholder: string;\n  presets: ToolPreset[];\n  hideStdin?: boolean; // For kubectl, we don't use stdin\n}\n\nexport const TOOL_CONFIGS: Record<Tool, ToolConfig> = {\n  jq: {\n    name: 'jq',\n    description: 'Command-line JSON processor',\n    placeholder: '.',\n    presets: [\n      {\n        name: 'Select field',\n        description: 'Extract a specific field from JSON',\n        input: '{\"name\": \"Alice\", \"age\": 30, \"city\": \"NYC\"}',\n        command: '.name',\n        expectedOutputIncludes: 'Alice',\n      },\n      {\n        name: 'Filter array',\n        description: 'Filter array elements by condition',\n        input: '[{\"name\": \"Alice\", \"age\": 30}, {\"name\": \"Bob\", \"age\": 25}, {\"name\": \"Carol\", \"age\": 35}]',\n        command: '.[] | select(.age > 28)',\n        expectedOutputIncludes: 'Carol',\n      },\n      {\n        name: 'Structured Logs',\n        description: 'Parse structured JSON logs from ELK or CloudWatch',\n        input: '[{\"timestamp\": \"2024-01-15T10:23:45Z\", \"level\": \"info\", \"service\": \"api\", \"message\": \"Request received\"}, {\"timestamp\": \"2024-01-15T10:23:46Z\", \"level\": \"error\", \"service\": \"api\", \"message\": \"Database timeout\", \"error_code\": \"DB_TIMEOUT\"}, {\"timestamp\": \"2024-01-15T10:23:47Z\", \"level\": \"warn\", \"service\": \"api\", \"message\": \"Slow query\"}, {\"timestamp\": \"2024-01-15T10:23:48Z\", \"level\": \"error\", \"service\": \"db\", \"message\": \"Connection pool full\"}]',\n        command: '.[] | select(.level == \"error\")',\n        expectedOutputIncludes: 'Database timeout',\n      },\n      {\n        name: 'Nested Errors',\n        description: 'Extract error objects from nested JSON structures (includes null for successful requests)',\n        input: '[{\"request_id\": \"req-001\", \"status\": 200, \"error\": null}, {\"request_id\": \"req-002\", \"status\": 500, \"error\": {\"code\": \"DB_ERROR\", \"message\": \"Connection timeout\", \"details\": {\"host\": \"db-01\"}}}, {\"request_id\": \"req-003\", \"status\": 200, \"error\": null}, {\"request_id\": \"req-004\", \"status\": 503, \"error\": {\"code\": \"SERVICE_UNAVAILABLE\", \"message\": \"Upstream service down\"}}]',\n        command: '.[] | .error',\n        expectedOutputIncludes: 'DB_ERROR',\n      },\n      {\n        name: 'Filter by Severity',\n        description: 'Filter logs by severity level (error, warn, etc.)',\n        input: '[{\"timestamp\": \"2024-01-15T10:23:45Z\", \"severity\": \"info\", \"message\": \"Health check OK\"}, {\"timestamp\": \"2024-01-15T10:23:46Z\", \"severity\": \"error\", \"message\": \"Database connection failed\"}, {\"timestamp\": \"2024-01-15T10:23:47Z\", \"severity\": \"warn\", \"message\": \"High latency detected\"}, {\"timestamp\": \"2024-01-15T10:23:48Z\", \"severity\": \"critical\", \"message\": \"Service unavailable\"}, {\"timestamp\": \"2024-01-15T10:23:49Z\", \"severity\": \"info\", \"message\": \"Request processed\"}]',\n        command: '.[] | select(.severity == \"error\")',\n        expectedOutputIncludes: 'Database connection failed',\n      },\n      {\n        name: 'Extract Services',\n        description: 'Extract service names from log entries',\n        input: '[{\"service\": \"api\", \"level\": \"info\", \"message\": \"Request\"}, {\"service\": \"api\", \"level\": \"error\", \"message\": \"Failed\"}, {\"service\": \"db\", \"level\": \"info\", \"message\": \"Query\"}, {\"service\": \"api\", \"level\": \"warn\", \"message\": \"Slow\"}, {\"service\": \"cache\", \"level\": \"info\", \"message\": \"Hit\"}]',\n        command: '.[] | .service',\n        expectedOutputIncludes: 'api',\n      },\n      {\n        name: 'Request Metrics',\n        description: 'Extract request duration and status codes',\n        input: '[{\"path\": \"/api/users\", \"method\": \"GET\", \"status\": 200, \"duration_ms\": 234, \"user_id\": \"user-123\"}, {\"path\": \"/api/orders\", \"method\": \"POST\", \"status\": 201, \"duration_ms\": 567, \"user_id\": \"user-456\"}, {\"path\": \"/api/products\", \"method\": \"GET\", \"status\": 200, \"duration_ms\": 89, \"user_id\": \"user-789\"}, {\"path\": \"/api/search\", \"method\": \"GET\", \"status\": 500, \"duration_ms\": 2341, \"user_id\": \"user-123\"}]',\n        command: '[.[] | {path: .path, status: .status, duration: .duration_ms}]',\n        expectedOutputIncludes: '\"duration\": 234',\n      },\n    ],\n  },\n  grep: {\n    name: 'grep',\n    description: 'Search text using patterns',\n    placeholder: 'pattern',\n    presets: [\n      {\n        name: 'Simple match',\n        description: 'Find lines containing a word',\n        input: 'apple pie\\nbanana bread\\napple crumble\\ncherry tart',\n        command: 'apple',\n        expectedOutputIncludes: 'apple pie',\n      },\n      {\n        name: 'Case insensitive',\n        description: 'Match regardless of case (-i)',\n        input: 'Error: Connection failed\\nWARNING: Timeout\\nerror: Invalid input\\nInfo: Success',\n        command: '-i error',\n        expectedOutputIncludes: 'Error: Connection failed',\n      },\n      {\n        name: 'Find Errors',\n        description: 'Extract error messages from application logs',\n        input: '2024-01-15T10:23:45.123Z INFO  Request received: GET /api/users\\n2024-01-15T10:23:45.456Z INFO  Processing request\\n2024-01-15T10:23:46.789Z ERROR Database connection failed: timeout\\n2024-01-15T10:23:46.790Z ERROR Failed to initialize connection pool\\n2024-01-15T10:23:47.123Z INFO  Request completed: 200 OK\\n2024-01-15T10:23:48.456Z WARN  Slow query detected: 2.5s\\n2024-01-15T10:23:49.789Z ERROR Authentication failed for user: alice@example.com',\n        command: '-i error',\n        expectedOutputIncludes: 'Database connection failed',\n      },\n      {\n        name: 'Slow Requests',\n        description: 'Identify requests taking longer than 1 second',\n        input: '2024-01-15T10:23:45.123Z GET /api/users 200 234ms\\n2024-01-15T10:23:46.456Z POST /api/orders 201 1567ms\\n2024-01-15T10:23:47.789Z GET /api/products 200 89ms\\n2024-01-15T10:23:48.012Z GET /api/search 200 2341ms\\n2024-01-15T10:23:49.345Z DELETE /api/users/123 204 456ms',\n        command: '-E \"[0-9]{4,}ms\"',\n        expectedOutputIncludes: '1567ms',\n      },\n      {\n        name: 'Auth Failures',\n        description: 'Find authentication and authorization failures',\n        input: '2024-01-15T10:23:45.123Z INFO  User login attempt: alice@example.com\\n2024-01-15T10:23:45.456Z ERROR Authentication failed: invalid credentials\\n2024-01-15T10:23:46.789Z WARN  Unauthorized access attempt: /api/admin/users\\n2024-01-15T10:23:47.012Z INFO  User authenticated: bob@example.com\\n2024-01-15T10:23:48.345Z ERROR 403 Forbidden: insufficient permissions\\n2024-01-15T10:23:49.678Z INFO  Login successful: carol@example.com',\n        command: '-iE \"(auth|login|unauthorized|forbidden|401|403)\"',\n        expectedOutputIncludes: 'Authentication failed',\n      },\n      {\n        name: 'Trace IDs',\n        description: 'Extract distributed trace IDs for correlation',\n        input: '2024-01-15T10:23:45.123Z INFO  trace_id=abc123def456 service=api request_id=req-001\\n2024-01-15T10:23:45.124Z INFO  trace_id=abc123def456 service=db query=SELECT users\\n2024-01-15T10:23:45.125Z INFO  trace_id=xyz789uvw012 service=cache operation=get\\n2024-01-15T10:23:45.126Z INFO  trace_id=abc123def456 service=api response=200\\n2024-01-15T10:23:45.127Z INFO  trace_id=xyz789uvw012 service=api request_id=req-002',\n        command: '-iE \"trace_id=[a-z0-9]+\"',\n        expectedOutputIncludes: 'trace_id=abc123def456',\n      },\n      {\n        name: 'Critical Errors',\n        description: 'Filter for ERROR and FATAL level messages',\n        input: '2024-01-15T10:23:45.123Z INFO  Application started\\n2024-01-15T10:23:46.456Z WARN  High memory usage: 85%\\n2024-01-15T10:23:47.789Z ERROR Connection pool exhausted\\n2024-01-15T10:23:48.012Z FATAL Out of memory: cannot allocate\\n2024-01-15T10:23:49.345Z INFO  Health check passed\\n2024-01-15T10:23:50.678Z ERROR Failed to process request',\n        command: '-E \"(ERROR|FATAL|CRITICAL)\"',\n        expectedOutputIncludes: 'FATAL Out of memory',\n      },\n    ],\n  },\n  sed: {\n    name: 'sed',\n    description: 'Stream editor for text transformation',\n    placeholder: 's/old/new/',\n    presets: [\n      {\n        name: 'Replace first',\n        description: 'Replace first occurrence per line',\n        input: 'hello world world\\nworld hello world',\n        command: 's/world/universe/',\n        expectedOutputIncludes: 'hello universe world',\n      },\n      {\n        name: 'Replace all',\n        description: 'Replace all occurrences (global)',\n        input: 'the cat sat on the mat\\nthe cat ate the rat',\n        command: 's/the/a/g',\n        expectedOutputIncludes: 'a cat sat on a mat',\n      },\n      {\n        name: 'Delete lines',\n        description: 'Delete lines matching pattern',\n        input: '# This is a comment\\ncode line 1\\n# Another comment\\ncode line 2',\n        command: '/^#/d',\n        expectedOutputIncludes: 'code line 1',\n      },\n      {\n        name: 'Extract part',\n        description: 'Extract using capture groups',\n        input: 'user: alice (admin)\\nuser: bob (guest)\\nuser: carol (admin)',\n        command: 's/user: \\\\([^ ]*\\\\).*/\\\\1/',\n        expectedOutputIncludes: 'alice',\n      },\n      {\n        name: 'Multiple commands',\n        description: 'Chain multiple transformations',\n        input: '  hello   world  \\n  foo   bar  ',\n        command: 's/^[ ]*//; s/[ ]*$//; s/  */ /g',\n        expectedOutputIncludes: 'hello world',\n      },\n    ],\n  },\n  awk: {\n    name: 'awk',\n    description: 'Pattern scanning and processing',\n    placeholder: '{print $1}',\n    presets: [\n      {\n        name: 'Print column',\n        description: 'Extract specific columns',\n        input: 'alice 30 engineer\\nbob 25 designer\\ncarol 35 manager',\n        command: '{print $1, $3}',\n        expectedOutputIncludes: 'alice engineer',\n      },\n      {\n        name: 'Sum column',\n        description: 'Calculate sum of numeric column',\n        input: 'apple 5\\nbanana 3\\norange 7\\ngrape 2',\n        command: '{sum += $2} END {print \"Total:\", sum}',\n        expectedOutputIncludes: 'Total: 17',\n      },\n      {\n        name: 'Access Log Parsing',\n        description: 'Parse access logs and extract key fields',\n        input: '192.168.1.100 GET /api/users 200 1234\\n192.168.1.101 POST /api/orders 201 5678\\n192.168.1.102 GET /api/products 200 890\\n192.168.1.103 GET /api/search 500 2341',\n        command: '{print $1, $3, $4}',\n        expectedOutputIncludes: '/api/users 200',\n      },\n      {\n        name: 'Response Time Average',\n        description: 'Calculate average response time from logs',\n        input: '/api/users 200 234\\n/api/orders 201 567\\n/api/products 200 89\\n/api/search 200 1234\\n/api/users 200 456\\n/api/orders 201 789',\n        command: '{sum += $3; count++} END {print \"Average:\", sum/count}',\n        expectedOutputIncludes: 'Average:',\n      },\n      {\n        name: 'IP Request Counts',\n        description: 'Count requests per IP address',\n        input: '192.168.1.100 GET /api/users 200\\n192.168.1.101 POST /api/orders 201\\n192.168.1.100 GET /api/products 200\\n192.168.1.102 GET /api/search 200\\n192.168.1.100 POST /api/users 201\\n192.168.1.103 GET /api/health 200',\n        command: '{count[$1]++} END {for (k in count) print k, count[k]}',\n        expectedOutputIncludes: '192.168.1.100 3',\n      },\n      {\n        name: 'CSV Metrics',\n        description: 'Parse CSV metrics exports from monitoring tools',\n        input: 'service,metric,value,timestamp\\napi,requests_per_sec,150,2024-01-15T10:23:45Z\\napi,error_rate,0.02,2024-01-15T10:23:45Z\\ndb,connections,45,2024-01-15T10:23:45Z\\ncache,hit_rate,0.85,2024-01-15T10:23:45Z\\napi,latency_p95,234,2024-01-15T10:23:46Z',\n        command: '-F, \\'NR>1 {print $1, $3}\\'',\n        expectedOutputIncludes: 'api 150',\n      },\n      {\n        name: 'Slow Requests Filter',\n        description: 'Filter requests exceeding latency threshold',\n        input: '/api/users GET 200 234\\n/api/orders POST 201 1567\\n/api/products GET 200 89\\n/api/search GET 200 2341\\n/api/users GET 200 456\\n/api/admin DELETE 204 3456',\n        command: '$4 > 1000 {print $1, $2, $4}',\n        expectedOutputIncludes: '/api/orders POST 1567',\n      },\n    ],\n  },\n  kubectl: {\n    name: 'kubectl',\n    description: 'Kubernetes cluster management',\n    placeholder: 'get pods',\n    hideStdin: true,\n    presets: [\n      {\n        name: 'CrashLoopBackOff',\n        description: 'Triage: CrashLoopBackOff after deploy',\n        input: '',\n        command: 'get pods -n payments',\n        fixture: 'crashloop',\n        namespace: 'payments',\n        objective: 'Find the CrashLooping pod and confirm why it keeps restarting',\n        expectedOutputIncludes: 'CrashLoopBackOff',\n      },\n      {\n        name: 'ImagePullBackOff',\n        description: 'Triage: Image pull failures',\n        input: '',\n        command: 'get pods -n frontend',\n        fixture: 'imagepull',\n        namespace: 'frontend',\n        objective: 'Find the pod stuck pulling its image and identify the exact error',\n        expectedOutputIncludes: 'ImagePullBackOff',\n      },\n      {\n        name: 'Service Mismatch',\n        description: 'Triage: Service with no endpoints',\n        input: '',\n        command: 'get svc,endpoints -n api',\n        fixture: 'service-mismatch',\n        namespace: 'api',\n        objective: 'Find why the service has no endpoints and fix the selector mismatch',\n        expectedOutputRegex: 'api-server\\\\s+<none>',\n      },\n      {\n        name: 'Rollout Regression',\n        description: 'Triage: Bad deploy, needs rollback',\n        input: '',\n        command: 'rollout status deployment/web -n production',\n        fixture: 'rollout-regression',\n        namespace: 'production',\n        objective: 'Identify the failing deployment and roll back to the previous version',\n        expectedOutputIncludes: 'deployment \"web\"',\n      },\n      {\n        name: 'Node Pressure',\n        description: 'Triage: Node under resource pressure',\n        input: '',\n        command: 'get nodes',\n        fixture: 'node-pressure',\n        namespace: 'default',\n        objective: 'Find the node under pressure and identify which pods are being evicted',\n        expectedOutputIncludes: 'DiskPressure',\n      },\n    ],\n  },\n};\n\nexport const DEFAULT_STATE: ToolState = {\n  tool: 'kubectl',\n  input: TOOL_CONFIGS.kubectl.presets[0].input,\n  command: TOOL_CONFIGS.kubectl.presets[0].command,\n  output: '',\n  isLoading: false,\n};\n","import { ToggleGroup, ToggleGroupItem } from '@/components/ui/toggle-group';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport { RotateCcw, Share2, BookOpen, Terminal, ChevronDown } from 'lucide-react';\nimport type { Tool, Mode, ToolPreset } from './types';\nimport { TOOL_CONFIGS } from './types';\nimport { toast } from 'sonner';\nimport { trackToolEvent } from '@/lib/trackToolEvent';\n\ninterface TopBarProps {\n  tool: Tool;\n  mode: Mode;\n  currentPreset: ToolPreset | null;\n  onToolChange: (tool: Tool) => void;\n  onModeChange: (mode: Mode) => void;\n  onPresetSelect: (preset: ToolPreset) => void;\n  onReset: () => void;\n}\n\nconst TOOLS: Tool[] = ['kubectl', 'jq', 'grep', 'sed', 'awk'];\n\nexport function TopBar({\n  tool,\n  mode,\n  currentPreset,\n  onToolChange,\n  onModeChange,\n  onPresetSelect,\n  onReset,\n}: TopBarProps) {\n  const config = TOOL_CONFIGS[tool];\n\n  const handleShare = async () => {\n    await navigator.clipboard.writeText(window.location.href);\n    trackToolEvent({ tool_name: 'cli_playground', action: 'share_copy', event_label: tool });\n    toast.success('Link copied to clipboard');\n  };\n\n  return (\n    <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n      {/* Left: Tool tabs + Lesson selector */}\n      <div className=\"flex items-center gap-3 flex-wrap\">\n        <ToggleGroup\n          type=\"single\"\n          value={tool}\n          onValueChange={(v) => v && onToolChange(v as Tool)}\n          className=\"bg-zinc-200 dark:bg-zinc-800 p-1 rounded-lg\"\n        >\n          {TOOLS.map((t) => (\n            <ToggleGroupItem\n              key={t}\n              value={t}\n              aria-label={`Select ${t}`}\n              className=\"font-mono text-sm px-3 data-[state=on]:bg-background data-[state=on]:shadow-xs\"\n            >\n              {t}\n            </ToggleGroupItem>\n          ))}\n        </ToggleGroup>\n\n        {/* Lesson dropdown - shows current lesson name */}\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\" className=\"h-8 gap-1.5 text-sm font-normal\">\n              <span className=\"max-w-[140px] truncate\">\n                {currentPreset?.name || 'Select lesson'}\n              </span>\n              <ChevronDown className=\"h-3.5 w-3.5 opacity-50\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"start\" className=\"w-56\">\n            {config.presets.map((preset) => (\n              <DropdownMenuItem\n                key={preset.name}\n                onClick={() => onPresetSelect(preset)}\n                className=\"flex flex-col items-start gap-0.5 py-2\"\n              >\n                <span className=\"font-medium\">{preset.name}</span>\n                <span className=\"text-xs text-muted-foreground\">{preset.description}</span>\n              </DropdownMenuItem>\n            ))}\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n\n      {/* Right: Mode toggle + actions */}\n      <div className=\"flex items-center gap-2\">\n        <ToggleGroup\n          type=\"single\"\n          value={mode}\n          onValueChange={(v) => v && onModeChange(v as Mode)}\n          className=\"bg-zinc-200 dark:bg-zinc-800 p-1 rounded-lg\"\n        >\n          <ToggleGroupItem\n            value=\"learn\"\n            aria-label=\"Learn mode\"\n            className=\"text-sm px-3 gap-1.5 data-[state=on]:bg-background data-[state=on]:shadow-xs\"\n          >\n            <BookOpen className=\"h-3.5 w-3.5\" />\n            <span className=\"hidden sm:inline\">Learn</span>\n          </ToggleGroupItem>\n          <ToggleGroupItem\n            value=\"playground\"\n            aria-label=\"Playground mode\"\n            className=\"text-sm px-3 gap-1.5 data-[state=on]:bg-background data-[state=on]:shadow-xs\"\n          >\n            <Terminal className=\"h-3.5 w-3.5\" />\n            <span className=\"hidden sm:inline\">Play</span>\n          </ToggleGroupItem>\n        </ToggleGroup>\n\n        {/* Icon-only actions with tooltips */}\n        <div className=\"flex items-center gap-0.5 border-l pl-2 ml-1\">\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" onClick={onReset} className=\"h-8 w-8\">\n                <RotateCcw className=\"h-4 w-4\" />\n                <span className=\"sr-only\">Reset</span>\n              </Button>\n            </TooltipTrigger>\n            <TooltipContent>Reset to default</TooltipContent>\n          </Tooltip>\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleShare} className=\"h-8 w-8\">\n                <Share2 className=\"h-4 w-4\" />\n                <span className=\"sr-only\">Share</span>\n              </Button>\n            </TooltipTrigger>\n            <TooltipContent>Copy link</TooltipContent>\n          </Tooltip>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Play, Loader2 } from 'lucide-react';\nimport type { Tool } from './types';\n\ninterface CommandRowProps {\n  tool: Tool;\n  command: string;\n  isLoading: boolean;\n  onCommandChange: (command: string) => void;\n  onRun: () => void;\n}\n\nexport function CommandRow({\n  tool,\n  command,\n  isLoading,\n  onCommandChange,\n  onRun,\n}: CommandRowProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Focus input on mount and tool change\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, [tool]);\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n      e.preventDefault();\n      onRun();\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-2 bg-muted/30 border rounded-lg p-2\">\n      {/* Terminal prompt */}\n      <div className=\"flex items-center gap-1.5 text-muted-foreground font-mono text-sm shrink-0\">\n        <span className=\"text-green-500\">$</span>\n        <span className=\"text-primary\">{tool}</span>\n      </div>\n\n      {/* Command input */}\n      <input\n        ref={inputRef}\n        type=\"text\"\n        value={command}\n        onChange={(e) => onCommandChange(e.target.value)}\n        onKeyDown={handleKeyDown}\n        placeholder=\"Enter command...\"\n        className=\"flex-1 bg-transparent border-none outline-hidden font-mono text-sm placeholder:text-muted-foreground/50\"\n        spellCheck={false}\n        autoComplete=\"off\"\n      />\n\n      {/* Run button */}\n      <Button\n        onClick={onRun}\n        disabled={isLoading}\n        size=\"sm\"\n        className=\"shrink-0 gap-1.5\"\n      >\n        {isLoading ? (\n          <Loader2 className=\"h-4 w-4 animate-spin\" />\n        ) : (\n          <Play className=\"h-4 w-4\" />\n        )}\n        <span className=\"hidden sm:inline\">Run</span>\n        <kbd className=\"hidden sm:inline-flex h-5 items-center gap-0.5 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground ml-1\">\n          <span className=\"text-xs\">⌘</span>↵\n        </kbd>\n      </Button>\n    </div>\n  );\n}\n","import { useState, useEffect, useMemo, type ReactNode } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Copy, Check, ChevronDown, ChevronUp, ArrowRight } from 'lucide-react';\nimport type { CommandExplanation, Mode, Tool } from './types';\n\ninterface WorkspaceProps {\n  input: string;\n  output: string;\n  error?: string;\n  isLoading: boolean;\n  mode: Mode;\n  tool: Tool;\n  command: string;\n  goalStatus?: {\n    status: 'pass' | 'fail' | 'pending';\n    label: string;\n  };\n  explanation: CommandExplanation | null;\n  hideStdin?: boolean;\n  emptyStatePrompt?: string; // Lesson-aware prompt for empty output\n  onInputChange: (value: string) => void;\n  onTryCommand: (command: string) => void;\n}\n\nfunction LineNumbers({ count }: { count: number }) {\n  return (\n    <div className=\"select-none text-right pr-2 text-muted-foreground/50 font-mono text-xs leading-5 pt-3 pb-3\">\n      {Array.from({ length: Math.max(count, 1) }, (_, i) => (\n        <div key={i}>{i + 1}</div>\n      ))}\n    </div>\n  );\n}\n\ntype OutputTab = 'output' | 'diff' | 'explain';\n\nexport function Workspace({\n  input,\n  output,\n  error,\n  isLoading,\n  mode,\n  tool,\n  command,\n  goalStatus,\n  explanation,\n  hideStdin,\n  emptyStatePrompt,\n  onInputChange,\n  onTryCommand,\n}: WorkspaceProps) {\n  const [copied, setCopied] = useState(false);\n  const [inputCollapsed, setInputCollapsed] = useState(false);\n  const [activeTab, setActiveTab] = useState<OutputTab>('output');\n\n  const inputLines = input.split('\\n').length;\n  const outputLines = (error || output || '').split('\\n').length;\n\n  const handleCopy = async () => {\n    const text = error || output;\n    if (!text) return;\n    await navigator.clipboard.writeText(text);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const availableTabs = useMemo<OutputTab[]>(() => {\n    const tabs: OutputTab[] = ['output'];\n    if (tool === 'sed') {\n      tabs.push('diff');\n    }\n    if (mode === 'learn') {\n      tabs.push('explain');\n    }\n    return tabs;\n  }, [tool, mode]);\n  const showTabs = availableTabs.length > 1;\n  const shouldHighlightGrep = tool === 'grep' && !error && !!output && !isLoading;\n\n  const getGrepHighlightRegex = (command: string): RegExp | null => {\n    const parts = command.match(/^(-[invE]+\\s+)?(.+)$/);\n    if (!parts) return null;\n\n    const flags = parts[1]?.trim() || '';\n    if (flags.includes('v')) return null;\n\n    let pattern = parts[2].trim();\n    if ((pattern.startsWith('\"') && pattern.endsWith('\"')) ||\n        (pattern.startsWith(\"'\") && pattern.endsWith(\"'\"))) {\n      pattern = pattern.slice(1, -1);\n    }\n\n    const caseInsensitive = flags.includes('i');\n    const extendedRegex = flags.includes('E');\n    const regexFlags = caseInsensitive ? 'gi' : 'g';\n    const regexPattern = extendedRegex\n      ? pattern\n      : pattern.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n    try {\n      return new RegExp(regexPattern, regexFlags);\n    } catch {\n      return null;\n    }\n  };\n\n  const renderHighlightedLine = (line: string, regex: RegExp, lineIndex: number) => {\n    regex.lastIndex = 0;\n    const parts: ReactNode[] = [];\n    let lastIndex = 0;\n    let match: RegExpExecArray | null;\n\n    while ((match = regex.exec(line)) !== null) {\n      const start = match.index ?? 0;\n      const end = start + match[0].length;\n      if (start > lastIndex) {\n        parts.push(line.slice(lastIndex, start));\n      }\n      parts.push(\n        <mark\n          key={`${lineIndex}-${start}`}\n          className=\"bg-amber-200/40 text-foreground rounded-sm px-0.5\"\n        >\n          {line.slice(start, end)}\n        </mark>\n      );\n      lastIndex = end;\n    }\n\n    if (lastIndex < line.length) {\n      parts.push(line.slice(lastIndex));\n    }\n\n    return parts.length > 0 ? parts : line;\n  };\n\n  const highlightRegex = shouldHighlightGrep ? getGrepHighlightRegex(command) : null;\n  const shouldRenderHighlights = highlightRegex && output.trim() !== '(no matches)';\n  const highlightedOutput = shouldRenderHighlights\n    ? output.split('\\n').map((line, index, arr) => (\n        <span key={`${index}`}>\n          {renderHighlightedLine(line, highlightRegex, index)}\n          {index < arr.length - 1 ? '\\n' : null}\n        </span>\n      ))\n    : output;\n\n  const getDiffLines = () => {\n    const before = input.split('\\n');\n    const after = output.split('\\n');\n    const maxLines = Math.max(before.length, after.length);\n    const diff: { type: 'same' | 'add' | 'remove'; text: string }[] = [];\n\n    for (let i = 0; i < maxLines; i += 1) {\n      const left = before[i] ?? '';\n      const right = after[i] ?? '';\n      if (left === right) {\n        diff.push({ type: 'same', text: left });\n      } else {\n        if (left) diff.push({ type: 'remove', text: left });\n        if (right) diff.push({ type: 'add', text: right });\n      }\n    }\n\n    return diff;\n  };\n\n  // In single-tab mode, always show output regardless of activeTab state\n  const effectiveTab = showTabs ? activeTab : 'output';\n\n  useEffect(() => {\n    if (!availableTabs.includes(activeTab)) {\n      setActiveTab('output');\n    }\n  }, [availableTabs, activeTab]);\n\n  return (\n    <div className={`grid gap-3 ${hideStdin ? '' : 'lg:grid-cols-2'} min-h-[200px]`}>\n      {/* Input (stdin) Panel - hidden for kubectl */}\n      {!hideStdin && (\n      <div className=\"flex flex-col border rounded-lg overflow-hidden bg-muted/20\">\n        <div className=\"flex items-center justify-between px-3 py-1.5 bg-muted/50 border-b\">\n          <span className=\"text-xs font-medium text-muted-foreground\">stdin</span>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-6 px-1.5 lg:hidden\"\n            onClick={() => setInputCollapsed(!inputCollapsed)}\n          >\n            {inputCollapsed ? (\n              <ChevronDown className=\"h-3.5 w-3.5\" />\n            ) : (\n              <ChevronUp className=\"h-3.5 w-3.5\" />\n            )}\n          </Button>\n        </div>\n        <div className={`flex flex-1 ${inputCollapsed ? 'hidden lg:flex' : ''}`}>\n          <LineNumbers count={inputLines} />\n          <textarea\n            value={input}\n            onChange={(e) => onInputChange(e.target.value)}\n            placeholder=\"Paste or type input data...\"\n            className=\"flex-1 bg-transparent border-none outline-hidden resize-none font-mono text-sm leading-5 p-3 pl-0 min-h-[150px]\"\n            spellCheck={false}\n          />\n        </div>\n      </div>\n      )}\n\n      {/* Output Panel with tabs in Learn mode */}\n      <div className=\"flex flex-col border rounded-lg overflow-hidden bg-muted/20\">\n        <div className=\"flex items-center justify-between px-3 py-1.5 bg-muted/50 border-b\">\n          {showTabs ? (\n            <div className=\"flex items-center gap-1\">\n              {availableTabs.map((tab) => {\n                const label = tab === 'output'\n                  ? (error ? 'Error' : 'Output')\n                  : tab === 'diff'\n                    ? 'Diff'\n                    : 'Explain';\n                return (\n                  <button\n                    key={tab}\n                    onClick={() => setActiveTab(tab)}\n                    className={`text-xs font-medium px-2 py-0.5 rounded transition-colors ${\n                      effectiveTab === tab\n                        ? 'bg-background text-foreground shadow-xs'\n                        : 'text-muted-foreground hover:text-foreground'\n                    }`}\n                  >\n                    {label}\n                  </button>\n                );\n              })}\n            </div>\n          ) : (\n            <span className=\"text-xs font-medium text-muted-foreground\">\n              {error ? 'Error' : 'Output'}\n            </span>\n          )}\n          <div className=\"flex items-center gap-2\">\n            {goalStatus && (\n              <span\n                className={`text-[11px] font-medium px-2 py-0.5 rounded-full border ${\n                  goalStatus.status === 'pass'\n                    ? 'border-green-500/30 text-green-600 bg-green-500/10'\n                    : goalStatus.status === 'fail'\n                      ? 'border-red-500/30 text-red-500 bg-red-500/10'\n                      : 'border-amber-500/30 text-amber-600 bg-amber-500/10'\n                }`}\n              >\n                {goalStatus.label}\n              </span>\n            )}\n            {effectiveTab === 'output' && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"h-6 px-1.5 gap-1\"\n                onClick={handleCopy}\n                disabled={!output && !error}\n              >\n                {copied ? (\n                  <Check className=\"h-3 w-3 text-green-500\" />\n                ) : (\n                  <Copy className=\"h-3 w-3\" />\n                )}\n                <span className=\"text-xs\">Copy</span>\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Output content */}\n        {effectiveTab === 'output' && (\n          <div className=\"flex flex-1\">\n            <LineNumbers count={outputLines} />\n            <pre\n              className={`flex-1 font-mono text-sm leading-5 p-3 pl-0 overflow-auto whitespace-pre-wrap min-h-[150px] ${\n                error ? 'text-red-400' : ''\n              }`}\n            >\n              {isLoading ? (\n                <span className=\"text-muted-foreground animate-pulse\">Running...</span>\n              ) : error ? (\n                error\n              ) : output ? (\n                highlightedOutput\n              ) : (\n                <span className=\"text-muted-foreground/50\">\n                  {emptyStatePrompt || 'Output will appear here...'}\n                </span>\n              )}\n            </pre>\n          </div>\n        )}\n\n        {/* Diff content (sed only) */}\n        {effectiveTab === 'diff' && (\n          <div className=\"flex flex-1\">\n            <LineNumbers count={Math.max(outputLines, inputLines)} />\n            <pre className=\"flex-1 font-mono text-sm leading-5 p-3 pl-0 overflow-auto whitespace-pre-wrap min-h-[150px]\">\n              {isLoading ? (\n                <span className=\"text-muted-foreground animate-pulse\">Running...</span>\n              ) : error ? (\n                <span className=\"text-red-400\">{error}</span>\n              ) : output ? (\n                getDiffLines().map((line, index) => (\n                  <span\n                    key={`${line.type}-${index}`}\n                    className={\n                      line.type === 'add'\n                        ? 'text-emerald-500'\n                        : line.type === 'remove'\n                          ? 'text-red-500'\n                          : 'text-muted-foreground'\n                    }\n                  >\n                    {line.type === 'add' ? '+ ' : line.type === 'remove' ? '- ' : '  '}\n                    {line.text}\n                    {'\\n'}\n                  </span>\n                ))\n              ) : (\n                <span className=\"text-muted-foreground/50\">\n                  Run the command to see a diff.\n                </span>\n              )}\n            </pre>\n          </div>\n        )}\n\n        {/* Explain content */}\n        {effectiveTab === 'explain' && (\n          <div className=\"flex-1 p-4 overflow-auto min-h-[150px] space-y-4\">\n            {explanation ? (\n              <>\n                {/* Summary */}\n                <div>\n                  <h4 className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1\">\n                    What it does\n                  </h4>\n                  <p className=\"text-sm\">{explanation.summary}</p>\n                </div>\n\n                {/* Flags */}\n                {explanation.flags.length > 0 && (\n                  <div>\n                    <h4 className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2\">\n                      Flags used\n                    </h4>\n                    <div className=\"space-y-1.5\">\n                      {explanation.flags.map((f) => (\n                        <div key={f.flag} className=\"flex items-start gap-2 text-sm\">\n                          <code className=\"bg-muted px-1.5 py-0.5 rounded text-xs font-mono shrink-0\">\n                            {f.flag}\n                          </code>\n                          <span className=\"text-muted-foreground\">{f.meaning}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Try next */}\n                {explanation.tryNext.length > 0 && (\n                  <div>\n                    <h4 className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2\">\n                      Try next\n                    </h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {explanation.tryNext.map((item) => (\n                        <Button\n                          key={item.label}\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"h-7 text-xs gap-1\"\n                          onClick={() => {\n                            onTryCommand(item.command);\n                            setActiveTab('output');\n                          }}\n                        >\n                          {item.label}\n                          <ArrowRight className=\"h-3 w-3\" />\n                        </Button>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </>\n            ) : (\n              <p className=\"text-sm text-muted-foreground\">\n                Enter a command to see an explanation.\n              </p>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import type { Tool, CommandExplanation } from './types';\n\n/**\n * Generate an explanation for a CLI command\n */\nexport function explainCommand(tool: Tool, command: string): CommandExplanation {\n  switch (tool) {\n    case 'jq':\n      return explainJq(command);\n    case 'grep':\n      return explainGrep(command);\n    case 'sed':\n      return explainSed(command);\n    case 'awk':\n      return explainAwk(command);\n    case 'kubectl':\n      return explainKubectl(command);\n    default:\n      return { summary: 'Unknown command', flags: [], tryNext: [] };\n  }\n}\n\nfunction explainJq(command: string): CommandExplanation {\n  const flags: { flag: string; meaning: string }[] = [];\n  const tryNext: { label: string; command: string }[] = [];\n  let summary = '';\n\n  if (command === '.') {\n    summary = 'Identity filter - outputs the input unchanged.';\n    tryNext.push(\n      { label: 'Get keys', command: 'keys' },\n      { label: 'Get length', command: 'length' }\n    );\n  } else if (command === 'keys') {\n    summary = 'Returns the keys of an object as an array.';\n    tryNext.push(\n      { label: 'Get values', command: 'values' },\n      { label: 'Count keys', command: 'keys | length' }\n    );\n  } else if (command === 'values') {\n    summary = 'Returns the values of an object as an array.';\n    tryNext.push({ label: 'Get keys', command: 'keys' });\n  } else if (command === 'length') {\n    summary = 'Returns the length of arrays, strings, or number of keys in objects.';\n    tryNext.push({ label: 'Get keys', command: 'keys' });\n  } else if (command.startsWith('.') && !command.includes('[') && !command.includes('|')) {\n    const field = command.slice(1);\n    summary = `Extracts the \"${field}\" field from the input object.`;\n    tryNext.push(\n      { label: 'Get all keys', command: 'keys' },\n      { label: 'Get type', command: `${command} | type` }\n    );\n  } else if (command === '.[]') {\n    summary = 'Iterates over array elements or object values, outputting each separately.';\n    tryNext.push(\n      { label: 'Get first', command: '.[0]' },\n      { label: 'Count items', command: '. | length' }\n    );\n  } else if (command.includes('select(')) {\n    summary = 'Filters elements that match the condition inside select().';\n    const condMatch = command.match(/select\\(([^)]+)\\)/);\n    if (condMatch) {\n      flags.push({ flag: `select(${condMatch[1]})`, meaning: `Keep items where ${condMatch[1]} is true` });\n    }\n    tryNext.push({ label: 'Remove filter', command: '.[]' });\n  } else {\n    summary = `Applies the jq filter \"${command}\" to transform the JSON input.`;\n  }\n\n  return { summary, flags, tryNext };\n}\n\nfunction explainGrep(command: string): CommandExplanation {\n  const flags: { flag: string; meaning: string }[] = [];\n  const tryNext: { label: string; command: string }[] = [];\n\n  // Parse flags\n  const parts = command.match(/^(-[a-zA-Z]+\\s+)?(.+)$/);\n  const flagStr = parts?.[1]?.trim() || '';\n  const pattern = parts?.[2]?.trim() || command;\n\n  let summary = `Searches for lines matching \"${pattern}\".`;\n\n  if (flagStr.includes('i')) {\n    flags.push({ flag: '-i', meaning: 'Case-insensitive matching' });\n  }\n  if (flagStr.includes('v')) {\n    flags.push({ flag: '-v', meaning: 'Invert match - show lines that do NOT match' });\n    summary = `Shows lines that do NOT contain \"${pattern}\".`;\n  }\n  if (flagStr.includes('n')) {\n    flags.push({ flag: '-n', meaning: 'Show line numbers' });\n  }\n  if (flagStr.includes('E')) {\n    flags.push({ flag: '-E', meaning: 'Extended regex - enables +, ?, |, (), etc.' });\n  }\n\n  // Suggest next variations\n  if (!flagStr.includes('i')) {\n    tryNext.push({ label: 'Case insensitive', command: `-i ${pattern}` });\n  }\n  if (!flagStr.includes('n')) {\n    tryNext.push({ label: 'Show line numbers', command: `${flagStr ? flagStr + ' ' : ''}-n ${pattern}`.trim().replace(/\\s+/g, ' ') });\n  }\n  if (!flagStr.includes('v')) {\n    tryNext.push({ label: 'Invert match', command: `-v ${pattern}` });\n  }\n\n  return { summary, flags, tryNext };\n}\n\nfunction explainSed(command: string): CommandExplanation {\n  const flags: { flag: string; meaning: string }[] = [];\n  const tryNext: { label: string; command: string }[] = [];\n  let summary = '';\n\n  if (command.startsWith('s/')) {\n    const match = command.match(/^s\\/(.+?)\\/(.*)\\/([gi]*)$/);\n    if (match) {\n      const [, pattern, replacement, modifiers] = match;\n      summary = `Replaces \"${pattern}\" with \"${replacement}\".`;\n\n      if (modifiers.includes('g')) {\n        flags.push({ flag: 'g', meaning: 'Global - replace all occurrences, not just the first' });\n      } else {\n        tryNext.push({ label: 'Replace all', command: `s/${pattern}/${replacement}/g` });\n      }\n      if (modifiers.includes('i')) {\n        flags.push({ flag: 'i', meaning: 'Case-insensitive matching' });\n      }\n\n      if (!modifiers.includes('g')) {\n        tryNext.push({ label: 'Global replace', command: `s/${pattern}/${replacement}/g` });\n      }\n    }\n  } else if (command.includes('/d')) {\n    const match = command.match(/^\\/(.+)\\/d$/);\n    if (match) {\n      summary = `Deletes lines matching the pattern \"${match[1]}\".`;\n      tryNext.push({ label: 'Keep matches instead', command: `/${match[1]}/!d` });\n    }\n  } else {\n    summary = `Applies the sed expression \"${command}\" to transform text.`;\n  }\n\n  return { summary, flags, tryNext };\n}\n\nfunction explainAwk(command: string): CommandExplanation {\n  const flags: { flag: string; meaning: string }[] = [];\n  const tryNext: { label: string; command: string }[] = [];\n  let summary = '';\n\n  // Check for field separator\n  if (command.startsWith('-F')) {\n    const match = command.match(/^-F(.)\\s+/);\n    if (match) {\n      flags.push({ flag: `-F${match[1]}`, meaning: `Use \"${match[1]}\" as the field separator` });\n    }\n  }\n\n  if (command.includes('print $')) {\n    const fieldMatch = command.match(/print\\s+\\$(\\d+)/);\n    if (fieldMatch) {\n      summary = `Prints column ${fieldMatch[1]} from each line.`;\n      const colNum = parseInt(fieldMatch[1], 10);\n      if (colNum > 1) {\n        tryNext.push({ label: 'Print column 1', command: '{print $1}' });\n      }\n      tryNext.push({ label: 'Print all columns', command: '{print $0}' });\n    }\n  } else if (command.includes('sum +=')) {\n    summary = 'Calculates a running sum of a numeric field.';\n    tryNext.push({ label: 'Count lines', command: '{count++} END {print count}' });\n  } else if (command.includes('END')) {\n    summary = 'Processes all lines, then executes the END block for final output.';\n    flags.push({ flag: 'END {...}', meaning: 'Code to run after all input is processed' });\n  } else {\n    summary = `Processes each line with the awk program \"${command}\".`;\n  }\n\n  return { summary, flags, tryNext };\n}\n\nfunction explainKubectl(command: string): CommandExplanation {\n  const flags: { flag: string; meaning: string }[] = [];\n  const tryNext: { label: string; command: string }[] = [];\n  let summary = '';\n\n  // Parse the command\n  const parts = command.trim().split(/\\s+/);\n  let i = 0;\n  if (parts[i] === 'kubectl') i++;\n\n  const verb = parts[i] || '';\n  i++;\n  const resource = parts[i] || '';\n\n  // Parse flags from command\n  const hasNamespace = command.includes(' -n ') || command.includes(' --namespace');\n  const hasAllNamespaces = command.includes('-A') || command.includes('--all-namespaces');\n  const hasWide = command.includes('-o wide');\n  const hasYaml = command.includes('-o yaml');\n  const hasJson = command.includes('-o json');\n  const hasTail = command.includes('--tail');\n\n  // Extract namespace if present\n  const nsMatch = command.match(/-n\\s+(\\S+)/);\n  const namespace = nsMatch?.[1];\n\n  switch (verb) {\n    case 'get':\n      if (resource.includes('pod')) {\n        summary = 'Lists pods - check STATUS and RESTARTS columns for issues.';\n        if (hasWide) {\n          flags.push({ flag: '-o wide', meaning: 'Shows IP addresses and node placement' });\n        }\n        if (!hasWide) {\n          tryNext.push({ label: 'Show IPs & nodes', command: `kubectl get pods${namespace ? ` -n ${namespace}` : ''} -o wide` });\n        }\n        tryNext.push({ label: 'Describe unhealthy', command: `kubectl describe pod <name>${namespace ? ` -n ${namespace}` : ''}` });\n        tryNext.push({ label: 'View logs', command: `kubectl logs <pod-name>${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (resource.includes('deploy')) {\n        summary = 'Lists deployments - READY shows available/desired replicas.';\n        tryNext.push({ label: 'Check rollout', command: `kubectl rollout status deployment/<name>${namespace ? ` -n ${namespace}` : ''}` });\n        tryNext.push({ label: 'View history', command: `kubectl rollout history deployment/<name>${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (resource.includes('svc') || resource.includes('service')) {\n        summary = 'Lists services - check if EXTERNAL-IP is assigned and ports are correct.';\n        tryNext.push({ label: 'Check endpoints', command: `kubectl get endpoints${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (resource.includes('endpoints') || resource.includes('ep')) {\n        summary = 'Shows service endpoints - <none> means no pods match the service selector.';\n        tryNext.push({ label: 'Check pod labels', command: `kubectl get pods --show-labels${namespace ? ` -n ${namespace}` : ''}` });\n        tryNext.push({ label: 'Describe service', command: `kubectl describe svc <name>${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (resource.includes('node')) {\n        summary = 'Lists cluster nodes - look for NotReady status or conditions like MemoryPressure.';\n        tryNext.push({ label: 'Describe node', command: 'kubectl describe node <name>' });\n        tryNext.push({ label: 'Check resources', command: 'kubectl top nodes' });\n      } else if (resource.includes('event')) {\n        summary = 'Shows cluster events - filter by type Warning for issues.';\n        tryNext.push({ label: 'All namespaces', command: 'kubectl get events -A --sort-by=.lastTimestamp' });\n      }\n      break;\n\n    case 'describe':\n      if (resource.includes('pod')) {\n        summary = 'Shows detailed pod info - check Events section at bottom for errors.';\n        flags.push({ flag: 'describe', meaning: 'Full details including events, conditions, and container states' });\n        tryNext.push({ label: 'Get logs', command: `kubectl logs <pod>${namespace ? ` -n ${namespace}` : ''}` });\n        tryNext.push({ label: 'Previous logs', command: `kubectl logs <pod> --previous${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (resource.includes('deploy')) {\n        summary = 'Shows deployment details - check Conditions and replica counts.';\n        tryNext.push({ label: 'Rollout status', command: `kubectl rollout status deployment/<name>${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (resource.includes('node')) {\n        summary = 'Shows node details - check Conditions for MemoryPressure, DiskPressure.';\n        flags.push({ flag: 'describe', meaning: 'Shows allocatable resources, taints, and conditions' });\n        tryNext.push({ label: 'Check pods on node', command: 'kubectl get pods -A --field-selector spec.nodeName=<node>' });\n      } else if (resource.includes('svc') || resource.includes('service')) {\n        summary = 'Shows service details - verify Selector matches pod labels.';\n        tryNext.push({ label: 'Check endpoints', command: `kubectl get endpoints${namespace ? ` -n ${namespace}` : ''}` });\n      }\n      break;\n\n    case 'logs':\n      summary = 'Shows container logs - look for ERROR, FATAL, or stack traces.';\n      if (hasTail) {\n        const tailMatch = command.match(/--tail\\s+(\\d+)/);\n        if (tailMatch) {\n          flags.push({ flag: `--tail ${tailMatch[1]}`, meaning: `Show last ${tailMatch[1]} lines only` });\n        }\n      }\n      if (!hasTail) {\n        tryNext.push({ label: 'Last 50 lines', command: `kubectl logs <pod> --tail=50${namespace ? ` -n ${namespace}` : ''}` });\n      }\n      tryNext.push({ label: 'Previous crash', command: `kubectl logs <pod> --previous${namespace ? ` -n ${namespace}` : ''}` });\n      tryNext.push({ label: 'Follow live', command: `kubectl logs <pod> -f${namespace ? ` -n ${namespace}` : ''}` });\n      break;\n\n    case 'rollout': {\n      const subcommand = resource;\n      if (subcommand === 'status') {\n        summary = 'Shows rollout progress - watch for stuck or failed updates.';\n        tryNext.push({ label: 'View history', command: `kubectl rollout history deployment/<name>${namespace ? ` -n ${namespace}` : ''}` });\n        tryNext.push({ label: 'Undo rollout', command: `kubectl rollout undo deployment/<name>${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (subcommand === 'history') {\n        summary = 'Shows deployment revision history with change causes.';\n        tryNext.push({ label: 'Undo to previous', command: `kubectl rollout undo deployment/<name>${namespace ? ` -n ${namespace}` : ''}` });\n        tryNext.push({ label: 'Undo to specific', command: `kubectl rollout undo deployment/<name> --to-revision=<N>${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (subcommand === 'undo') {\n        summary = 'Rolls back to the previous deployment revision.';\n        tryNext.push({ label: 'Check status', command: `kubectl rollout status deployment/<name>${namespace ? ` -n ${namespace}` : ''}` });\n        tryNext.push({ label: 'Verify pods', command: `kubectl get pods${namespace ? ` -n ${namespace}` : ''}` });\n      }\n      break;\n    }\n\n    case 'top':\n      if (resource.includes('pod')) {\n        summary = 'Shows pod resource usage - identify high CPU/memory consumers.';\n        tryNext.push({ label: 'Node usage', command: 'kubectl top nodes' });\n        tryNext.push({ label: 'Sort by memory', command: `kubectl top pods --sort-by=memory${namespace ? ` -n ${namespace}` : ''}` });\n      } else if (resource.includes('node')) {\n        summary = 'Shows node resource usage - high memory% may cause evictions.';\n        tryNext.push({ label: 'Pod usage', command: 'kubectl top pods -A' });\n        tryNext.push({ label: 'Describe node', command: 'kubectl describe node <name>' });\n      }\n      break;\n\n    default:\n      summary = 'kubectl command for Kubernetes cluster management.';\n      tryNext.push({ label: 'List pods', command: 'kubectl get pods' });\n      tryNext.push({ label: 'List nodes', command: 'kubectl get nodes' });\n  }\n\n  // Add common flags\n  if (hasNamespace && namespace) {\n    flags.push({ flag: `-n ${namespace}`, meaning: `Target the ${namespace} namespace` });\n  }\n  if (hasAllNamespaces) {\n    flags.push({ flag: '-A', meaning: 'Search across all namespaces' });\n  }\n  if (hasYaml) {\n    flags.push({ flag: '-o yaml', meaning: 'Output full resource definition in YAML' });\n  }\n  if (hasJson) {\n    flags.push({ flag: '-o json', meaning: 'Output full resource definition in JSON' });\n  }\n\n  return { summary, flags, tryNext };\n}\n","import { Target } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport { explainCommand } from './explainer';\nimport type { Tool, ToolPreset } from './types';\n\ninterface LearnHeaderProps {\n  tool: Tool;\n  preset: ToolPreset | null;\n  onTryCommand: (command: string) => void;\n}\n\n// Command hints for each tool - concepts to explore\nconst COMMAND_HINTS: Record<Tool, { label: string; command: string }[]> = {\n  jq: [\n    { label: 'Get field', command: '.name' },\n    { label: 'List keys', command: 'keys' },\n    { label: 'Get age', command: '.age' },\n    { label: 'Get city', command: '.city' },\n  ],\n  grep: [\n    { label: 'Match text', command: 'apple' },\n    { label: 'Ignore case', command: '-i apple' },\n    { label: 'Line numbers', command: '-n apple' },\n    { label: 'Extended regex', command: '-E \"(apple|banana)\"' },\n  ],\n  sed: [\n    { label: 'Replace first', command: 's/old/new/' },\n    { label: 'Replace all', command: 's/old/new/g' },\n    { label: 'Delete lines', command: '/^#/d' },\n  ],\n  awk: [\n    { label: 'First column', command: '{print $1}' },\n    { label: 'Multiple cols', command: '{print $1, $2}' },\n    { label: 'Sum values', command: '{sum += $2} END {print sum}' },\n  ],\n  kubectl: [\n    { label: 'Get pods', command: 'get pods' },\n    { label: 'Describe pod', command: 'describe pod' },\n    { label: 'Tail logs', command: 'logs' },\n    { label: 'Get events', command: 'get events' },\n  ],\n};\n\nexport function LearnHeader({ tool, preset, onTryCommand }: LearnHeaderProps) {\n  if (!preset) return null;\n\n  const derivedHints = explainCommand(tool, preset.command).tryNext;\n  const baseHints = COMMAND_HINTS[tool];\n  const hintsSource = derivedHints.length > 0 ? derivedHints : baseHints;\n  const maxHints = derivedHints.length > 0 ? 3 : 4;\n\n  // For kubectl, add namespace to fallback hints only\n  const hints = tool === 'kubectl' && preset.namespace && hintsSource === baseHints\n    ? baseHints.map(hint => ({\n        ...hint,\n        command: hint.command.includes('-n ')\n          ? hint.command\n          : `${hint.command} -n ${preset.namespace}`,\n      }))\n    : hintsSource;\n  const cappedHints = hints.slice(0, maxHints);\n\n  // Use objective for kubectl, description for others\n  const goalText = (tool === 'kubectl' && preset.objective) || preset.description;\n\n  return (\n    <div className=\"flex flex-col sm:flex-row sm:items-center gap-3 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg\">\n      {/* Goal */}\n      <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n        <Target className=\"h-4 w-4 text-blue-500 shrink-0\" />\n        <span className=\"text-sm\">{goalText}</span>\n      </div>\n\n      {/* Command chips with tooltips showing exact command */}\n      <div className=\"flex items-center gap-1.5 flex-wrap\">\n        <span className=\"text-xs text-muted-foreground mr-1\">Try:</span>\n        {cappedHints.map((hint) => (\n          <Tooltip key={hint.label}>\n            <TooltipTrigger asChild>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"h-6 px-2 text-xs\"\n                onClick={() => onTryCommand(hint.command)}\n              >\n                {hint.label}\n              </Button>\n            </TooltipTrigger>\n            <TooltipContent>\n              <code className=\"font-mono text-xs\">{hint.command}</code>\n            </TooltipContent>\n          </Tooltip>\n        ))}\n      </div>\n    </div>\n  );\n}\n","/**\n * kubectl engine - simulates kubectl commands against mock cluster fixtures\n *\n * Architecture: Single source of truth executor used by both Learn and Play modes.\n * For the same {fixture, namespace, command}, output is byte-for-byte identical.\n */\n\n// ============================================================================\n// TYPES - K8s-like resource schema\n// ============================================================================\n\ninterface ObjectMeta {\n  name: string;\n  namespace?: string;\n  labels?: Record<string, string>;\n  creationTimestamp: string;\n  uid: string;\n}\n\ninterface ContainerState {\n  waiting?: { reason: string; message?: string };\n  running?: { startedAt: string };\n  terminated?: { exitCode: number; reason: string; message?: string; finishedAt: string };\n}\n\ninterface ContainerStatus {\n  name: string;\n  image: string;\n  imageID: string;\n  ready: boolean;\n  restartCount: number;\n  state: ContainerState;\n  lastState?: ContainerState;\n}\n\ninterface PodCondition {\n  type: string;\n  status: 'True' | 'False' | 'Unknown';\n  lastTransitionTime: string;\n  reason?: string;\n  message?: string;\n}\n\ninterface Pod {\n  metadata: ObjectMeta;\n  spec: {\n    nodeName?: string;\n    containers: { name: string; image: string; ports?: { containerPort: number }[] }[];\n  };\n  status: {\n    phase: string;\n    podIP?: string;\n    hostIP?: string;\n    startTime?: string;\n    conditions?: PodCondition[];\n    containerStatuses?: ContainerStatus[];\n  };\n}\n\ninterface DeploymentCondition {\n  type: string;\n  status: 'True' | 'False' | 'Unknown';\n  lastUpdateTime: string;\n  lastTransitionTime: string;\n  reason: string;\n  message: string;\n}\n\ninterface Deployment {\n  metadata: ObjectMeta;\n  spec: {\n    replicas: number;\n    selector: { matchLabels: Record<string, string> };\n    template: { metadata: { labels: Record<string, string> } };\n  };\n  status: {\n    replicas: number;\n    readyReplicas: number;\n    updatedReplicas: number;\n    availableReplicas: number;\n    conditions?: DeploymentCondition[];\n    observedGeneration?: number;\n  };\n  revisions?: { revision: number; image: string; changeCause: string }[];\n}\n\ninterface ReplicaSet {\n  metadata: ObjectMeta;\n  spec: {\n    replicas: number;\n    selector: { matchLabels: Record<string, string> };\n  };\n  status: {\n    replicas: number;\n    readyReplicas: number;\n    availableReplicas: number;\n  };\n}\n\ninterface Service {\n  metadata: ObjectMeta;\n  spec: {\n    type: string;\n    clusterIP: string;\n    ports: { port: number; targetPort: number; protocol: string; nodePort?: number }[];\n    selector?: Record<string, string>;\n    externalIPs?: string[];\n  };\n  status?: {\n    loadBalancer?: { ingress?: { ip: string }[] };\n  };\n}\n\ninterface Endpoints {\n  metadata: ObjectMeta;\n  subsets?: {\n    addresses?: { ip: string; nodeName?: string; targetRef?: { name: string; namespace: string } }[];\n    ports?: { port: number; protocol: string }[];\n  }[];\n}\n\ninterface NodeCondition {\n  type: string;\n  status: 'True' | 'False' | 'Unknown';\n  lastHeartbeatTime: string;\n  lastTransitionTime: string;\n  reason: string;\n  message: string;\n}\n\ninterface Node {\n  metadata: ObjectMeta;\n  spec: {\n    taints?: { key: string; value?: string; effect: string }[];\n    unschedulable?: boolean;\n  };\n  status: {\n    conditions: NodeCondition[];\n    addresses: { type: string; address: string }[];\n    capacity: { cpu: string; memory: string; pods: string };\n    allocatable: { cpu: string; memory: string; pods: string };\n    nodeInfo: {\n      kubeletVersion: string;\n      osImage: string;\n      kernelVersion: string;\n      containerRuntimeVersion: string;\n    };\n  };\n}\n\ninterface Event {\n  metadata: ObjectMeta;\n  involvedObject: { kind: string; name: string; namespace?: string; uid: string };\n  reason: string;\n  message: string;\n  source: { component: string; host?: string };\n  firstTimestamp: string;\n  lastTimestamp: string;\n  count: number;\n  type: 'Normal' | 'Warning';\n}\n\ninterface ClusterFixture {\n  pods: Pod[];\n  deployments: Deployment[];\n  replicaSets: ReplicaSet[];\n  services: Service[];\n  endpoints: Endpoints[];\n  nodes: Node[];\n  events: Event[];\n  logs: Record<string, Record<string, string>>; // pod -> container -> logs\n}\n\n// ============================================================================\n// EXECUTOR INTERFACE\n// ============================================================================\n\nexport interface ExecutorOptions {\n  fixtureId: string;\n  defaultNamespace: string;\n}\n\nexport interface ExecutorResult {\n  stdout: string;\n  stderr: string;\n  exitCode: number;\n}\n\n// ============================================================================\n// FIXTURES\n// ============================================================================\n\nconst FIXTURES: Record<string, ClusterFixture> = {\n  crashloop: createCrashloopFixture(),\n  imagepull: createImagepullFixture(),\n  'service-mismatch': createServiceMismatchFixture(),\n  'rollout-regression': createRolloutRegressionFixture(),\n  'node-pressure': createNodePressureFixture(),\n};\n\nfunction createCrashloopFixture(): ClusterFixture {\n  const ts = '2024-01-15T10:20:00Z';\n  return {\n    pods: [\n      {\n        metadata: {\n          name: 'payment-api-7d4f8b9c5-x2k9m',\n          namespace: 'payments',\n          labels: { app: 'payment-api', 'pod-template-hash': '7d4f8b9c5', version: 'v2.1.0' },\n          creationTimestamp: ts,\n          uid: 'pod-1-uid',\n        },\n        spec: {\n          nodeName: 'worker-1',\n          containers: [{ name: 'payment-api', image: 'myregistry/payment-api:v2.1.0', ports: [{ containerPort: 8080 }] }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.1.15',\n          hostIP: '10.0.1.10',\n          startTime: ts,\n          conditions: [\n            { type: 'Initialized', status: 'True', lastTransitionTime: ts },\n            { type: 'Ready', status: 'False', lastTransitionTime: ts, reason: 'ContainersNotReady', message: 'containers with unready status: [payment-api]' },\n            { type: 'ContainersReady', status: 'False', lastTransitionTime: ts },\n            { type: 'PodScheduled', status: 'True', lastTransitionTime: ts },\n          ],\n          containerStatuses: [{\n            name: 'payment-api',\n            image: 'myregistry/payment-api:v2.1.0',\n            imageID: 'docker-pullable://myregistry/payment-api@sha256:abc123',\n            ready: false,\n            restartCount: 5,\n            state: { waiting: { reason: 'CrashLoopBackOff', message: 'back-off 2m40s restarting failed container' } },\n            lastState: { terminated: { exitCode: 1, reason: 'Error', message: 'Container exited with code 1', finishedAt: ts } },\n          }],\n        },\n      },\n      {\n        metadata: {\n          name: 'payment-api-7d4f8b9c5-h8j3n',\n          namespace: 'payments',\n          labels: { app: 'payment-api', 'pod-template-hash': '7d4f8b9c5', version: 'v2.1.0' },\n          creationTimestamp: ts,\n          uid: 'pod-2-uid',\n        },\n        spec: {\n          nodeName: 'worker-2',\n          containers: [{ name: 'payment-api', image: 'myregistry/payment-api:v2.1.0' }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.2.22',\n          hostIP: '10.0.1.11',\n          startTime: ts,\n          conditions: [\n            { type: 'Ready', status: 'False', lastTransitionTime: ts },\n          ],\n          containerStatuses: [{\n            name: 'payment-api',\n            image: 'myregistry/payment-api:v2.1.0',\n            imageID: 'docker-pullable://myregistry/payment-api@sha256:abc123',\n            ready: false,\n            restartCount: 5,\n            state: { waiting: { reason: 'CrashLoopBackOff', message: 'back-off 2m40s restarting failed container' } },\n            lastState: { terminated: { exitCode: 1, reason: 'Error', finishedAt: ts } },\n          }],\n        },\n      },\n      {\n        metadata: {\n          name: 'payment-db-0',\n          namespace: 'payments',\n          labels: { app: 'payment-db', 'statefulset.kubernetes.io/pod-name': 'payment-db-0' },\n          creationTimestamp: '2024-01-10T10:00:00Z',\n          uid: 'pod-3-uid',\n        },\n        spec: {\n          nodeName: 'worker-1',\n          containers: [{ name: 'postgres', image: 'postgres:15', ports: [{ containerPort: 5432 }] }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.1.8',\n          hostIP: '10.0.1.10',\n          startTime: '2024-01-10T10:00:00Z',\n          conditions: [{ type: 'Ready', status: 'True', lastTransitionTime: '2024-01-10T10:00:00Z' }],\n          containerStatuses: [{\n            name: 'postgres',\n            image: 'postgres:15',\n            imageID: 'docker-pullable://postgres@sha256:def456',\n            ready: true,\n            restartCount: 0,\n            state: { running: { startedAt: '2024-01-10T10:00:00Z' } },\n          }],\n        },\n      },\n    ],\n    deployments: [\n      {\n        metadata: {\n          name: 'payment-api',\n          namespace: 'payments',\n          labels: { app: 'payment-api' },\n          creationTimestamp: '2024-01-15T10:20:00Z',\n          uid: 'deploy-1-uid',\n        },\n        spec: {\n          replicas: 2,\n          selector: { matchLabels: { app: 'payment-api' } },\n          template: { metadata: { labels: { app: 'payment-api' } } },\n        },\n        status: {\n          replicas: 2,\n          readyReplicas: 0,\n          updatedReplicas: 2,\n          availableReplicas: 0,\n          conditions: [\n            { type: 'Available', status: 'False', lastUpdateTime: ts, lastTransitionTime: ts, reason: 'MinimumReplicasUnavailable', message: 'Deployment does not have minimum availability.' },\n            { type: 'Progressing', status: 'True', lastUpdateTime: ts, lastTransitionTime: ts, reason: 'ReplicaSetUpdated', message: 'ReplicaSet \"payment-api-7d4f8b9c5\" has successfully progressed.' },\n          ],\n        },\n        revisions: [\n          { revision: 3, image: 'myregistry/payment-api:v2.1.0', changeCause: 'kubectl set image deployment/payment-api payment-api=myregistry/payment-api:v2.1.0' },\n          { revision: 2, image: 'myregistry/payment-api:v2.0.0', changeCause: 'kubectl set image deployment/payment-api payment-api=myregistry/payment-api:v2.0.0' },\n          { revision: 1, image: 'myregistry/payment-api:v1.9.0', changeCause: 'Initial deployment' },\n        ],\n      },\n    ],\n    replicaSets: [\n      {\n        metadata: { name: 'payment-api-7d4f8b9c5', namespace: 'payments', labels: { app: 'payment-api', 'pod-template-hash': '7d4f8b9c5' }, creationTimestamp: ts, uid: 'rs-1-uid' },\n        spec: { replicas: 2, selector: { matchLabels: { app: 'payment-api', 'pod-template-hash': '7d4f8b9c5' } } },\n        status: { replicas: 2, readyReplicas: 0, availableReplicas: 0 },\n      },\n    ],\n    services: [\n      {\n        metadata: { name: 'payment-api', namespace: 'payments', labels: { app: 'payment-api' }, creationTimestamp: '2023-12-15T10:00:00Z', uid: 'svc-1-uid' },\n        spec: { type: 'ClusterIP', clusterIP: '10.96.45.12', ports: [{ port: 8080, targetPort: 8080, protocol: 'TCP' }], selector: { app: 'payment-api' } },\n      },\n      {\n        metadata: { name: 'payment-db', namespace: 'payments', labels: { app: 'payment-db' }, creationTimestamp: '2023-12-15T10:00:00Z', uid: 'svc-2-uid' },\n        spec: { type: 'ClusterIP', clusterIP: '10.96.45.20', ports: [{ port: 5432, targetPort: 5432, protocol: 'TCP' }], selector: { app: 'payment-db' } },\n      },\n    ],\n    endpoints: [\n      { metadata: { name: 'payment-api', namespace: 'payments', creationTimestamp: '2023-12-15T10:00:00Z', uid: 'ep-1-uid' }, subsets: [] },\n      { metadata: { name: 'payment-db', namespace: 'payments', creationTimestamp: '2023-12-15T10:00:00Z', uid: 'ep-2-uid' }, subsets: [{ addresses: [{ ip: '10.244.1.8', nodeName: 'worker-1' }], ports: [{ port: 5432, protocol: 'TCP' }] }] },\n    ],\n    nodes: [\n      createNode('worker-1'),\n      createNode('worker-2'),\n    ],\n    events: [\n      createEvent('pod', 'payment-api-7d4f8b9c5-x2k9m', 'payments', 'Warning', 'BackOff', 'kubelet', 'Back-off restarting failed container', '2m', 5),\n      createEvent('pod', 'payment-api-7d4f8b9c5-h8j3n', 'payments', 'Warning', 'BackOff', 'kubelet', 'Back-off restarting failed container', '2m', 5),\n      createEvent('pod', 'payment-api-7d4f8b9c5-x2k9m', 'payments', 'Normal', 'Pulled', 'kubelet', 'Container image \"myregistry/payment-api:v2.1.0\" already present on machine', '12m', 1),\n    ],\n    logs: {\n      'payment-api-7d4f8b9c5-x2k9m': {\n        'payment-api': `2024-01-15T10:23:45.123Z INFO  Starting payment-api v2.1.0\n2024-01-15T10:23:45.456Z INFO  Connecting to database...\n2024-01-15T10:23:46.789Z ERROR Database connection failed: FATAL: password authentication failed for user \"payment_svc\"\n2024-01-15T10:23:46.790Z ERROR Failed to initialize database pool\n2024-01-15T10:23:46.791Z FATAL Application startup failed: DatabaseConnectionError\npanic: runtime error: database connection required`,\n      },\n      'payment-api-7d4f8b9c5-h8j3n': {\n        'payment-api': `2024-01-15T10:23:47.123Z INFO  Starting payment-api v2.1.0\n2024-01-15T10:23:47.456Z INFO  Connecting to database...\n2024-01-15T10:23:48.789Z ERROR Database connection failed: FATAL: password authentication failed for user \"payment_svc\"\n2024-01-15T10:23:48.790Z FATAL Application startup failed`,\n      },\n    },\n  };\n}\n\nfunction createImagepullFixture(): ClusterFixture {\n  const ts = '2024-01-15T10:00:00Z';\n  return {\n    pods: [\n      {\n        metadata: {\n          name: 'frontend-web-5f6d7c8b9-k3m2n',\n          namespace: 'frontend',\n          labels: { app: 'frontend-web', 'pod-template-hash': '5f6d7c8b9' },\n          creationTimestamp: ts,\n          uid: 'pod-1-uid',\n        },\n        spec: {\n          nodeName: 'worker-1',\n          containers: [{ name: 'frontend', image: 'gcr.io/myproject/frontend:v3.0.0' }],\n        },\n        status: {\n          phase: 'Pending',\n          conditions: [{ type: 'Ready', status: 'False', lastTransitionTime: ts }],\n          containerStatuses: [{\n            name: 'frontend',\n            image: 'gcr.io/myproject/frontend:v3.0.0',\n            imageID: '',\n            ready: false,\n            restartCount: 0,\n            state: { waiting: { reason: 'ImagePullBackOff', message: 'Back-off pulling image \"gcr.io/myproject/frontend:v3.0.0\"' } },\n          }],\n        },\n      },\n      {\n        metadata: {\n          name: 'frontend-api-6b7c8d9e0-j4k5l',\n          namespace: 'frontend',\n          labels: { app: 'frontend-api', 'pod-template-hash': '6b7c8d9e0' },\n          creationTimestamp: '2024-01-13T10:00:00Z',\n          uid: 'pod-2-uid',\n        },\n        spec: {\n          nodeName: 'worker-1',\n          containers: [{ name: 'api', image: 'myregistry/frontend-api:v2.0.0' }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.1.30',\n          conditions: [{ type: 'Ready', status: 'True', lastTransitionTime: '2024-01-13T10:00:00Z' }],\n          containerStatuses: [{\n            name: 'api',\n            image: 'myregistry/frontend-api:v2.0.0',\n            imageID: 'docker-pullable://myregistry/frontend-api@sha256:abc',\n            ready: true,\n            restartCount: 0,\n            state: { running: { startedAt: '2024-01-13T10:00:00Z' } },\n          }],\n        },\n      },\n    ],\n    deployments: [\n      {\n        metadata: { name: 'frontend-web', namespace: 'frontend', labels: { app: 'frontend-web' }, creationTimestamp: ts, uid: 'deploy-1-uid' },\n        spec: { replicas: 1, selector: { matchLabels: { app: 'frontend-web' } }, template: { metadata: { labels: { app: 'frontend-web' } } } },\n        status: { replicas: 1, readyReplicas: 0, updatedReplicas: 1, availableReplicas: 0 },\n      },\n      {\n        metadata: { name: 'frontend-api', namespace: 'frontend', labels: { app: 'frontend-api' }, creationTimestamp: '2024-01-13T10:00:00Z', uid: 'deploy-2-uid' },\n        spec: { replicas: 1, selector: { matchLabels: { app: 'frontend-api' } }, template: { metadata: { labels: { app: 'frontend-api' } } } },\n        status: { replicas: 1, readyReplicas: 1, updatedReplicas: 1, availableReplicas: 1 },\n      },\n    ],\n    replicaSets: [],\n    services: [\n      {\n        metadata: { name: 'frontend-web', namespace: 'frontend', labels: { app: 'frontend-web' }, creationTimestamp: '2023-12-15T10:00:00Z', uid: 'svc-1-uid' },\n        spec: { type: 'LoadBalancer', clusterIP: '10.96.100.10', ports: [{ port: 80, targetPort: 80, protocol: 'TCP', nodePort: 31234 }], selector: { app: 'frontend-web' } },\n        status: { loadBalancer: { ingress: [{ ip: '34.120.55.80' }] } },\n      },\n    ],\n    endpoints: [\n      { metadata: { name: 'frontend-web', namespace: 'frontend', creationTimestamp: '2023-12-15T10:00:00Z', uid: 'ep-1-uid' }, subsets: [] },\n    ],\n    nodes: [createNode('worker-1')],\n    events: [\n      createEvent('pod', 'frontend-web-5f6d7c8b9-k3m2n', 'frontend', 'Warning', 'Failed', 'kubelet', 'Failed to pull image \"gcr.io/myproject/frontend:v3.0.0\": rpc error: code = Unknown desc = Error response from daemon: unauthorized: authentication required', '8m', 3),\n      createEvent('pod', 'frontend-web-5f6d7c8b9-k3m2n', 'frontend', 'Warning', 'Failed', 'kubelet', 'Error: ImagePullBackOff', '7m', 1),\n      createEvent('pod', 'frontend-web-5f6d7c8b9-k3m2n', 'frontend', 'Normal', 'BackOff', 'kubelet', 'Back-off pulling image \"gcr.io/myproject/frontend:v3.0.0\"', '5m', 10),\n    ],\n    logs: {},\n  };\n}\n\nfunction createServiceMismatchFixture(): ClusterFixture {\n  const ts = '2024-01-15T09:00:00Z';\n  return {\n    pods: [\n      {\n        metadata: {\n          name: 'api-server-8f9g0h1i2-m5n6o',\n          namespace: 'api',\n          labels: { app: 'api-server', version: 'v2', 'pod-template-hash': '8f9g0h1i2' },\n          creationTimestamp: ts,\n          uid: 'pod-1-uid',\n        },\n        spec: {\n          nodeName: 'worker-2',\n          containers: [{ name: 'api', image: 'myregistry/api-server:v2.0.0', ports: [{ containerPort: 8080 }] }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.2.50',\n          conditions: [{ type: 'Ready', status: 'True', lastTransitionTime: ts }],\n          containerStatuses: [{\n            name: 'api',\n            image: 'myregistry/api-server:v2.0.0',\n            imageID: 'docker-pullable://myregistry/api-server@sha256:abc',\n            ready: true,\n            restartCount: 0,\n            state: { running: { startedAt: ts } },\n          }],\n        },\n      },\n      {\n        metadata: {\n          name: 'api-server-8f9g0h1i2-p7q8r',\n          namespace: 'api',\n          labels: { app: 'api-server', version: 'v2', 'pod-template-hash': '8f9g0h1i2' },\n          creationTimestamp: ts,\n          uid: 'pod-2-uid',\n        },\n        spec: {\n          nodeName: 'worker-1',\n          containers: [{ name: 'api', image: 'myregistry/api-server:v2.0.0', ports: [{ containerPort: 8080 }] }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.1.51',\n          conditions: [{ type: 'Ready', status: 'True', lastTransitionTime: ts }],\n          containerStatuses: [{\n            name: 'api',\n            image: 'myregistry/api-server:v2.0.0',\n            imageID: 'docker-pullable://myregistry/api-server@sha256:abc',\n            ready: true,\n            restartCount: 0,\n            state: { running: { startedAt: ts } },\n          }],\n        },\n      },\n    ],\n    deployments: [\n      {\n        metadata: { name: 'api-server', namespace: 'api', labels: { app: 'api-server' }, creationTimestamp: ts, uid: 'deploy-1-uid' },\n        spec: { replicas: 2, selector: { matchLabels: { app: 'api-server', version: 'v2' } }, template: { metadata: { labels: { app: 'api-server', version: 'v2' } } } },\n        status: { replicas: 2, readyReplicas: 2, updatedReplicas: 2, availableReplicas: 2 },\n      },\n    ],\n    replicaSets: [],\n    services: [\n      {\n        metadata: { name: 'api-server', namespace: 'api', labels: { app: 'api-server' }, creationTimestamp: '2023-12-15T10:00:00Z', uid: 'svc-1-uid' },\n        spec: {\n          type: 'ClusterIP',\n          clusterIP: '10.96.200.15',\n          ports: [{ port: 8080, targetPort: 8080, protocol: 'TCP' }],\n          selector: { app: 'api-server', version: 'v1' }, // Mismatch! Pods have version: v2\n        },\n      },\n    ],\n    endpoints: [\n      { metadata: { name: 'api-server', namespace: 'api', creationTimestamp: '2023-12-15T10:00:00Z', uid: 'ep-1-uid' }, subsets: [] },\n    ],\n    nodes: [\n      createNode('worker-1'),\n      createNode('worker-2'),\n    ],\n    events: [],\n    logs: {\n      'api-server-8f9g0h1i2-m5n6o': {\n        'api': `2024-01-15T09:00:00.000Z INFO  API server started on :8080\n2024-01-15T09:00:01.000Z INFO  Health check endpoint ready\n2024-01-15T09:00:02.000Z INFO  Connected to database`,\n      },\n    },\n  };\n}\n\nfunction createRolloutRegressionFixture(): ClusterFixture {\n  const ts = '2024-01-15T14:30:00Z';\n  return {\n    pods: [\n      {\n        metadata: {\n          name: 'web-7a8b9c0d1-e2f3g',\n          namespace: 'production',\n          labels: { app: 'web', version: 'v4.2.0', 'pod-template-hash': '7a8b9c0d1' },\n          creationTimestamp: ts,\n          uid: 'pod-1-uid',\n        },\n        spec: {\n          nodeName: 'worker-1',\n          containers: [{ name: 'web', image: 'myregistry/web:v4.2.0', ports: [{ containerPort: 8080 }] }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.1.100',\n          conditions: [{ type: 'Ready', status: 'True', lastTransitionTime: ts }],\n          containerStatuses: [{\n            name: 'web',\n            image: 'myregistry/web:v4.2.0',\n            imageID: 'docker-pullable://myregistry/web@sha256:v420',\n            ready: true,\n            restartCount: 0,\n            state: { running: { startedAt: ts } },\n          }],\n        },\n      },\n      {\n        metadata: {\n          name: 'web-7a8b9c0d1-h4i5j',\n          namespace: 'production',\n          labels: { app: 'web', version: 'v4.2.0', 'pod-template-hash': '7a8b9c0d1' },\n          creationTimestamp: ts,\n          uid: 'pod-2-uid',\n        },\n        spec: {\n          nodeName: 'worker-2',\n          containers: [{ name: 'web', image: 'myregistry/web:v4.2.0', ports: [{ containerPort: 8080 }] }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.2.101',\n          conditions: [{ type: 'Ready', status: 'True', lastTransitionTime: ts }],\n          containerStatuses: [{\n            name: 'web',\n            image: 'myregistry/web:v4.2.0',\n            imageID: 'docker-pullable://myregistry/web@sha256:v420',\n            ready: true,\n            restartCount: 0,\n            state: { running: { startedAt: ts } },\n          }],\n        },\n      },\n    ],\n    deployments: [\n      {\n        metadata: { name: 'web', namespace: 'production', labels: { app: 'web' }, creationTimestamp: '2023-10-15T10:00:00Z', uid: 'deploy-1-uid' },\n        spec: { replicas: 2, selector: { matchLabels: { app: 'web' } }, template: { metadata: { labels: { app: 'web' } } } },\n        status: {\n          replicas: 2,\n          readyReplicas: 2,\n          updatedReplicas: 2,\n          availableReplicas: 2,\n          conditions: [\n            { type: 'Available', status: 'True', lastUpdateTime: ts, lastTransitionTime: ts, reason: 'MinimumReplicasAvailable', message: 'Deployment has minimum availability.' },\n            { type: 'Progressing', status: 'True', lastUpdateTime: ts, lastTransitionTime: ts, reason: 'NewReplicaSetAvailable', message: 'ReplicaSet \"web-7a8b9c0d1\" has successfully progressed.' },\n          ],\n        },\n        revisions: [\n          { revision: 5, image: 'myregistry/web:v4.2.0', changeCause: 'kubectl set image deployment/web web=myregistry/web:v4.2.0' },\n          { revision: 4, image: 'myregistry/web:v4.1.0', changeCause: 'kubectl set image deployment/web web=myregistry/web:v4.1.0' },\n          { revision: 3, image: 'myregistry/web:v4.0.0', changeCause: 'kubectl set image deployment/web web=myregistry/web:v4.0.0' },\n        ],\n      },\n    ],\n    replicaSets: [\n      {\n        metadata: { name: 'web-7a8b9c0d1', namespace: 'production', labels: { app: 'web', 'pod-template-hash': '7a8b9c0d1' }, creationTimestamp: ts, uid: 'rs-1-uid' },\n        spec: { replicas: 2, selector: { matchLabels: { app: 'web', 'pod-template-hash': '7a8b9c0d1' } } },\n        status: { replicas: 2, readyReplicas: 2, availableReplicas: 2 },\n      },\n      {\n        metadata: { name: 'web-6z9y8x7w6', namespace: 'production', labels: { app: 'web', 'pod-template-hash': '6z9y8x7w6' }, creationTimestamp: '2024-01-14T10:00:00Z', uid: 'rs-2-uid' },\n        spec: { replicas: 0, selector: { matchLabels: { app: 'web', 'pod-template-hash': '6z9y8x7w6' } } },\n        status: { replicas: 0, readyReplicas: 0, availableReplicas: 0 },\n      },\n    ],\n    services: [\n      {\n        metadata: { name: 'web', namespace: 'production', labels: { app: 'web' }, creationTimestamp: '2023-10-15T10:00:00Z', uid: 'svc-1-uid' },\n        spec: { type: 'LoadBalancer', clusterIP: '10.96.50.50', ports: [{ port: 443, targetPort: 8080, protocol: 'TCP', nodePort: 32000 }], selector: { app: 'web' } },\n        status: { loadBalancer: { ingress: [{ ip: '35.200.100.50' }] } },\n      },\n    ],\n    endpoints: [\n      {\n        metadata: { name: 'web', namespace: 'production', creationTimestamp: '2023-10-15T10:00:00Z', uid: 'ep-1-uid' },\n        subsets: [{ addresses: [{ ip: '10.244.1.100' }, { ip: '10.244.2.101' }], ports: [{ port: 8080, protocol: 'TCP' }] }],\n      },\n    ],\n    nodes: [\n      createNode('worker-1'),\n      createNode('worker-2'),\n    ],\n    events: [\n      createEvent('deployment', 'web', 'production', 'Normal', 'ScalingReplicaSet', 'deployment-controller', 'Scaled up replica set web-7a8b9c0d1 to 2', '5m', 1),\n    ],\n    logs: {\n      'web-7a8b9c0d1-e2f3g': {\n        'web': `2024-01-15T14:30:00.000Z INFO  Starting web v4.2.0\n2024-01-15T14:30:01.000Z INFO  Server listening on :8080\n2024-01-15T14:30:15.000Z ERROR TypeError: Cannot read property 'userId' of undefined\n2024-01-15T14:30:15.001Z ERROR     at handleCheckout (/app/routes/checkout.js:42)\n2024-01-15T14:30:16.000Z ERROR TypeError: Cannot read property 'userId' of undefined\n2024-01-15T14:30:20.000Z WARN  Error rate exceeds threshold: 45%`,\n      },\n      'web-7a8b9c0d1-h4i5j': {\n        'web': `2024-01-15T14:30:00.000Z INFO  Starting web v4.2.0\n2024-01-15T14:30:01.000Z INFO  Server listening on :8080\n2024-01-15T14:30:18.000Z ERROR TypeError: Cannot read property 'userId' of undefined\n2024-01-15T14:30:22.000Z WARN  Error rate exceeds threshold: 42%`,\n      },\n    },\n  };\n}\n\nfunction createNodePressureFixture(): ClusterFixture {\n  const ts = '2024-01-15T09:30:00Z';\n  return {\n    pods: [\n      {\n        metadata: {\n          name: 'worker-job-a1b2c3d4',\n          namespace: 'default',\n          labels: { job: 'worker', 'batch.kubernetes.io/job-name': 'worker-job' },\n          creationTimestamp: '2024-01-15T09:00:00Z',\n          uid: 'pod-1-uid',\n        },\n        spec: {\n          nodeName: 'worker-3',\n          containers: [{ name: 'worker', image: 'myregistry/worker:latest' }],\n        },\n        status: {\n          phase: 'Failed',\n          conditions: [{ type: 'Ready', status: 'False', lastTransitionTime: ts, reason: 'PodFailed' }],\n          containerStatuses: [{\n            name: 'worker',\n            image: 'myregistry/worker:latest',\n            imageID: 'docker-pullable://myregistry/worker@sha256:abc',\n            ready: false,\n            restartCount: 0,\n            state: { terminated: { exitCode: 137, reason: 'OOMKilled', message: 'Container was OOM killed', finishedAt: ts } },\n          }],\n        },\n      },\n      {\n        metadata: {\n          name: 'cache-redis-0',\n          namespace: 'default',\n          labels: { app: 'cache-redis', 'statefulset.kubernetes.io/pod-name': 'cache-redis-0' },\n          creationTimestamp: '2024-01-13T10:00:00Z',\n          uid: 'pod-2-uid',\n        },\n        spec: {\n          nodeName: 'worker-3',\n          containers: [{ name: 'redis', image: 'redis:7', ports: [{ containerPort: 6379 }] }],\n        },\n        status: {\n          phase: 'Running',\n          podIP: '10.244.3.10',\n          conditions: [{ type: 'Ready', status: 'True', lastTransitionTime: '2024-01-13T10:00:00Z' }],\n          containerStatuses: [{\n            name: 'redis',\n            image: 'redis:7',\n            imageID: 'docker-pullable://redis@sha256:abc',\n            ready: true,\n            restartCount: 2,\n            state: { running: { startedAt: ts } },\n          }],\n        },\n      },\n    ],\n    deployments: [],\n    replicaSets: [],\n    services: [],\n    endpoints: [],\n    nodes: [\n      createNode('worker-1'),\n      createNode('worker-2'),\n      createNodeWithPressure('worker-3'),\n    ],\n    events: [\n      createEvent('pod', 'worker-job-a1b2c3d4', 'default', 'Warning', 'Evicted', 'kubelet', 'The node was low on resource: memory. Container worker was using 1.8Gi, which exceeds its request of 512Mi.', '10m', 1),\n      createEvent('node', 'worker-3', '', 'Warning', 'NodeHasDiskPressure', 'node-controller', 'Node worker-3 status is now: NodeHasDiskPressure', '15m', 1),\n      createEvent('node', 'worker-3', '', 'Warning', 'NodeHasMemoryPressure', 'node-controller', 'Node worker-3 status is now: NodeHasMemoryPressure', '20m', 1),\n    ],\n    logs: {},\n  };\n}\n\nfunction createNode(name: string): Node {\n  return {\n    metadata: { name, labels: { 'kubernetes.io/hostname': name, 'node.kubernetes.io/instance-type': 'm5.large' }, creationTimestamp: '2023-12-01T10:00:00Z', uid: `node-${name}-uid` },\n    spec: {},\n    status: {\n      conditions: [\n        { type: 'MemoryPressure', status: 'False', lastHeartbeatTime: '2024-01-15T10:00:00Z', lastTransitionTime: '2023-12-01T10:00:00Z', reason: 'KubeletHasSufficientMemory', message: 'kubelet has sufficient memory available' },\n        { type: 'DiskPressure', status: 'False', lastHeartbeatTime: '2024-01-15T10:00:00Z', lastTransitionTime: '2023-12-01T10:00:00Z', reason: 'KubeletHasNoDiskPressure', message: 'kubelet has no disk pressure' },\n        { type: 'PIDPressure', status: 'False', lastHeartbeatTime: '2024-01-15T10:00:00Z', lastTransitionTime: '2023-12-01T10:00:00Z', reason: 'KubeletHasSufficientPID', message: 'kubelet has sufficient PID available' },\n        { type: 'Ready', status: 'True', lastHeartbeatTime: '2024-01-15T10:00:00Z', lastTransitionTime: '2023-12-01T10:00:00Z', reason: 'KubeletReady', message: 'kubelet is posting ready status' },\n      ],\n      addresses: [\n        { type: 'InternalIP', address: `10.0.1.${10 + parseInt(name.replace('worker-', ''))}` },\n        { type: 'Hostname', address: name },\n      ],\n      capacity: { cpu: '4', memory: '16Gi', pods: '110' },\n      allocatable: { cpu: '3920m', memory: '15Gi', pods: '110' },\n      nodeInfo: { kubeletVersion: 'v1.28.2', osImage: 'Ubuntu 22.04.3 LTS', kernelVersion: '5.15.0-1052-aws', containerRuntimeVersion: 'containerd://1.6.24' },\n    },\n  };\n}\n\nfunction createNodeWithPressure(name: string): Node {\n  const node = createNode(name);\n  node.spec.unschedulable = true;\n  node.spec.taints = [{ key: 'node.kubernetes.io/unschedulable', effect: 'NoSchedule' }];\n  node.status.conditions = [\n    { type: 'MemoryPressure', status: 'True', lastHeartbeatTime: '2024-01-15T10:00:00Z', lastTransitionTime: '2024-01-15T09:40:00Z', reason: 'KubeletHasInsufficientMemory', message: 'kubelet has insufficient memory available' },\n    { type: 'DiskPressure', status: 'True', lastHeartbeatTime: '2024-01-15T10:00:00Z', lastTransitionTime: '2024-01-15T09:45:00Z', reason: 'KubeletHasDiskPressure', message: 'kubelet has disk pressure' },\n    { type: 'PIDPressure', status: 'False', lastHeartbeatTime: '2024-01-15T10:00:00Z', lastTransitionTime: '2023-12-01T10:00:00Z', reason: 'KubeletHasSufficientPID', message: 'kubelet has sufficient PID available' },\n    { type: 'Ready', status: 'True', lastHeartbeatTime: '2024-01-15T10:00:00Z', lastTransitionTime: '2023-12-01T10:00:00Z', reason: 'KubeletReady', message: 'kubelet is posting ready status' },\n  ];\n  node.status.allocatable = { cpu: '3920m', memory: '8Gi', pods: '110' };\n  return node;\n}\n\nfunction createEvent(kind: string, name: string, namespace: string, type: 'Normal' | 'Warning', reason: string, component: string, message: string, age: string, count: number): Event {\n  return {\n    metadata: { name: `${name}.${Date.now().toString(36)}`, namespace: namespace || 'default', creationTimestamp: '2024-01-15T10:00:00Z', uid: `event-${name}-${reason}-uid` },\n    involvedObject: { kind: kind.charAt(0).toUpperCase() + kind.slice(1), name, namespace: namespace || undefined, uid: `${kind}-${name}-uid` },\n    reason,\n    message,\n    source: { component },\n    firstTimestamp: '2024-01-15T10:00:00Z',\n    lastTimestamp: '2024-01-15T10:00:00Z',\n    count,\n    type,\n  };\n}\n\n// ============================================================================\n// SESSION STATE - mutable fixture state for rollout undo\n// ============================================================================\n\nlet sessionState: { fixtureId: string; fixture: ClusterFixture } | null = null;\n\nfunction getFixtureState(fixtureId: string): ClusterFixture {\n  if (sessionState && sessionState.fixtureId === fixtureId) {\n    return sessionState.fixture;\n  }\n  const original = FIXTURES[fixtureId];\n  if (!original) {\n    throw new Error(`Unknown fixture: ${fixtureId}`);\n  }\n  // Deep clone for session\n  sessionState = { fixtureId, fixture: JSON.parse(JSON.stringify(original)) };\n  return sessionState.fixture;\n}\n\nexport function resetFixture(fixtureId: string): void {\n  const original = FIXTURES[fixtureId];\n  if (original) {\n    sessionState = { fixtureId, fixture: JSON.parse(JSON.stringify(original)) };\n  }\n}\n\n// ============================================================================\n// COMMAND PARSER\n// ============================================================================\n\ninterface ParsedCommand {\n  verb: string;\n  resources: string[];\n  name?: string;\n  namespace?: string;\n  allNamespaces: boolean;\n  output?: string;\n  labelSelector?: Record<string, string>;\n  fieldSelector?: Record<string, string>;\n  container?: string;\n  tail?: number;\n  since?: string;\n  follow: boolean;\n  sortBy?: string;\n  showLabels: boolean;\n  watch: boolean;\n  previous: boolean;\n  help: boolean;\n}\n\nfunction parseCommand(command: string): ParsedCommand {\n  const result: ParsedCommand = {\n    verb: '',\n    resources: [],\n    allNamespaces: false,\n    follow: false,\n    showLabels: false,\n    watch: false,\n    previous: false,\n    help: false,\n  };\n\n  // Tokenize respecting quotes\n  const tokens: string[] = [];\n  let current = '';\n  let inQuote = false;\n  let quoteChar = '';\n\n  for (const char of command) {\n    if ((char === '\"' || char === \"'\") && !inQuote) {\n      inQuote = true;\n      quoteChar = char;\n    } else if (char === quoteChar && inQuote) {\n      inQuote = false;\n      quoteChar = '';\n    } else if (char === ' ' && !inQuote) {\n      if (current) {\n        tokens.push(current);\n        current = '';\n      }\n    } else {\n      current += char;\n    }\n  }\n  if (current) tokens.push(current);\n\n  // Skip 'kubectl' if present\n  let i = 0;\n  if (tokens[i] === 'kubectl') i++;\n\n  result.verb = tokens[i] || '';\n  i++;\n\n  // Parse resource and name\n  while (i < tokens.length && !tokens[i].startsWith('-')) {\n    const token = tokens[i];\n\n    // Check for resource/name format\n    if (token.includes('/')) {\n      const [res, name] = token.split('/');\n      if (!result.resources.length || result.verb === 'logs') {\n        result.resources.push(res);\n        result.name = name;\n      } else {\n        result.name = name;\n      }\n    } else if (token.includes(',')) {\n      // Multi-resource: svc,endpoints\n      result.resources.push(...token.split(','));\n    } else if (!result.resources.length) {\n      result.resources.push(token);\n    } else if (!result.name) {\n      result.name = token;\n    }\n    i++;\n  }\n\n  // Parse flags\n  while (i < tokens.length) {\n    const flag = tokens[i];\n\n    // Handle --flag=value format\n    if (flag.includes('=')) {\n      const [key, value] = flag.split('=');\n      switch (key) {\n        case '--namespace':\n        case '-n':\n          result.namespace = value;\n          break;\n        case '--output':\n        case '-o':\n          result.output = value;\n          break;\n        case '--selector':\n        case '-l':\n          result.labelSelector = parseLabelSelector(value);\n          break;\n        case '--field-selector':\n          result.fieldSelector = parseLabelSelector(value);\n          break;\n        case '--container':\n        case '-c':\n          result.container = value;\n          break;\n        case '--tail':\n          result.tail = parseInt(value, 10);\n          break;\n        case '--since':\n          result.since = value;\n          break;\n        case '--sort-by':\n          result.sortBy = value;\n          break;\n      }\n    } else {\n      // Handle -n ns, -o wide, etc.\n      switch (flag) {\n        case '-n':\n        case '--namespace':\n          result.namespace = tokens[++i];\n          break;\n        case '-A':\n        case '--all-namespaces':\n          result.allNamespaces = true;\n          break;\n        case '-o':\n        case '--output':\n          result.output = tokens[++i];\n          break;\n        case '-l':\n        case '--selector':\n          result.labelSelector = parseLabelSelector(tokens[++i]);\n          break;\n        case '--field-selector':\n          result.fieldSelector = parseLabelSelector(tokens[++i]);\n          break;\n        case '-c':\n        case '--container':\n          result.container = tokens[++i];\n          break;\n        case '--tail':\n          result.tail = parseInt(tokens[++i], 10);\n          break;\n        case '--since':\n          result.since = tokens[++i];\n          break;\n        case '-f':\n        case '--follow':\n          result.follow = true;\n          break;\n        case '--sort-by':\n          result.sortBy = tokens[++i];\n          break;\n        case '--show-labels':\n          result.showLabels = true;\n          break;\n        case '-w':\n        case '--watch':\n          result.watch = true;\n          break;\n        case '-p':\n        case '--previous':\n          result.previous = true;\n          break;\n        case '-h':\n        case '--help':\n          result.help = true;\n          break;\n        default:\n          // Handle short form like -owide, -ndefault\n          if (flag.startsWith('-o')) {\n            result.output = flag.slice(2);\n          } else if (flag.startsWith('-n') && flag.length > 2) {\n            result.namespace = flag.slice(2);\n          } else if (flag.startsWith('-l') && flag.length > 2) {\n            result.labelSelector = parseLabelSelector(flag.slice(2));\n          } else if (flag.startsWith('-c') && flag.length > 2) {\n            result.container = flag.slice(2);\n          }\n      }\n    }\n    i++;\n  }\n\n  return result;\n}\n\nfunction parseLabelSelector(selector: string): Record<string, string> {\n  const result: Record<string, string> = {};\n  for (const part of selector.split(',')) {\n    const [key, value] = part.split('=');\n    if (key && value !== undefined) {\n      result[key.trim()] = value.trim();\n    }\n  }\n  return result;\n}\n\nfunction matchesLabels(labels: Record<string, string> | undefined, selector: Record<string, string>): boolean {\n  if (!labels) return false;\n  return Object.entries(selector).every(([key, value]) => labels[key] === value);\n}\n\n// ============================================================================\n// OUTPUT FORMATTERS\n// ============================================================================\n\nfunction formatAge(timestamp: string): string {\n  // In real kubectl, this would be dynamic. For fixtures, we use predetermined ages.\n  const ages: Record<string, string> = {\n    '2024-01-15T10:20:00Z': '12m',\n    '2024-01-15T10:00:00Z': '8m',\n    '2024-01-15T09:00:00Z': '1h',\n    '2024-01-15T14:30:00Z': '5m',\n    '2024-01-15T09:30:00Z': '30m',\n    '2024-01-10T10:00:00Z': '5d',\n    '2024-01-13T10:00:00Z': '2d',\n    '2023-12-15T10:00:00Z': '30d',\n    '2023-12-01T10:00:00Z': '45d',\n    '2023-10-15T10:00:00Z': '90d',\n  };\n  return ages[timestamp] || '1d';\n}\n\nfunction getPodStatus(pod: Pod): string {\n  const cs = pod.status.containerStatuses?.[0];\n  if (cs?.state.waiting) return cs.state.waiting.reason || 'Waiting';\n  if (cs?.state.terminated) {\n    if (cs.state.terminated.reason === 'OOMKilled') return 'OOMKilled';\n    return cs.state.terminated.reason || 'Terminated';\n  }\n  if (pod.status.phase === 'Failed') return 'Error';\n  return pod.status.phase;\n}\n\nfunction getPodReady(pod: Pod): string {\n  const total = pod.spec.containers.length;\n  const ready = pod.status.containerStatuses?.filter(c => c.ready).length || 0;\n  return `${ready}/${total}`;\n}\n\nfunction getPodRestarts(pod: Pod): number {\n  return pod.status.containerStatuses?.reduce((sum, c) => sum + c.restartCount, 0) || 0;\n}\n\nfunction formatPodTable(pods: Pod[], wide: boolean, showLabels: boolean, allNs: boolean): string {\n  if (pods.length === 0) return 'No resources found.';\n\n  let header = allNs ? 'NAMESPACE     ' : '';\n  header += 'NAME                                   READY   STATUS             RESTARTS   AGE';\n  if (wide) header += '     IP            NODE';\n  if (showLabels) header += '   LABELS';\n\n  const rows = pods.map(p => {\n    let row = allNs ? `${(p.metadata.namespace || 'default').padEnd(13)} ` : '';\n    row += `${p.metadata.name.padEnd(39)} ${getPodReady(p).padEnd(7)} ${getPodStatus(p).padEnd(18)} ${String(getPodRestarts(p)).padEnd(10)} ${formatAge(p.metadata.creationTimestamp)}`;\n    if (wide) {\n      row += `     ${(p.status.podIP || '<none>').padEnd(13)} ${p.spec.nodeName || '<none>'}`;\n    }\n    if (showLabels) {\n      const labels = p.metadata.labels ? Object.entries(p.metadata.labels).map(([k, v]) => `${k}=${v}`).join(',') : '<none>';\n      row += `   ${labels}`;\n    }\n    return row;\n  });\n\n  return [header, ...rows].join('\\n');\n}\n\nfunction formatDeploymentTable(deployments: Deployment[], allNs: boolean): string {\n  if (deployments.length === 0) return 'No resources found.';\n\n  let header = allNs ? 'NAMESPACE     ' : '';\n  header += 'NAME                    READY   UP-TO-DATE   AVAILABLE   AGE';\n\n  const rows = deployments.map(d => {\n    const ready = `${d.status.readyReplicas || 0}/${d.spec.replicas}`;\n    let row = allNs ? `${(d.metadata.namespace || 'default').padEnd(13)} ` : '';\n    row += `${d.metadata.name.padEnd(23)} ${ready.padEnd(7)} ${String(d.status.updatedReplicas || 0).padEnd(12)} ${String(d.status.availableReplicas || 0).padEnd(11)} ${formatAge(d.metadata.creationTimestamp)}`;\n    return row;\n  });\n\n  return [header, ...rows].join('\\n');\n}\n\nfunction formatReplicaSetTable(replicaSets: ReplicaSet[], allNs: boolean): string {\n  if (replicaSets.length === 0) return 'No resources found.';\n\n  let header = allNs ? 'NAMESPACE     ' : '';\n  header += 'NAME                    DESIRED   CURRENT   READY   AGE';\n\n  const rows = replicaSets.map(rs => {\n    let row = allNs ? `${(rs.metadata.namespace || 'default').padEnd(13)} ` : '';\n    row += `${rs.metadata.name.padEnd(23)} ${String(rs.spec.replicas).padEnd(9)} ${String(rs.status.replicas).padEnd(9)} ${String(rs.status.readyReplicas || 0).padEnd(7)} ${formatAge(rs.metadata.creationTimestamp)}`;\n    return row;\n  });\n\n  return [header, ...rows].join('\\n');\n}\n\nfunction formatServiceTable(services: Service[], allNs: boolean): string {\n  if (services.length === 0) return 'No resources found.';\n\n  let header = allNs ? 'NAMESPACE     ' : '';\n  header += 'NAME                TYPE           CLUSTER-IP      EXTERNAL-IP     PORT(S)          AGE';\n\n  const rows = services.map(s => {\n    const externalIP = s.status?.loadBalancer?.ingress?.[0]?.ip || (s.spec.externalIPs?.[0]) || '<none>';\n    const ports = s.spec.ports.map(p => p.nodePort ? `${p.port}:${p.nodePort}/${p.protocol}` : `${p.port}/${p.protocol}`).join(',');\n    let row = allNs ? `${(s.metadata.namespace || 'default').padEnd(13)} ` : '';\n    row += `${s.metadata.name.padEnd(19)} ${s.spec.type.padEnd(14)} ${s.spec.clusterIP.padEnd(15)} ${externalIP.padEnd(15)} ${ports.padEnd(16)} ${formatAge(s.metadata.creationTimestamp)}`;\n    return row;\n  });\n\n  return [header, ...rows].join('\\n');\n}\n\nfunction formatEndpointsTable(endpoints: Endpoints[], allNs: boolean): string {\n  if (endpoints.length === 0) return 'No resources found.';\n\n  let header = allNs ? 'NAMESPACE     ' : '';\n  header += 'NAME                ENDPOINTS                      AGE';\n\n  const rows = endpoints.map(e => {\n    const eps = e.subsets?.flatMap(s =>\n      (s.addresses || []).flatMap(a =>\n        (s.ports || []).map(p => `${a.ip}:${p.port}`)\n      )\n    ).join(',') || '<none>';\n    let row = allNs ? `${(e.metadata.namespace || 'default').padEnd(13)} ` : '';\n    row += `${e.metadata.name.padEnd(19)} ${eps.slice(0, 30).padEnd(30)} ${formatAge(e.metadata.creationTimestamp)}`;\n    return row;\n  });\n\n  return [header, ...rows].join('\\n');\n}\n\nfunction formatNodeTable(nodes: Node[]): string {\n  if (nodes.length === 0) return 'No resources found.';\n\n  const header = 'NAME         STATUS                     ROLES    AGE    VERSION';\n  const rows = nodes.map(n => {\n    const readyCond = n.status.conditions.find(c => c.type === 'Ready');\n    let status = readyCond?.status === 'True' ? 'Ready' : 'NotReady';\n    if (n.spec.unschedulable) status += ',SchedulingDisabled';\n    const memPressure = n.status.conditions.find(c => c.type === 'MemoryPressure' && c.status === 'True');\n    const diskPressure = n.status.conditions.find(c => c.type === 'DiskPressure' && c.status === 'True');\n    if (memPressure) status = status.replace('Ready', 'Ready,MemoryPressure');\n    if (diskPressure) status = status.replace('Ready', 'Ready,DiskPressure');\n\n    const roles = n.metadata.labels?.['node-role.kubernetes.io/control-plane'] ? 'control-plane' : '<none>';\n    return `${n.metadata.name.padEnd(12)} ${status.padEnd(26)} ${roles.padEnd(8)} ${formatAge(n.metadata.creationTimestamp).padEnd(6)} ${n.status.nodeInfo.kubeletVersion}`;\n  });\n\n  return [header, ...rows].join('\\n');\n}\n\nfunction formatEventsTable(events: Event[], allNs: boolean): string {\n  if (events.length === 0) return 'No events found.';\n\n  let header = allNs ? 'NAMESPACE     ' : '';\n  header += 'LAST SEEN   TYPE      REASON                  OBJECT                                MESSAGE';\n\n  const rows = events.map(e => {\n    const obj = `${e.involvedObject.kind.toLowerCase()}/${e.involvedObject.name}`;\n    let row = allNs ? `${(e.metadata.namespace || 'default').padEnd(13)} ` : '';\n    row += `${formatAge(e.lastTimestamp).padEnd(11)} ${e.type.padEnd(9)} ${e.reason.padEnd(23)} ${obj.padEnd(37)} ${e.message.slice(0, 50)}`;\n    return row;\n  });\n\n  return [header, ...rows].join('\\n');\n}\n\nfunction formatPodDescribe(pod: Pod, events: Event[]): string {\n  const cs = pod.status.containerStatuses?.[0];\n  const container = pod.spec.containers[0];\n  const podEvents = events.filter(e => e.involvedObject.name === pod.metadata.name && e.involvedObject.kind === 'Pod');\n\n  const stateInfo = cs?.state.waiting\n    ? `Waiting\\n      Reason:       ${cs.state.waiting.reason}\\n      Message:      ${cs.state.waiting.message || ''}`\n    : cs?.state.running\n    ? `Running\\n      Started:      ${cs.state.running.startedAt}`\n    : cs?.state.terminated\n    ? `Terminated\\n      Reason:       ${cs.state.terminated.reason}\\n      Exit Code:    ${cs.state.terminated.exitCode}\\n      Message:      ${cs.state.terminated.message || ''}`\n    : 'Unknown';\n\n  const lastStateInfo = cs?.lastState?.terminated\n    ? `Terminated\\n      Reason:       ${cs.lastState.terminated.reason}\\n      Exit Code:    ${cs.lastState.terminated.exitCode}\\n      Finished:     ${cs.lastState.terminated.finishedAt}`\n    : '<none>';\n\n  const conditions = pod.status.conditions?.map(c =>\n    `  ${c.type.padEnd(20)} ${c.status}`\n  ).join('\\n') || '  <none>';\n\n  const eventLines = podEvents.length > 0\n    ? podEvents.map(e => `  ${e.type.padEnd(9)} ${e.reason.padEnd(20)} ${formatAge(e.lastTimestamp).padEnd(8)} ${e.source.component.padEnd(25)} ${e.message}`).join('\\n')\n    : '  <none>';\n\n  return `Name:             ${pod.metadata.name}\nNamespace:        ${pod.metadata.namespace || 'default'}\nPriority:         0\nService Account:  default\nNode:             ${pod.spec.nodeName || '<none>'}/${pod.status.podIP || '<none>'}\nStart Time:       ${pod.status.startTime || '<unknown>'}\nLabels:           ${pod.metadata.labels ? Object.entries(pod.metadata.labels).map(([k, v]) => `${k}=${v}`).join('\\n                  ') : '<none>'}\nStatus:           ${pod.status.phase}\nIP:               ${pod.status.podIP || '<none>'}\nControlled By:    ReplicaSet/${pod.metadata.name.split('-').slice(0, -1).join('-')}\nContainers:\n  ${container.name}:\n    Container ID:   docker://${pod.metadata.uid.slice(0, 12)}\n    Image:          ${container.image}\n    Image ID:       ${cs?.imageID || 'docker-pullable://' + container.image}\n    Port:           ${container.ports?.[0]?.containerPort || '<none>'}/TCP\n    Host Port:      0/TCP\n    State:          ${stateInfo}\n    Last State:     ${lastStateInfo}\n    Ready:          ${cs?.ready || false}\n    Restart Count:  ${cs?.restartCount || 0}\nConditions:\n  Type              Status\n${conditions}\nEvents:\n${eventLines}`;\n}\n\nfunction formatDeploymentDescribe(deployment: Deployment, replicaSets: ReplicaSet[]): string {\n  const selector = Object.entries(deployment.spec.selector.matchLabels).map(([k, v]) => `${k}=${v}`).join(',');\n  const conditions = deployment.status.conditions?.map(c =>\n    `  ${c.type.padEnd(15)} ${c.status.padEnd(7)} ${c.reason}`\n  ).join('\\n') || '  <none>';\n\n  const newRS = replicaSets.find(rs => rs.status.replicas > 0);\n  const oldRS = replicaSets.filter(rs => rs.status.replicas === 0);\n\n  return `Name:                   ${deployment.metadata.name}\nNamespace:              ${deployment.metadata.namespace || 'default'}\nCreationTimestamp:      ${deployment.metadata.creationTimestamp}\nLabels:                 ${deployment.metadata.labels ? Object.entries(deployment.metadata.labels).map(([k, v]) => `${k}=${v}`).join(',') : '<none>'}\nAnnotations:            deployment.kubernetes.io/revision: ${deployment.revisions?.length || 1}\nSelector:               ${selector}\nReplicas:               ${deployment.spec.replicas} desired | ${deployment.status.updatedReplicas || 0} updated | ${deployment.status.replicas || 0} total | ${deployment.status.availableReplicas || 0} available | ${(deployment.spec.replicas || 0) - (deployment.status.availableReplicas || 0)} unavailable\nStrategyType:           RollingUpdate\nMinReadySeconds:        0\nRollingUpdateStrategy:  25% max unavailable, 25% max surge\nPod Template:\n  Labels:  ${Object.entries(deployment.spec.template.metadata.labels).map(([k, v]) => `${k}=${v}`).join(',')}\nConditions:\n  Type           Status  Reason\n${conditions}\nOldReplicaSets:  ${oldRS.length > 0 ? oldRS.map(rs => `${rs.metadata.name} (${rs.status.replicas}/${rs.spec.replicas} replicas created)`).join(', ') : '<none>'}\nNewReplicaSet:   ${newRS ? `${newRS.metadata.name} (${newRS.status.replicas}/${newRS.spec.replicas} replicas created)` : '<none>'}\nEvents:          <none>`;\n}\n\nfunction formatNodeDescribe(node: Node): string {\n  const conditions = node.status.conditions.map(c =>\n    `  ${c.type.padEnd(20)} ${c.status.padEnd(9)} ${c.lastHeartbeatTime}   ${c.reason.padEnd(30)} ${c.message}`\n  ).join('\\n');\n\n  const taints = node.spec.taints?.map(t => `${t.key}=${t.value || ''}:${t.effect}`).join('\\n                    ') || '<none>';\n\n  return `Name:               ${node.metadata.name}\nRoles:              ${node.metadata.labels?.['node-role.kubernetes.io/control-plane'] ? 'control-plane' : '<none>'}\nLabels:             ${Object.entries(node.metadata.labels || {}).map(([k, v]) => `${k}=${v}`).join('\\n                    ')}\nAnnotations:        node.alpha.kubernetes.io/ttl: 0\nCreationTimestamp:  ${node.metadata.creationTimestamp}\nTaints:             ${taints}\nUnschedulable:      ${node.spec.unschedulable || false}\nConditions:\n  Type                 Status    LastHeartbeatTime                 Reason                         Message\n${conditions}\nAddresses:\n  InternalIP:  ${node.status.addresses.find(a => a.type === 'InternalIP')?.address || '<none>'}\n  Hostname:    ${node.status.addresses.find(a => a.type === 'Hostname')?.address || node.metadata.name}\nCapacity:\n  cpu:                ${node.status.capacity.cpu}\n  memory:             ${node.status.capacity.memory}\n  pods:               ${node.status.capacity.pods}\nAllocatable:\n  cpu:                ${node.status.allocatable.cpu}\n  memory:             ${node.status.allocatable.memory}\n  pods:               ${node.status.allocatable.pods}\nSystem Info:\n  Kernel Version:             ${node.status.nodeInfo.kernelVersion}\n  OS Image:                   ${node.status.nodeInfo.osImage}\n  Container Runtime Version:  ${node.status.nodeInfo.containerRuntimeVersion}\n  Kubelet Version:            ${node.status.nodeInfo.kubeletVersion}`;\n}\n\nfunction formatServiceDescribe(service: Service, endpoints: Endpoints | undefined): string {\n  const selector = service.spec.selector ? Object.entries(service.spec.selector).map(([k, v]) => `${k}=${v}`).join(',') : '<none>';\n  const externalIP = service.status?.loadBalancer?.ingress?.[0]?.ip || '<none>';\n  const eps = endpoints?.subsets?.flatMap(s =>\n    (s.addresses || []).flatMap(a =>\n      (s.ports || []).map(p => `${a.ip}:${p.port}`)\n    )\n  ).join(',') || '<none>';\n\n  return `Name:              ${service.metadata.name}\nNamespace:         ${service.metadata.namespace || 'default'}\nLabels:            ${service.metadata.labels ? Object.entries(service.metadata.labels).map(([k, v]) => `${k}=${v}`).join(',') : '<none>'}\nAnnotations:       <none>\nSelector:          ${selector}\nType:              ${service.spec.type}\nIP Family Policy:  SingleStack\nIP Families:       IPv4\nIP:                ${service.spec.clusterIP}\nIPs:               ${service.spec.clusterIP}\n${service.spec.type === 'LoadBalancer' ? `LoadBalancer Ingress:  ${externalIP}\\n` : ''}Port:              <unset>  ${service.spec.ports[0].port}/${service.spec.ports[0].protocol}\nTargetPort:        ${service.spec.ports[0].targetPort}/${service.spec.ports[0].protocol}\n${service.spec.ports[0].nodePort ? `NodePort:          <unset>  ${service.spec.ports[0].nodePort}/${service.spec.ports[0].protocol}\\n` : ''}Endpoints:         ${eps}\nSession Affinity:  None\nEvents:            <none>`;\n}\n\nfunction formatRolloutStatus(deployment: Deployment): string {\n  if ((deployment.status.availableReplicas || 0) === deployment.spec.replicas) {\n    return `deployment \"${deployment.metadata.name}\" successfully rolled out`;\n  }\n  return `Waiting for deployment \"${deployment.metadata.name}\" rollout to finish: ${deployment.status.availableReplicas || 0} of ${deployment.spec.replicas} updated replicas are available...`;\n}\n\nfunction formatRolloutHistory(deployment: Deployment): string {\n  const revisions = deployment.revisions || [];\n  const header = 'REVISION  CHANGE-CAUSE';\n  const rows = revisions.map(r => `${r.revision}         ${r.changeCause || '<none>'}`);\n  return `deployment.apps/${deployment.metadata.name}\\n${header}\\n${rows.join('\\n')}`;\n}\n\nfunction toYaml(obj: unknown): string {\n  // Simple YAML-like output (not full YAML spec)\n  return JSON.stringify(obj, null, 2)\n    .replace(/\"/g, '')\n    .replace(/,$/gm, '')\n    .replace(/^\\{$/gm, '---')\n    .replace(/^\\}$/gm, '');\n}\n\n// ============================================================================\n// HELP TEXT - Playground-specific capabilities and limitations\n// ============================================================================\n\nconst HELP_TEXTS: Record<string, string> = {\n  '': `kubectl - Kubernetes CLI Playground\n\nThis is a simulated kubectl environment for learning Kubernetes troubleshooting.\nCommands run against mock cluster fixtures, not a real cluster.\n\nAvailable Commands:\n  get         Display resources (pods, deployments, services, nodes, events)\n  describe    Show detailed information about a resource\n  logs        Print container logs\n  rollout     Manage deployments (status, history, undo)\n  top         Display resource usage (simulated metrics)\n\nCommon Flags:\n  -n, --namespace     Target namespace\n  -A, --all-namespaces  Query all namespaces\n  -o, --output        Output format (wide, json, yaml)\n  -l, --selector      Filter by label selector\n  --help              Show help for a command\n\nExamples:\n  get pods -n payments\n  describe pod payment-api-7d4f8b9c5-x2k9m -n payments\n  logs payment-api-7d4f8b9c5-x2k9m -n payments\n  rollout history deployment/web -n production\n\nLimitations:\n  • Read-only simulation (no create, apply, delete, edit, exec, port-forward)\n  • Fixed fixture data per lesson (5 troubleshooting scenarios)\n  • Rollout undo mutates session state but resets on lesson change\n\nUse --help with any command for detailed usage.`,\n\n  get: `kubectl get - Display resources\n\nUsage:\n  kubectl get <resource> [name] [flags]\n\nSupported Resources:\n  pods, po              List pods with status, ready count, restarts, age\n  deployments, deploy   List deployments with replica counts\n  replicasets, rs       List replica sets\n  services, svc         List services with type, cluster IP, ports\n  endpoints, ep         List service endpoints\n  nodes, no             List cluster nodes with status and roles\n  events, ev            List cluster events (warnings, errors)\n\nFlags:\n  -n, --namespace string    Target namespace (default: from lesson)\n  -A, --all-namespaces      Query across all namespaces\n  -o, --output string       Output format: wide, json, yaml\n  -l, --selector string     Filter by label (e.g., -l app=web)\n  --show-labels             Show all labels in output\n  --sort-by string          Sort by field (e.g., .metadata.name)\n\nExamples:\n  get pods -n payments\n  get pods -o wide\n  get pods -l app=payment-api\n  get svc,endpoints -n api\n  get events -A --sort-by=.lastTimestamp\n\nMulti-Resource:\n  get svc,endpoints         Query multiple resource types at once\n\nLimitations:\n  • No support for: configmaps, secrets, ingress, pvc, jobs, cronjobs\n  • Field selectors partially supported (spec.nodeName only)\n  • Custom columns (-o custom-columns) not supported`,\n\n  describe: `kubectl describe - Show detailed resource information\n\nUsage:\n  kubectl describe <resource> [name] [flags]\n\nSupported Resources:\n  pod         Full pod details: containers, conditions, events\n  deployment  Deployment status, strategy, replica sets\n  node        Node conditions, capacity, allocatable resources\n  service     Service details, selector, endpoints\n\nOutput Includes:\n  • Metadata (name, namespace, labels, creation time)\n  • Spec (containers, volumes, selectors)\n  • Status (conditions, phase, IP addresses)\n  • Events (recent warnings and normal events)\n\nFlags:\n  -n, --namespace string    Target namespace\n\nExamples:\n  describe pod payment-api-7d4f8b9c5-x2k9m -n payments\n  describe deployment web -n production\n  describe node worker-1\n  describe svc api-gateway -n api\n\nTips:\n  • Look at the Events section for troubleshooting clues\n  • Check Conditions for Ready, Initialized status\n  • Container State shows CrashLoopBackOff, ImagePullBackOff details\n\nLimitations:\n  • No describe for: configmap, secret, ingress, pvc, rs\n  • Single resource at a time (no wildcards)`,\n\n  logs: `kubectl logs - Print container logs\n\nUsage:\n  kubectl logs <pod> [flags]\n  kubectl logs <type>/<name> [flags]\n\nFlags:\n  -n, --namespace string    Target namespace\n  -c, --container string    Container name (if pod has multiple)\n  --tail int                Lines of recent logs to show\n  --since string            Only logs newer than duration (e.g., 1h, 30m)\n  -p, --previous            Show logs from previous container instance\n  -f, --follow              Stream logs (simulated - returns current logs)\n\nExamples:\n  logs payment-api-7d4f8b9c5-x2k9m -n payments\n  logs deployment/web -n production\n  logs web-abc123 --tail=50\n  logs web-abc123 --previous\n  logs web-abc123 -c sidecar\n\nOutput:\n  • Timestamped log entries\n  • Includes ERROR, FATAL, panic messages for troubleshooting\n  • Previous logs available for crashed containers\n\nLimitations:\n  • Logs are pre-generated per fixture (not real-time)\n  • --follow returns immediately (no streaming)\n  • --since filters by line number approximation`,\n\n  rollout: `kubectl rollout - Manage deployment rollouts\n\nUsage:\n  kubectl rollout <subcommand> <resource> [flags]\n\nSubcommands:\n  status      Show rollout status\n  history     View rollout revision history\n  undo        Rollback to previous revision\n\nExamples:\n  rollout status deployment/web -n production\n  rollout history deployment/web -n production\n  rollout undo deployment/web -n production\n  rollout undo deployment/web --to-revision=2 -n production\n\nFlags:\n  -n, --namespace string    Target namespace\n  --to-revision int         Rollback to specific revision (with undo)\n\nStatus Output:\n  • \"successfully rolled out\" - deployment complete\n  • Progress messages for ongoing rollouts\n\nHistory Output:\n  • Revision numbers with change causes\n  • Shows image versions for each revision\n\nUndo Behavior:\n  • Reverts to previous revision (or --to-revision)\n  • Session state is mutated until lesson change\n  • Use Reset button to restore original fixture state\n\nLimitations:\n  • No rollout pause, resume, restart\n  • Only deployments supported (not daemonsets, statefulsets)\n  • State resets when switching lessons`,\n\n  top: `kubectl top - Display resource usage\n\nUsage:\n  kubectl top <resource> [name] [flags]\n\nSupported Resources:\n  pods        Show pod CPU and memory usage\n  nodes       Show node CPU and memory usage\n\nFlags:\n  -n, --namespace string    Target namespace (for pods)\n  --sort-by string          Sort by cpu or memory\n\nExamples:\n  top pods -n payments\n  top pods --sort-by=memory\n  top nodes\n\nOutput (Pods):\n  NAME        CPU(cores)   MEMORY(bytes)\n  web-abc123  125m         256Mi\n\nOutput (Nodes):\n  NAME      CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%\n  worker-1  1250m        32%    8192Mi          51%\n\nNote:\n  • Metrics are deterministic per fixture (hash-based)\n  • Useful for identifying resource-heavy pods\n  • Node metrics help diagnose pressure conditions\n\nLimitations:\n  • No real metrics-server integration\n  • Values are simulated but consistent\n  • No container-level metrics (--containers)`,\n\n  events: `kubectl get events - View cluster events\n\nUsage:\n  kubectl get events [flags]\n\nEvents show important cluster activity:\n  • Pod scheduling, pulling images, starting containers\n  • Warnings: CrashLoopBackOff, ImagePullBackOff, FailedScheduling\n  • Node conditions: MemoryPressure, DiskPressure\n\nFlags:\n  -n, --namespace string    Target namespace\n  -A, --all-namespaces      Events from all namespaces\n  --sort-by string          Sort by field (e.g., .lastTimestamp)\n  --field-selector string   Filter by field\n\nExamples:\n  get events -n payments\n  get events -A --sort-by=.lastTimestamp\n  get events --field-selector type=Warning\n\nOutput Columns:\n  LAST SEEN   TYPE      REASON    OBJECT          MESSAGE\n\nTips:\n  • Filter by type=Warning to focus on problems\n  • Sort by timestamp to see recent activity\n  • Events expire after ~1 hour in real clusters\n\nLimitations:\n  • Events are pre-generated per fixture\n  • No watch mode (-w)\n  • Limited field selector support`,\n};\n\nfunction getHelpText(verb: string, resources: string[]): string {\n  // Check for specific command help\n  if (verb && HELP_TEXTS[verb]) {\n    return HELP_TEXTS[verb];\n  }\n  // Check for 'get events' specifically\n  if (verb === 'get' && resources.includes('events')) {\n    return HELP_TEXTS.events;\n  }\n  // Default to general help\n  return HELP_TEXTS[''];\n}\n\n// ============================================================================\n// MAIN EXECUTOR\n// ============================================================================\n\nexport function executeKubectl(command: string, options: ExecutorOptions): ExecutorResult {\n  try {\n    const fixture = getFixtureState(options.fixtureId);\n    const parsed = parseCommand(command);\n\n    // Handle --help flag early (also catches --help/-h as the verb itself)\n    if (parsed.help || parsed.verb === '--help' || parsed.verb === '-h' || parsed.verb === 'help' || !command.trim() || command.trim() === 'kubectl') {\n      return { stdout: getHelpText(parsed.verb === '--help' || parsed.verb === '-h' || parsed.verb === 'help' ? '' : parsed.verb, parsed.resources), stderr: '', exitCode: 0 };\n    }\n    const ns = parsed.namespace || options.defaultNamespace;\n\n    // Filter by namespace\n    const filterByNs = <T extends { metadata: ObjectMeta }>(items: T[]): T[] =>\n      parsed.allNamespaces ? items : items.filter(i => (i.metadata.namespace || 'default') === ns);\n\n    // Filter by label selector\n    const filterByLabels = <T extends { metadata: ObjectMeta }>(items: T[]): T[] =>\n      parsed.labelSelector ? items.filter(i => matchesLabels(i.metadata.labels, parsed.labelSelector!)) : items;\n\n    // Sort helper\n    const sortItems = <T>(items: T[], sortBy: string | undefined): T[] => {\n      if (!sortBy) return items;\n      // Support simple jsonpath like .metadata.name, .metadata.creationTimestamp\n      const path = sortBy.replace(/^\\{?\\.?/, '').replace(/\\}?$/, '').split('.');\n      return [...items].sort((a, b) => {\n        let aVal: unknown = a;\n        let bVal: unknown = b;\n        for (const key of path) {\n          aVal = (aVal as Record<string, unknown>)?.[key];\n          bVal = (bVal as Record<string, unknown>)?.[key];\n        }\n        return String(aVal || '').localeCompare(String(bVal || ''));\n      });\n    };\n\n    switch (parsed.verb) {\n      case 'get': {\n        const outputs: string[] = [];\n\n        for (const resource of parsed.resources) {\n          const res = resource.toLowerCase();\n\n          switch (res) {\n            case 'pods':\n            case 'pod':\n            case 'po': {\n              let pods = filterByLabels(filterByNs(fixture.pods));\n              if (parsed.name) {\n                pods = pods.filter(p => p.metadata.name === parsed.name || p.metadata.name.startsWith(parsed.name!));\n              }\n              pods = sortItems(pods, parsed.sortBy);\n\n              if (parsed.output === 'json') {\n                outputs.push(JSON.stringify(pods.length === 1 ? pods[0] : { items: pods }, null, 2));\n              } else if (parsed.output === 'yaml') {\n                outputs.push(pods.map(p => toYaml(p)).join('\\n---\\n'));\n              } else {\n                outputs.push(formatPodTable(pods, parsed.output === 'wide', parsed.showLabels, parsed.allNamespaces));\n              }\n              break;\n            }\n\n            case 'deployments':\n            case 'deployment':\n            case 'deploy': {\n              let deps = filterByLabels(filterByNs(fixture.deployments));\n              if (parsed.name) {\n                deps = deps.filter(d => d.metadata.name === parsed.name);\n              }\n              deps = sortItems(deps, parsed.sortBy);\n\n              if (parsed.output === 'json') {\n                outputs.push(JSON.stringify(deps.length === 1 ? deps[0] : { items: deps }, null, 2));\n              } else if (parsed.output === 'yaml') {\n                outputs.push(deps.map(d => toYaml(d)).join('\\n---\\n'));\n              } else {\n                outputs.push(formatDeploymentTable(deps, parsed.allNamespaces));\n              }\n              break;\n            }\n\n            case 'replicasets':\n            case 'replicaset':\n            case 'rs': {\n              let rs = filterByLabels(filterByNs(fixture.replicaSets));\n              if (parsed.name) {\n                rs = rs.filter(r => r.metadata.name === parsed.name);\n              }\n              rs = sortItems(rs, parsed.sortBy);\n\n              if (parsed.output === 'json') {\n                outputs.push(JSON.stringify(rs.length === 1 ? rs[0] : { items: rs }, null, 2));\n              } else if (parsed.output === 'yaml') {\n                outputs.push(rs.map(r => toYaml(r)).join('\\n---\\n'));\n              } else {\n                outputs.push(formatReplicaSetTable(rs, parsed.allNamespaces));\n              }\n              break;\n            }\n\n            case 'services':\n            case 'service':\n            case 'svc': {\n              let svcs = filterByLabels(filterByNs(fixture.services));\n              if (parsed.name) {\n                svcs = svcs.filter(s => s.metadata.name === parsed.name);\n              }\n              svcs = sortItems(svcs, parsed.sortBy);\n\n              if (parsed.output === 'json') {\n                outputs.push(JSON.stringify(svcs.length === 1 ? svcs[0] : { items: svcs }, null, 2));\n              } else if (parsed.output === 'yaml') {\n                outputs.push(svcs.map(s => toYaml(s)).join('\\n---\\n'));\n              } else {\n                outputs.push(formatServiceTable(svcs, parsed.allNamespaces));\n              }\n              break;\n            }\n\n            case 'endpoints':\n            case 'ep': {\n              let eps = filterByNs(fixture.endpoints);\n              if (parsed.name) {\n                eps = eps.filter(e => e.metadata.name === parsed.name);\n              }\n              eps = sortItems(eps, parsed.sortBy);\n\n              if (parsed.output === 'json') {\n                outputs.push(JSON.stringify(eps.length === 1 ? eps[0] : { items: eps }, null, 2));\n              } else if (parsed.output === 'yaml') {\n                outputs.push(eps.map(e => toYaml(e)).join('\\n---\\n'));\n              } else {\n                outputs.push(formatEndpointsTable(eps, parsed.allNamespaces));\n              }\n              break;\n            }\n\n            case 'nodes':\n            case 'node':\n            case 'no': {\n              let nodes = parsed.name ? fixture.nodes.filter(n => n.metadata.name === parsed.name) : fixture.nodes;\n              nodes = sortItems(nodes, parsed.sortBy);\n\n              if (parsed.output === 'json') {\n                outputs.push(JSON.stringify(nodes.length === 1 ? nodes[0] : { items: nodes }, null, 2));\n              } else if (parsed.output === 'yaml') {\n                outputs.push(nodes.map(n => toYaml(n)).join('\\n---\\n'));\n              } else {\n                outputs.push(formatNodeTable(nodes));\n              }\n              break;\n            }\n\n            case 'events':\n            case 'event':\n            case 'ev': {\n              let events = parsed.allNamespaces\n                ? fixture.events\n                : fixture.events.filter(e => (e.metadata.namespace || 'default') === ns || !e.involvedObject.namespace);\n              events = sortItems(events, parsed.sortBy || '.lastTimestamp');\n\n              if (parsed.output === 'json') {\n                outputs.push(JSON.stringify({ items: events }, null, 2));\n              } else if (parsed.output === 'yaml') {\n                outputs.push(events.map(e => toYaml(e)).join('\\n---\\n'));\n              } else {\n                outputs.push(formatEventsTable(events, parsed.allNamespaces));\n              }\n              break;\n            }\n\n            default:\n              return { stdout: '', stderr: `error: the server doesn't have a resource type \"${res}\"`, exitCode: 1 };\n          }\n        }\n\n        return { stdout: outputs.join('\\n\\n'), stderr: '', exitCode: 0 };\n      }\n\n      case 'describe': {\n        const resource = parsed.resources[0]?.toLowerCase();\n\n        switch (resource) {\n          case 'pod':\n          case 'pods':\n          case 'po': {\n            const pods = filterByNs(fixture.pods);\n            const pod = parsed.name\n              ? pods.find(p => p.metadata.name === parsed.name || p.metadata.name.startsWith(parsed.name!))\n              : pods[0];\n            if (!pod) {\n              return { stdout: '', stderr: `Error from server (NotFound): pods \"${parsed.name || ''}\" not found`, exitCode: 1 };\n            }\n            return { stdout: formatPodDescribe(pod, fixture.events), stderr: '', exitCode: 0 };\n          }\n\n          case 'deployment':\n          case 'deployments':\n          case 'deploy': {\n            const deps = filterByNs(fixture.deployments);\n            const dep = parsed.name ? deps.find(d => d.metadata.name === parsed.name) : deps[0];\n            if (!dep) {\n              return { stdout: '', stderr: `Error from server (NotFound): deployments.apps \"${parsed.name || ''}\" not found`, exitCode: 1 };\n            }\n            const rs = filterByNs(fixture.replicaSets).filter(r =>\n              matchesLabels(r.metadata.labels, dep.spec.selector.matchLabels)\n            );\n            return { stdout: formatDeploymentDescribe(dep, rs), stderr: '', exitCode: 0 };\n          }\n\n          case 'node':\n          case 'nodes': {\n            const node = parsed.name ? fixture.nodes.find(n => n.metadata.name === parsed.name) : fixture.nodes[0];\n            if (!node) {\n              return { stdout: '', stderr: `Error from server (NotFound): nodes \"${parsed.name || ''}\" not found`, exitCode: 1 };\n            }\n            return { stdout: formatNodeDescribe(node), stderr: '', exitCode: 0 };\n          }\n\n          case 'service':\n          case 'services':\n          case 'svc': {\n            const svcs = filterByNs(fixture.services);\n            const svc = parsed.name ? svcs.find(s => s.metadata.name === parsed.name) : svcs[0];\n            if (!svc) {\n              return { stdout: '', stderr: `Error from server (NotFound): services \"${parsed.name || ''}\" not found`, exitCode: 1 };\n            }\n            const ep = filterByNs(fixture.endpoints).find(e => e.metadata.name === svc.metadata.name);\n            return { stdout: formatServiceDescribe(svc, ep), stderr: '', exitCode: 0 };\n          }\n\n          default:\n            return { stdout: '', stderr: `error: the server doesn't have a resource type \"${resource || ''}\"`, exitCode: 1 };\n        }\n      }\n\n      case 'logs': {\n        const pods = filterByNs(fixture.pods);\n        const podName = parsed.resources[0] || parsed.name;\n        const pod = pods.find(p => p.metadata.name === podName || p.metadata.name.startsWith(podName || ''));\n\n        if (!pod) {\n          return { stdout: '', stderr: `Error from server (NotFound): pods \"${podName || ''}\" not found in namespace \"${ns}\"`, exitCode: 1 };\n        }\n\n        const podLogs = fixture.logs[pod.metadata.name];\n        if (!podLogs) {\n          const cs = pod.status.containerStatuses?.[0];\n          if (cs?.state.waiting) {\n            return { stdout: '', stderr: `Error from server: container \"${parsed.container || pod.spec.containers[0].name}\" in pod \"${pod.metadata.name}\" is waiting to start: ${cs.state.waiting.reason}`, exitCode: 1 };\n          }\n          return { stdout: '', stderr: `Error from server: container \"${parsed.container || pod.spec.containers[0].name}\" in pod \"${pod.metadata.name}\" has no logs`, exitCode: 1 };\n        }\n\n        // Multi-container handling\n        const containerNames = Object.keys(podLogs);\n        if (containerNames.length > 1 && !parsed.container) {\n          return { stdout: '', stderr: `Error from server: a container name must be specified for pod ${pod.metadata.name}, choose one of: [${containerNames.join(' ')}]`, exitCode: 1 };\n        }\n\n        const containerName = parsed.container || containerNames[0];\n        let logs = podLogs[containerName];\n\n        if (!logs) {\n          return { stdout: '', stderr: `Error from server: container \"${containerName}\" not found in pod \"${pod.metadata.name}\"`, exitCode: 1 };\n        }\n\n        if (parsed.tail) {\n          const lines = logs.split('\\n');\n          logs = lines.slice(-parsed.tail).join('\\n');\n        }\n\n        return { stdout: logs, stderr: '', exitCode: 0 };\n      }\n\n      case 'rollout': {\n        const subcommand = parsed.resources[0];\n        const deployName = parsed.name;\n        const deps = filterByNs(fixture.deployments);\n        const dep = deps.find(d => d.metadata.name === deployName);\n\n        if (!dep) {\n          return { stdout: '', stderr: `Error from server (NotFound): deployments.apps \"${deployName || ''}\" not found`, exitCode: 1 };\n        }\n\n        switch (subcommand) {\n          case 'status':\n            return { stdout: formatRolloutStatus(dep), stderr: '', exitCode: 0 };\n\n          case 'history':\n            return { stdout: formatRolloutHistory(dep), stderr: '', exitCode: 0 };\n\n          case 'undo': {\n            // Mutate session state to simulate rollback\n            if (dep.revisions && dep.revisions.length > 1) {\n              const previousRevision = dep.revisions[1];\n              // Update pods to reflect rollback (simplified)\n              const deployPods = filterByNs(fixture.pods).filter(p =>\n                matchesLabels(p.metadata.labels, dep.spec.selector.matchLabels)\n              );\n              for (const pod of deployPods) {\n                const container = pod.spec.containers[0];\n                if (container) {\n                  container.image = previousRevision.image;\n                }\n                if (pod.metadata.labels) {\n                  pod.metadata.labels.version = previousRevision.image.split(':')[1] || 'unknown';\n                }\n              }\n            }\n            return { stdout: `deployment.apps/${dep.metadata.name} rolled back`, stderr: '', exitCode: 0 };\n          }\n\n          default:\n            return { stdout: '', stderr: `error: unknown command \"${subcommand || ''}\"`, exitCode: 1 };\n        }\n      }\n\n      case 'top': {\n        const resource = parsed.resources[0]?.toLowerCase();\n\n        if (resource === 'pods' || resource === 'pod') {\n          const pods = filterByNs(fixture.pods).filter(p => p.status.phase === 'Running');\n          if (pods.length === 0) {\n            return { stdout: '', stderr: 'error: Metrics API not available', exitCode: 1 };\n          }\n          const header = 'NAME                                   CPU(cores)   MEMORY(bytes)';\n          // Deterministic values based on pod name hash\n          const rows = pods.map(p => {\n            const hash = p.metadata.name.split('').reduce((a, c) => a + c.charCodeAt(0), 0);\n            return `${p.metadata.name.padEnd(39)} ${(hash % 500)}m         ${(hash % 512)}Mi`;\n          });\n          return { stdout: [header, ...rows].join('\\n'), stderr: '', exitCode: 0 };\n        }\n\n        if (resource === 'nodes' || resource === 'node') {\n          const header = 'NAME         CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%';\n          const rows = fixture.nodes.map(n => {\n            const hash = n.metadata.name.split('').reduce((a, c) => a + c.charCodeAt(0), 0);\n            const memPressure = n.status.conditions.find(c => c.type === 'MemoryPressure' && c.status === 'True');\n            const memPct = memPressure ? 92 : (hash % 60) + 20;\n            return `${n.metadata.name.padEnd(12)} ${(hash % 4000)}m         ${(hash % 80)}%     ${Math.floor(memPct * 80)}Mi          ${memPct}%`;\n          });\n          return { stdout: [header, ...rows].join('\\n'), stderr: '', exitCode: 0 };\n        }\n\n        return { stdout: '', stderr: 'error: unknown resource type', exitCode: 1 };\n      }\n\n      default:\n        return {\n          stdout: '',\n          stderr: `Error: unknown command \"${parsed.verb}\"\n\nUsage:\n  kubectl get (pods|deployments|services|endpoints|nodes|events) [flags]\n  kubectl describe (pod|deployment|service|node) [name] [flags]\n  kubectl logs pod-name [-c container] [--tail N] [flags]\n  kubectl rollout (status|history|undo) deployment/name [flags]\n  kubectl top (pods|nodes) [flags]`,\n          exitCode: 1,\n        };\n    }\n  } catch (error) {\n    return {\n      stdout: '',\n      stderr: error instanceof Error ? error.message : 'Unknown error',\n      exitCode: 1,\n    };\n  }\n}\n\n// Legacy exports for backward compatibility\nexport function setFixture(fixtureId: string): void {\n  getFixtureState(fixtureId);\n}\n\nexport default executeKubectl;\n","import type { Tool } from './types';\nimport { executeKubectl, type ExecutorOptions } from './engines/kubectl';\n\n// ============================================================================\n// HELP TEXT - Playground-specific capabilities and limitations\n// ============================================================================\n\nconst HELP_TEXTS: Record<Tool, string> = {\n  jq: `jq - Command-line JSON Processor (Playground)\n\nThis is a simplified jq implementation for learning JSON manipulation.\nNot all jq features are supported.\n\nUsage:\n  <filter>              Apply filter to JSON input\n\nSupported Filters:\n  .                     Identity - output input unchanged\n  .field                Access object field\n  .field.subfield       Access nested fields\n  .[0]                  Access array element by index\n  .[]                   Iterate over array/object values\n  keys                  Get object keys as array\n  values                Get object values as array\n  length                Get length of array/string/object\n  type                  Get type of value\n\nFiltering & Transformation:\n  .[] | .field          Extract field from each array element\n  .[] | select(.x > N)  Filter elements by condition\n  [.[] | {...}]         Map array to new objects\n\nExamples:\n  .name                 Extract \"name\" field\n  .users[0].email       Get first user's email\n  keys                  List all keys\n  .[] | select(.age > 25)   Filter array by age\n  [.[] | {n: .name}]    Transform array elements\n\nSupported Operators in select():\n  >  <  >=  <=  ==  !=\n\nLimitations:\n  • No pipe chains beyond simple .[] | .field | select()\n  • No arithmetic operations (+, -, *, /)\n  • No string interpolation\n  • No recursive descent (..)\n  • No @base64, @uri, @csv formatters\n  • No --raw-output, --slurp flags\n  • No define functions or variables`,\n\n  grep: `grep - Search Text Using Patterns (Playground)\n\nSearch for lines matching a pattern in the input text.\n\nUsage:\n  <pattern>             Search for pattern\n  -flags <pattern>      Search with flags\n\nSupported Flags:\n  -i                    Case-insensitive matching\n  -v                    Invert match (show non-matching lines)\n  -n                    Show line numbers\n  -E                    Extended regex (enables +, ?, |, (), etc.)\n\nFlags can be combined: -inv, -En, etc.\n\nExamples:\n  error                 Find lines containing \"error\"\n  -i error              Case-insensitive search\n  -v error              Lines NOT containing \"error\"\n  -n error              Show line numbers with matches\n  -E \"err|warn\"         Match \"err\" OR \"warn\"\n  -E \"[0-9]+\"           Match one or more digits\n  -inv TODO             Case-insensitive, inverted, with line numbers\n\nRegex Support:\n  .                     Any character\n  *                     Zero or more of previous\n  +                     One or more (with -E)\n  ?                     Zero or one (with -E)\n  [abc]                 Character class\n  [^abc]                Negated character class\n  ^                     Start of line\n  $                     End of line\n  |                     Alternation (with -E)\n  ()                    Grouping (with -E)\n\nOutput:\n  • Matching lines (or non-matching with -v)\n  • \"(no matches)\" if nothing found\n  • Line numbers prefixed with -n\n\nLimitations:\n  • No -c (count only)\n  • No -l (filenames only)\n  • No -A/-B/-C (context lines)\n  • No -r (recursive)\n  • No -w (word match)\n  • No -o (only matching part)\n  • No PCRE features (lookahead, lookbehind)`,\n\n  sed: `sed - Stream Editor for Text Transformation (Playground)\n\nTransform text using substitution and deletion commands.\n\nUsage:\n  s/pattern/replacement/[flags]    Substitute text\n  /pattern/d                       Delete matching lines\n\nSubstitution Flags:\n  g                     Global - replace all occurrences per line\n  i                     Case-insensitive matching\n\nMultiple Commands:\n  Separate with semicolons: s/a/b/; s/c/d/\n\nExamples:\n  s/old/new/            Replace first \"old\" with \"new\" per line\n  s/old/new/g           Replace ALL \"old\" with \"new\"\n  s/error/ERROR/gi      Replace case-insensitive, globally\n  /^#/d                 Delete lines starting with #\n  /^$/d                 Delete empty lines\n  s/  */ /g             Collapse multiple spaces to one\n  s/^/prefix: /         Add prefix to each line\n  s/$/ suffix/          Add suffix to each line\n\nCapture Groups:\n  Use \\\\( \\\\) to capture and \\\\1, \\\\2 to reference:\n  s/\\\\([a-z]*\\\\)/[\\\\1]/    Wrap lowercase words in brackets\n\nChained Commands:\n  s/^[ ]*//; s/[ ]*$//    Trim leading and trailing spaces\n\nLimitations:\n  • No address ranges (1,5s/.../)\n  • No line number addressing\n  • No hold space (h, H, g, G, x)\n  • No branching (b, t, T)\n  • No append/insert/change (a, i, c)\n  • No read/write files (r, w)\n  • No print (p) - all output is automatic\n  • No -n flag (suppress auto-print)\n  • No -i flag (in-place editing)`,\n\n  awk: `awk - Pattern Scanning and Processing (Playground)\n\nProcess structured text data with pattern-action rules.\n\nUsage:\n  {action}                    Apply action to all lines\n  condition {action}          Apply action when condition is true\n  -F<sep> 'program'          Set field separator\n\nField Variables:\n  $0                    Entire line\n  $1, $2, ...           Individual fields (space-separated)\n  NR                    Current line number\n  NF                    Number of fields in current line\n\nExamples:\n  {print $1}                  Print first column\n  {print $1, $3}              Print columns 1 and 3\n  {print $NF}                 Print last column\n  $2 > 80 {print $1}          Print col 1 where col 2 > 80\n  {sum += $2} END {print sum} Sum column 2\n  {count++} END {print count} Count lines\n  -F, '{print $2}'            Use comma as separator\n\nEND Block:\n  Code after END runs once after all input:\n  {sum += $1} END {print \"Total:\", sum}\n\nCounting Patterns:\n  {count[$1]++} END {for (k in count) print k, count[k]}\n  Count occurrences of each unique value in column 1\n\nCSV Processing:\n  -F, 'NR>1 {print $1, $3}'   Skip header, print cols 1 & 3\n\nConditions:\n  $2 > 100                    Numeric comparison\n  $1 == \"error\"               String equality\n  NR > 1                      Skip first line\n\nLimitations:\n  • No regular expression matching (/pattern/)\n  • No printf formatting\n  • No multiple -F separators\n  • No getline\n  • No arrays beyond counting pattern\n  • No user-defined functions\n  • No BEGIN block (only END)\n  • No next, exit commands\n  • No FILENAME, FNR variables\n  • Limited string functions (no substr, split, gsub)`,\n\n  kubectl: '', // kubectl help is in engines/kubectl.ts\n};\n\nfunction isHelpCommand(command: string): boolean {\n  const trimmed = command.trim();\n  return trimmed === '--help' || trimmed === '-h' || trimmed === 'help' ||\n         trimmed.endsWith(' --help') || trimmed.endsWith(' -h');\n}\n\n/**\n * Simple jq-like JSON processor implemented in pure JS\n * Supports common operations without WASM dependencies\n */\nfunction executeJqLite(data: unknown, filter: string): unknown {\n  // Handle identity\n  if (filter === '.') {\n    return data;\n  }\n\n  // Handle keys\n  if (filter === 'keys') {\n    if (typeof data === 'object' && data !== null && !Array.isArray(data)) {\n      return Object.keys(data);\n    }\n    throw new Error('keys requires an object input');\n  }\n\n  // Handle values\n  if (filter === 'values') {\n    if (typeof data === 'object' && data !== null && !Array.isArray(data)) {\n      return Object.values(data);\n    }\n    throw new Error('values requires an object input');\n  }\n\n  // Handle length\n  if (filter === 'length') {\n    if (Array.isArray(data)) return data.length;\n    if (typeof data === 'string') return data.length;\n    if (typeof data === 'object' && data !== null) return Object.keys(data).length;\n    return 1;\n  }\n\n  // Handle type\n  if (filter === 'type') {\n    if (data === null) return 'null';\n    if (Array.isArray(data)) return 'array';\n    return typeof data;\n  }\n\n  // Handle simple field access: .field or .field.subfield\n  const fieldMatch = filter.match(/^\\.([a-zA-Z_][a-zA-Z0-9_]*(?:\\.[a-zA-Z_][a-zA-Z0-9_]*)*)$/);\n  if (fieldMatch) {\n    const path = fieldMatch[1].split('.');\n    let current: unknown = data;\n    for (const key of path) {\n      if (current === null || current === undefined) {\n        return null;\n      }\n      if (typeof current !== 'object') {\n        throw new Error(`Cannot index ${typeof current} with \"${key}\"`);\n      }\n      current = (current as Record<string, unknown>)[key];\n    }\n    return current;\n  }\n\n  // Handle array access: .[0] or .field[0]\n  const arrayAccessMatch = filter.match(/^\\.([a-zA-Z_][a-zA-Z0-9_]*(?:\\.[a-zA-Z_][a-zA-Z0-9_]*)*)?\\[(\\d+)\\]$/);\n  if (arrayAccessMatch) {\n    let current: unknown = data;\n    if (arrayAccessMatch[1]) {\n      const path = arrayAccessMatch[1].split('.');\n      for (const key of path) {\n        if (current === null || typeof current !== 'object') return null;\n        current = (current as Record<string, unknown>)[key];\n      }\n    }\n    const index = parseInt(arrayAccessMatch[2], 10);\n    if (!Array.isArray(current)) {\n      throw new Error('Cannot index non-array with number');\n    }\n    return current[index];\n  }\n\n  // Handle array iteration: .[]\n  if (filter === '.[]') {\n    if (Array.isArray(data)) {\n      return data;\n    }\n    if (typeof data === 'object' && data !== null) {\n      return Object.values(data);\n    }\n    throw new Error('Cannot iterate over ' + typeof data);\n  }\n\n  // Handle .[] | select(.field > value) pattern\n  const selectMatch = filter.match(/^\\.\\[\\]\\s*\\|\\s*select\\(\\.([a-zA-Z_][a-zA-Z0-9_]*)\\s*([><=!]+)\\s*(\\d+|\"[^\"]*\")\\)$/);\n  if (selectMatch) {\n    if (!Array.isArray(data)) {\n      throw new Error('select requires array input');\n    }\n    const field = selectMatch[1];\n    const op = selectMatch[2];\n    let compareVal: number | string = selectMatch[3];\n    if (compareVal.startsWith('\"')) {\n      compareVal = compareVal.slice(1, -1);\n    } else {\n      compareVal = parseFloat(compareVal);\n    }\n\n    return data.filter((item) => {\n      const val = (item as Record<string, unknown>)[field];\n      switch (op) {\n        case '>': return (val as number) > (compareVal as number);\n        case '<': return (val as number) < (compareVal as number);\n        case '>=': return (val as number) >= (compareVal as number);\n        case '<=': return (val as number) <= (compareVal as number);\n        case '==': return val === compareVal;\n        case '!=': return val !== compareVal;\n        default: return false;\n      }\n    });\n  }\n\n  // Handle simple pipe with field extraction: .[] | .field\n  const pipeFieldMatch = filter.match(/^\\.\\[\\]\\s*\\|\\s*\\.([a-zA-Z_][a-zA-Z0-9_]*)$/);\n  if (pipeFieldMatch) {\n    if (!Array.isArray(data)) {\n      throw new Error('Cannot iterate over non-array');\n    }\n    const field = pipeFieldMatch[1];\n    return data.map((item) => (item as Record<string, unknown>)[field]);\n  }\n\n  // Handle map with object construction: [.[] | {newkey: .oldkey}]\n  const mapObjectMatch = filter.match(/^\\[\\.\\[\\]\\s*\\|\\s*\\{([^}]+)\\}\\]$/);\n  if (mapObjectMatch) {\n    if (!Array.isArray(data)) {\n      throw new Error('Cannot iterate over non-array');\n    }\n    const objSpec = mapObjectMatch[1];\n    // Parse simple key: .field pairs\n    const pairs = objSpec.split(',').map(p => p.trim());\n    return data.map((item) => {\n      const result: Record<string, unknown> = {};\n      for (const pair of pairs) {\n        const [key, valueExpr] = pair.split(':').map(s => s.trim());\n        if (valueExpr.startsWith('.')) {\n          const field = valueExpr.slice(1);\n          result[key] = (item as Record<string, unknown>)[field];\n        } else if (valueExpr.startsWith('(')) {\n          // Skip complex expressions for now\n          result[key] = valueExpr;\n        } else {\n          result[key] = valueExpr;\n        }\n      }\n      return result;\n    });\n  }\n\n  throw new Error(`Unsupported jq filter: ${filter}\\n\\nSupported filters:\\n- . (identity)\\n- .field, .field.subfield\\n- .[0], .field[0]\\n- .[], .[] | .field\\n- .[] | select(.field > value)\\n- keys, values, length, type`);\n}\n\n/**\n * Execute jq command using pure JS implementation\n */\nasync function executeJq(input: string, command: string): Promise<string> {\n  // Handle --help\n  if (isHelpCommand(command)) {\n    return HELP_TEXTS.jq;\n  }\n\n  // Parse input as JSON\n  let parsedInput: unknown;\n  try {\n    parsedInput = JSON.parse(input);\n  } catch {\n    throw new Error('Invalid JSON input');\n  }\n\n  // Execute jq filter\n  const result = executeJqLite(parsedInput, command.trim());\n\n  // Format output\n  if (typeof result === 'string') {\n    return JSON.stringify(result);\n  }\n  return JSON.stringify(result, null, 2);\n}\n\n/**\n * Execute grep command (JS implementation)\n */\nfunction executeGrep(input: string, command: string): string {\n  // Handle --help\n  if (isHelpCommand(command)) {\n    return HELP_TEXTS.grep;\n  }\n\n  const lines = input.split('\\n');\n\n  // Parse flags and pattern\n  const parts = command.match(/^(-[invE]+\\s+)?(.+)$/);\n  if (!parts) {\n    throw new Error('Invalid grep command');\n  }\n\n  const flags = parts[1]?.trim() || '';\n  let pattern = parts[2].trim();\n\n  // Remove surrounding quotes if present\n  if ((pattern.startsWith('\"') && pattern.endsWith('\"')) ||\n      (pattern.startsWith(\"'\") && pattern.endsWith(\"'\"))) {\n    pattern = pattern.slice(1, -1);\n  }\n\n  const caseInsensitive = flags.includes('i');\n  const invertMatch = flags.includes('v');\n  const showLineNumbers = flags.includes('n');\n  const extendedRegex = flags.includes('E');\n\n  let regex: RegExp;\n  try {\n    const regexFlags = caseInsensitive ? 'i' : '';\n    regex = extendedRegex\n      ? new RegExp(pattern, regexFlags)\n      : new RegExp(pattern.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), regexFlags);\n  } catch {\n    throw new Error(`Invalid regex pattern: ${pattern}`);\n  }\n\n  const results: string[] = [];\n  lines.forEach((line, index) => {\n    const matches = regex.test(line);\n    const shouldInclude = invertMatch ? !matches : matches;\n\n    if (shouldInclude) {\n      if (showLineNumbers) {\n        results.push(`${index + 1}:${line}`);\n      } else {\n        results.push(line);\n      }\n    }\n  });\n\n  if (results.length === 0) {\n    return '(no matches)';\n  }\n\n  return results.join('\\n');\n}\n\n/**\n * Execute sed command (JS implementation)\n */\nfunction executeSed(input: string, command: string): string {\n  // Handle --help\n  if (isHelpCommand(command)) {\n    return HELP_TEXTS.sed;\n  }\n\n  const lines = input.split('\\n');\n\n  // Parse sed commands (supports s/pattern/replacement/flags and /pattern/d)\n  const commands = command.split(';').map(c => c.trim()).filter(Boolean);\n\n  let result = lines;\n\n  for (const cmd of commands) {\n    // Delete command: /pattern/d\n    const deleteMatch = cmd.match(/^\\/(.+)\\/d$/);\n    if (deleteMatch) {\n      const pattern = new RegExp(deleteMatch[1]);\n      result = result.filter(line => !pattern.test(line));\n      continue;\n    }\n\n    // Substitute command: s/pattern/replacement/flags\n    const subMatch = cmd.match(/^s\\/(.+?)\\/(.*)\\/([gi]*)$/);\n    if (subMatch) {\n      const [, pattern, replacement, flags] = subMatch;\n      const isGlobal = flags.includes('g');\n      const isCaseInsensitive = flags.includes('i');\n\n      // Handle basic sed capture groups \\1, \\2 etc\n      const jsReplacement = replacement.replace(/\\\\(\\d)/g, '$$$1');\n\n      try {\n        const regex = new RegExp(\n          pattern,\n          (isGlobal ? 'g' : '') + (isCaseInsensitive ? 'i' : '')\n        );\n        result = result.map(line => line.replace(regex, jsReplacement));\n      } catch {\n        throw new Error(`Invalid sed pattern: ${pattern}`);\n      }\n      continue;\n    }\n\n    throw new Error(`Unsupported sed command: ${cmd}`);\n  }\n\n  return result.join('\\n');\n}\n\n/**\n * Execute awk command (JS implementation)\n */\nfunction executeAwk(input: string, command: string): string {\n  // Handle --help\n  if (isHelpCommand(command)) {\n    return HELP_TEXTS.awk;\n  }\n\n  const lines = input.split('\\n').filter(line => line.trim());\n\n  // Parse field separator\n  let fieldSep = /\\s+/;\n  let program = command;\n\n  const fsMatch = command.match(/^-F([^\\s]+)\\s+(.+)$/);\n  if (fsMatch) {\n    const sep = fsMatch[1];\n    fieldSep = sep === ',' ? /,/ : new RegExp(sep);\n    program = fsMatch[2];\n  }\n\n  // Remove surrounding quotes from program\n  if ((program.startsWith(\"'\") && program.endsWith(\"'\")) ||\n      (program.startsWith('\"') && program.endsWith('\"'))) {\n    program = program.slice(1, -1);\n  }\n\n  // Parse BEGIN and END blocks (BEGIN not yet supported, just stripped)\n  const _beginMatch = program.match(/BEGIN\\s*\\{([^}]+)\\}/);\n  void _beginMatch; // Silence unused warning - BEGIN support planned\n  const endMatch = program.match(/END\\s*\\{([^}]+)\\}/);\n  const mainProgram = program\n    .replace(/BEGIN\\s*\\{[^}]+\\}/, '')\n    .replace(/END\\s*\\{[^}]+\\}/, '')\n    .trim();\n\n  const output: string[] = [];\n  const variables: Record<string, number | string> = { NR: 0, NF: 0 };\n\n  // Safe expression evaluator for awk (no Function/eval)\n  const evalExpr = (expr: string, fields: string[]): string | number | boolean => {\n    // Replace field references $1, $2, etc\n    let processed = expr.replace(/\\$(\\d+)/g, (_, n) => {\n      const idx = parseInt(n, 10);\n      return idx === 0 ? fields.join(' ') : (fields[idx - 1] || '');\n    });\n\n    // Replace variables\n    for (const [key, val] of Object.entries(variables)) {\n      processed = processed.replace(new RegExp(`\\\\b${key}\\\\b`, 'g'), String(val));\n    }\n\n    // Check if expression contains comparison operators\n    const hasComparisonOp = /[<>=!]{1,2}/.test(processed);\n\n    // Safe comparison evaluator - handles numeric comparisons\n    // Matches patterns like \"85 > 80\", \"NR == 1\", etc.\n    const numericComparisonMatch = processed.match(/^\\s*(-?\\d+(?:\\.\\d+)?)\\s*([<>=!]+)\\s*(-?\\d+(?:\\.\\d+)?)\\s*$/);\n    if (numericComparisonMatch) {\n      const left = parseFloat(numericComparisonMatch[1]);\n      const op = numericComparisonMatch[2];\n      const right = parseFloat(numericComparisonMatch[3]);\n\n      switch (op) {\n        case '>': return left > right;\n        case '<': return left < right;\n        case '>=': return left >= right;\n        case '<=': return left <= right;\n        case '==': return left === right;\n        case '!=': return left !== right;\n        default: return false;\n      }\n    }\n\n    // String equality comparisons: \"alice\" == \"alice\" or alice == \"alice\"\n    const stringComparisonMatch = processed.match(/^\\s*\"?([^\"]*)\"?\\s*(==|!=)\\s*\"([^\"]*)\"\\s*$/);\n    if (stringComparisonMatch) {\n      const left = stringComparisonMatch[1];\n      const op = stringComparisonMatch[2];\n      const right = stringComparisonMatch[3];\n\n      switch (op) {\n        case '==': return left === right;\n        case '!=': return left !== right;\n        default: return false;\n      }\n    }\n\n    // If expression looks like a comparison but didn't match supported patterns, return false\n    // This prevents non-numeric comparisons like \"$1 > 80\" (where $1 is \"alice\") from being truthy\n    if (hasComparisonOp) {\n      return false;\n    }\n\n    // Safe arithmetic evaluator - only handles simple numeric operations\n    const arithmeticMatch = processed.match(/^\\s*(-?\\d+(?:\\.\\d+)?)\\s*([+\\-*/])\\s*(-?\\d+(?:\\.\\d+)?)\\s*$/);\n    if (arithmeticMatch) {\n      const left = parseFloat(arithmeticMatch[1]);\n      const op = arithmeticMatch[2];\n      const right = parseFloat(arithmeticMatch[3]);\n\n      switch (op) {\n        case '+': return left + right;\n        case '-': return left - right;\n        case '*': return left * right;\n        case '/': return right !== 0 ? left / right : 0;\n        default: return processed;\n      }\n    }\n\n    // Return as-is for non-expression strings (used for print statements, etc.)\n    return processed;\n  };\n\n  // Execute main program for each line\n  const executeBlock = (block: string, fields: string[]) => {\n    // Handle print statements\n    const printMatch = block.match(/print\\s+(.+)/);\n    if (printMatch) {\n      const printExpr = printMatch[1];\n\n      // Handle string literals and field references\n      const parts: string[] = [];\n      const tokens = printExpr.split(/,\\s*/);\n\n      for (const token of tokens) {\n        if (token.startsWith('\"') && token.endsWith('\"')) {\n          parts.push(token.slice(1, -1));\n        } else {\n          const val = evalExpr(token.trim(), fields);\n          parts.push(String(val));\n        }\n      }\n\n      output.push(parts.join(' '));\n    }\n\n    // Handle variable assignments (sum += $2, count[$1]++, etc)\n    const assignMatch = block.match(/(\\w+)\\s*\\+=\\s*(.+)/);\n    if (assignMatch) {\n      const varName = assignMatch[1];\n      const val = evalExpr(assignMatch[2], fields);\n      variables[varName] = (Number(variables[varName]) || 0) + Number(val);\n    }\n\n    // Handle array counting (count[$1]++)\n    const countMatch = block.match(/(\\w+)\\[(.+?)\\]\\+\\+/);\n    if (countMatch) {\n      const arrayName = countMatch[1];\n      const key = String(evalExpr(countMatch[2], fields));\n      if (!variables[`${arrayName}_${key}`]) {\n        variables[`${arrayName}_${key}`] = 0;\n      }\n      variables[`${arrayName}_${key}`] = Number(variables[`${arrayName}_${key}`]) + 1;\n    }\n  };\n\n  // Process lines\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    const fields = line.split(fieldSep);\n    variables.NR = i + 1;\n    variables.NF = fields.length;\n\n    if (mainProgram) {\n      // Check for condition {action} pattern\n      const condMatch = mainProgram.match(/^([^{]+)\\s*\\{(.+)\\}$/);\n      if (condMatch) {\n        const condition = condMatch[1].trim();\n        const action = condMatch[2].trim();\n\n        // Evaluate condition\n        const condResult = evalExpr(condition, fields);\n        if (condResult && condResult !== 'false' && condResult !== 0) {\n          executeBlock(action, fields);\n        }\n      } else if (mainProgram.startsWith('{') && mainProgram.endsWith('}')) {\n        // Just action block\n        executeBlock(mainProgram.slice(1, -1).trim(), fields);\n      }\n    }\n  }\n\n  // Execute END block\n  if (endMatch) {\n    const endBlock = endMatch[1];\n\n    // Handle for (k in count) loops\n    const forMatch = endBlock.match(/for\\s*\\((\\w+)\\s+in\\s+(\\w+)\\)\\s*print\\s+(.+)/);\n    if (forMatch) {\n      const [, keyVar, arrayName, printExpr] = forMatch;\n      const keys = Object.keys(variables)\n        .filter(k => k.startsWith(`${arrayName}_`))\n        .map(k => k.replace(`${arrayName}_`, ''));\n\n      for (const key of keys) {\n        const val = variables[`${arrayName}_${key}`];\n        const result = printExpr\n          .replace(new RegExp(`\\\\b${keyVar}\\\\b`, 'g'), key)\n          .replace(new RegExp(`${arrayName}\\\\[${keyVar}\\\\]`, 'g'), String(val));\n\n        // Handle string concatenation\n        const parts = result.split(/,\\s*/).map(p => {\n          if (p.startsWith('\"') && p.endsWith('\"')) return p.slice(1, -1);\n          return p;\n        });\n        output.push(parts.join(' '));\n      }\n    } else {\n      // Simple print in END\n      const printMatch = endBlock.match(/print\\s+(.+)/);\n      if (printMatch) {\n        let printExpr = printMatch[1];\n        for (const [key, val] of Object.entries(variables)) {\n          printExpr = printExpr.replace(new RegExp(`\\\\b${key}\\\\b`, 'g'), String(val));\n        }\n        const parts = printExpr.split(/,\\s*/).map(p => {\n          if (p.startsWith('\"') && p.endsWith('\"')) return p.slice(1, -1);\n          return p;\n        });\n        output.push(parts.join(' '));\n      }\n    }\n  }\n\n  return output.join('\\n') || '(no output)';\n}\n\n/**\n * Options for kubectl command execution\n */\nexport interface KubectlOptions {\n  fixture?: string;\n  namespace?: string;\n}\n\n/**\n * Execute a command with the specified tool\n */\nexport async function executeCommand(\n  tool: Tool,\n  input: string,\n  command: string,\n  kubectlOptions?: KubectlOptions\n): Promise<string> {\n  // kubectl doesn't require input (uses fixtures instead)\n  if (tool !== 'kubectl' && !input.trim()) {\n    throw new Error('Input is empty');\n  }\n  if (!command.trim()) {\n    throw new Error('Command is empty');\n  }\n\n  switch (tool) {\n    case 'jq':\n      return executeJq(input, command);\n    case 'grep':\n      return executeGrep(input, command);\n    case 'sed':\n      return executeSed(input, command);\n    case 'awk':\n      return executeAwk(input, command);\n    case 'kubectl': {\n      const options: ExecutorOptions = {\n        fixtureId: kubectlOptions?.fixture || 'crashloop',\n        defaultNamespace: kubectlOptions?.namespace || 'default',\n      };\n      const result = executeKubectl(command, options);\n      if (result.exitCode !== 0) {\n        throw new Error(result.stderr || 'Command failed');\n      }\n      return result.stdout;\n    }\n    default:\n      throw new Error(`Unknown tool: ${tool}`);\n  }\n}\n","import { useState, useCallback, useEffect, useTransition, useMemo, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { TopBar } from './TopBar';\nimport { CommandRow } from './CommandRow';\nimport { Workspace } from './Workspace';\nimport { LearnHeader } from './LearnHeader';\nimport { executeCommand } from './engines';\nimport { explainCommand } from './explainer';\nimport { trackToolEvent } from '@/lib/trackToolEvent';\nimport type { Tool, Mode, ToolPreset, ToolState, PersistedToolState } from './types';\nimport { TOOL_CONFIGS, DEFAULT_STATE } from './types';\n\n// Valid tool and mode values for URL param validation\nconst VALID_TOOLS = Object.keys(TOOL_CONFIGS) as Tool[];\nconst VALID_MODES: Mode[] = ['learn', 'playground'];\n\nfunction isValidTool(value: string | null): value is Tool {\n  return value !== null && VALID_TOOLS.includes(value as Tool);\n}\n\nfunction isValidMode(value: string | null): value is Mode {\n  return value !== null && VALID_MODES.includes(value as Mode);\n}\n\n// Store per-tool state when switching tools\nconst toolStateCache = new Map<Tool, PersistedToolState>();\n\nexport default function CliPlayground() {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [isPending, startTransition] = useTransition();\n  const runIdRef = useRef(0); // Track run ID to prevent stale results\n\n  // Initialize state from URL params or defaults (with validation)\n  const [state, setState] = useState<ToolState>(() => {\n    const toolParam = searchParams.get('tool');\n    const tool = isValidTool(toolParam) ? toolParam : DEFAULT_STATE.tool;\n    const input = searchParams.get('input') || TOOL_CONFIGS[tool].presets[0].input;\n    const command = searchParams.get('cmd') || TOOL_CONFIGS[tool].presets[0].command;\n\n    return {\n      ...DEFAULT_STATE,\n      tool,\n      input,\n      command,\n    };\n  });\n\n  const [mode, setMode] = useState<Mode>(() => {\n    const modeParam = searchParams.get('mode');\n    return isValidMode(modeParam) ? modeParam : 'learn';\n  });\n\n  const isRunning = state.isLoading || isPending;\n\n  const [currentPresetIndex, setCurrentPresetIndex] = useState(0);\n\n  // Current preset for Learn mode hints\n  const currentPreset = useMemo(() => {\n    return TOOL_CONFIGS[state.tool].presets[currentPresetIndex] || null;\n  }, [state.tool, currentPresetIndex]);\n\n  // Generate explanation for current command\n  const explanation = useMemo(() => {\n    if (!state.command.trim()) return null;\n    return explainCommand(state.tool, state.command);\n  }, [state.tool, state.command]);\n\n  // Generate lesson-aware empty state prompt\n  const emptyStatePrompt = useMemo(() => {\n    if (mode !== 'learn' || !currentPreset) return undefined;\n\n    // For kubectl, create a specific prompt based on the lesson\n    if (state.tool === 'kubectl' && currentPreset.namespace) {\n      const action = state.command.split(' ')[0] || 'get';\n      return `Press ⌘+Enter to ${action} resources in ${currentPreset.namespace}`;\n    }\n\n    // For other tools, use the preset description\n    return `Press ⌘+Enter to run the command`;\n  }, [mode, currentPreset, state.tool, state.command]);\n\n  const goalStatus = useMemo(() => {\n    if (mode !== 'learn' || !currentPreset) return undefined;\n    const expectedIncludes = currentPreset.expectedOutputIncludes;\n    const expectedRegex = currentPreset.expectedOutputRegex;\n    if (!expectedIncludes && !expectedRegex) return undefined;\n\n    if (state.isLoading || isRunning) {\n      return { status: 'pending' as const, label: 'Checking...' };\n    }\n    if (!state.output && !state.error) {\n      return { status: 'pending' as const, label: 'Run to check' };\n    }\n    if (state.error) {\n      return { status: 'fail' as const, label: 'Goal not met' };\n    }\n\n    let pass = true;\n    if (expectedIncludes) {\n      pass = pass && state.output.includes(expectedIncludes);\n    }\n    if (expectedRegex) {\n      try {\n        pass = pass && new RegExp(expectedRegex).test(state.output);\n      } catch {\n        pass = false;\n      }\n    }\n\n    return { status: pass ? 'pass' as const : 'fail' as const, label: pass ? 'Goal met' : 'Goal not met' };\n  }, [mode, currentPreset, state.output, state.error, state.isLoading, isRunning]);\n\n  // Sync state to URL params (debounced)\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      const params = new URLSearchParams();\n      params.set('tool', state.tool);\n      params.set('mode', mode);\n      if (state.input !== TOOL_CONFIGS[state.tool].presets[0].input) {\n        params.set('input', state.input);\n      }\n      if (state.command !== TOOL_CONFIGS[state.tool].presets[0].command) {\n        params.set('cmd', state.command);\n      }\n      setSearchParams(params, { replace: true });\n    }, 500);\n\n    return () => clearTimeout(timeout);\n  }, [state.tool, state.input, state.command, mode, setSearchParams]);\n\n  const handleRun = useCallback(async () => {\n    // Increment run ID to track this specific execution\n    const currentRunId = ++runIdRef.current;\n\n    trackToolEvent({ tool_name: 'cli_playground', action: 'command_run', event_label: state.tool });\n\n    setState((prev) => ({ ...prev, isLoading: true, error: undefined }));\n\n    try {\n      const result = await executeCommand(state.tool, state.input, state.command, {\n        fixture: currentPreset?.fixture,\n        namespace: currentPreset?.namespace,\n      });\n\n      // Ignore stale results if user switched tools/commands while running\n      if (runIdRef.current !== currentRunId) return;\n\n      startTransition(() => {\n        setState((prev) => ({\n          ...prev,\n          output: result,\n          error: undefined,\n          isLoading: false,\n        }));\n      });\n    } catch (err) {\n      // Ignore stale errors if user switched tools/commands while running\n      if (runIdRef.current !== currentRunId) return;\n\n      startTransition(() => {\n        setState((prev) => ({\n          ...prev,\n          output: '',\n          error: err instanceof Error ? err.message : 'Unknown error',\n          isLoading: false,\n        }));\n      });\n    }\n  }, [state.tool, state.input, state.command, currentPreset?.fixture, currentPreset?.namespace]);\n\n  // Auto-run command in Learn mode when lesson loads\n  const hasAutoRun = useRef(false);\n  useEffect(() => {\n    if (mode === 'learn' && !hasAutoRun.current && !state.output && !state.isLoading) {\n      hasAutoRun.current = true;\n      handleRun();\n    }\n  }, [mode, state.output, state.isLoading, handleRun]);\n\n  // Reset auto-run flag when preset changes\n  useEffect(() => {\n    hasAutoRun.current = false;\n  }, [currentPresetIndex, state.tool]);\n\n  // Global keyboard shortcut for Cmd/Ctrl+Enter\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleRun();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [handleRun]);\n\n  const handleToolChange = useCallback((tool: Tool) => {\n    // Invalidate any in-flight requests\n    runIdRef.current++;\n\n    trackToolEvent({ tool_name: 'cli_playground', action: 'tool_select', event_label: tool });\n\n    // Save current tool state\n    toolStateCache.set(state.tool, {\n      input: state.input,\n      command: state.command,\n      presetIndex: currentPresetIndex,\n    });\n\n    // Restore cached state or use first preset\n    const cached = toolStateCache.get(tool);\n    if (cached) {\n      setState({\n        tool,\n        input: cached.input,\n        command: cached.command,\n        output: '',\n        error: undefined,\n        isLoading: false,\n      });\n      setCurrentPresetIndex(cached.presetIndex);\n    } else {\n      const preset = TOOL_CONFIGS[tool].presets[0];\n      setState({\n        tool,\n        input: preset.input,\n        command: preset.command,\n        output: '',\n        error: undefined,\n        isLoading: false,\n      });\n      setCurrentPresetIndex(0);\n    }\n  }, [state.tool, state.input, state.command, currentPresetIndex]);\n\n  const handleModeChange = useCallback((newMode: Mode) => {\n    setMode(newMode);\n    trackToolEvent({ tool_name: 'cli_playground', action: 'mode_switch', event_label: newMode });\n  }, []);\n\n  const handlePresetSelect = useCallback((preset: ToolPreset) => {\n    // Invalidate any in-flight requests\n    runIdRef.current++;\n\n    trackToolEvent({ tool_name: 'cli_playground', action: 'preset_select', event_label: preset.name });\n\n    const index = TOOL_CONFIGS[state.tool].presets.findIndex(p => p.name === preset.name);\n    setCurrentPresetIndex(index >= 0 ? index : 0);\n    setState((prev) => ({\n      ...prev,\n      input: preset.input,\n      command: preset.command,\n      output: '',\n      error: undefined,\n    }));\n  }, [state.tool]);\n\n  const handleInputChange = useCallback((input: string) => {\n    setState((prev) => ({ ...prev, input }));\n  }, []);\n\n  const handleCommandChange = useCallback((command: string) => {\n    setState((prev) => ({ ...prev, command }));\n  }, []);\n\n  const handleReset = useCallback(() => {\n    const preset = TOOL_CONFIGS[state.tool].presets[0];\n    setState({\n      tool: state.tool,\n      input: preset.input,\n      command: preset.command,\n      output: '',\n      error: undefined,\n      isLoading: false,\n    });\n    setCurrentPresetIndex(0);\n  }, [state.tool]);\n\n  const handleTryCommand = useCallback((command: string) => {\n    setState((prev) => ({ ...prev, command }));\n  }, []);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Top bar: tool tabs, lesson selector, mode toggle, actions */}\n      <TopBar\n        tool={state.tool}\n        mode={mode}\n        currentPreset={currentPreset}\n        onToolChange={handleToolChange}\n        onModeChange={handleModeChange}\n        onPresetSelect={handlePresetSelect}\n        onReset={handleReset}\n      />\n\n      {/* Learn mode: Goal and command chips */}\n      {mode === 'learn' && (\n        <LearnHeader\n          tool={state.tool}\n          preset={currentPreset}\n          onTryCommand={handleTryCommand}\n        />\n      )}\n\n      {/* Command row */}\n      <CommandRow\n        tool={state.tool}\n        command={state.command}\n        isLoading={state.isLoading || isPending}\n        onCommandChange={handleCommandChange}\n        onRun={handleRun}\n      />\n\n      {/* Workspace: Input | Output (with Explain tab in Learn mode) */}\n      <Workspace\n        input={state.input}\n        output={state.output}\n        error={state.error}\n        isLoading={state.isLoading || isPending}\n        mode={mode}\n        tool={state.tool}\n        command={state.command}\n        goalStatus={goalStatus}\n        explanation={explanation}\n        hideStdin={TOOL_CONFIGS[state.tool].hideStdin}\n        emptyStatePrompt={emptyStatePrompt}\n        onInputChange={handleInputChange}\n        onTryCommand={handleTryCommand}\n      />\n    </div>\n  );\n}\n"],"names":["toggleVariants","cva","Toggle","React.forwardRef","className","variant","size","props","ref","jsx","TogglePrimitive.Root","cn","ToggleGroupContext","React.createContext","ToggleGroup","children","ToggleGroupPrimitive.Root","ToggleGroupItem","context","React.useContext","ToggleGroupPrimitive.Item","TOOL_CONFIGS","DEFAULT_STATE","TOOLS","TopBar","tool","mode","currentPreset","onToolChange","onModeChange","onPresetSelect","onReset","config","handleShare","trackToolEvent","toast","jsxs","v","t","DropdownMenu","DropdownMenuTrigger","Button","ChevronDown","DropdownMenuContent","preset","DropdownMenuItem","BookOpen","Terminal","Tooltip","TooltipTrigger","RotateCcw","TooltipContent","Share2","CommandRow","command","isLoading","onCommandChange","onRun","inputRef","useRef","useEffect","handleKeyDown","e","Loader2","Play","LineNumbers","count","_","i","Workspace","input","output","error","goalStatus","explanation","hideStdin","emptyStatePrompt","onInputChange","onTryCommand","copied","setCopied","useState","inputCollapsed","setInputCollapsed","activeTab","setActiveTab","inputLines","outputLines","handleCopy","text","availableTabs","useMemo","tabs","showTabs","shouldHighlightGrep","getGrepHighlightRegex","parts","flags","pattern","caseInsensitive","extendedRegex","regexFlags","regexPattern","renderHighlightedLine","line","regex","lineIndex","lastIndex","match","start","end","highlightRegex","highlightedOutput","index","arr","getDiffLines","before","after","maxLines","diff","left","right","effectiveTab","ChevronUp","tab","label","Check","Copy","Fragment","f","item","ArrowRight","explainCommand","explainJq","explainGrep","explainSed","explainAwk","explainKubectl","tryNext","summary","condMatch","flagStr","replacement","modifiers","fieldMatch","verb","resource","hasNamespace","hasAllNamespaces","hasWide","hasYaml","hasJson","hasTail","namespace","tailMatch","subcommand","COMMAND_HINTS","LearnHeader","derivedHints","baseHints","hintsSource","maxHints","cappedHints","hint","goalText","Target","FIXTURES","createCrashloopFixture","createImagepullFixture","createServiceMismatchFixture","createRolloutRegressionFixture","createNodePressureFixture","ts","createNode","createEvent","createNodeWithPressure","name","node","kind","type","reason","component","message","age","sessionState","getFixtureState","fixtureId","original","parseCommand","result","tokens","current","inQuote","quoteChar","char","token","res","flag","key","value","parseLabelSelector","selector","part","matchesLabels","labels","formatAge","timestamp","getPodStatus","pod","cs","getPodReady","total","c","getPodRestarts","sum","formatPodTable","pods","wide","showLabels","allNs","header","rows","p","row","k","formatDeploymentTable","deployments","d","ready","formatReplicaSetTable","replicaSets","rs","formatServiceTable","services","s","externalIP","ports","formatEndpointsTable","endpoints","eps","a","formatNodeTable","nodes","n","status","memPressure","diskPressure","roles","formatEventsTable","events","obj","formatPodDescribe","container","podEvents","stateInfo","lastStateInfo","conditions","eventLines","formatDeploymentDescribe","deployment","newRS","oldRS","formatNodeDescribe","taints","formatServiceDescribe","service","formatRolloutStatus","formatRolloutHistory","revisions","toYaml","HELP_TEXTS","getHelpText","resources","executeKubectl","options","fixture","parsed","ns","filterByNs","items","filterByLabels","sortItems","sortBy","path","b","aVal","bVal","outputs","deps","r","svcs","dep","svc","ep","podName","podLogs","containerNames","containerName","logs","deployName","previousRevision","deployPods","hash","memPct","isHelpCommand","trimmed","executeJqLite","data","filter","arrayAccessMatch","selectMatch","field","op","compareVal","val","pipeFieldMatch","mapObjectMatch","pairs","pair","valueExpr","executeJq","parsedInput","executeGrep","lines","invertMatch","showLineNumbers","results","matches","executeSed","commands","cmd","deleteMatch","subMatch","isGlobal","isCaseInsensitive","jsReplacement","executeAwk","fieldSep","program","fsMatch","sep","endMatch","mainProgram","variables","evalExpr","expr","fields","processed","idx","hasComparisonOp","numericComparisonMatch","stringComparisonMatch","arithmeticMatch","executeBlock","block","printMatch","printExpr","assignMatch","varName","countMatch","arrayName","condition","action","condResult","endBlock","forMatch","keyVar","keys","executeCommand","kubectlOptions","VALID_TOOLS","VALID_MODES","isValidTool","isValidMode","toolStateCache","CliPlayground","searchParams","setSearchParams","useSearchParams","isPending","startTransition","useTransition","runIdRef","state","setState","toolParam","setMode","modeParam","isRunning","currentPresetIndex","setCurrentPresetIndex","expectedIncludes","expectedRegex","pass","timeout","params","handleRun","useCallback","currentRunId","prev","err","hasAutoRun","handleToolChange","cached","handleModeChange","newMode","handlePresetSelect","handleInputChange","handleCommandChange","handleReset","handleTryCommand"],"mappings":"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"}