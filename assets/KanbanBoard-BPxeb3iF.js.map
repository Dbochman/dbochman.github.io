{"version":3,"mappings":"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","names":["useCombinedRefs","_len","refs","_key","useMemo","node","ref","canUseDOM","isWindow","element","elementString","isNode","getWindow","target","_target$ownerDocument","_target$ownerDocument2","isDocument","Document","isHTMLElement","isSVGElement","getOwnerDocument","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useEvent","handler","handlerRef","useRef","useCallback","args","useInterval","intervalRef","set","listener","duration","clear","useLatestValue","value","dependencies","valueRef","useLazyMemo","callback","newValue","useNodeRef","onChange","onChangeHandler","setNodeRef","usePrevious","ids","useUniqueId","prefix","id","createAdjustmentFn","modifier","object","adjustments","accumulator","adjustment","entries","key","valueAdjustment","add","subtract","hasViewportRelativeCoordinates","event","isKeyboardEvent","KeyboardEvent","isTouchEvent","TouchEvent","getEventCoordinates","x","y","CSS","transform","scaleX","scaleY","_ref","property","easing","SELECTOR","findFirstFocusableNode","hiddenStyles","HiddenText","React","LiveRegion","announcement","ariaLiveType","visuallyHidden","useAnnouncement","setAnnouncement","useState","DndMonitorContext","createContext","useDndMonitor","registerListener","useContext","useDndMonitorProvider","listeners","type","_listener$type","defaultScreenReaderInstructions","defaultAnnouncements","active","_ref2","over","_ref3","_ref4","Accessibility","announcements","container","hiddenTextDescribedById","screenReaderInstructions","announce","liveRegionId","mounted","setMounted","_ref5","_ref6","markup","createPortal","Action","noop","useSensor","sensor","options","useSensors","sensors","defaultCoordinates","distanceBetween","p1","p2","getRelativeTransformOrigin","rect","eventCoordinates","transformOrigin","sortCollisionsAsc","a","b","sortCollisionsDesc","cornersOfRectangle","left","top","height","width","getFirstCollision","collisions","firstCollision","closestCorners","collisionRect","droppableRects","droppableContainers","corners","droppableContainer","rectCorners","distances","corner","index","effectiveDistance","getIntersectionRatio","entry","right","bottom","targetArea","entryArea","intersectionArea","intersectionRatio","rectIntersection","adjustScale","rect1","rect2","getRectDelta","createRectAdjustmentFn","acc","getAdjustedRect","parseTransform","transformArray","inverseTransform","parsedTransform","translateX","translateY","w","defaultOptions","getClientRect","getTransformAgnosticClientRect","getWindowClientRect","isFixed","computedStyle","isScrollable","overflowRegex","getScrollableAncestors","limit","scrollParents","findScrollableAncestors","getFirstScrollableAncestor","firstScrollableAncestor","getScrollableElement","getScrollXCoordinate","getScrollYCoordinate","getScrollCoordinates","Direction","isDocumentScrollingElement","getScrollPosition","scrollingContainer","minScroll","dimensions","maxScroll","isTop","isLeft","isBottom","isRight","defaultThreshold","getScrollDirectionAndSpeed","scrollContainer","scrollContainerRect","acceleration","thresholdPercentage","direction","speed","threshold","getScrollElementRect","innerWidth","innerHeight","getScrollOffsets","scrollableAncestors","getScrollXOffset","getScrollYOffset","scrollIntoViewIfNeeded","measure","properties","Rect","scrollOffsets","axis","keys","getScrollOffset","currentOffsets","scrollOffsetsDeltla","Listeners","_this$target","eventName","_this$target2","getEventListenerTarget","EventTarget","hasExceededDistance","delta","measurement","dx","dy","EventName","preventDefault","stopPropagation","KeyboardCode","defaultKeyboardCodes","defaultKeyboardCoordinateGetter","currentCoordinates","KeyboardSensor","props","activeNode","onStart","context","keyboardCodes","coordinateGetter","scrollBehavior","code","newCoordinates","coordinatesDelta","scrollDelta","scrollElementRect","clampedCoordinates","canScrollX","canScrollY","newScrollCoordinates","canScrollToNewCoordinates","coordinates","onMove","onEnd","onCancel","onActivation","activator","isDistanceConstraint","constraint","isDelayConstraint","AbstractPointerSensor","events","listenerTarget","_getEventCoordinates","activationConstraint","bypassActivationConstraint","offset","onPending","initialCoordinates","_getEventCoordinates2","activated","onAbort","_this$document$getSel","PointerSensor","events$1","MouseButton","MouseSensor","events$2","TouchSensor","touches","AutoScrollActivator","TraversalOrder","useAutoScroller","canScroll","draggingRect","enabled","interval","order","pointerCoordinates","scrollableAncestorRects","scrollIntent","useScrollIntent","setAutoScrollInterval","clearAutoScrollInterval","scrollSpeed","scrollDirection","scrollContainerRef","autoScroll","scrollLeft","scrollTop","sortedScrollableAncestors","defaultScrollIntent","disabled","previousDelta","previousIntent","useCachedNode","draggableNodes","draggableNode","cachedNode","useCombineActivators","getSyntheticHandler","Sensor","sensorActivators","MeasuringStrategy","MeasuringFrequency","defaultValue","useDroppableMeasuring","containers","dragging","config","queue","setQueue","frequency","strategy","containersRef","isDisabled","disabledRef","measureDroppableContainers","timeoutId","previousValue","map","useInitialValue","computeFn","useInitialRect","useMutationObserver","handleMutations","mutationObserver","MutationObserver","useResizeObserver","handleResize","resizeObserver","ResizeObserver","defaultMeasure","useRect","fallbackRect","setRect","measureRect","currentRect","newRect","records","record","useRectDelta","initialRect","defaultValue$1","useScrollableAncestors","previousNode","ancestors","useScrollOffsets","elements","scrollCoordinates","setScrollCoordinates","prevElements","handleScroll","scrollingElement","previousElements","cleanup","scrollableElement","useScrollOffsetsDelta","initialScrollOffsets","hasScrollOffsets","useSensorSetup","teardownFns","teardown","useSyntheticListeners","useWindowRect","defaultValue$2","useRects","firstElement","windowRect","rects","setRects","measureRects","getMeasurableNode","firstChild","useDragOverlayMeasuring","handleNodeChange","nodeRef","setRef","defaultSensors","defaultData","defaultMeasuringConfiguration","DroppableContainersMap","_super$get","_this$get$node$curren","_this$get","defaultPublicContext","defaultInternalContext","InternalContext","PublicContext","getInitialState","reducer","state","action","RestoreFocus","activatorEvent","previousActivatorEvent","previousActiveId","activatorNode","focusableNode","applyModifiers","modifiers","useMeasuringConfiguration","useLayoutShiftScrollCompensation","initialized","rectDelta","ActiveDraggableContext","Status","DndContext","memo","_sensorContext$curren","_dragOverlay$nodeRef$","_dragOverlay$rect","_over$rect","accessibility","children","collisionDetection","measuring","store","useReducer","dispatch","dispatchMonitorEvent","registerMonitorListener","status","setStatus","isInitialized","activeId","translate","activeRects","_node$data","activeRef","activeSensor","setActiveSensor","setActivatorEvent","latestProps","draggableDescribedById","enabledDroppableContainers","measuringConfiguration","measuringScheduled","activationCoordinates","autoScrollOptions","getAutoScrollerOptions","initialActiveNodeRect","activeNodeRect","containerNodeRect","sensorContext","overNode","dragOverlay","draggingNode","draggingNodeRect","usesDragOverlay","nodeRectDelta","modifiedTranslate","scrollAdjustment","activeNodeScrollDelta","scrollAdjustedTranslate","overId","setOver","appliedTranslate","activeSensorRef","instantiateSensor","sensorInstance","onDragAbort","onDragPending","onDragStart","unstable_batchedUpdates","createHandler","cancelDrop","bindActivatorToSensorInstantiator","nativeEvent","activeDraggableNode","activationContext","activators","onDragMove","onDragOver","overContainer","publicContext","internalContext","activeSensorDisablesAutoscroll","autoScrollGloballyDisabled","NullContext","defaultRole","ID_PREFIX","useDraggable","data","attributes","ariaDescribedById","role","roleDescription","tabIndex","isDragging","setActivatorNodeRef","dataRef","memoizedAttributes","useDndContext","ID_PREFIX$1","defaultResizeObserverConfig","useDroppable","resizeObserverConfig","previous","resizeObserverConnected","callbackId","resizeObserverDisabled","updateMeasurementsFor","resizeObserverTimeout","newElement","previousElement","AnimationManager","animation","clonedChildren","setClonedChildren","setElement","previousChildren","cloneElement","defaultTransform","NullifiedContextProvider","baseStyles","defaultTransition","PositionedOverlay","forwardRef","as","className","style","transition","scaleAdjustedTransform","styles","defaultDropAnimationSideEffects","originalStyles","defaultKeyframeResolver","initial","final","defaultDropAnimationConfiguration","useDropAnimation","activeDraggable","measurableNode","createDefaultDropAnimation","sideEffects","keyframes","rest","scale","finalTransform","animationKeyframes","firstKeyframe","lastKeyframe","resolve","useKey","DragOverlay","dropAnimationConfig","wrapperElement","zIndex","modifiedTransform","dropAnimation","arrayMove","array","from","to","newArray","getSortedRects","items","isValidIndex","itemsEqual","i","normalizeDisabled","rectSortingStrategy","activeIndex","overIndex","newRects","oldRect","defaultScale$1","verticalListSortingStrategy","_rects$activeIndex","fallbackActiveRect","overIndexRect","itemGap","getItemGap$1","clientRects","previousRect","nextRect","Context","SortableContext","userDefinedItems","disabledProp","containerId","useDragOverlay","item","previousItemsRef","itemsHaveChanged","disableTransforms","contextValue","defaultNewIndexGetter","defaultAnimateLayoutChanges","isSorting","wasDragging","newIndex","previousItems","previousContainerId","transitionProperty","disabledTransition","defaultAttributes","useDerivedTransform","derivedTransform","setDerivedtransform","previousIndex","current","useSortable","animateLayoutChanges","userDefinedAttributes","localDisabled","customData","getNewIndex","localStrategy","globalDisabled","sortedRects","globalStrategy","normalizeLocalDisabled","itemsAfterCurrentSortable","isOver","setDroppableNodeRef","setDraggableNodeRef","displaceItem","shouldDisplaceDragSource","dragSourceDisplacement","shouldAnimateLayoutChanges","getTransition","_localDisabled$dragga","_localDisabled$droppa","hasSortableData","directions","sortableKeyboardCoordinates","filteredContainers","closestId","activeDroppable","newDroppable","newNode","hasDifferentScrollAncestors","hasSameContainer","isSameContainer","isAfterActive","isAfter","rectCoordinates","COLUMN_COLORS","CARD_COLORS","generateId","REPO_OWNER","REPO_NAME","CACHE_TTL","cache","getCachedStatus","prNumber","setCachedStatus","fetchPrStatus","prResponse","sha","checksResponse","checksData","run","error","usePrStatus","cached","loading","setLoading","cancelled","newStatus","REPO_URL","parsePrLabel","label","match","getFirstPrNumber","labels","hasPrLabel","KanbanCard","card","columnId","onEdit","isDragOverlay","isChangelog","dynamicStatus","statusLoading","displayStatus","colorConfig","sortableProps","jsxs","Card","cn","jsx","e","url","boardId","Link2","Pencil","Badge","ExternalLink","GitMerge","Loader2","CheckCircle","XCircle","Clock","CheckSquare","FileText","CHANGELOG_MAX_CARDS","getSizeValue","lower","KanbanColumn","column","onAddCard","onEditCard","onEditColumn","onDeleteColumn","sortDirection","setSortDirection","hasMoreCards","sortedCards","cards","aVal","bVal","toggleSort","prev","SortIcon","ArrowUp","ArrowDown","ArrowUpDown","Button","DropdownMenu","DropdownMenuTrigger","MoreHorizontal","DropdownMenuContent","DropdownMenuItem","Trash2","c","ScrollText","Plus","Dialog","DialogPrimitive.Root","DialogPortal","DialogPrimitive.Portal","DialogOverlay","React.forwardRef","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","DialogPrimitive.Close","X","DialogHeader","DialogFooter","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","Checkbox","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","Check","CardComments","cardId","commentsRef","isVisible","setIsVisible","isDark","useTheme","currentCardIdRef","observer","getGiscusTheme","sendThemeUpdate","giscusTheme","loadGiscus","script","colorKeys","formatDate","dateStr","formatChangeDescription","change","CardEditorModal","isOpen","scrollTo","onClose","onSave","onDelete","checklistRef","title","setTitle","summary","setSummary","description","setDescription","setLabels","newLabel","setNewLabel","checklist","setChecklist","newChecklistItem","setNewChecklistItem","color","setColor","handleSave","now","newHistory","trimmedTitle","trimmedDesc","oldLabels","newLabels","handleAddLabel","handleRemoveLabel","l","handleLabelKeyDown","handleAddChecklistItem","handleToggleChecklistItem","itemId","handleRemoveChecklistItem","handleChecklistKeyDown","completedCount","Label","Input","Textarea","k","colorKey","isSelected","Fragment","History","MessageSquare","ColumnEditorModal","handleKeyDown","WORKER_URL","FALLBACK_BOARDS","kanbanManifest","meta","mergeBoards","remoteBoards","merged","board","BoardSelector","currentBoardId","currentBoardTitle","onCreateNew","isAuthenticated","setSearchParams","useSearchParams","boards","setBoards","isLoading","setIsLoading","setIsOpen","loadBoards","res","err","handleOpenChange","open","handleBoardSelect","next","LayoutGrid","ChevronDown","DropdownMenuSeparator","CreateBoardModal","onCreated","setId","idManuallyEdited","setIdManuallyEdited","isCreating","setIsCreating","setError","generated","handleIdChange","handleCreate","KanbanBoard","initialBoard","initialCardId","initialHeadCommitSha","setBoard","baselineBoardRef","headCommitSha","setHeadCommitSha","deletedCardStorageKey","deletedCardIds","setDeletedCardIds","stored","parsed","existingCardIds","col","activeCard","setActiveCard","isDirty","setIsDirty","isSaving","setIsSaving","saveSuccess","setSaveSuccess","conflictDetected","setConflictDetected","auth","setAuth","isCheckingAuth","setIsCheckingAuth","externalChangeDetected","setExternalChangeDetected","externalChangeDetectedRef","dragStartColumnRef","handleStorageEvent","newIds","currentIds","addedIds","addedIdSet","handleBeforeUnload","editingCard","setEditingCard","addingToColumn","setAddingToColumn","isCardModalOpen","setIsCardModalOpen","scrollToSection","setScrollToSection","editingColumnId","setEditingColumnId","isColumnModalOpen","setIsColumnModalOpen","isCreateBoardModalOpen","setIsCreateBoardModalOpen","isAddingColumn","setIsAddingColumn","updateBoard","updater","handleLogin","returnTo","handleLogout","handleSoftReload","newSha","apiRes","apiData","__variableDynamicImportRuntimeHelper","__vitePreload","n","toast","checkForExternalChanges","remoteSha","intervalId","startPolling","stopPolling","handleVisibilityChange","handleSaveToGitHub","response","updated","findCard","findColumnByCardId","handleDragStart","startColumn","handleDragOver","throttle","startTransition","activeColumn","overColumn","activeCards","overCards","movedCard","handleDragEnd","startColumnId","isCrossColumnMove","movedFromStart","addHistoryIfNeeded","lastEntry","oldIndex","reorderedCards","handleAddCard","handleEditCard","handleSaveCard","newCard","updatedCard","handleDeleteCard","handleEditColumn","handleAddColumn","handleSaveColumn","handleDeleteColumn","cardIdsInColumn","handleReset","handleShare","handleBoardCreated","newBoardId","editingColumn","canSave","RefreshCw","Save","LogOut","LogIn","Share2","RotateCcw"],"ignoreList":[0,1,2,3],"sources":["../../node_modules/@dnd-kit/utilities/dist/utilities.esm.js","../../node_modules/@dnd-kit/accessibility/dist/accessibility.esm.js","../../node_modules/@dnd-kit/core/dist/core.esm.js","../../node_modules/@dnd-kit/sortable/dist/sortable.esm.js","../../src/types/kanban.ts","../../src/hooks/usePrStatus.ts","../../src/components/projects/kanban/KanbanCard.tsx","../../src/components/projects/kanban/KanbanColumn.tsx","../../src/components/ui/dialog.tsx","../../src/components/ui/checkbox.tsx","../../src/components/projects/kanban/CardComments.tsx","../../src/components/projects/kanban/CardEditorModal.tsx","../../src/components/projects/kanban/ColumnEditorModal.tsx","../../src/components/projects/kanban/BoardSelector.tsx","../../src/components/projects/kanban/CreateBoardModal.tsx","../../src/components/projects/kanban/KanbanBoard.tsx"],"sourcesContent":["import { useMemo, useLayoutEffect, useEffect, useRef, useCallback } from 'react';\n\nfunction useCombinedRefs() {\n  for (var _len = arguments.length, refs = new Array(_len), _key = 0; _key < _len; _key++) {\n    refs[_key] = arguments[_key];\n  }\n\n  return useMemo(() => node => {\n    refs.forEach(ref => ref(node));\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  refs);\n}\n\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nconst canUseDOM = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined';\n\nfunction isWindow(element) {\n  const elementString = Object.prototype.toString.call(element);\n  return elementString === '[object Window]' || // In Electron context the Window object serializes to [object global]\n  elementString === '[object global]';\n}\n\nfunction isNode(node) {\n  return 'nodeType' in node;\n}\n\nfunction getWindow(target) {\n  var _target$ownerDocument, _target$ownerDocument2;\n\n  if (!target) {\n    return window;\n  }\n\n  if (isWindow(target)) {\n    return target;\n  }\n\n  if (!isNode(target)) {\n    return window;\n  }\n\n  return (_target$ownerDocument = (_target$ownerDocument2 = target.ownerDocument) == null ? void 0 : _target$ownerDocument2.defaultView) != null ? _target$ownerDocument : window;\n}\n\nfunction isDocument(node) {\n  const {\n    Document\n  } = getWindow(node);\n  return node instanceof Document;\n}\n\nfunction isHTMLElement(node) {\n  if (isWindow(node)) {\n    return false;\n  }\n\n  return node instanceof getWindow(node).HTMLElement;\n}\n\nfunction isSVGElement(node) {\n  return node instanceof getWindow(node).SVGElement;\n}\n\nfunction getOwnerDocument(target) {\n  if (!target) {\n    return document;\n  }\n\n  if (isWindow(target)) {\n    return target.document;\n  }\n\n  if (!isNode(target)) {\n    return document;\n  }\n\n  if (isDocument(target)) {\n    return target;\n  }\n\n  if (isHTMLElement(target) || isSVGElement(target)) {\n    return target.ownerDocument;\n  }\n\n  return document;\n}\n\n/**\r\n * A hook that resolves to useEffect on the server and useLayoutEffect on the client\r\n * @param callback {function} Callback function that is invoked when the dependencies of the hook change\r\n */\n\nconst useIsomorphicLayoutEffect = canUseDOM ? useLayoutEffect : useEffect;\n\nfunction useEvent(handler) {\n  const handlerRef = useRef(handler);\n  useIsomorphicLayoutEffect(() => {\n    handlerRef.current = handler;\n  });\n  return useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return handlerRef.current == null ? void 0 : handlerRef.current(...args);\n  }, []);\n}\n\nfunction useInterval() {\n  const intervalRef = useRef(null);\n  const set = useCallback((listener, duration) => {\n    intervalRef.current = setInterval(listener, duration);\n  }, []);\n  const clear = useCallback(() => {\n    if (intervalRef.current !== null) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n  return [set, clear];\n}\n\nfunction useLatestValue(value, dependencies) {\n  if (dependencies === void 0) {\n    dependencies = [value];\n  }\n\n  const valueRef = useRef(value);\n  useIsomorphicLayoutEffect(() => {\n    if (valueRef.current !== value) {\n      valueRef.current = value;\n    }\n  }, dependencies);\n  return valueRef;\n}\n\nfunction useLazyMemo(callback, dependencies) {\n  const valueRef = useRef();\n  return useMemo(() => {\n    const newValue = callback(valueRef.current);\n    valueRef.current = newValue;\n    return newValue;\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [...dependencies]);\n}\n\nfunction useNodeRef(onChange) {\n  const onChangeHandler = useEvent(onChange);\n  const node = useRef(null);\n  const setNodeRef = useCallback(element => {\n    if (element !== node.current) {\n      onChangeHandler == null ? void 0 : onChangeHandler(element, node.current);\n    }\n\n    node.current = element;\n  }, //eslint-disable-next-line\n  []);\n  return [node, setNodeRef];\n}\n\nfunction usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nlet ids = {};\nfunction useUniqueId(prefix, value) {\n  return useMemo(() => {\n    if (value) {\n      return value;\n    }\n\n    const id = ids[prefix] == null ? 0 : ids[prefix] + 1;\n    ids[prefix] = id;\n    return prefix + \"-\" + id;\n  }, [prefix, value]);\n}\n\nfunction createAdjustmentFn(modifier) {\n  return function (object) {\n    for (var _len = arguments.length, adjustments = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      adjustments[_key - 1] = arguments[_key];\n    }\n\n    return adjustments.reduce((accumulator, adjustment) => {\n      const entries = Object.entries(adjustment);\n\n      for (const [key, valueAdjustment] of entries) {\n        const value = accumulator[key];\n\n        if (value != null) {\n          accumulator[key] = value + modifier * valueAdjustment;\n        }\n      }\n\n      return accumulator;\n    }, { ...object\n    });\n  };\n}\n\nconst add = /*#__PURE__*/createAdjustmentFn(1);\nconst subtract = /*#__PURE__*/createAdjustmentFn(-1);\n\nfunction hasViewportRelativeCoordinates(event) {\n  return 'clientX' in event && 'clientY' in event;\n}\n\nfunction isKeyboardEvent(event) {\n  if (!event) {\n    return false;\n  }\n\n  const {\n    KeyboardEvent\n  } = getWindow(event.target);\n  return KeyboardEvent && event instanceof KeyboardEvent;\n}\n\nfunction isTouchEvent(event) {\n  if (!event) {\n    return false;\n  }\n\n  const {\n    TouchEvent\n  } = getWindow(event.target);\n  return TouchEvent && event instanceof TouchEvent;\n}\n\n/**\r\n * Returns the normalized x and y coordinates for mouse and touch events.\r\n */\n\nfunction getEventCoordinates(event) {\n  if (isTouchEvent(event)) {\n    if (event.touches && event.touches.length) {\n      const {\n        clientX: x,\n        clientY: y\n      } = event.touches[0];\n      return {\n        x,\n        y\n      };\n    } else if (event.changedTouches && event.changedTouches.length) {\n      const {\n        clientX: x,\n        clientY: y\n      } = event.changedTouches[0];\n      return {\n        x,\n        y\n      };\n    }\n  }\n\n  if (hasViewportRelativeCoordinates(event)) {\n    return {\n      x: event.clientX,\n      y: event.clientY\n    };\n  }\n\n  return null;\n}\n\nconst CSS = /*#__PURE__*/Object.freeze({\n  Translate: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      const {\n        x,\n        y\n      } = transform;\n      return \"translate3d(\" + (x ? Math.round(x) : 0) + \"px, \" + (y ? Math.round(y) : 0) + \"px, 0)\";\n    }\n\n  },\n  Scale: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      const {\n        scaleX,\n        scaleY\n      } = transform;\n      return \"scaleX(\" + scaleX + \") scaleY(\" + scaleY + \")\";\n    }\n\n  },\n  Transform: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      return [CSS.Translate.toString(transform), CSS.Scale.toString(transform)].join(' ');\n    }\n\n  },\n  Transition: {\n    toString(_ref) {\n      let {\n        property,\n        duration,\n        easing\n      } = _ref;\n      return property + \" \" + duration + \"ms \" + easing;\n    }\n\n  }\n});\n\nconst SELECTOR = 'a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]';\nfunction findFirstFocusableNode(element) {\n  if (element.matches(SELECTOR)) {\n    return element;\n  }\n\n  return element.querySelector(SELECTOR);\n}\n\nexport { CSS, add, canUseDOM, findFirstFocusableNode, getEventCoordinates, getOwnerDocument, getWindow, hasViewportRelativeCoordinates, isDocument, isHTMLElement, isKeyboardEvent, isNode, isSVGElement, isTouchEvent, isWindow, subtract, useCombinedRefs, useEvent, useInterval, useIsomorphicLayoutEffect, useLatestValue, useLazyMemo, useNodeRef, usePrevious, useUniqueId };\n//# sourceMappingURL=utilities.esm.js.map\n","import React, { useState, useCallback } from 'react';\n\nconst hiddenStyles = {\n  display: 'none'\n};\nfunction HiddenText(_ref) {\n  let {\n    id,\n    value\n  } = _ref;\n  return React.createElement(\"div\", {\n    id: id,\n    style: hiddenStyles\n  }, value);\n}\n\nfunction LiveRegion(_ref) {\n  let {\n    id,\n    announcement,\n    ariaLiveType = \"assertive\"\n  } = _ref;\n  // Hide element visually but keep it readable by screen readers\n  const visuallyHidden = {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: 1,\n    height: 1,\n    margin: -1,\n    border: 0,\n    padding: 0,\n    overflow: 'hidden',\n    clip: 'rect(0 0 0 0)',\n    clipPath: 'inset(100%)',\n    whiteSpace: 'nowrap'\n  };\n  return React.createElement(\"div\", {\n    id: id,\n    style: visuallyHidden,\n    role: \"status\",\n    \"aria-live\": ariaLiveType,\n    \"aria-atomic\": true\n  }, announcement);\n}\n\nfunction useAnnouncement() {\n  const [announcement, setAnnouncement] = useState('');\n  const announce = useCallback(value => {\n    if (value != null) {\n      setAnnouncement(value);\n    }\n  }, []);\n  return {\n    announce,\n    announcement\n  };\n}\n\nexport { HiddenText, LiveRegion, useAnnouncement };\n//# sourceMappingURL=accessibility.esm.js.map\n","import React, { createContext, useContext, useEffect, useState, useCallback, useMemo, useRef, memo, useReducer, cloneElement, forwardRef } from 'react';\nimport { createPortal, unstable_batchedUpdates } from 'react-dom';\nimport { useUniqueId, getEventCoordinates, getWindow, isDocument, isHTMLElement, isSVGElement, canUseDOM, isWindow, isNode, getOwnerDocument, add, isKeyboardEvent, subtract, useLazyMemo, useInterval, usePrevious, useLatestValue, useEvent, useIsomorphicLayoutEffect, useNodeRef, findFirstFocusableNode, CSS } from '@dnd-kit/utilities';\nimport { useAnnouncement, HiddenText, LiveRegion } from '@dnd-kit/accessibility';\n\nconst DndMonitorContext = /*#__PURE__*/createContext(null);\n\nfunction useDndMonitor(listener) {\n  const registerListener = useContext(DndMonitorContext);\n  useEffect(() => {\n    if (!registerListener) {\n      throw new Error('useDndMonitor must be used within a children of <DndContext>');\n    }\n\n    const unsubscribe = registerListener(listener);\n    return unsubscribe;\n  }, [listener, registerListener]);\n}\n\nfunction useDndMonitorProvider() {\n  const [listeners] = useState(() => new Set());\n  const registerListener = useCallback(listener => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  }, [listeners]);\n  const dispatch = useCallback(_ref => {\n    let {\n      type,\n      event\n    } = _ref;\n    listeners.forEach(listener => {\n      var _listener$type;\n\n      return (_listener$type = listener[type]) == null ? void 0 : _listener$type.call(listener, event);\n    });\n  }, [listeners]);\n  return [dispatch, registerListener];\n}\n\nconst defaultScreenReaderInstructions = {\n  draggable: \"\\n    To pick up a draggable item, press the space bar.\\n    While dragging, use the arrow keys to move the item.\\n    Press space again to drop the item in its new position, or press escape to cancel.\\n  \"\n};\nconst defaultAnnouncements = {\n  onDragStart(_ref) {\n    let {\n      active\n    } = _ref;\n    return \"Picked up draggable item \" + active.id + \".\";\n  },\n\n  onDragOver(_ref2) {\n    let {\n      active,\n      over\n    } = _ref2;\n\n    if (over) {\n      return \"Draggable item \" + active.id + \" was moved over droppable area \" + over.id + \".\";\n    }\n\n    return \"Draggable item \" + active.id + \" is no longer over a droppable area.\";\n  },\n\n  onDragEnd(_ref3) {\n    let {\n      active,\n      over\n    } = _ref3;\n\n    if (over) {\n      return \"Draggable item \" + active.id + \" was dropped over droppable area \" + over.id;\n    }\n\n    return \"Draggable item \" + active.id + \" was dropped.\";\n  },\n\n  onDragCancel(_ref4) {\n    let {\n      active\n    } = _ref4;\n    return \"Dragging was cancelled. Draggable item \" + active.id + \" was dropped.\";\n  }\n\n};\n\nfunction Accessibility(_ref) {\n  let {\n    announcements = defaultAnnouncements,\n    container,\n    hiddenTextDescribedById,\n    screenReaderInstructions = defaultScreenReaderInstructions\n  } = _ref;\n  const {\n    announce,\n    announcement\n  } = useAnnouncement();\n  const liveRegionId = useUniqueId(\"DndLiveRegion\");\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n  useDndMonitor(useMemo(() => ({\n    onDragStart(_ref2) {\n      let {\n        active\n      } = _ref2;\n      announce(announcements.onDragStart({\n        active\n      }));\n    },\n\n    onDragMove(_ref3) {\n      let {\n        active,\n        over\n      } = _ref3;\n\n      if (announcements.onDragMove) {\n        announce(announcements.onDragMove({\n          active,\n          over\n        }));\n      }\n    },\n\n    onDragOver(_ref4) {\n      let {\n        active,\n        over\n      } = _ref4;\n      announce(announcements.onDragOver({\n        active,\n        over\n      }));\n    },\n\n    onDragEnd(_ref5) {\n      let {\n        active,\n        over\n      } = _ref5;\n      announce(announcements.onDragEnd({\n        active,\n        over\n      }));\n    },\n\n    onDragCancel(_ref6) {\n      let {\n        active,\n        over\n      } = _ref6;\n      announce(announcements.onDragCancel({\n        active,\n        over\n      }));\n    }\n\n  }), [announce, announcements]));\n\n  if (!mounted) {\n    return null;\n  }\n\n  const markup = React.createElement(React.Fragment, null, React.createElement(HiddenText, {\n    id: hiddenTextDescribedById,\n    value: screenReaderInstructions.draggable\n  }), React.createElement(LiveRegion, {\n    id: liveRegionId,\n    announcement: announcement\n  }));\n  return container ? createPortal(markup, container) : markup;\n}\n\nvar Action;\n\n(function (Action) {\n  Action[\"DragStart\"] = \"dragStart\";\n  Action[\"DragMove\"] = \"dragMove\";\n  Action[\"DragEnd\"] = \"dragEnd\";\n  Action[\"DragCancel\"] = \"dragCancel\";\n  Action[\"DragOver\"] = \"dragOver\";\n  Action[\"RegisterDroppable\"] = \"registerDroppable\";\n  Action[\"SetDroppableDisabled\"] = \"setDroppableDisabled\";\n  Action[\"UnregisterDroppable\"] = \"unregisterDroppable\";\n})(Action || (Action = {}));\n\nfunction noop() {}\n\nfunction useSensor(sensor, options) {\n  return useMemo(() => ({\n    sensor,\n    options: options != null ? options : {}\n  }), // eslint-disable-next-line react-hooks/exhaustive-deps\n  [sensor, options]);\n}\n\nfunction useSensors() {\n  for (var _len = arguments.length, sensors = new Array(_len), _key = 0; _key < _len; _key++) {\n    sensors[_key] = arguments[_key];\n  }\n\n  return useMemo(() => [...sensors].filter(sensor => sensor != null), // eslint-disable-next-line react-hooks/exhaustive-deps\n  [...sensors]);\n}\n\nconst defaultCoordinates = /*#__PURE__*/Object.freeze({\n  x: 0,\n  y: 0\n});\n\n/**\r\n * Returns the distance between two points\r\n */\nfunction distanceBetween(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n}\n\nfunction getRelativeTransformOrigin(event, rect) {\n  const eventCoordinates = getEventCoordinates(event);\n\n  if (!eventCoordinates) {\n    return '0 0';\n  }\n\n  const transformOrigin = {\n    x: (eventCoordinates.x - rect.left) / rect.width * 100,\n    y: (eventCoordinates.y - rect.top) / rect.height * 100\n  };\n  return transformOrigin.x + \"% \" + transformOrigin.y + \"%\";\n}\n\n/**\r\n * Sort collisions from smallest to greatest value\r\n */\nfunction sortCollisionsAsc(_ref, _ref2) {\n  let {\n    data: {\n      value: a\n    }\n  } = _ref;\n  let {\n    data: {\n      value: b\n    }\n  } = _ref2;\n  return a - b;\n}\n/**\r\n * Sort collisions from greatest to smallest value\r\n */\n\nfunction sortCollisionsDesc(_ref3, _ref4) {\n  let {\n    data: {\n      value: a\n    }\n  } = _ref3;\n  let {\n    data: {\n      value: b\n    }\n  } = _ref4;\n  return b - a;\n}\n/**\r\n * Returns the coordinates of the corners of a given rectangle:\r\n * [TopLeft {x, y}, TopRight {x, y}, BottomLeft {x, y}, BottomRight {x, y}]\r\n */\n\nfunction cornersOfRectangle(_ref5) {\n  let {\n    left,\n    top,\n    height,\n    width\n  } = _ref5;\n  return [{\n    x: left,\n    y: top\n  }, {\n    x: left + width,\n    y: top\n  }, {\n    x: left,\n    y: top + height\n  }, {\n    x: left + width,\n    y: top + height\n  }];\n}\nfunction getFirstCollision(collisions, property) {\n  if (!collisions || collisions.length === 0) {\n    return null;\n  }\n\n  const [firstCollision] = collisions;\n  return property ? firstCollision[property] : firstCollision;\n}\n\n/**\r\n * Returns the coordinates of the center of a given ClientRect\r\n */\n\nfunction centerOfRectangle(rect, left, top) {\n  if (left === void 0) {\n    left = rect.left;\n  }\n\n  if (top === void 0) {\n    top = rect.top;\n  }\n\n  return {\n    x: left + rect.width * 0.5,\n    y: top + rect.height * 0.5\n  };\n}\n/**\r\n * Returns the closest rectangles from an array of rectangles to the center of a given\r\n * rectangle.\r\n */\n\n\nconst closestCenter = _ref => {\n  let {\n    collisionRect,\n    droppableRects,\n    droppableContainers\n  } = _ref;\n  const centerRect = centerOfRectangle(collisionRect, collisionRect.left, collisionRect.top);\n  const collisions = [];\n\n  for (const droppableContainer of droppableContainers) {\n    const {\n      id\n    } = droppableContainer;\n    const rect = droppableRects.get(id);\n\n    if (rect) {\n      const distBetween = distanceBetween(centerOfRectangle(rect), centerRect);\n      collisions.push({\n        id,\n        data: {\n          droppableContainer,\n          value: distBetween\n        }\n      });\n    }\n  }\n\n  return collisions.sort(sortCollisionsAsc);\n};\n\n/**\r\n * Returns the closest rectangles from an array of rectangles to the corners of\r\n * another rectangle.\r\n */\n\nconst closestCorners = _ref => {\n  let {\n    collisionRect,\n    droppableRects,\n    droppableContainers\n  } = _ref;\n  const corners = cornersOfRectangle(collisionRect);\n  const collisions = [];\n\n  for (const droppableContainer of droppableContainers) {\n    const {\n      id\n    } = droppableContainer;\n    const rect = droppableRects.get(id);\n\n    if (rect) {\n      const rectCorners = cornersOfRectangle(rect);\n      const distances = corners.reduce((accumulator, corner, index) => {\n        return accumulator + distanceBetween(rectCorners[index], corner);\n      }, 0);\n      const effectiveDistance = Number((distances / 4).toFixed(4));\n      collisions.push({\n        id,\n        data: {\n          droppableContainer,\n          value: effectiveDistance\n        }\n      });\n    }\n  }\n\n  return collisions.sort(sortCollisionsAsc);\n};\n\n/**\r\n * Returns the intersecting rectangle area between two rectangles\r\n */\n\nfunction getIntersectionRatio(entry, target) {\n  const top = Math.max(target.top, entry.top);\n  const left = Math.max(target.left, entry.left);\n  const right = Math.min(target.left + target.width, entry.left + entry.width);\n  const bottom = Math.min(target.top + target.height, entry.top + entry.height);\n  const width = right - left;\n  const height = bottom - top;\n\n  if (left < right && top < bottom) {\n    const targetArea = target.width * target.height;\n    const entryArea = entry.width * entry.height;\n    const intersectionArea = width * height;\n    const intersectionRatio = intersectionArea / (targetArea + entryArea - intersectionArea);\n    return Number(intersectionRatio.toFixed(4));\n  } // Rectangles do not overlap, or overlap has an area of zero (edge/corner overlap)\n\n\n  return 0;\n}\n/**\r\n * Returns the rectangles that has the greatest intersection area with a given\r\n * rectangle in an array of rectangles.\r\n */\n\nconst rectIntersection = _ref => {\n  let {\n    collisionRect,\n    droppableRects,\n    droppableContainers\n  } = _ref;\n  const collisions = [];\n\n  for (const droppableContainer of droppableContainers) {\n    const {\n      id\n    } = droppableContainer;\n    const rect = droppableRects.get(id);\n\n    if (rect) {\n      const intersectionRatio = getIntersectionRatio(rect, collisionRect);\n\n      if (intersectionRatio > 0) {\n        collisions.push({\n          id,\n          data: {\n            droppableContainer,\n            value: intersectionRatio\n          }\n        });\n      }\n    }\n  }\n\n  return collisions.sort(sortCollisionsDesc);\n};\n\n/**\r\n * Check if a given point is contained within a bounding rectangle\r\n */\n\nfunction isPointWithinRect(point, rect) {\n  const {\n    top,\n    left,\n    bottom,\n    right\n  } = rect;\n  return top <= point.y && point.y <= bottom && left <= point.x && point.x <= right;\n}\n/**\r\n * Returns the rectangles that the pointer is hovering over\r\n */\n\n\nconst pointerWithin = _ref => {\n  let {\n    droppableContainers,\n    droppableRects,\n    pointerCoordinates\n  } = _ref;\n\n  if (!pointerCoordinates) {\n    return [];\n  }\n\n  const collisions = [];\n\n  for (const droppableContainer of droppableContainers) {\n    const {\n      id\n    } = droppableContainer;\n    const rect = droppableRects.get(id);\n\n    if (rect && isPointWithinRect(pointerCoordinates, rect)) {\n      /* There may be more than a single rectangle intersecting\r\n       * with the pointer coordinates. In order to sort the\r\n       * colliding rectangles, we measure the distance between\r\n       * the pointer and the corners of the intersecting rectangle\r\n       */\n      const corners = cornersOfRectangle(rect);\n      const distances = corners.reduce((accumulator, corner) => {\n        return accumulator + distanceBetween(pointerCoordinates, corner);\n      }, 0);\n      const effectiveDistance = Number((distances / 4).toFixed(4));\n      collisions.push({\n        id,\n        data: {\n          droppableContainer,\n          value: effectiveDistance\n        }\n      });\n    }\n  }\n\n  return collisions.sort(sortCollisionsAsc);\n};\n\nfunction adjustScale(transform, rect1, rect2) {\n  return { ...transform,\n    scaleX: rect1 && rect2 ? rect1.width / rect2.width : 1,\n    scaleY: rect1 && rect2 ? rect1.height / rect2.height : 1\n  };\n}\n\nfunction getRectDelta(rect1, rect2) {\n  return rect1 && rect2 ? {\n    x: rect1.left - rect2.left,\n    y: rect1.top - rect2.top\n  } : defaultCoordinates;\n}\n\nfunction createRectAdjustmentFn(modifier) {\n  return function adjustClientRect(rect) {\n    for (var _len = arguments.length, adjustments = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      adjustments[_key - 1] = arguments[_key];\n    }\n\n    return adjustments.reduce((acc, adjustment) => ({ ...acc,\n      top: acc.top + modifier * adjustment.y,\n      bottom: acc.bottom + modifier * adjustment.y,\n      left: acc.left + modifier * adjustment.x,\n      right: acc.right + modifier * adjustment.x\n    }), { ...rect\n    });\n  };\n}\nconst getAdjustedRect = /*#__PURE__*/createRectAdjustmentFn(1);\n\nfunction parseTransform(transform) {\n  if (transform.startsWith('matrix3d(')) {\n    const transformArray = transform.slice(9, -1).split(/, /);\n    return {\n      x: +transformArray[12],\n      y: +transformArray[13],\n      scaleX: +transformArray[0],\n      scaleY: +transformArray[5]\n    };\n  } else if (transform.startsWith('matrix(')) {\n    const transformArray = transform.slice(7, -1).split(/, /);\n    return {\n      x: +transformArray[4],\n      y: +transformArray[5],\n      scaleX: +transformArray[0],\n      scaleY: +transformArray[3]\n    };\n  }\n\n  return null;\n}\n\nfunction inverseTransform(rect, transform, transformOrigin) {\n  const parsedTransform = parseTransform(transform);\n\n  if (!parsedTransform) {\n    return rect;\n  }\n\n  const {\n    scaleX,\n    scaleY,\n    x: translateX,\n    y: translateY\n  } = parsedTransform;\n  const x = rect.left - translateX - (1 - scaleX) * parseFloat(transformOrigin);\n  const y = rect.top - translateY - (1 - scaleY) * parseFloat(transformOrigin.slice(transformOrigin.indexOf(' ') + 1));\n  const w = scaleX ? rect.width / scaleX : rect.width;\n  const h = scaleY ? rect.height / scaleY : rect.height;\n  return {\n    width: w,\n    height: h,\n    top: y,\n    right: x + w,\n    bottom: y + h,\n    left: x\n  };\n}\n\nconst defaultOptions = {\n  ignoreTransform: false\n};\n/**\r\n * Returns the bounding client rect of an element relative to the viewport.\r\n */\n\nfunction getClientRect(element, options) {\n  if (options === void 0) {\n    options = defaultOptions;\n  }\n\n  let rect = element.getBoundingClientRect();\n\n  if (options.ignoreTransform) {\n    const {\n      transform,\n      transformOrigin\n    } = getWindow(element).getComputedStyle(element);\n\n    if (transform) {\n      rect = inverseTransform(rect, transform, transformOrigin);\n    }\n  }\n\n  const {\n    top,\n    left,\n    width,\n    height,\n    bottom,\n    right\n  } = rect;\n  return {\n    top,\n    left,\n    width,\n    height,\n    bottom,\n    right\n  };\n}\n/**\r\n * Returns the bounding client rect of an element relative to the viewport.\r\n *\r\n * @remarks\r\n * The ClientRect returned by this method does not take into account transforms\r\n * applied to the element it measures.\r\n *\r\n */\n\nfunction getTransformAgnosticClientRect(element) {\n  return getClientRect(element, {\n    ignoreTransform: true\n  });\n}\n\nfunction getWindowClientRect(element) {\n  const width = element.innerWidth;\n  const height = element.innerHeight;\n  return {\n    top: 0,\n    left: 0,\n    right: width,\n    bottom: height,\n    width,\n    height\n  };\n}\n\nfunction isFixed(node, computedStyle) {\n  if (computedStyle === void 0) {\n    computedStyle = getWindow(node).getComputedStyle(node);\n  }\n\n  return computedStyle.position === 'fixed';\n}\n\nfunction isScrollable(element, computedStyle) {\n  if (computedStyle === void 0) {\n    computedStyle = getWindow(element).getComputedStyle(element);\n  }\n\n  const overflowRegex = /(auto|scroll|overlay)/;\n  const properties = ['overflow', 'overflowX', 'overflowY'];\n  return properties.some(property => {\n    const value = computedStyle[property];\n    return typeof value === 'string' ? overflowRegex.test(value) : false;\n  });\n}\n\nfunction getScrollableAncestors(element, limit) {\n  const scrollParents = [];\n\n  function findScrollableAncestors(node) {\n    if (limit != null && scrollParents.length >= limit) {\n      return scrollParents;\n    }\n\n    if (!node) {\n      return scrollParents;\n    }\n\n    if (isDocument(node) && node.scrollingElement != null && !scrollParents.includes(node.scrollingElement)) {\n      scrollParents.push(node.scrollingElement);\n      return scrollParents;\n    }\n\n    if (!isHTMLElement(node) || isSVGElement(node)) {\n      return scrollParents;\n    }\n\n    if (scrollParents.includes(node)) {\n      return scrollParents;\n    }\n\n    const computedStyle = getWindow(element).getComputedStyle(node);\n\n    if (node !== element) {\n      if (isScrollable(node, computedStyle)) {\n        scrollParents.push(node);\n      }\n    }\n\n    if (isFixed(node, computedStyle)) {\n      return scrollParents;\n    }\n\n    return findScrollableAncestors(node.parentNode);\n  }\n\n  if (!element) {\n    return scrollParents;\n  }\n\n  return findScrollableAncestors(element);\n}\nfunction getFirstScrollableAncestor(node) {\n  const [firstScrollableAncestor] = getScrollableAncestors(node, 1);\n  return firstScrollableAncestor != null ? firstScrollableAncestor : null;\n}\n\nfunction getScrollableElement(element) {\n  if (!canUseDOM || !element) {\n    return null;\n  }\n\n  if (isWindow(element)) {\n    return element;\n  }\n\n  if (!isNode(element)) {\n    return null;\n  }\n\n  if (isDocument(element) || element === getOwnerDocument(element).scrollingElement) {\n    return window;\n  }\n\n  if (isHTMLElement(element)) {\n    return element;\n  }\n\n  return null;\n}\n\nfunction getScrollXCoordinate(element) {\n  if (isWindow(element)) {\n    return element.scrollX;\n  }\n\n  return element.scrollLeft;\n}\nfunction getScrollYCoordinate(element) {\n  if (isWindow(element)) {\n    return element.scrollY;\n  }\n\n  return element.scrollTop;\n}\nfunction getScrollCoordinates(element) {\n  return {\n    x: getScrollXCoordinate(element),\n    y: getScrollYCoordinate(element)\n  };\n}\n\nvar Direction;\n\n(function (Direction) {\n  Direction[Direction[\"Forward\"] = 1] = \"Forward\";\n  Direction[Direction[\"Backward\"] = -1] = \"Backward\";\n})(Direction || (Direction = {}));\n\nfunction isDocumentScrollingElement(element) {\n  if (!canUseDOM || !element) {\n    return false;\n  }\n\n  return element === document.scrollingElement;\n}\n\nfunction getScrollPosition(scrollingContainer) {\n  const minScroll = {\n    x: 0,\n    y: 0\n  };\n  const dimensions = isDocumentScrollingElement(scrollingContainer) ? {\n    height: window.innerHeight,\n    width: window.innerWidth\n  } : {\n    height: scrollingContainer.clientHeight,\n    width: scrollingContainer.clientWidth\n  };\n  const maxScroll = {\n    x: scrollingContainer.scrollWidth - dimensions.width,\n    y: scrollingContainer.scrollHeight - dimensions.height\n  };\n  const isTop = scrollingContainer.scrollTop <= minScroll.y;\n  const isLeft = scrollingContainer.scrollLeft <= minScroll.x;\n  const isBottom = scrollingContainer.scrollTop >= maxScroll.y;\n  const isRight = scrollingContainer.scrollLeft >= maxScroll.x;\n  return {\n    isTop,\n    isLeft,\n    isBottom,\n    isRight,\n    maxScroll,\n    minScroll\n  };\n}\n\nconst defaultThreshold = {\n  x: 0.2,\n  y: 0.2\n};\nfunction getScrollDirectionAndSpeed(scrollContainer, scrollContainerRect, _ref, acceleration, thresholdPercentage) {\n  let {\n    top,\n    left,\n    right,\n    bottom\n  } = _ref;\n\n  if (acceleration === void 0) {\n    acceleration = 10;\n  }\n\n  if (thresholdPercentage === void 0) {\n    thresholdPercentage = defaultThreshold;\n  }\n\n  const {\n    isTop,\n    isBottom,\n    isLeft,\n    isRight\n  } = getScrollPosition(scrollContainer);\n  const direction = {\n    x: 0,\n    y: 0\n  };\n  const speed = {\n    x: 0,\n    y: 0\n  };\n  const threshold = {\n    height: scrollContainerRect.height * thresholdPercentage.y,\n    width: scrollContainerRect.width * thresholdPercentage.x\n  };\n\n  if (!isTop && top <= scrollContainerRect.top + threshold.height) {\n    // Scroll Up\n    direction.y = Direction.Backward;\n    speed.y = acceleration * Math.abs((scrollContainerRect.top + threshold.height - top) / threshold.height);\n  } else if (!isBottom && bottom >= scrollContainerRect.bottom - threshold.height) {\n    // Scroll Down\n    direction.y = Direction.Forward;\n    speed.y = acceleration * Math.abs((scrollContainerRect.bottom - threshold.height - bottom) / threshold.height);\n  }\n\n  if (!isRight && right >= scrollContainerRect.right - threshold.width) {\n    // Scroll Right\n    direction.x = Direction.Forward;\n    speed.x = acceleration * Math.abs((scrollContainerRect.right - threshold.width - right) / threshold.width);\n  } else if (!isLeft && left <= scrollContainerRect.left + threshold.width) {\n    // Scroll Left\n    direction.x = Direction.Backward;\n    speed.x = acceleration * Math.abs((scrollContainerRect.left + threshold.width - left) / threshold.width);\n  }\n\n  return {\n    direction,\n    speed\n  };\n}\n\nfunction getScrollElementRect(element) {\n  if (element === document.scrollingElement) {\n    const {\n      innerWidth,\n      innerHeight\n    } = window;\n    return {\n      top: 0,\n      left: 0,\n      right: innerWidth,\n      bottom: innerHeight,\n      width: innerWidth,\n      height: innerHeight\n    };\n  }\n\n  const {\n    top,\n    left,\n    right,\n    bottom\n  } = element.getBoundingClientRect();\n  return {\n    top,\n    left,\n    right,\n    bottom,\n    width: element.clientWidth,\n    height: element.clientHeight\n  };\n}\n\nfunction getScrollOffsets(scrollableAncestors) {\n  return scrollableAncestors.reduce((acc, node) => {\n    return add(acc, getScrollCoordinates(node));\n  }, defaultCoordinates);\n}\nfunction getScrollXOffset(scrollableAncestors) {\n  return scrollableAncestors.reduce((acc, node) => {\n    return acc + getScrollXCoordinate(node);\n  }, 0);\n}\nfunction getScrollYOffset(scrollableAncestors) {\n  return scrollableAncestors.reduce((acc, node) => {\n    return acc + getScrollYCoordinate(node);\n  }, 0);\n}\n\nfunction scrollIntoViewIfNeeded(element, measure) {\n  if (measure === void 0) {\n    measure = getClientRect;\n  }\n\n  if (!element) {\n    return;\n  }\n\n  const {\n    top,\n    left,\n    bottom,\n    right\n  } = measure(element);\n  const firstScrollableAncestor = getFirstScrollableAncestor(element);\n\n  if (!firstScrollableAncestor) {\n    return;\n  }\n\n  if (bottom <= 0 || right <= 0 || top >= window.innerHeight || left >= window.innerWidth) {\n    element.scrollIntoView({\n      block: 'center',\n      inline: 'center'\n    });\n  }\n}\n\nconst properties = [['x', ['left', 'right'], getScrollXOffset], ['y', ['top', 'bottom'], getScrollYOffset]];\nclass Rect {\n  constructor(rect, element) {\n    this.rect = void 0;\n    this.width = void 0;\n    this.height = void 0;\n    this.top = void 0;\n    this.bottom = void 0;\n    this.right = void 0;\n    this.left = void 0;\n    const scrollableAncestors = getScrollableAncestors(element);\n    const scrollOffsets = getScrollOffsets(scrollableAncestors);\n    this.rect = { ...rect\n    };\n    this.width = rect.width;\n    this.height = rect.height;\n\n    for (const [axis, keys, getScrollOffset] of properties) {\n      for (const key of keys) {\n        Object.defineProperty(this, key, {\n          get: () => {\n            const currentOffsets = getScrollOffset(scrollableAncestors);\n            const scrollOffsetsDeltla = scrollOffsets[axis] - currentOffsets;\n            return this.rect[key] + scrollOffsetsDeltla;\n          },\n          enumerable: true\n        });\n      }\n    }\n\n    Object.defineProperty(this, 'rect', {\n      enumerable: false\n    });\n  }\n\n}\n\nclass Listeners {\n  constructor(target) {\n    this.target = void 0;\n    this.listeners = [];\n\n    this.removeAll = () => {\n      this.listeners.forEach(listener => {\n        var _this$target;\n\n        return (_this$target = this.target) == null ? void 0 : _this$target.removeEventListener(...listener);\n      });\n    };\n\n    this.target = target;\n  }\n\n  add(eventName, handler, options) {\n    var _this$target2;\n\n    (_this$target2 = this.target) == null ? void 0 : _this$target2.addEventListener(eventName, handler, options);\n    this.listeners.push([eventName, handler, options]);\n  }\n\n}\n\nfunction getEventListenerTarget(target) {\n  // If the `event.target` element is removed from the document events will still be targeted\n  // at it, and hence won't always bubble up to the window or document anymore.\n  // If there is any risk of an element being removed while it is being dragged,\n  // the best practice is to attach the event listeners directly to the target.\n  // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n  const {\n    EventTarget\n  } = getWindow(target);\n  return target instanceof EventTarget ? target : getOwnerDocument(target);\n}\n\nfunction hasExceededDistance(delta, measurement) {\n  const dx = Math.abs(delta.x);\n  const dy = Math.abs(delta.y);\n\n  if (typeof measurement === 'number') {\n    return Math.sqrt(dx ** 2 + dy ** 2) > measurement;\n  }\n\n  if ('x' in measurement && 'y' in measurement) {\n    return dx > measurement.x && dy > measurement.y;\n  }\n\n  if ('x' in measurement) {\n    return dx > measurement.x;\n  }\n\n  if ('y' in measurement) {\n    return dy > measurement.y;\n  }\n\n  return false;\n}\n\nvar EventName;\n\n(function (EventName) {\n  EventName[\"Click\"] = \"click\";\n  EventName[\"DragStart\"] = \"dragstart\";\n  EventName[\"Keydown\"] = \"keydown\";\n  EventName[\"ContextMenu\"] = \"contextmenu\";\n  EventName[\"Resize\"] = \"resize\";\n  EventName[\"SelectionChange\"] = \"selectionchange\";\n  EventName[\"VisibilityChange\"] = \"visibilitychange\";\n})(EventName || (EventName = {}));\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\nfunction stopPropagation(event) {\n  event.stopPropagation();\n}\n\nvar KeyboardCode;\n\n(function (KeyboardCode) {\n  KeyboardCode[\"Space\"] = \"Space\";\n  KeyboardCode[\"Down\"] = \"ArrowDown\";\n  KeyboardCode[\"Right\"] = \"ArrowRight\";\n  KeyboardCode[\"Left\"] = \"ArrowLeft\";\n  KeyboardCode[\"Up\"] = \"ArrowUp\";\n  KeyboardCode[\"Esc\"] = \"Escape\";\n  KeyboardCode[\"Enter\"] = \"Enter\";\n  KeyboardCode[\"Tab\"] = \"Tab\";\n})(KeyboardCode || (KeyboardCode = {}));\n\nconst defaultKeyboardCodes = {\n  start: [KeyboardCode.Space, KeyboardCode.Enter],\n  cancel: [KeyboardCode.Esc],\n  end: [KeyboardCode.Space, KeyboardCode.Enter, KeyboardCode.Tab]\n};\nconst defaultKeyboardCoordinateGetter = (event, _ref) => {\n  let {\n    currentCoordinates\n  } = _ref;\n\n  switch (event.code) {\n    case KeyboardCode.Right:\n      return { ...currentCoordinates,\n        x: currentCoordinates.x + 25\n      };\n\n    case KeyboardCode.Left:\n      return { ...currentCoordinates,\n        x: currentCoordinates.x - 25\n      };\n\n    case KeyboardCode.Down:\n      return { ...currentCoordinates,\n        y: currentCoordinates.y + 25\n      };\n\n    case KeyboardCode.Up:\n      return { ...currentCoordinates,\n        y: currentCoordinates.y - 25\n      };\n  }\n\n  return undefined;\n};\n\nclass KeyboardSensor {\n  constructor(props) {\n    this.props = void 0;\n    this.autoScrollEnabled = false;\n    this.referenceCoordinates = void 0;\n    this.listeners = void 0;\n    this.windowListeners = void 0;\n    this.props = props;\n    const {\n      event: {\n        target\n      }\n    } = props;\n    this.props = props;\n    this.listeners = new Listeners(getOwnerDocument(target));\n    this.windowListeners = new Listeners(getWindow(target));\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.attach();\n  }\n\n  attach() {\n    this.handleStart();\n    this.windowListeners.add(EventName.Resize, this.handleCancel);\n    this.windowListeners.add(EventName.VisibilityChange, this.handleCancel);\n    setTimeout(() => this.listeners.add(EventName.Keydown, this.handleKeyDown));\n  }\n\n  handleStart() {\n    const {\n      activeNode,\n      onStart\n    } = this.props;\n    const node = activeNode.node.current;\n\n    if (node) {\n      scrollIntoViewIfNeeded(node);\n    }\n\n    onStart(defaultCoordinates);\n  }\n\n  handleKeyDown(event) {\n    if (isKeyboardEvent(event)) {\n      const {\n        active,\n        context,\n        options\n      } = this.props;\n      const {\n        keyboardCodes = defaultKeyboardCodes,\n        coordinateGetter = defaultKeyboardCoordinateGetter,\n        scrollBehavior = 'smooth'\n      } = options;\n      const {\n        code\n      } = event;\n\n      if (keyboardCodes.end.includes(code)) {\n        this.handleEnd(event);\n        return;\n      }\n\n      if (keyboardCodes.cancel.includes(code)) {\n        this.handleCancel(event);\n        return;\n      }\n\n      const {\n        collisionRect\n      } = context.current;\n      const currentCoordinates = collisionRect ? {\n        x: collisionRect.left,\n        y: collisionRect.top\n      } : defaultCoordinates;\n\n      if (!this.referenceCoordinates) {\n        this.referenceCoordinates = currentCoordinates;\n      }\n\n      const newCoordinates = coordinateGetter(event, {\n        active,\n        context: context.current,\n        currentCoordinates\n      });\n\n      if (newCoordinates) {\n        const coordinatesDelta = subtract(newCoordinates, currentCoordinates);\n        const scrollDelta = {\n          x: 0,\n          y: 0\n        };\n        const {\n          scrollableAncestors\n        } = context.current;\n\n        for (const scrollContainer of scrollableAncestors) {\n          const direction = event.code;\n          const {\n            isTop,\n            isRight,\n            isLeft,\n            isBottom,\n            maxScroll,\n            minScroll\n          } = getScrollPosition(scrollContainer);\n          const scrollElementRect = getScrollElementRect(scrollContainer);\n          const clampedCoordinates = {\n            x: Math.min(direction === KeyboardCode.Right ? scrollElementRect.right - scrollElementRect.width / 2 : scrollElementRect.right, Math.max(direction === KeyboardCode.Right ? scrollElementRect.left : scrollElementRect.left + scrollElementRect.width / 2, newCoordinates.x)),\n            y: Math.min(direction === KeyboardCode.Down ? scrollElementRect.bottom - scrollElementRect.height / 2 : scrollElementRect.bottom, Math.max(direction === KeyboardCode.Down ? scrollElementRect.top : scrollElementRect.top + scrollElementRect.height / 2, newCoordinates.y))\n          };\n          const canScrollX = direction === KeyboardCode.Right && !isRight || direction === KeyboardCode.Left && !isLeft;\n          const canScrollY = direction === KeyboardCode.Down && !isBottom || direction === KeyboardCode.Up && !isTop;\n\n          if (canScrollX && clampedCoordinates.x !== newCoordinates.x) {\n            const newScrollCoordinates = scrollContainer.scrollLeft + coordinatesDelta.x;\n            const canScrollToNewCoordinates = direction === KeyboardCode.Right && newScrollCoordinates <= maxScroll.x || direction === KeyboardCode.Left && newScrollCoordinates >= minScroll.x;\n\n            if (canScrollToNewCoordinates && !coordinatesDelta.y) {\n              // We don't need to update coordinates, the scroll adjustment alone will trigger\n              // logic to auto-detect the new container we are over\n              scrollContainer.scrollTo({\n                left: newScrollCoordinates,\n                behavior: scrollBehavior\n              });\n              return;\n            }\n\n            if (canScrollToNewCoordinates) {\n              scrollDelta.x = scrollContainer.scrollLeft - newScrollCoordinates;\n            } else {\n              scrollDelta.x = direction === KeyboardCode.Right ? scrollContainer.scrollLeft - maxScroll.x : scrollContainer.scrollLeft - minScroll.x;\n            }\n\n            if (scrollDelta.x) {\n              scrollContainer.scrollBy({\n                left: -scrollDelta.x,\n                behavior: scrollBehavior\n              });\n            }\n\n            break;\n          } else if (canScrollY && clampedCoordinates.y !== newCoordinates.y) {\n            const newScrollCoordinates = scrollContainer.scrollTop + coordinatesDelta.y;\n            const canScrollToNewCoordinates = direction === KeyboardCode.Down && newScrollCoordinates <= maxScroll.y || direction === KeyboardCode.Up && newScrollCoordinates >= minScroll.y;\n\n            if (canScrollToNewCoordinates && !coordinatesDelta.x) {\n              // We don't need to update coordinates, the scroll adjustment alone will trigger\n              // logic to auto-detect the new container we are over\n              scrollContainer.scrollTo({\n                top: newScrollCoordinates,\n                behavior: scrollBehavior\n              });\n              return;\n            }\n\n            if (canScrollToNewCoordinates) {\n              scrollDelta.y = scrollContainer.scrollTop - newScrollCoordinates;\n            } else {\n              scrollDelta.y = direction === KeyboardCode.Down ? scrollContainer.scrollTop - maxScroll.y : scrollContainer.scrollTop - minScroll.y;\n            }\n\n            if (scrollDelta.y) {\n              scrollContainer.scrollBy({\n                top: -scrollDelta.y,\n                behavior: scrollBehavior\n              });\n            }\n\n            break;\n          }\n        }\n\n        this.handleMove(event, add(subtract(newCoordinates, this.referenceCoordinates), scrollDelta));\n      }\n    }\n  }\n\n  handleMove(event, coordinates) {\n    const {\n      onMove\n    } = this.props;\n    event.preventDefault();\n    onMove(coordinates);\n  }\n\n  handleEnd(event) {\n    const {\n      onEnd\n    } = this.props;\n    event.preventDefault();\n    this.detach();\n    onEnd();\n  }\n\n  handleCancel(event) {\n    const {\n      onCancel\n    } = this.props;\n    event.preventDefault();\n    this.detach();\n    onCancel();\n  }\n\n  detach() {\n    this.listeners.removeAll();\n    this.windowListeners.removeAll();\n  }\n\n}\nKeyboardSensor.activators = [{\n  eventName: 'onKeyDown',\n  handler: (event, _ref, _ref2) => {\n    let {\n      keyboardCodes = defaultKeyboardCodes,\n      onActivation\n    } = _ref;\n    let {\n      active\n    } = _ref2;\n    const {\n      code\n    } = event.nativeEvent;\n\n    if (keyboardCodes.start.includes(code)) {\n      const activator = active.activatorNode.current;\n\n      if (activator && event.target !== activator) {\n        return false;\n      }\n\n      event.preventDefault();\n      onActivation == null ? void 0 : onActivation({\n        event: event.nativeEvent\n      });\n      return true;\n    }\n\n    return false;\n  }\n}];\n\nfunction isDistanceConstraint(constraint) {\n  return Boolean(constraint && 'distance' in constraint);\n}\n\nfunction isDelayConstraint(constraint) {\n  return Boolean(constraint && 'delay' in constraint);\n}\n\nclass AbstractPointerSensor {\n  constructor(props, events, listenerTarget) {\n    var _getEventCoordinates;\n\n    if (listenerTarget === void 0) {\n      listenerTarget = getEventListenerTarget(props.event.target);\n    }\n\n    this.props = void 0;\n    this.events = void 0;\n    this.autoScrollEnabled = true;\n    this.document = void 0;\n    this.activated = false;\n    this.initialCoordinates = void 0;\n    this.timeoutId = null;\n    this.listeners = void 0;\n    this.documentListeners = void 0;\n    this.windowListeners = void 0;\n    this.props = props;\n    this.events = events;\n    const {\n      event\n    } = props;\n    const {\n      target\n    } = event;\n    this.props = props;\n    this.events = events;\n    this.document = getOwnerDocument(target);\n    this.documentListeners = new Listeners(this.document);\n    this.listeners = new Listeners(listenerTarget);\n    this.windowListeners = new Listeners(getWindow(target));\n    this.initialCoordinates = (_getEventCoordinates = getEventCoordinates(event)) != null ? _getEventCoordinates : defaultCoordinates;\n    this.handleStart = this.handleStart.bind(this);\n    this.handleMove = this.handleMove.bind(this);\n    this.handleEnd = this.handleEnd.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleKeydown = this.handleKeydown.bind(this);\n    this.removeTextSelection = this.removeTextSelection.bind(this);\n    this.attach();\n  }\n\n  attach() {\n    const {\n      events,\n      props: {\n        options: {\n          activationConstraint,\n          bypassActivationConstraint\n        }\n      }\n    } = this;\n    this.listeners.add(events.move.name, this.handleMove, {\n      passive: false\n    });\n    this.listeners.add(events.end.name, this.handleEnd);\n\n    if (events.cancel) {\n      this.listeners.add(events.cancel.name, this.handleCancel);\n    }\n\n    this.windowListeners.add(EventName.Resize, this.handleCancel);\n    this.windowListeners.add(EventName.DragStart, preventDefault);\n    this.windowListeners.add(EventName.VisibilityChange, this.handleCancel);\n    this.windowListeners.add(EventName.ContextMenu, preventDefault);\n    this.documentListeners.add(EventName.Keydown, this.handleKeydown);\n\n    if (activationConstraint) {\n      if (bypassActivationConstraint != null && bypassActivationConstraint({\n        event: this.props.event,\n        activeNode: this.props.activeNode,\n        options: this.props.options\n      })) {\n        return this.handleStart();\n      }\n\n      if (isDelayConstraint(activationConstraint)) {\n        this.timeoutId = setTimeout(this.handleStart, activationConstraint.delay);\n        this.handlePending(activationConstraint);\n        return;\n      }\n\n      if (isDistanceConstraint(activationConstraint)) {\n        this.handlePending(activationConstraint);\n        return;\n      }\n    }\n\n    this.handleStart();\n  }\n\n  detach() {\n    this.listeners.removeAll();\n    this.windowListeners.removeAll(); // Wait until the next event loop before removing document listeners\n    // This is necessary because we listen for `click` and `selection` events on the document\n\n    setTimeout(this.documentListeners.removeAll, 50);\n\n    if (this.timeoutId !== null) {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = null;\n    }\n  }\n\n  handlePending(constraint, offset) {\n    const {\n      active,\n      onPending\n    } = this.props;\n    onPending(active, constraint, this.initialCoordinates, offset);\n  }\n\n  handleStart() {\n    const {\n      initialCoordinates\n    } = this;\n    const {\n      onStart\n    } = this.props;\n\n    if (initialCoordinates) {\n      this.activated = true; // Stop propagation of click events once activation constraints are met\n\n      this.documentListeners.add(EventName.Click, stopPropagation, {\n        capture: true\n      }); // Remove any text selection from the document\n\n      this.removeTextSelection(); // Prevent further text selection while dragging\n\n      this.documentListeners.add(EventName.SelectionChange, this.removeTextSelection);\n      onStart(initialCoordinates);\n    }\n  }\n\n  handleMove(event) {\n    var _getEventCoordinates2;\n\n    const {\n      activated,\n      initialCoordinates,\n      props\n    } = this;\n    const {\n      onMove,\n      options: {\n        activationConstraint\n      }\n    } = props;\n\n    if (!initialCoordinates) {\n      return;\n    }\n\n    const coordinates = (_getEventCoordinates2 = getEventCoordinates(event)) != null ? _getEventCoordinates2 : defaultCoordinates;\n    const delta = subtract(initialCoordinates, coordinates); // Constraint validation\n\n    if (!activated && activationConstraint) {\n      if (isDistanceConstraint(activationConstraint)) {\n        if (activationConstraint.tolerance != null && hasExceededDistance(delta, activationConstraint.tolerance)) {\n          return this.handleCancel();\n        }\n\n        if (hasExceededDistance(delta, activationConstraint.distance)) {\n          return this.handleStart();\n        }\n      }\n\n      if (isDelayConstraint(activationConstraint)) {\n        if (hasExceededDistance(delta, activationConstraint.tolerance)) {\n          return this.handleCancel();\n        }\n      }\n\n      this.handlePending(activationConstraint, delta);\n      return;\n    }\n\n    if (event.cancelable) {\n      event.preventDefault();\n    }\n\n    onMove(coordinates);\n  }\n\n  handleEnd() {\n    const {\n      onAbort,\n      onEnd\n    } = this.props;\n    this.detach();\n\n    if (!this.activated) {\n      onAbort(this.props.active);\n    }\n\n    onEnd();\n  }\n\n  handleCancel() {\n    const {\n      onAbort,\n      onCancel\n    } = this.props;\n    this.detach();\n\n    if (!this.activated) {\n      onAbort(this.props.active);\n    }\n\n    onCancel();\n  }\n\n  handleKeydown(event) {\n    if (event.code === KeyboardCode.Esc) {\n      this.handleCancel();\n    }\n  }\n\n  removeTextSelection() {\n    var _this$document$getSel;\n\n    (_this$document$getSel = this.document.getSelection()) == null ? void 0 : _this$document$getSel.removeAllRanges();\n  }\n\n}\n\nconst events = {\n  cancel: {\n    name: 'pointercancel'\n  },\n  move: {\n    name: 'pointermove'\n  },\n  end: {\n    name: 'pointerup'\n  }\n};\nclass PointerSensor extends AbstractPointerSensor {\n  constructor(props) {\n    const {\n      event\n    } = props; // Pointer events stop firing if the target is unmounted while dragging\n    // Therefore we attach listeners to the owner document instead\n\n    const listenerTarget = getOwnerDocument(event.target);\n    super(props, events, listenerTarget);\n  }\n\n}\nPointerSensor.activators = [{\n  eventName: 'onPointerDown',\n  handler: (_ref, _ref2) => {\n    let {\n      nativeEvent: event\n    } = _ref;\n    let {\n      onActivation\n    } = _ref2;\n\n    if (!event.isPrimary || event.button !== 0) {\n      return false;\n    }\n\n    onActivation == null ? void 0 : onActivation({\n      event\n    });\n    return true;\n  }\n}];\n\nconst events$1 = {\n  move: {\n    name: 'mousemove'\n  },\n  end: {\n    name: 'mouseup'\n  }\n};\nvar MouseButton;\n\n(function (MouseButton) {\n  MouseButton[MouseButton[\"RightClick\"] = 2] = \"RightClick\";\n})(MouseButton || (MouseButton = {}));\n\nclass MouseSensor extends AbstractPointerSensor {\n  constructor(props) {\n    super(props, events$1, getOwnerDocument(props.event.target));\n  }\n\n}\nMouseSensor.activators = [{\n  eventName: 'onMouseDown',\n  handler: (_ref, _ref2) => {\n    let {\n      nativeEvent: event\n    } = _ref;\n    let {\n      onActivation\n    } = _ref2;\n\n    if (event.button === MouseButton.RightClick) {\n      return false;\n    }\n\n    onActivation == null ? void 0 : onActivation({\n      event\n    });\n    return true;\n  }\n}];\n\nconst events$2 = {\n  cancel: {\n    name: 'touchcancel'\n  },\n  move: {\n    name: 'touchmove'\n  },\n  end: {\n    name: 'touchend'\n  }\n};\nclass TouchSensor extends AbstractPointerSensor {\n  constructor(props) {\n    super(props, events$2);\n  }\n\n  static setup() {\n    // Adding a non-capture and non-passive `touchmove` listener in order\n    // to force `event.preventDefault()` calls to work in dynamically added\n    // touchmove event handlers. This is required for iOS Safari.\n    window.addEventListener(events$2.move.name, noop, {\n      capture: false,\n      passive: false\n    });\n    return function teardown() {\n      window.removeEventListener(events$2.move.name, noop);\n    }; // We create a new handler because the teardown function of another sensor\n    // could remove our event listener if we use a referentially equal listener.\n\n    function noop() {}\n  }\n\n}\nTouchSensor.activators = [{\n  eventName: 'onTouchStart',\n  handler: (_ref, _ref2) => {\n    let {\n      nativeEvent: event\n    } = _ref;\n    let {\n      onActivation\n    } = _ref2;\n    const {\n      touches\n    } = event;\n\n    if (touches.length > 1) {\n      return false;\n    }\n\n    onActivation == null ? void 0 : onActivation({\n      event\n    });\n    return true;\n  }\n}];\n\nvar AutoScrollActivator;\n\n(function (AutoScrollActivator) {\n  AutoScrollActivator[AutoScrollActivator[\"Pointer\"] = 0] = \"Pointer\";\n  AutoScrollActivator[AutoScrollActivator[\"DraggableRect\"] = 1] = \"DraggableRect\";\n})(AutoScrollActivator || (AutoScrollActivator = {}));\n\nvar TraversalOrder;\n\n(function (TraversalOrder) {\n  TraversalOrder[TraversalOrder[\"TreeOrder\"] = 0] = \"TreeOrder\";\n  TraversalOrder[TraversalOrder[\"ReversedTreeOrder\"] = 1] = \"ReversedTreeOrder\";\n})(TraversalOrder || (TraversalOrder = {}));\n\nfunction useAutoScroller(_ref) {\n  let {\n    acceleration,\n    activator = AutoScrollActivator.Pointer,\n    canScroll,\n    draggingRect,\n    enabled,\n    interval = 5,\n    order = TraversalOrder.TreeOrder,\n    pointerCoordinates,\n    scrollableAncestors,\n    scrollableAncestorRects,\n    delta,\n    threshold\n  } = _ref;\n  const scrollIntent = useScrollIntent({\n    delta,\n    disabled: !enabled\n  });\n  const [setAutoScrollInterval, clearAutoScrollInterval] = useInterval();\n  const scrollSpeed = useRef({\n    x: 0,\n    y: 0\n  });\n  const scrollDirection = useRef({\n    x: 0,\n    y: 0\n  });\n  const rect = useMemo(() => {\n    switch (activator) {\n      case AutoScrollActivator.Pointer:\n        return pointerCoordinates ? {\n          top: pointerCoordinates.y,\n          bottom: pointerCoordinates.y,\n          left: pointerCoordinates.x,\n          right: pointerCoordinates.x\n        } : null;\n\n      case AutoScrollActivator.DraggableRect:\n        return draggingRect;\n    }\n  }, [activator, draggingRect, pointerCoordinates]);\n  const scrollContainerRef = useRef(null);\n  const autoScroll = useCallback(() => {\n    const scrollContainer = scrollContainerRef.current;\n\n    if (!scrollContainer) {\n      return;\n    }\n\n    const scrollLeft = scrollSpeed.current.x * scrollDirection.current.x;\n    const scrollTop = scrollSpeed.current.y * scrollDirection.current.y;\n    scrollContainer.scrollBy(scrollLeft, scrollTop);\n  }, []);\n  const sortedScrollableAncestors = useMemo(() => order === TraversalOrder.TreeOrder ? [...scrollableAncestors].reverse() : scrollableAncestors, [order, scrollableAncestors]);\n  useEffect(() => {\n    if (!enabled || !scrollableAncestors.length || !rect) {\n      clearAutoScrollInterval();\n      return;\n    }\n\n    for (const scrollContainer of sortedScrollableAncestors) {\n      if ((canScroll == null ? void 0 : canScroll(scrollContainer)) === false) {\n        continue;\n      }\n\n      const index = scrollableAncestors.indexOf(scrollContainer);\n      const scrollContainerRect = scrollableAncestorRects[index];\n\n      if (!scrollContainerRect) {\n        continue;\n      }\n\n      const {\n        direction,\n        speed\n      } = getScrollDirectionAndSpeed(scrollContainer, scrollContainerRect, rect, acceleration, threshold);\n\n      for (const axis of ['x', 'y']) {\n        if (!scrollIntent[axis][direction[axis]]) {\n          speed[axis] = 0;\n          direction[axis] = 0;\n        }\n      }\n\n      if (speed.x > 0 || speed.y > 0) {\n        clearAutoScrollInterval();\n        scrollContainerRef.current = scrollContainer;\n        setAutoScrollInterval(autoScroll, interval);\n        scrollSpeed.current = speed;\n        scrollDirection.current = direction;\n        return;\n      }\n    }\n\n    scrollSpeed.current = {\n      x: 0,\n      y: 0\n    };\n    scrollDirection.current = {\n      x: 0,\n      y: 0\n    };\n    clearAutoScrollInterval();\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [acceleration, autoScroll, canScroll, clearAutoScrollInterval, enabled, interval, // eslint-disable-next-line react-hooks/exhaustive-deps\n  JSON.stringify(rect), // eslint-disable-next-line react-hooks/exhaustive-deps\n  JSON.stringify(scrollIntent), setAutoScrollInterval, scrollableAncestors, sortedScrollableAncestors, scrollableAncestorRects, // eslint-disable-next-line react-hooks/exhaustive-deps\n  JSON.stringify(threshold)]);\n}\nconst defaultScrollIntent = {\n  x: {\n    [Direction.Backward]: false,\n    [Direction.Forward]: false\n  },\n  y: {\n    [Direction.Backward]: false,\n    [Direction.Forward]: false\n  }\n};\n\nfunction useScrollIntent(_ref2) {\n  let {\n    delta,\n    disabled\n  } = _ref2;\n  const previousDelta = usePrevious(delta);\n  return useLazyMemo(previousIntent => {\n    if (disabled || !previousDelta || !previousIntent) {\n      // Reset scroll intent tracking when auto-scrolling is disabled\n      return defaultScrollIntent;\n    }\n\n    const direction = {\n      x: Math.sign(delta.x - previousDelta.x),\n      y: Math.sign(delta.y - previousDelta.y)\n    }; // Keep track of the user intent to scroll in each direction for both axis\n\n    return {\n      x: {\n        [Direction.Backward]: previousIntent.x[Direction.Backward] || direction.x === -1,\n        [Direction.Forward]: previousIntent.x[Direction.Forward] || direction.x === 1\n      },\n      y: {\n        [Direction.Backward]: previousIntent.y[Direction.Backward] || direction.y === -1,\n        [Direction.Forward]: previousIntent.y[Direction.Forward] || direction.y === 1\n      }\n    };\n  }, [disabled, delta, previousDelta]);\n}\n\nfunction useCachedNode(draggableNodes, id) {\n  const draggableNode = id != null ? draggableNodes.get(id) : undefined;\n  const node = draggableNode ? draggableNode.node.current : null;\n  return useLazyMemo(cachedNode => {\n    var _ref;\n\n    if (id == null) {\n      return null;\n    } // In some cases, the draggable node can unmount while dragging\n    // This is the case for virtualized lists. In those situations,\n    // we fall back to the last known value for that node.\n\n\n    return (_ref = node != null ? node : cachedNode) != null ? _ref : null;\n  }, [node, id]);\n}\n\nfunction useCombineActivators(sensors, getSyntheticHandler) {\n  return useMemo(() => sensors.reduce((accumulator, sensor) => {\n    const {\n      sensor: Sensor\n    } = sensor;\n    const sensorActivators = Sensor.activators.map(activator => ({\n      eventName: activator.eventName,\n      handler: getSyntheticHandler(activator.handler, sensor)\n    }));\n    return [...accumulator, ...sensorActivators];\n  }, []), [sensors, getSyntheticHandler]);\n}\n\nvar MeasuringStrategy;\n\n(function (MeasuringStrategy) {\n  MeasuringStrategy[MeasuringStrategy[\"Always\"] = 0] = \"Always\";\n  MeasuringStrategy[MeasuringStrategy[\"BeforeDragging\"] = 1] = \"BeforeDragging\";\n  MeasuringStrategy[MeasuringStrategy[\"WhileDragging\"] = 2] = \"WhileDragging\";\n})(MeasuringStrategy || (MeasuringStrategy = {}));\n\nvar MeasuringFrequency;\n\n(function (MeasuringFrequency) {\n  MeasuringFrequency[\"Optimized\"] = \"optimized\";\n})(MeasuringFrequency || (MeasuringFrequency = {}));\n\nconst defaultValue = /*#__PURE__*/new Map();\nfunction useDroppableMeasuring(containers, _ref) {\n  let {\n    dragging,\n    dependencies,\n    config\n  } = _ref;\n  const [queue, setQueue] = useState(null);\n  const {\n    frequency,\n    measure,\n    strategy\n  } = config;\n  const containersRef = useRef(containers);\n  const disabled = isDisabled();\n  const disabledRef = useLatestValue(disabled);\n  const measureDroppableContainers = useCallback(function (ids) {\n    if (ids === void 0) {\n      ids = [];\n    }\n\n    if (disabledRef.current) {\n      return;\n    }\n\n    setQueue(value => {\n      if (value === null) {\n        return ids;\n      }\n\n      return value.concat(ids.filter(id => !value.includes(id)));\n    });\n  }, [disabledRef]);\n  const timeoutId = useRef(null);\n  const droppableRects = useLazyMemo(previousValue => {\n    if (disabled && !dragging) {\n      return defaultValue;\n    }\n\n    if (!previousValue || previousValue === defaultValue || containersRef.current !== containers || queue != null) {\n      const map = new Map();\n\n      for (let container of containers) {\n        if (!container) {\n          continue;\n        }\n\n        if (queue && queue.length > 0 && !queue.includes(container.id) && container.rect.current) {\n          // This container does not need to be re-measured\n          map.set(container.id, container.rect.current);\n          continue;\n        }\n\n        const node = container.node.current;\n        const rect = node ? new Rect(measure(node), node) : null;\n        container.rect.current = rect;\n\n        if (rect) {\n          map.set(container.id, rect);\n        }\n      }\n\n      return map;\n    }\n\n    return previousValue;\n  }, [containers, queue, dragging, disabled, measure]);\n  useEffect(() => {\n    containersRef.current = containers;\n  }, [containers]);\n  useEffect(() => {\n    if (disabled) {\n      return;\n    }\n\n    measureDroppableContainers();\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [dragging, disabled]);\n  useEffect(() => {\n    if (queue && queue.length > 0) {\n      setQueue(null);\n    }\n  }, //eslint-disable-next-line react-hooks/exhaustive-deps\n  [JSON.stringify(queue)]);\n  useEffect(() => {\n    if (disabled || typeof frequency !== 'number' || timeoutId.current !== null) {\n      return;\n    }\n\n    timeoutId.current = setTimeout(() => {\n      measureDroppableContainers();\n      timeoutId.current = null;\n    }, frequency);\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [frequency, disabled, measureDroppableContainers, ...dependencies]);\n  return {\n    droppableRects,\n    measureDroppableContainers,\n    measuringScheduled: queue != null\n  };\n\n  function isDisabled() {\n    switch (strategy) {\n      case MeasuringStrategy.Always:\n        return false;\n\n      case MeasuringStrategy.BeforeDragging:\n        return dragging;\n\n      default:\n        return !dragging;\n    }\n  }\n}\n\nfunction useInitialValue(value, computeFn) {\n  return useLazyMemo(previousValue => {\n    if (!value) {\n      return null;\n    }\n\n    if (previousValue) {\n      return previousValue;\n    }\n\n    return typeof computeFn === 'function' ? computeFn(value) : value;\n  }, [computeFn, value]);\n}\n\nfunction useInitialRect(node, measure) {\n  return useInitialValue(node, measure);\n}\n\n/**\r\n * Returns a new MutationObserver instance.\r\n * If `MutationObserver` is undefined in the execution environment, returns `undefined`.\r\n */\n\nfunction useMutationObserver(_ref) {\n  let {\n    callback,\n    disabled\n  } = _ref;\n  const handleMutations = useEvent(callback);\n  const mutationObserver = useMemo(() => {\n    if (disabled || typeof window === 'undefined' || typeof window.MutationObserver === 'undefined') {\n      return undefined;\n    }\n\n    const {\n      MutationObserver\n    } = window;\n    return new MutationObserver(handleMutations);\n  }, [handleMutations, disabled]);\n  useEffect(() => {\n    return () => mutationObserver == null ? void 0 : mutationObserver.disconnect();\n  }, [mutationObserver]);\n  return mutationObserver;\n}\n\n/**\r\n * Returns a new ResizeObserver instance bound to the `onResize` callback.\r\n * If `ResizeObserver` is undefined in the execution environment, returns `undefined`.\r\n */\n\nfunction useResizeObserver(_ref) {\n  let {\n    callback,\n    disabled\n  } = _ref;\n  const handleResize = useEvent(callback);\n  const resizeObserver = useMemo(() => {\n    if (disabled || typeof window === 'undefined' || typeof window.ResizeObserver === 'undefined') {\n      return undefined;\n    }\n\n    const {\n      ResizeObserver\n    } = window;\n    return new ResizeObserver(handleResize);\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [disabled]);\n  useEffect(() => {\n    return () => resizeObserver == null ? void 0 : resizeObserver.disconnect();\n  }, [resizeObserver]);\n  return resizeObserver;\n}\n\nfunction defaultMeasure(element) {\n  return new Rect(getClientRect(element), element);\n}\n\nfunction useRect(element, measure, fallbackRect) {\n  if (measure === void 0) {\n    measure = defaultMeasure;\n  }\n\n  const [rect, setRect] = useState(null);\n\n  function measureRect() {\n    setRect(currentRect => {\n      if (!element) {\n        return null;\n      }\n\n      if (element.isConnected === false) {\n        var _ref;\n\n        // Fall back to last rect we measured if the element is\n        // no longer connected to the DOM.\n        return (_ref = currentRect != null ? currentRect : fallbackRect) != null ? _ref : null;\n      }\n\n      const newRect = measure(element);\n\n      if (JSON.stringify(currentRect) === JSON.stringify(newRect)) {\n        return currentRect;\n      }\n\n      return newRect;\n    });\n  }\n\n  const mutationObserver = useMutationObserver({\n    callback(records) {\n      if (!element) {\n        return;\n      }\n\n      for (const record of records) {\n        const {\n          type,\n          target\n        } = record;\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contains(element)) {\n          measureRect();\n          break;\n        }\n      }\n    }\n\n  });\n  const resizeObserver = useResizeObserver({\n    callback: measureRect\n  });\n  useIsomorphicLayoutEffect(() => {\n    measureRect();\n\n    if (element) {\n      resizeObserver == null ? void 0 : resizeObserver.observe(element);\n      mutationObserver == null ? void 0 : mutationObserver.observe(document.body, {\n        childList: true,\n        subtree: true\n      });\n    } else {\n      resizeObserver == null ? void 0 : resizeObserver.disconnect();\n      mutationObserver == null ? void 0 : mutationObserver.disconnect();\n    }\n  }, [element]);\n  return rect;\n}\n\nfunction useRectDelta(rect) {\n  const initialRect = useInitialValue(rect);\n  return getRectDelta(rect, initialRect);\n}\n\nconst defaultValue$1 = [];\nfunction useScrollableAncestors(node) {\n  const previousNode = useRef(node);\n  const ancestors = useLazyMemo(previousValue => {\n    if (!node) {\n      return defaultValue$1;\n    }\n\n    if (previousValue && previousValue !== defaultValue$1 && node && previousNode.current && node.parentNode === previousNode.current.parentNode) {\n      return previousValue;\n    }\n\n    return getScrollableAncestors(node);\n  }, [node]);\n  useEffect(() => {\n    previousNode.current = node;\n  }, [node]);\n  return ancestors;\n}\n\nfunction useScrollOffsets(elements) {\n  const [scrollCoordinates, setScrollCoordinates] = useState(null);\n  const prevElements = useRef(elements); // To-do: Throttle the handleScroll callback\n\n  const handleScroll = useCallback(event => {\n    const scrollingElement = getScrollableElement(event.target);\n\n    if (!scrollingElement) {\n      return;\n    }\n\n    setScrollCoordinates(scrollCoordinates => {\n      if (!scrollCoordinates) {\n        return null;\n      }\n\n      scrollCoordinates.set(scrollingElement, getScrollCoordinates(scrollingElement));\n      return new Map(scrollCoordinates);\n    });\n  }, []);\n  useEffect(() => {\n    const previousElements = prevElements.current;\n\n    if (elements !== previousElements) {\n      cleanup(previousElements);\n      const entries = elements.map(element => {\n        const scrollableElement = getScrollableElement(element);\n\n        if (scrollableElement) {\n          scrollableElement.addEventListener('scroll', handleScroll, {\n            passive: true\n          });\n          return [scrollableElement, getScrollCoordinates(scrollableElement)];\n        }\n\n        return null;\n      }).filter(entry => entry != null);\n      setScrollCoordinates(entries.length ? new Map(entries) : null);\n      prevElements.current = elements;\n    }\n\n    return () => {\n      cleanup(elements);\n      cleanup(previousElements);\n    };\n\n    function cleanup(elements) {\n      elements.forEach(element => {\n        const scrollableElement = getScrollableElement(element);\n        scrollableElement == null ? void 0 : scrollableElement.removeEventListener('scroll', handleScroll);\n      });\n    }\n  }, [handleScroll, elements]);\n  return useMemo(() => {\n    if (elements.length) {\n      return scrollCoordinates ? Array.from(scrollCoordinates.values()).reduce((acc, coordinates) => add(acc, coordinates), defaultCoordinates) : getScrollOffsets(elements);\n    }\n\n    return defaultCoordinates;\n  }, [elements, scrollCoordinates]);\n}\n\nfunction useScrollOffsetsDelta(scrollOffsets, dependencies) {\n  if (dependencies === void 0) {\n    dependencies = [];\n  }\n\n  const initialScrollOffsets = useRef(null);\n  useEffect(() => {\n    initialScrollOffsets.current = null;\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  dependencies);\n  useEffect(() => {\n    const hasScrollOffsets = scrollOffsets !== defaultCoordinates;\n\n    if (hasScrollOffsets && !initialScrollOffsets.current) {\n      initialScrollOffsets.current = scrollOffsets;\n    }\n\n    if (!hasScrollOffsets && initialScrollOffsets.current) {\n      initialScrollOffsets.current = null;\n    }\n  }, [scrollOffsets]);\n  return initialScrollOffsets.current ? subtract(scrollOffsets, initialScrollOffsets.current) : defaultCoordinates;\n}\n\nfunction useSensorSetup(sensors) {\n  useEffect(() => {\n    if (!canUseDOM) {\n      return;\n    }\n\n    const teardownFns = sensors.map(_ref => {\n      let {\n        sensor\n      } = _ref;\n      return sensor.setup == null ? void 0 : sensor.setup();\n    });\n    return () => {\n      for (const teardown of teardownFns) {\n        teardown == null ? void 0 : teardown();\n      }\n    };\n  }, // TO-DO: Sensors length could theoretically change which would not be a valid dependency\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  sensors.map(_ref2 => {\n    let {\n      sensor\n    } = _ref2;\n    return sensor;\n  }));\n}\n\nfunction useSyntheticListeners(listeners, id) {\n  return useMemo(() => {\n    return listeners.reduce((acc, _ref) => {\n      let {\n        eventName,\n        handler\n      } = _ref;\n\n      acc[eventName] = event => {\n        handler(event, id);\n      };\n\n      return acc;\n    }, {});\n  }, [listeners, id]);\n}\n\nfunction useWindowRect(element) {\n  return useMemo(() => element ? getWindowClientRect(element) : null, [element]);\n}\n\nconst defaultValue$2 = [];\nfunction useRects(elements, measure) {\n  if (measure === void 0) {\n    measure = getClientRect;\n  }\n\n  const [firstElement] = elements;\n  const windowRect = useWindowRect(firstElement ? getWindow(firstElement) : null);\n  const [rects, setRects] = useState(defaultValue$2);\n\n  function measureRects() {\n    setRects(() => {\n      if (!elements.length) {\n        return defaultValue$2;\n      }\n\n      return elements.map(element => isDocumentScrollingElement(element) ? windowRect : new Rect(measure(element), element));\n    });\n  }\n\n  const resizeObserver = useResizeObserver({\n    callback: measureRects\n  });\n  useIsomorphicLayoutEffect(() => {\n    resizeObserver == null ? void 0 : resizeObserver.disconnect();\n    measureRects();\n    elements.forEach(element => resizeObserver == null ? void 0 : resizeObserver.observe(element));\n  }, [elements]);\n  return rects;\n}\n\nfunction getMeasurableNode(node) {\n  if (!node) {\n    return null;\n  }\n\n  if (node.children.length > 1) {\n    return node;\n  }\n\n  const firstChild = node.children[0];\n  return isHTMLElement(firstChild) ? firstChild : node;\n}\n\nfunction useDragOverlayMeasuring(_ref) {\n  let {\n    measure\n  } = _ref;\n  const [rect, setRect] = useState(null);\n  const handleResize = useCallback(entries => {\n    for (const {\n      target\n    } of entries) {\n      if (isHTMLElement(target)) {\n        setRect(rect => {\n          const newRect = measure(target);\n          return rect ? { ...rect,\n            width: newRect.width,\n            height: newRect.height\n          } : newRect;\n        });\n        break;\n      }\n    }\n  }, [measure]);\n  const resizeObserver = useResizeObserver({\n    callback: handleResize\n  });\n  const handleNodeChange = useCallback(element => {\n    const node = getMeasurableNode(element);\n    resizeObserver == null ? void 0 : resizeObserver.disconnect();\n\n    if (node) {\n      resizeObserver == null ? void 0 : resizeObserver.observe(node);\n    }\n\n    setRect(node ? measure(node) : null);\n  }, [measure, resizeObserver]);\n  const [nodeRef, setRef] = useNodeRef(handleNodeChange);\n  return useMemo(() => ({\n    nodeRef,\n    rect,\n    setRef\n  }), [rect, nodeRef, setRef]);\n}\n\nconst defaultSensors = [{\n  sensor: PointerSensor,\n  options: {}\n}, {\n  sensor: KeyboardSensor,\n  options: {}\n}];\nconst defaultData = {\n  current: {}\n};\nconst defaultMeasuringConfiguration = {\n  draggable: {\n    measure: getTransformAgnosticClientRect\n  },\n  droppable: {\n    measure: getTransformAgnosticClientRect,\n    strategy: MeasuringStrategy.WhileDragging,\n    frequency: MeasuringFrequency.Optimized\n  },\n  dragOverlay: {\n    measure: getClientRect\n  }\n};\n\nclass DroppableContainersMap extends Map {\n  get(id) {\n    var _super$get;\n\n    return id != null ? (_super$get = super.get(id)) != null ? _super$get : undefined : undefined;\n  }\n\n  toArray() {\n    return Array.from(this.values());\n  }\n\n  getEnabled() {\n    return this.toArray().filter(_ref => {\n      let {\n        disabled\n      } = _ref;\n      return !disabled;\n    });\n  }\n\n  getNodeFor(id) {\n    var _this$get$node$curren, _this$get;\n\n    return (_this$get$node$curren = (_this$get = this.get(id)) == null ? void 0 : _this$get.node.current) != null ? _this$get$node$curren : undefined;\n  }\n\n}\n\nconst defaultPublicContext = {\n  activatorEvent: null,\n  active: null,\n  activeNode: null,\n  activeNodeRect: null,\n  collisions: null,\n  containerNodeRect: null,\n  draggableNodes: /*#__PURE__*/new Map(),\n  droppableRects: /*#__PURE__*/new Map(),\n  droppableContainers: /*#__PURE__*/new DroppableContainersMap(),\n  over: null,\n  dragOverlay: {\n    nodeRef: {\n      current: null\n    },\n    rect: null,\n    setRef: noop\n  },\n  scrollableAncestors: [],\n  scrollableAncestorRects: [],\n  measuringConfiguration: defaultMeasuringConfiguration,\n  measureDroppableContainers: noop,\n  windowRect: null,\n  measuringScheduled: false\n};\nconst defaultInternalContext = {\n  activatorEvent: null,\n  activators: [],\n  active: null,\n  activeNodeRect: null,\n  ariaDescribedById: {\n    draggable: ''\n  },\n  dispatch: noop,\n  draggableNodes: /*#__PURE__*/new Map(),\n  over: null,\n  measureDroppableContainers: noop\n};\nconst InternalContext = /*#__PURE__*/createContext(defaultInternalContext);\nconst PublicContext = /*#__PURE__*/createContext(defaultPublicContext);\n\nfunction getInitialState() {\n  return {\n    draggable: {\n      active: null,\n      initialCoordinates: {\n        x: 0,\n        y: 0\n      },\n      nodes: new Map(),\n      translate: {\n        x: 0,\n        y: 0\n      }\n    },\n    droppable: {\n      containers: new DroppableContainersMap()\n    }\n  };\n}\nfunction reducer(state, action) {\n  switch (action.type) {\n    case Action.DragStart:\n      return { ...state,\n        draggable: { ...state.draggable,\n          initialCoordinates: action.initialCoordinates,\n          active: action.active\n        }\n      };\n\n    case Action.DragMove:\n      if (state.draggable.active == null) {\n        return state;\n      }\n\n      return { ...state,\n        draggable: { ...state.draggable,\n          translate: {\n            x: action.coordinates.x - state.draggable.initialCoordinates.x,\n            y: action.coordinates.y - state.draggable.initialCoordinates.y\n          }\n        }\n      };\n\n    case Action.DragEnd:\n    case Action.DragCancel:\n      return { ...state,\n        draggable: { ...state.draggable,\n          active: null,\n          initialCoordinates: {\n            x: 0,\n            y: 0\n          },\n          translate: {\n            x: 0,\n            y: 0\n          }\n        }\n      };\n\n    case Action.RegisterDroppable:\n      {\n        const {\n          element\n        } = action;\n        const {\n          id\n        } = element;\n        const containers = new DroppableContainersMap(state.droppable.containers);\n        containers.set(id, element);\n        return { ...state,\n          droppable: { ...state.droppable,\n            containers\n          }\n        };\n      }\n\n    case Action.SetDroppableDisabled:\n      {\n        const {\n          id,\n          key,\n          disabled\n        } = action;\n        const element = state.droppable.containers.get(id);\n\n        if (!element || key !== element.key) {\n          return state;\n        }\n\n        const containers = new DroppableContainersMap(state.droppable.containers);\n        containers.set(id, { ...element,\n          disabled\n        });\n        return { ...state,\n          droppable: { ...state.droppable,\n            containers\n          }\n        };\n      }\n\n    case Action.UnregisterDroppable:\n      {\n        const {\n          id,\n          key\n        } = action;\n        const element = state.droppable.containers.get(id);\n\n        if (!element || key !== element.key) {\n          return state;\n        }\n\n        const containers = new DroppableContainersMap(state.droppable.containers);\n        containers.delete(id);\n        return { ...state,\n          droppable: { ...state.droppable,\n            containers\n          }\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n\nfunction RestoreFocus(_ref) {\n  let {\n    disabled\n  } = _ref;\n  const {\n    active,\n    activatorEvent,\n    draggableNodes\n  } = useContext(InternalContext);\n  const previousActivatorEvent = usePrevious(activatorEvent);\n  const previousActiveId = usePrevious(active == null ? void 0 : active.id); // Restore keyboard focus on the activator node\n\n  useEffect(() => {\n    if (disabled) {\n      return;\n    }\n\n    if (!activatorEvent && previousActivatorEvent && previousActiveId != null) {\n      if (!isKeyboardEvent(previousActivatorEvent)) {\n        return;\n      }\n\n      if (document.activeElement === previousActivatorEvent.target) {\n        // No need to restore focus\n        return;\n      }\n\n      const draggableNode = draggableNodes.get(previousActiveId);\n\n      if (!draggableNode) {\n        return;\n      }\n\n      const {\n        activatorNode,\n        node\n      } = draggableNode;\n\n      if (!activatorNode.current && !node.current) {\n        return;\n      }\n\n      requestAnimationFrame(() => {\n        for (const element of [activatorNode.current, node.current]) {\n          if (!element) {\n            continue;\n          }\n\n          const focusableNode = findFirstFocusableNode(element);\n\n          if (focusableNode) {\n            focusableNode.focus();\n            break;\n          }\n        }\n      });\n    }\n  }, [activatorEvent, disabled, draggableNodes, previousActiveId, previousActivatorEvent]);\n  return null;\n}\n\nfunction applyModifiers(modifiers, _ref) {\n  let {\n    transform,\n    ...args\n  } = _ref;\n  return modifiers != null && modifiers.length ? modifiers.reduce((accumulator, modifier) => {\n    return modifier({\n      transform: accumulator,\n      ...args\n    });\n  }, transform) : transform;\n}\n\nfunction useMeasuringConfiguration(config) {\n  return useMemo(() => ({\n    draggable: { ...defaultMeasuringConfiguration.draggable,\n      ...(config == null ? void 0 : config.draggable)\n    },\n    droppable: { ...defaultMeasuringConfiguration.droppable,\n      ...(config == null ? void 0 : config.droppable)\n    },\n    dragOverlay: { ...defaultMeasuringConfiguration.dragOverlay,\n      ...(config == null ? void 0 : config.dragOverlay)\n    }\n  }), // eslint-disable-next-line react-hooks/exhaustive-deps\n  [config == null ? void 0 : config.draggable, config == null ? void 0 : config.droppable, config == null ? void 0 : config.dragOverlay]);\n}\n\nfunction useLayoutShiftScrollCompensation(_ref) {\n  let {\n    activeNode,\n    measure,\n    initialRect,\n    config = true\n  } = _ref;\n  const initialized = useRef(false);\n  const {\n    x,\n    y\n  } = typeof config === 'boolean' ? {\n    x: config,\n    y: config\n  } : config;\n  useIsomorphicLayoutEffect(() => {\n    const disabled = !x && !y;\n\n    if (disabled || !activeNode) {\n      initialized.current = false;\n      return;\n    }\n\n    if (initialized.current || !initialRect) {\n      // Return early if layout shift scroll compensation was already attempted\n      // or if there is no initialRect to compare to.\n      return;\n    } // Get the most up to date node ref for the active draggable\n\n\n    const node = activeNode == null ? void 0 : activeNode.node.current;\n\n    if (!node || node.isConnected === false) {\n      // Return early if there is no attached node ref or if the node is\n      // disconnected from the document.\n      return;\n    }\n\n    const rect = measure(node);\n    const rectDelta = getRectDelta(rect, initialRect);\n\n    if (!x) {\n      rectDelta.x = 0;\n    }\n\n    if (!y) {\n      rectDelta.y = 0;\n    } // Only perform layout shift scroll compensation once\n\n\n    initialized.current = true;\n\n    if (Math.abs(rectDelta.x) > 0 || Math.abs(rectDelta.y) > 0) {\n      const firstScrollableAncestor = getFirstScrollableAncestor(node);\n\n      if (firstScrollableAncestor) {\n        firstScrollableAncestor.scrollBy({\n          top: rectDelta.y,\n          left: rectDelta.x\n        });\n      }\n    }\n  }, [activeNode, x, y, initialRect, measure]);\n}\n\nconst ActiveDraggableContext = /*#__PURE__*/createContext({ ...defaultCoordinates,\n  scaleX: 1,\n  scaleY: 1\n});\nvar Status;\n\n(function (Status) {\n  Status[Status[\"Uninitialized\"] = 0] = \"Uninitialized\";\n  Status[Status[\"Initializing\"] = 1] = \"Initializing\";\n  Status[Status[\"Initialized\"] = 2] = \"Initialized\";\n})(Status || (Status = {}));\n\nconst DndContext = /*#__PURE__*/memo(function DndContext(_ref) {\n  var _sensorContext$curren, _dragOverlay$nodeRef$, _dragOverlay$rect, _over$rect;\n\n  let {\n    id,\n    accessibility,\n    autoScroll = true,\n    children,\n    sensors = defaultSensors,\n    collisionDetection = rectIntersection,\n    measuring,\n    modifiers,\n    ...props\n  } = _ref;\n  const store = useReducer(reducer, undefined, getInitialState);\n  const [state, dispatch] = store;\n  const [dispatchMonitorEvent, registerMonitorListener] = useDndMonitorProvider();\n  const [status, setStatus] = useState(Status.Uninitialized);\n  const isInitialized = status === Status.Initialized;\n  const {\n    draggable: {\n      active: activeId,\n      nodes: draggableNodes,\n      translate\n    },\n    droppable: {\n      containers: droppableContainers\n    }\n  } = state;\n  const node = activeId != null ? draggableNodes.get(activeId) : null;\n  const activeRects = useRef({\n    initial: null,\n    translated: null\n  });\n  const active = useMemo(() => {\n    var _node$data;\n\n    return activeId != null ? {\n      id: activeId,\n      // It's possible for the active node to unmount while dragging\n      data: (_node$data = node == null ? void 0 : node.data) != null ? _node$data : defaultData,\n      rect: activeRects\n    } : null;\n  }, [activeId, node]);\n  const activeRef = useRef(null);\n  const [activeSensor, setActiveSensor] = useState(null);\n  const [activatorEvent, setActivatorEvent] = useState(null);\n  const latestProps = useLatestValue(props, Object.values(props));\n  const draggableDescribedById = useUniqueId(\"DndDescribedBy\", id);\n  const enabledDroppableContainers = useMemo(() => droppableContainers.getEnabled(), [droppableContainers]);\n  const measuringConfiguration = useMeasuringConfiguration(measuring);\n  const {\n    droppableRects,\n    measureDroppableContainers,\n    measuringScheduled\n  } = useDroppableMeasuring(enabledDroppableContainers, {\n    dragging: isInitialized,\n    dependencies: [translate.x, translate.y],\n    config: measuringConfiguration.droppable\n  });\n  const activeNode = useCachedNode(draggableNodes, activeId);\n  const activationCoordinates = useMemo(() => activatorEvent ? getEventCoordinates(activatorEvent) : null, [activatorEvent]);\n  const autoScrollOptions = getAutoScrollerOptions();\n  const initialActiveNodeRect = useInitialRect(activeNode, measuringConfiguration.draggable.measure);\n  useLayoutShiftScrollCompensation({\n    activeNode: activeId != null ? draggableNodes.get(activeId) : null,\n    config: autoScrollOptions.layoutShiftCompensation,\n    initialRect: initialActiveNodeRect,\n    measure: measuringConfiguration.draggable.measure\n  });\n  const activeNodeRect = useRect(activeNode, measuringConfiguration.draggable.measure, initialActiveNodeRect);\n  const containerNodeRect = useRect(activeNode ? activeNode.parentElement : null);\n  const sensorContext = useRef({\n    activatorEvent: null,\n    active: null,\n    activeNode,\n    collisionRect: null,\n    collisions: null,\n    droppableRects,\n    draggableNodes,\n    draggingNode: null,\n    draggingNodeRect: null,\n    droppableContainers,\n    over: null,\n    scrollableAncestors: [],\n    scrollAdjustedTranslate: null\n  });\n  const overNode = droppableContainers.getNodeFor((_sensorContext$curren = sensorContext.current.over) == null ? void 0 : _sensorContext$curren.id);\n  const dragOverlay = useDragOverlayMeasuring({\n    measure: measuringConfiguration.dragOverlay.measure\n  }); // Use the rect of the drag overlay if it is mounted\n\n  const draggingNode = (_dragOverlay$nodeRef$ = dragOverlay.nodeRef.current) != null ? _dragOverlay$nodeRef$ : activeNode;\n  const draggingNodeRect = isInitialized ? (_dragOverlay$rect = dragOverlay.rect) != null ? _dragOverlay$rect : activeNodeRect : null;\n  const usesDragOverlay = Boolean(dragOverlay.nodeRef.current && dragOverlay.rect); // The delta between the previous and new position of the draggable node\n  // is only relevant when there is no drag overlay\n\n  const nodeRectDelta = useRectDelta(usesDragOverlay ? null : activeNodeRect); // Get the window rect of the dragging node\n\n  const windowRect = useWindowRect(draggingNode ? getWindow(draggingNode) : null); // Get scrollable ancestors of the dragging node\n\n  const scrollableAncestors = useScrollableAncestors(isInitialized ? overNode != null ? overNode : activeNode : null);\n  const scrollableAncestorRects = useRects(scrollableAncestors); // Apply modifiers\n\n  const modifiedTranslate = applyModifiers(modifiers, {\n    transform: {\n      x: translate.x - nodeRectDelta.x,\n      y: translate.y - nodeRectDelta.y,\n      scaleX: 1,\n      scaleY: 1\n    },\n    activatorEvent,\n    active,\n    activeNodeRect,\n    containerNodeRect,\n    draggingNodeRect,\n    over: sensorContext.current.over,\n    overlayNodeRect: dragOverlay.rect,\n    scrollableAncestors,\n    scrollableAncestorRects,\n    windowRect\n  });\n  const pointerCoordinates = activationCoordinates ? add(activationCoordinates, translate) : null;\n  const scrollOffsets = useScrollOffsets(scrollableAncestors); // Represents the scroll delta since dragging was initiated\n\n  const scrollAdjustment = useScrollOffsetsDelta(scrollOffsets); // Represents the scroll delta since the last time the active node rect was measured\n\n  const activeNodeScrollDelta = useScrollOffsetsDelta(scrollOffsets, [activeNodeRect]);\n  const scrollAdjustedTranslate = add(modifiedTranslate, scrollAdjustment);\n  const collisionRect = draggingNodeRect ? getAdjustedRect(draggingNodeRect, modifiedTranslate) : null;\n  const collisions = active && collisionRect ? collisionDetection({\n    active,\n    collisionRect,\n    droppableRects,\n    droppableContainers: enabledDroppableContainers,\n    pointerCoordinates\n  }) : null;\n  const overId = getFirstCollision(collisions, 'id');\n  const [over, setOver] = useState(null); // When there is no drag overlay used, we need to account for the\n  // window scroll delta\n\n  const appliedTranslate = usesDragOverlay ? modifiedTranslate : add(modifiedTranslate, activeNodeScrollDelta);\n  const transform = adjustScale(appliedTranslate, (_over$rect = over == null ? void 0 : over.rect) != null ? _over$rect : null, activeNodeRect);\n  const activeSensorRef = useRef(null);\n  const instantiateSensor = useCallback((event, _ref2) => {\n    let {\n      sensor: Sensor,\n      options\n    } = _ref2;\n\n    if (activeRef.current == null) {\n      return;\n    }\n\n    const activeNode = draggableNodes.get(activeRef.current);\n\n    if (!activeNode) {\n      return;\n    }\n\n    const activatorEvent = event.nativeEvent;\n    const sensorInstance = new Sensor({\n      active: activeRef.current,\n      activeNode,\n      event: activatorEvent,\n      options,\n      // Sensors need to be instantiated with refs for arguments that change over time\n      // otherwise they are frozen in time with the stale arguments\n      context: sensorContext,\n\n      onAbort(id) {\n        const draggableNode = draggableNodes.get(id);\n\n        if (!draggableNode) {\n          return;\n        }\n\n        const {\n          onDragAbort\n        } = latestProps.current;\n        const event = {\n          id\n        };\n        onDragAbort == null ? void 0 : onDragAbort(event);\n        dispatchMonitorEvent({\n          type: 'onDragAbort',\n          event\n        });\n      },\n\n      onPending(id, constraint, initialCoordinates, offset) {\n        const draggableNode = draggableNodes.get(id);\n\n        if (!draggableNode) {\n          return;\n        }\n\n        const {\n          onDragPending\n        } = latestProps.current;\n        const event = {\n          id,\n          constraint,\n          initialCoordinates,\n          offset\n        };\n        onDragPending == null ? void 0 : onDragPending(event);\n        dispatchMonitorEvent({\n          type: 'onDragPending',\n          event\n        });\n      },\n\n      onStart(initialCoordinates) {\n        const id = activeRef.current;\n\n        if (id == null) {\n          return;\n        }\n\n        const draggableNode = draggableNodes.get(id);\n\n        if (!draggableNode) {\n          return;\n        }\n\n        const {\n          onDragStart\n        } = latestProps.current;\n        const event = {\n          activatorEvent,\n          active: {\n            id,\n            data: draggableNode.data,\n            rect: activeRects\n          }\n        };\n        unstable_batchedUpdates(() => {\n          onDragStart == null ? void 0 : onDragStart(event);\n          setStatus(Status.Initializing);\n          dispatch({\n            type: Action.DragStart,\n            initialCoordinates,\n            active: id\n          });\n          dispatchMonitorEvent({\n            type: 'onDragStart',\n            event\n          });\n          setActiveSensor(activeSensorRef.current);\n          setActivatorEvent(activatorEvent);\n        });\n      },\n\n      onMove(coordinates) {\n        dispatch({\n          type: Action.DragMove,\n          coordinates\n        });\n      },\n\n      onEnd: createHandler(Action.DragEnd),\n      onCancel: createHandler(Action.DragCancel)\n    });\n    activeSensorRef.current = sensorInstance;\n\n    function createHandler(type) {\n      return async function handler() {\n        const {\n          active,\n          collisions,\n          over,\n          scrollAdjustedTranslate\n        } = sensorContext.current;\n        let event = null;\n\n        if (active && scrollAdjustedTranslate) {\n          const {\n            cancelDrop\n          } = latestProps.current;\n          event = {\n            activatorEvent,\n            active: active,\n            collisions,\n            delta: scrollAdjustedTranslate,\n            over\n          };\n\n          if (type === Action.DragEnd && typeof cancelDrop === 'function') {\n            const shouldCancel = await Promise.resolve(cancelDrop(event));\n\n            if (shouldCancel) {\n              type = Action.DragCancel;\n            }\n          }\n        }\n\n        activeRef.current = null;\n        unstable_batchedUpdates(() => {\n          dispatch({\n            type\n          });\n          setStatus(Status.Uninitialized);\n          setOver(null);\n          setActiveSensor(null);\n          setActivatorEvent(null);\n          activeSensorRef.current = null;\n          const eventName = type === Action.DragEnd ? 'onDragEnd' : 'onDragCancel';\n\n          if (event) {\n            const handler = latestProps.current[eventName];\n            handler == null ? void 0 : handler(event);\n            dispatchMonitorEvent({\n              type: eventName,\n              event\n            });\n          }\n        });\n      };\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [draggableNodes]);\n  const bindActivatorToSensorInstantiator = useCallback((handler, sensor) => {\n    return (event, active) => {\n      const nativeEvent = event.nativeEvent;\n      const activeDraggableNode = draggableNodes.get(active);\n\n      if ( // Another sensor is already instantiating\n      activeRef.current !== null || // No active draggable\n      !activeDraggableNode || // Event has already been captured\n      nativeEvent.dndKit || nativeEvent.defaultPrevented) {\n        return;\n      }\n\n      const activationContext = {\n        active: activeDraggableNode\n      };\n      const shouldActivate = handler(event, sensor.options, activationContext);\n\n      if (shouldActivate === true) {\n        nativeEvent.dndKit = {\n          capturedBy: sensor.sensor\n        };\n        activeRef.current = active;\n        instantiateSensor(event, sensor);\n      }\n    };\n  }, [draggableNodes, instantiateSensor]);\n  const activators = useCombineActivators(sensors, bindActivatorToSensorInstantiator);\n  useSensorSetup(sensors);\n  useIsomorphicLayoutEffect(() => {\n    if (activeNodeRect && status === Status.Initializing) {\n      setStatus(Status.Initialized);\n    }\n  }, [activeNodeRect, status]);\n  useEffect(() => {\n    const {\n      onDragMove\n    } = latestProps.current;\n    const {\n      active,\n      activatorEvent,\n      collisions,\n      over\n    } = sensorContext.current;\n\n    if (!active || !activatorEvent) {\n      return;\n    }\n\n    const event = {\n      active,\n      activatorEvent,\n      collisions,\n      delta: {\n        x: scrollAdjustedTranslate.x,\n        y: scrollAdjustedTranslate.y\n      },\n      over\n    };\n    unstable_batchedUpdates(() => {\n      onDragMove == null ? void 0 : onDragMove(event);\n      dispatchMonitorEvent({\n        type: 'onDragMove',\n        event\n      });\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [scrollAdjustedTranslate.x, scrollAdjustedTranslate.y]);\n  useEffect(() => {\n    const {\n      active,\n      activatorEvent,\n      collisions,\n      droppableContainers,\n      scrollAdjustedTranslate\n    } = sensorContext.current;\n\n    if (!active || activeRef.current == null || !activatorEvent || !scrollAdjustedTranslate) {\n      return;\n    }\n\n    const {\n      onDragOver\n    } = latestProps.current;\n    const overContainer = droppableContainers.get(overId);\n    const over = overContainer && overContainer.rect.current ? {\n      id: overContainer.id,\n      rect: overContainer.rect.current,\n      data: overContainer.data,\n      disabled: overContainer.disabled\n    } : null;\n    const event = {\n      active,\n      activatorEvent,\n      collisions,\n      delta: {\n        x: scrollAdjustedTranslate.x,\n        y: scrollAdjustedTranslate.y\n      },\n      over\n    };\n    unstable_batchedUpdates(() => {\n      setOver(over);\n      onDragOver == null ? void 0 : onDragOver(event);\n      dispatchMonitorEvent({\n        type: 'onDragOver',\n        event\n      });\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [overId]);\n  useIsomorphicLayoutEffect(() => {\n    sensorContext.current = {\n      activatorEvent,\n      active,\n      activeNode,\n      collisionRect,\n      collisions,\n      droppableRects,\n      draggableNodes,\n      draggingNode,\n      draggingNodeRect,\n      droppableContainers,\n      over,\n      scrollableAncestors,\n      scrollAdjustedTranslate\n    };\n    activeRects.current = {\n      initial: draggingNodeRect,\n      translated: collisionRect\n    };\n  }, [active, activeNode, collisions, collisionRect, draggableNodes, draggingNode, draggingNodeRect, droppableRects, droppableContainers, over, scrollableAncestors, scrollAdjustedTranslate]);\n  useAutoScroller({ ...autoScrollOptions,\n    delta: translate,\n    draggingRect: collisionRect,\n    pointerCoordinates,\n    scrollableAncestors,\n    scrollableAncestorRects\n  });\n  const publicContext = useMemo(() => {\n    const context = {\n      active,\n      activeNode,\n      activeNodeRect,\n      activatorEvent,\n      collisions,\n      containerNodeRect,\n      dragOverlay,\n      draggableNodes,\n      droppableContainers,\n      droppableRects,\n      over,\n      measureDroppableContainers,\n      scrollableAncestors,\n      scrollableAncestorRects,\n      measuringConfiguration,\n      measuringScheduled,\n      windowRect\n    };\n    return context;\n  }, [active, activeNode, activeNodeRect, activatorEvent, collisions, containerNodeRect, dragOverlay, draggableNodes, droppableContainers, droppableRects, over, measureDroppableContainers, scrollableAncestors, scrollableAncestorRects, measuringConfiguration, measuringScheduled, windowRect]);\n  const internalContext = useMemo(() => {\n    const context = {\n      activatorEvent,\n      activators,\n      active,\n      activeNodeRect,\n      ariaDescribedById: {\n        draggable: draggableDescribedById\n      },\n      dispatch,\n      draggableNodes,\n      over,\n      measureDroppableContainers\n    };\n    return context;\n  }, [activatorEvent, activators, active, activeNodeRect, dispatch, draggableDescribedById, draggableNodes, over, measureDroppableContainers]);\n  return React.createElement(DndMonitorContext.Provider, {\n    value: registerMonitorListener\n  }, React.createElement(InternalContext.Provider, {\n    value: internalContext\n  }, React.createElement(PublicContext.Provider, {\n    value: publicContext\n  }, React.createElement(ActiveDraggableContext.Provider, {\n    value: transform\n  }, children)), React.createElement(RestoreFocus, {\n    disabled: (accessibility == null ? void 0 : accessibility.restoreFocus) === false\n  })), React.createElement(Accessibility, { ...accessibility,\n    hiddenTextDescribedById: draggableDescribedById\n  }));\n\n  function getAutoScrollerOptions() {\n    const activeSensorDisablesAutoscroll = (activeSensor == null ? void 0 : activeSensor.autoScrollEnabled) === false;\n    const autoScrollGloballyDisabled = typeof autoScroll === 'object' ? autoScroll.enabled === false : autoScroll === false;\n    const enabled = isInitialized && !activeSensorDisablesAutoscroll && !autoScrollGloballyDisabled;\n\n    if (typeof autoScroll === 'object') {\n      return { ...autoScroll,\n        enabled\n      };\n    }\n\n    return {\n      enabled\n    };\n  }\n});\n\nconst NullContext = /*#__PURE__*/createContext(null);\nconst defaultRole = 'button';\nconst ID_PREFIX = 'Draggable';\nfunction useDraggable(_ref) {\n  let {\n    id,\n    data,\n    disabled = false,\n    attributes\n  } = _ref;\n  const key = useUniqueId(ID_PREFIX);\n  const {\n    activators,\n    activatorEvent,\n    active,\n    activeNodeRect,\n    ariaDescribedById,\n    draggableNodes,\n    over\n  } = useContext(InternalContext);\n  const {\n    role = defaultRole,\n    roleDescription = 'draggable',\n    tabIndex = 0\n  } = attributes != null ? attributes : {};\n  const isDragging = (active == null ? void 0 : active.id) === id;\n  const transform = useContext(isDragging ? ActiveDraggableContext : NullContext);\n  const [node, setNodeRef] = useNodeRef();\n  const [activatorNode, setActivatorNodeRef] = useNodeRef();\n  const listeners = useSyntheticListeners(activators, id);\n  const dataRef = useLatestValue(data);\n  useIsomorphicLayoutEffect(() => {\n    draggableNodes.set(id, {\n      id,\n      key,\n      node,\n      activatorNode,\n      data: dataRef\n    });\n    return () => {\n      const node = draggableNodes.get(id);\n\n      if (node && node.key === key) {\n        draggableNodes.delete(id);\n      }\n    };\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [draggableNodes, id]);\n  const memoizedAttributes = useMemo(() => ({\n    role,\n    tabIndex,\n    'aria-disabled': disabled,\n    'aria-pressed': isDragging && role === defaultRole ? true : undefined,\n    'aria-roledescription': roleDescription,\n    'aria-describedby': ariaDescribedById.draggable\n  }), [disabled, role, tabIndex, isDragging, roleDescription, ariaDescribedById.draggable]);\n  return {\n    active,\n    activatorEvent,\n    activeNodeRect,\n    attributes: memoizedAttributes,\n    isDragging,\n    listeners: disabled ? undefined : listeners,\n    node,\n    over,\n    setNodeRef,\n    setActivatorNodeRef,\n    transform\n  };\n}\n\nfunction useDndContext() {\n  return useContext(PublicContext);\n}\n\nconst ID_PREFIX$1 = 'Droppable';\nconst defaultResizeObserverConfig = {\n  timeout: 25\n};\nfunction useDroppable(_ref) {\n  let {\n    data,\n    disabled = false,\n    id,\n    resizeObserverConfig\n  } = _ref;\n  const key = useUniqueId(ID_PREFIX$1);\n  const {\n    active,\n    dispatch,\n    over,\n    measureDroppableContainers\n  } = useContext(InternalContext);\n  const previous = useRef({\n    disabled\n  });\n  const resizeObserverConnected = useRef(false);\n  const rect = useRef(null);\n  const callbackId = useRef(null);\n  const {\n    disabled: resizeObserverDisabled,\n    updateMeasurementsFor,\n    timeout: resizeObserverTimeout\n  } = { ...defaultResizeObserverConfig,\n    ...resizeObserverConfig\n  };\n  const ids = useLatestValue(updateMeasurementsFor != null ? updateMeasurementsFor : id);\n  const handleResize = useCallback(() => {\n    if (!resizeObserverConnected.current) {\n      // ResizeObserver invokes the `handleResize` callback as soon as `observe` is called,\n      // assuming the element is rendered and displayed.\n      resizeObserverConnected.current = true;\n      return;\n    }\n\n    if (callbackId.current != null) {\n      clearTimeout(callbackId.current);\n    }\n\n    callbackId.current = setTimeout(() => {\n      measureDroppableContainers(Array.isArray(ids.current) ? ids.current : [ids.current]);\n      callbackId.current = null;\n    }, resizeObserverTimeout);\n  }, //eslint-disable-next-line react-hooks/exhaustive-deps\n  [resizeObserverTimeout]);\n  const resizeObserver = useResizeObserver({\n    callback: handleResize,\n    disabled: resizeObserverDisabled || !active\n  });\n  const handleNodeChange = useCallback((newElement, previousElement) => {\n    if (!resizeObserver) {\n      return;\n    }\n\n    if (previousElement) {\n      resizeObserver.unobserve(previousElement);\n      resizeObserverConnected.current = false;\n    }\n\n    if (newElement) {\n      resizeObserver.observe(newElement);\n    }\n  }, [resizeObserver]);\n  const [nodeRef, setNodeRef] = useNodeRef(handleNodeChange);\n  const dataRef = useLatestValue(data);\n  useEffect(() => {\n    if (!resizeObserver || !nodeRef.current) {\n      return;\n    }\n\n    resizeObserver.disconnect();\n    resizeObserverConnected.current = false;\n    resizeObserver.observe(nodeRef.current);\n  }, [nodeRef, resizeObserver]);\n  useEffect(() => {\n    dispatch({\n      type: Action.RegisterDroppable,\n      element: {\n        id,\n        key,\n        disabled,\n        node: nodeRef,\n        rect,\n        data: dataRef\n      }\n    });\n    return () => dispatch({\n      type: Action.UnregisterDroppable,\n      key,\n      id\n    });\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [id]);\n  useEffect(() => {\n    if (disabled !== previous.current.disabled) {\n      dispatch({\n        type: Action.SetDroppableDisabled,\n        id,\n        key,\n        disabled\n      });\n      previous.current.disabled = disabled;\n    }\n  }, [id, key, disabled, dispatch]);\n  return {\n    active,\n    rect,\n    isOver: (over == null ? void 0 : over.id) === id,\n    node: nodeRef,\n    over,\n    setNodeRef\n  };\n}\n\nfunction AnimationManager(_ref) {\n  let {\n    animation,\n    children\n  } = _ref;\n  const [clonedChildren, setClonedChildren] = useState(null);\n  const [element, setElement] = useState(null);\n  const previousChildren = usePrevious(children);\n\n  if (!children && !clonedChildren && previousChildren) {\n    setClonedChildren(previousChildren);\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    if (!element) {\n      return;\n    }\n\n    const key = clonedChildren == null ? void 0 : clonedChildren.key;\n    const id = clonedChildren == null ? void 0 : clonedChildren.props.id;\n\n    if (key == null || id == null) {\n      setClonedChildren(null);\n      return;\n    }\n\n    Promise.resolve(animation(id, element)).then(() => {\n      setClonedChildren(null);\n    });\n  }, [animation, clonedChildren, element]);\n  return React.createElement(React.Fragment, null, children, clonedChildren ? cloneElement(clonedChildren, {\n    ref: setElement\n  }) : null);\n}\n\nconst defaultTransform = {\n  x: 0,\n  y: 0,\n  scaleX: 1,\n  scaleY: 1\n};\nfunction NullifiedContextProvider(_ref) {\n  let {\n    children\n  } = _ref;\n  return React.createElement(InternalContext.Provider, {\n    value: defaultInternalContext\n  }, React.createElement(ActiveDraggableContext.Provider, {\n    value: defaultTransform\n  }, children));\n}\n\nconst baseStyles = {\n  position: 'fixed',\n  touchAction: 'none'\n};\n\nconst defaultTransition = activatorEvent => {\n  const isKeyboardActivator = isKeyboardEvent(activatorEvent);\n  return isKeyboardActivator ? 'transform 250ms ease' : undefined;\n};\n\nconst PositionedOverlay = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    as,\n    activatorEvent,\n    adjustScale,\n    children,\n    className,\n    rect,\n    style,\n    transform,\n    transition = defaultTransition\n  } = _ref;\n\n  if (!rect) {\n    return null;\n  }\n\n  const scaleAdjustedTransform = adjustScale ? transform : { ...transform,\n    scaleX: 1,\n    scaleY: 1\n  };\n  const styles = { ...baseStyles,\n    width: rect.width,\n    height: rect.height,\n    top: rect.top,\n    left: rect.left,\n    transform: CSS.Transform.toString(scaleAdjustedTransform),\n    transformOrigin: adjustScale && activatorEvent ? getRelativeTransformOrigin(activatorEvent, rect) : undefined,\n    transition: typeof transition === 'function' ? transition(activatorEvent) : transition,\n    ...style\n  };\n  return React.createElement(as, {\n    className,\n    style: styles,\n    ref\n  }, children);\n});\n\nconst defaultDropAnimationSideEffects = options => _ref => {\n  let {\n    active,\n    dragOverlay\n  } = _ref;\n  const originalStyles = {};\n  const {\n    styles,\n    className\n  } = options;\n\n  if (styles != null && styles.active) {\n    for (const [key, value] of Object.entries(styles.active)) {\n      if (value === undefined) {\n        continue;\n      }\n\n      originalStyles[key] = active.node.style.getPropertyValue(key);\n      active.node.style.setProperty(key, value);\n    }\n  }\n\n  if (styles != null && styles.dragOverlay) {\n    for (const [key, value] of Object.entries(styles.dragOverlay)) {\n      if (value === undefined) {\n        continue;\n      }\n\n      dragOverlay.node.style.setProperty(key, value);\n    }\n  }\n\n  if (className != null && className.active) {\n    active.node.classList.add(className.active);\n  }\n\n  if (className != null && className.dragOverlay) {\n    dragOverlay.node.classList.add(className.dragOverlay);\n  }\n\n  return function cleanup() {\n    for (const [key, value] of Object.entries(originalStyles)) {\n      active.node.style.setProperty(key, value);\n    }\n\n    if (className != null && className.active) {\n      active.node.classList.remove(className.active);\n    }\n  };\n};\n\nconst defaultKeyframeResolver = _ref2 => {\n  let {\n    transform: {\n      initial,\n      final\n    }\n  } = _ref2;\n  return [{\n    transform: CSS.Transform.toString(initial)\n  }, {\n    transform: CSS.Transform.toString(final)\n  }];\n};\n\nconst defaultDropAnimationConfiguration = {\n  duration: 250,\n  easing: 'ease',\n  keyframes: defaultKeyframeResolver,\n  sideEffects: /*#__PURE__*/defaultDropAnimationSideEffects({\n    styles: {\n      active: {\n        opacity: '0'\n      }\n    }\n  })\n};\nfunction useDropAnimation(_ref3) {\n  let {\n    config,\n    draggableNodes,\n    droppableContainers,\n    measuringConfiguration\n  } = _ref3;\n  return useEvent((id, node) => {\n    if (config === null) {\n      return;\n    }\n\n    const activeDraggable = draggableNodes.get(id);\n\n    if (!activeDraggable) {\n      return;\n    }\n\n    const activeNode = activeDraggable.node.current;\n\n    if (!activeNode) {\n      return;\n    }\n\n    const measurableNode = getMeasurableNode(node);\n\n    if (!measurableNode) {\n      return;\n    }\n\n    const {\n      transform\n    } = getWindow(node).getComputedStyle(node);\n    const parsedTransform = parseTransform(transform);\n\n    if (!parsedTransform) {\n      return;\n    }\n\n    const animation = typeof config === 'function' ? config : createDefaultDropAnimation(config);\n    scrollIntoViewIfNeeded(activeNode, measuringConfiguration.draggable.measure);\n    return animation({\n      active: {\n        id,\n        data: activeDraggable.data,\n        node: activeNode,\n        rect: measuringConfiguration.draggable.measure(activeNode)\n      },\n      draggableNodes,\n      dragOverlay: {\n        node,\n        rect: measuringConfiguration.dragOverlay.measure(measurableNode)\n      },\n      droppableContainers,\n      measuringConfiguration,\n      transform: parsedTransform\n    });\n  });\n}\n\nfunction createDefaultDropAnimation(options) {\n  const {\n    duration,\n    easing,\n    sideEffects,\n    keyframes\n  } = { ...defaultDropAnimationConfiguration,\n    ...options\n  };\n  return _ref4 => {\n    let {\n      active,\n      dragOverlay,\n      transform,\n      ...rest\n    } = _ref4;\n\n    if (!duration) {\n      // Do not animate if animation duration is zero.\n      return;\n    }\n\n    const delta = {\n      x: dragOverlay.rect.left - active.rect.left,\n      y: dragOverlay.rect.top - active.rect.top\n    };\n    const scale = {\n      scaleX: transform.scaleX !== 1 ? active.rect.width * transform.scaleX / dragOverlay.rect.width : 1,\n      scaleY: transform.scaleY !== 1 ? active.rect.height * transform.scaleY / dragOverlay.rect.height : 1\n    };\n    const finalTransform = {\n      x: transform.x - delta.x,\n      y: transform.y - delta.y,\n      ...scale\n    };\n    const animationKeyframes = keyframes({ ...rest,\n      active,\n      dragOverlay,\n      transform: {\n        initial: transform,\n        final: finalTransform\n      }\n    });\n    const [firstKeyframe] = animationKeyframes;\n    const lastKeyframe = animationKeyframes[animationKeyframes.length - 1];\n\n    if (JSON.stringify(firstKeyframe) === JSON.stringify(lastKeyframe)) {\n      // The start and end keyframes are the same, infer that there is no animation needed.\n      return;\n    }\n\n    const cleanup = sideEffects == null ? void 0 : sideEffects({\n      active,\n      dragOverlay,\n      ...rest\n    });\n    const animation = dragOverlay.node.animate(animationKeyframes, {\n      duration,\n      easing,\n      fill: 'forwards'\n    });\n    return new Promise(resolve => {\n      animation.onfinish = () => {\n        cleanup == null ? void 0 : cleanup();\n        resolve();\n      };\n    });\n  };\n}\n\nlet key = 0;\nfunction useKey(id) {\n  return useMemo(() => {\n    if (id == null) {\n      return;\n    }\n\n    key++;\n    return key;\n  }, [id]);\n}\n\nconst DragOverlay = /*#__PURE__*/React.memo(_ref => {\n  let {\n    adjustScale = false,\n    children,\n    dropAnimation: dropAnimationConfig,\n    style,\n    transition,\n    modifiers,\n    wrapperElement = 'div',\n    className,\n    zIndex = 999\n  } = _ref;\n  const {\n    activatorEvent,\n    active,\n    activeNodeRect,\n    containerNodeRect,\n    draggableNodes,\n    droppableContainers,\n    dragOverlay,\n    over,\n    measuringConfiguration,\n    scrollableAncestors,\n    scrollableAncestorRects,\n    windowRect\n  } = useDndContext();\n  const transform = useContext(ActiveDraggableContext);\n  const key = useKey(active == null ? void 0 : active.id);\n  const modifiedTransform = applyModifiers(modifiers, {\n    activatorEvent,\n    active,\n    activeNodeRect,\n    containerNodeRect,\n    draggingNodeRect: dragOverlay.rect,\n    over,\n    overlayNodeRect: dragOverlay.rect,\n    scrollableAncestors,\n    scrollableAncestorRects,\n    transform,\n    windowRect\n  });\n  const initialRect = useInitialValue(activeNodeRect);\n  const dropAnimation = useDropAnimation({\n    config: dropAnimationConfig,\n    draggableNodes,\n    droppableContainers,\n    measuringConfiguration\n  }); // We need to wait for the active node to be measured before connecting the drag overlay ref\n  // otherwise collisions can be computed against a mispositioned drag overlay\n\n  const ref = initialRect ? dragOverlay.setRef : undefined;\n  return React.createElement(NullifiedContextProvider, null, React.createElement(AnimationManager, {\n    animation: dropAnimation\n  }, active && key ? React.createElement(PositionedOverlay, {\n    key: key,\n    id: active.id,\n    ref: ref,\n    as: wrapperElement,\n    activatorEvent: activatorEvent,\n    adjustScale: adjustScale,\n    className: className,\n    transition: transition,\n    rect: initialRect,\n    style: {\n      zIndex,\n      ...style\n    },\n    transform: modifiedTransform\n  }, children) : null));\n});\n\nexport { AutoScrollActivator, DndContext, DragOverlay, KeyboardCode, KeyboardSensor, MeasuringFrequency, MeasuringStrategy, MouseSensor, PointerSensor, TouchSensor, TraversalOrder, applyModifiers, closestCenter, closestCorners, defaultAnnouncements, defaultCoordinates, defaultDropAnimationConfiguration as defaultDropAnimation, defaultDropAnimationSideEffects, defaultKeyboardCoordinateGetter, defaultScreenReaderInstructions, getClientRect, getFirstCollision, getScrollableAncestors, pointerWithin, rectIntersection, useDndContext, useDndMonitor, useDraggable, useDroppable, useSensor, useSensors };\n//# sourceMappingURL=core.esm.js.map\n","import React, { useMemo, useRef, useEffect, useState, useContext } from 'react';\nimport { useDndContext, getClientRect, useDroppable, useDraggable, closestCorners, getFirstCollision, getScrollableAncestors, KeyboardCode } from '@dnd-kit/core';\nimport { useUniqueId, useIsomorphicLayoutEffect, CSS, useCombinedRefs, isKeyboardEvent, subtract } from '@dnd-kit/utilities';\n\n/**\r\n * Move an array item to a different position. Returns a new array with the item moved to the new position.\r\n */\nfunction arrayMove(array, from, to) {\n  const newArray = array.slice();\n  newArray.splice(to < 0 ? newArray.length + to : to, 0, newArray.splice(from, 1)[0]);\n  return newArray;\n}\n\n/**\r\n * Swap an array item to a different position. Returns a new array with the item swapped to the new position.\r\n */\nfunction arraySwap(array, from, to) {\n  const newArray = array.slice();\n  newArray[from] = array[to];\n  newArray[to] = array[from];\n  return newArray;\n}\n\nfunction getSortedRects(items, rects) {\n  return items.reduce((accumulator, id, index) => {\n    const rect = rects.get(id);\n\n    if (rect) {\n      accumulator[index] = rect;\n    }\n\n    return accumulator;\n  }, Array(items.length));\n}\n\nfunction isValidIndex(index) {\n  return index !== null && index >= 0;\n}\n\nfunction itemsEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction normalizeDisabled(disabled) {\n  if (typeof disabled === 'boolean') {\n    return {\n      draggable: disabled,\n      droppable: disabled\n    };\n  }\n\n  return disabled;\n}\n\n// To-do: We should be calculating scale transformation\nconst defaultScale = {\n  scaleX: 1,\n  scaleY: 1\n};\nconst horizontalListSortingStrategy = _ref => {\n  var _rects$activeIndex;\n\n  let {\n    rects,\n    activeNodeRect: fallbackActiveRect,\n    activeIndex,\n    overIndex,\n    index\n  } = _ref;\n  const activeNodeRect = (_rects$activeIndex = rects[activeIndex]) != null ? _rects$activeIndex : fallbackActiveRect;\n\n  if (!activeNodeRect) {\n    return null;\n  }\n\n  const itemGap = getItemGap(rects, index, activeIndex);\n\n  if (index === activeIndex) {\n    const newIndexRect = rects[overIndex];\n\n    if (!newIndexRect) {\n      return null;\n    }\n\n    return {\n      x: activeIndex < overIndex ? newIndexRect.left + newIndexRect.width - (activeNodeRect.left + activeNodeRect.width) : newIndexRect.left - activeNodeRect.left,\n      y: 0,\n      ...defaultScale\n    };\n  }\n\n  if (index > activeIndex && index <= overIndex) {\n    return {\n      x: -activeNodeRect.width - itemGap,\n      y: 0,\n      ...defaultScale\n    };\n  }\n\n  if (index < activeIndex && index >= overIndex) {\n    return {\n      x: activeNodeRect.width + itemGap,\n      y: 0,\n      ...defaultScale\n    };\n  }\n\n  return {\n    x: 0,\n    y: 0,\n    ...defaultScale\n  };\n};\n\nfunction getItemGap(rects, index, activeIndex) {\n  const currentRect = rects[index];\n  const previousRect = rects[index - 1];\n  const nextRect = rects[index + 1];\n\n  if (!currentRect || !previousRect && !nextRect) {\n    return 0;\n  }\n\n  if (activeIndex < index) {\n    return previousRect ? currentRect.left - (previousRect.left + previousRect.width) : nextRect.left - (currentRect.left + currentRect.width);\n  }\n\n  return nextRect ? nextRect.left - (currentRect.left + currentRect.width) : currentRect.left - (previousRect.left + previousRect.width);\n}\n\nconst rectSortingStrategy = _ref => {\n  let {\n    rects,\n    activeIndex,\n    overIndex,\n    index\n  } = _ref;\n  const newRects = arrayMove(rects, overIndex, activeIndex);\n  const oldRect = rects[index];\n  const newRect = newRects[index];\n\n  if (!newRect || !oldRect) {\n    return null;\n  }\n\n  return {\n    x: newRect.left - oldRect.left,\n    y: newRect.top - oldRect.top,\n    scaleX: newRect.width / oldRect.width,\n    scaleY: newRect.height / oldRect.height\n  };\n};\n\nconst rectSwappingStrategy = _ref => {\n  let {\n    activeIndex,\n    index,\n    rects,\n    overIndex\n  } = _ref;\n  let oldRect;\n  let newRect;\n\n  if (index === activeIndex) {\n    oldRect = rects[index];\n    newRect = rects[overIndex];\n  }\n\n  if (index === overIndex) {\n    oldRect = rects[index];\n    newRect = rects[activeIndex];\n  }\n\n  if (!newRect || !oldRect) {\n    return null;\n  }\n\n  return {\n    x: newRect.left - oldRect.left,\n    y: newRect.top - oldRect.top,\n    scaleX: newRect.width / oldRect.width,\n    scaleY: newRect.height / oldRect.height\n  };\n};\n\n// To-do: We should be calculating scale transformation\nconst defaultScale$1 = {\n  scaleX: 1,\n  scaleY: 1\n};\nconst verticalListSortingStrategy = _ref => {\n  var _rects$activeIndex;\n\n  let {\n    activeIndex,\n    activeNodeRect: fallbackActiveRect,\n    index,\n    rects,\n    overIndex\n  } = _ref;\n  const activeNodeRect = (_rects$activeIndex = rects[activeIndex]) != null ? _rects$activeIndex : fallbackActiveRect;\n\n  if (!activeNodeRect) {\n    return null;\n  }\n\n  if (index === activeIndex) {\n    const overIndexRect = rects[overIndex];\n\n    if (!overIndexRect) {\n      return null;\n    }\n\n    return {\n      x: 0,\n      y: activeIndex < overIndex ? overIndexRect.top + overIndexRect.height - (activeNodeRect.top + activeNodeRect.height) : overIndexRect.top - activeNodeRect.top,\n      ...defaultScale$1\n    };\n  }\n\n  const itemGap = getItemGap$1(rects, index, activeIndex);\n\n  if (index > activeIndex && index <= overIndex) {\n    return {\n      x: 0,\n      y: -activeNodeRect.height - itemGap,\n      ...defaultScale$1\n    };\n  }\n\n  if (index < activeIndex && index >= overIndex) {\n    return {\n      x: 0,\n      y: activeNodeRect.height + itemGap,\n      ...defaultScale$1\n    };\n  }\n\n  return {\n    x: 0,\n    y: 0,\n    ...defaultScale$1\n  };\n};\n\nfunction getItemGap$1(clientRects, index, activeIndex) {\n  const currentRect = clientRects[index];\n  const previousRect = clientRects[index - 1];\n  const nextRect = clientRects[index + 1];\n\n  if (!currentRect) {\n    return 0;\n  }\n\n  if (activeIndex < index) {\n    return previousRect ? currentRect.top - (previousRect.top + previousRect.height) : nextRect ? nextRect.top - (currentRect.top + currentRect.height) : 0;\n  }\n\n  return nextRect ? nextRect.top - (currentRect.top + currentRect.height) : previousRect ? currentRect.top - (previousRect.top + previousRect.height) : 0;\n}\n\nconst ID_PREFIX = 'Sortable';\nconst Context = /*#__PURE__*/React.createContext({\n  activeIndex: -1,\n  containerId: ID_PREFIX,\n  disableTransforms: false,\n  items: [],\n  overIndex: -1,\n  useDragOverlay: false,\n  sortedRects: [],\n  strategy: rectSortingStrategy,\n  disabled: {\n    draggable: false,\n    droppable: false\n  }\n});\nfunction SortableContext(_ref) {\n  let {\n    children,\n    id,\n    items: userDefinedItems,\n    strategy = rectSortingStrategy,\n    disabled: disabledProp = false\n  } = _ref;\n  const {\n    active,\n    dragOverlay,\n    droppableRects,\n    over,\n    measureDroppableContainers\n  } = useDndContext();\n  const containerId = useUniqueId(ID_PREFIX, id);\n  const useDragOverlay = Boolean(dragOverlay.rect !== null);\n  const items = useMemo(() => userDefinedItems.map(item => typeof item === 'object' && 'id' in item ? item.id : item), [userDefinedItems]);\n  const isDragging = active != null;\n  const activeIndex = active ? items.indexOf(active.id) : -1;\n  const overIndex = over ? items.indexOf(over.id) : -1;\n  const previousItemsRef = useRef(items);\n  const itemsHaveChanged = !itemsEqual(items, previousItemsRef.current);\n  const disableTransforms = overIndex !== -1 && activeIndex === -1 || itemsHaveChanged;\n  const disabled = normalizeDisabled(disabledProp);\n  useIsomorphicLayoutEffect(() => {\n    if (itemsHaveChanged && isDragging) {\n      measureDroppableContainers(items);\n    }\n  }, [itemsHaveChanged, items, isDragging, measureDroppableContainers]);\n  useEffect(() => {\n    previousItemsRef.current = items;\n  }, [items]);\n  const contextValue = useMemo(() => ({\n    activeIndex,\n    containerId,\n    disabled,\n    disableTransforms,\n    items,\n    overIndex,\n    useDragOverlay,\n    sortedRects: getSortedRects(items, droppableRects),\n    strategy\n  }), // eslint-disable-next-line react-hooks/exhaustive-deps\n  [activeIndex, containerId, disabled.draggable, disabled.droppable, disableTransforms, items, overIndex, droppableRects, useDragOverlay, strategy]);\n  return React.createElement(Context.Provider, {\n    value: contextValue\n  }, children);\n}\n\nconst defaultNewIndexGetter = _ref => {\n  let {\n    id,\n    items,\n    activeIndex,\n    overIndex\n  } = _ref;\n  return arrayMove(items, activeIndex, overIndex).indexOf(id);\n};\nconst defaultAnimateLayoutChanges = _ref2 => {\n  let {\n    containerId,\n    isSorting,\n    wasDragging,\n    index,\n    items,\n    newIndex,\n    previousItems,\n    previousContainerId,\n    transition\n  } = _ref2;\n\n  if (!transition || !wasDragging) {\n    return false;\n  }\n\n  if (previousItems !== items && index === newIndex) {\n    return false;\n  }\n\n  if (isSorting) {\n    return true;\n  }\n\n  return newIndex !== index && containerId === previousContainerId;\n};\nconst defaultTransition = {\n  duration: 200,\n  easing: 'ease'\n};\nconst transitionProperty = 'transform';\nconst disabledTransition = /*#__PURE__*/CSS.Transition.toString({\n  property: transitionProperty,\n  duration: 0,\n  easing: 'linear'\n});\nconst defaultAttributes = {\n  roleDescription: 'sortable'\n};\n\n/*\r\n * When the index of an item changes while sorting,\r\n * we need to temporarily disable the transforms\r\n */\n\nfunction useDerivedTransform(_ref) {\n  let {\n    disabled,\n    index,\n    node,\n    rect\n  } = _ref;\n  const [derivedTransform, setDerivedtransform] = useState(null);\n  const previousIndex = useRef(index);\n  useIsomorphicLayoutEffect(() => {\n    if (!disabled && index !== previousIndex.current && node.current) {\n      const initial = rect.current;\n\n      if (initial) {\n        const current = getClientRect(node.current, {\n          ignoreTransform: true\n        });\n        const delta = {\n          x: initial.left - current.left,\n          y: initial.top - current.top,\n          scaleX: initial.width / current.width,\n          scaleY: initial.height / current.height\n        };\n\n        if (delta.x || delta.y) {\n          setDerivedtransform(delta);\n        }\n      }\n    }\n\n    if (index !== previousIndex.current) {\n      previousIndex.current = index;\n    }\n  }, [disabled, index, node, rect]);\n  useEffect(() => {\n    if (derivedTransform) {\n      setDerivedtransform(null);\n    }\n  }, [derivedTransform]);\n  return derivedTransform;\n}\n\nfunction useSortable(_ref) {\n  let {\n    animateLayoutChanges = defaultAnimateLayoutChanges,\n    attributes: userDefinedAttributes,\n    disabled: localDisabled,\n    data: customData,\n    getNewIndex = defaultNewIndexGetter,\n    id,\n    strategy: localStrategy,\n    resizeObserverConfig,\n    transition = defaultTransition\n  } = _ref;\n  const {\n    items,\n    containerId,\n    activeIndex,\n    disabled: globalDisabled,\n    disableTransforms,\n    sortedRects,\n    overIndex,\n    useDragOverlay,\n    strategy: globalStrategy\n  } = useContext(Context);\n  const disabled = normalizeLocalDisabled(localDisabled, globalDisabled);\n  const index = items.indexOf(id);\n  const data = useMemo(() => ({\n    sortable: {\n      containerId,\n      index,\n      items\n    },\n    ...customData\n  }), [containerId, customData, index, items]);\n  const itemsAfterCurrentSortable = useMemo(() => items.slice(items.indexOf(id)), [items, id]);\n  const {\n    rect,\n    node,\n    isOver,\n    setNodeRef: setDroppableNodeRef\n  } = useDroppable({\n    id,\n    data,\n    disabled: disabled.droppable,\n    resizeObserverConfig: {\n      updateMeasurementsFor: itemsAfterCurrentSortable,\n      ...resizeObserverConfig\n    }\n  });\n  const {\n    active,\n    activatorEvent,\n    activeNodeRect,\n    attributes,\n    setNodeRef: setDraggableNodeRef,\n    listeners,\n    isDragging,\n    over,\n    setActivatorNodeRef,\n    transform\n  } = useDraggable({\n    id,\n    data,\n    attributes: { ...defaultAttributes,\n      ...userDefinedAttributes\n    },\n    disabled: disabled.draggable\n  });\n  const setNodeRef = useCombinedRefs(setDroppableNodeRef, setDraggableNodeRef);\n  const isSorting = Boolean(active);\n  const displaceItem = isSorting && !disableTransforms && isValidIndex(activeIndex) && isValidIndex(overIndex);\n  const shouldDisplaceDragSource = !useDragOverlay && isDragging;\n  const dragSourceDisplacement = shouldDisplaceDragSource && displaceItem ? transform : null;\n  const strategy = localStrategy != null ? localStrategy : globalStrategy;\n  const finalTransform = displaceItem ? dragSourceDisplacement != null ? dragSourceDisplacement : strategy({\n    rects: sortedRects,\n    activeNodeRect,\n    activeIndex,\n    overIndex,\n    index\n  }) : null;\n  const newIndex = isValidIndex(activeIndex) && isValidIndex(overIndex) ? getNewIndex({\n    id,\n    items,\n    activeIndex,\n    overIndex\n  }) : index;\n  const activeId = active == null ? void 0 : active.id;\n  const previous = useRef({\n    activeId,\n    items,\n    newIndex,\n    containerId\n  });\n  const itemsHaveChanged = items !== previous.current.items;\n  const shouldAnimateLayoutChanges = animateLayoutChanges({\n    active,\n    containerId,\n    isDragging,\n    isSorting,\n    id,\n    index,\n    items,\n    newIndex: previous.current.newIndex,\n    previousItems: previous.current.items,\n    previousContainerId: previous.current.containerId,\n    transition,\n    wasDragging: previous.current.activeId != null\n  });\n  const derivedTransform = useDerivedTransform({\n    disabled: !shouldAnimateLayoutChanges,\n    index,\n    node,\n    rect\n  });\n  useEffect(() => {\n    if (isSorting && previous.current.newIndex !== newIndex) {\n      previous.current.newIndex = newIndex;\n    }\n\n    if (containerId !== previous.current.containerId) {\n      previous.current.containerId = containerId;\n    }\n\n    if (items !== previous.current.items) {\n      previous.current.items = items;\n    }\n  }, [isSorting, newIndex, containerId, items]);\n  useEffect(() => {\n    if (activeId === previous.current.activeId) {\n      return;\n    }\n\n    if (activeId != null && previous.current.activeId == null) {\n      previous.current.activeId = activeId;\n      return;\n    }\n\n    const timeoutId = setTimeout(() => {\n      previous.current.activeId = activeId;\n    }, 50);\n    return () => clearTimeout(timeoutId);\n  }, [activeId]);\n  return {\n    active,\n    activeIndex,\n    attributes,\n    data,\n    rect,\n    index,\n    newIndex,\n    items,\n    isOver,\n    isSorting,\n    isDragging,\n    listeners,\n    node,\n    overIndex,\n    over,\n    setNodeRef,\n    setActivatorNodeRef,\n    setDroppableNodeRef,\n    setDraggableNodeRef,\n    transform: derivedTransform != null ? derivedTransform : finalTransform,\n    transition: getTransition()\n  };\n\n  function getTransition() {\n    if ( // Temporarily disable transitions for a single frame to set up derived transforms\n    derivedTransform || // Or to prevent items jumping to back to their \"new\" position when items change\n    itemsHaveChanged && previous.current.newIndex === index) {\n      return disabledTransition;\n    }\n\n    if (shouldDisplaceDragSource && !isKeyboardEvent(activatorEvent) || !transition) {\n      return undefined;\n    }\n\n    if (isSorting || shouldAnimateLayoutChanges) {\n      return CSS.Transition.toString({ ...transition,\n        property: transitionProperty\n      });\n    }\n\n    return undefined;\n  }\n}\n\nfunction normalizeLocalDisabled(localDisabled, globalDisabled) {\n  var _localDisabled$dragga, _localDisabled$droppa;\n\n  if (typeof localDisabled === 'boolean') {\n    return {\n      draggable: localDisabled,\n      // Backwards compatibility\n      droppable: false\n    };\n  }\n\n  return {\n    draggable: (_localDisabled$dragga = localDisabled == null ? void 0 : localDisabled.draggable) != null ? _localDisabled$dragga : globalDisabled.draggable,\n    droppable: (_localDisabled$droppa = localDisabled == null ? void 0 : localDisabled.droppable) != null ? _localDisabled$droppa : globalDisabled.droppable\n  };\n}\n\nfunction hasSortableData(entry) {\n  if (!entry) {\n    return false;\n  }\n\n  const data = entry.data.current;\n\n  if (data && 'sortable' in data && typeof data.sortable === 'object' && 'containerId' in data.sortable && 'items' in data.sortable && 'index' in data.sortable) {\n    return true;\n  }\n\n  return false;\n}\n\nconst directions = [KeyboardCode.Down, KeyboardCode.Right, KeyboardCode.Up, KeyboardCode.Left];\nconst sortableKeyboardCoordinates = (event, _ref) => {\n  let {\n    context: {\n      active,\n      collisionRect,\n      droppableRects,\n      droppableContainers,\n      over,\n      scrollableAncestors\n    }\n  } = _ref;\n\n  if (directions.includes(event.code)) {\n    event.preventDefault();\n\n    if (!active || !collisionRect) {\n      return;\n    }\n\n    const filteredContainers = [];\n    droppableContainers.getEnabled().forEach(entry => {\n      if (!entry || entry != null && entry.disabled) {\n        return;\n      }\n\n      const rect = droppableRects.get(entry.id);\n\n      if (!rect) {\n        return;\n      }\n\n      switch (event.code) {\n        case KeyboardCode.Down:\n          if (collisionRect.top < rect.top) {\n            filteredContainers.push(entry);\n          }\n\n          break;\n\n        case KeyboardCode.Up:\n          if (collisionRect.top > rect.top) {\n            filteredContainers.push(entry);\n          }\n\n          break;\n\n        case KeyboardCode.Left:\n          if (collisionRect.left > rect.left) {\n            filteredContainers.push(entry);\n          }\n\n          break;\n\n        case KeyboardCode.Right:\n          if (collisionRect.left < rect.left) {\n            filteredContainers.push(entry);\n          }\n\n          break;\n      }\n    });\n    const collisions = closestCorners({\n      active,\n      collisionRect: collisionRect,\n      droppableRects,\n      droppableContainers: filteredContainers,\n      pointerCoordinates: null\n    });\n    let closestId = getFirstCollision(collisions, 'id');\n\n    if (closestId === (over == null ? void 0 : over.id) && collisions.length > 1) {\n      closestId = collisions[1].id;\n    }\n\n    if (closestId != null) {\n      const activeDroppable = droppableContainers.get(active.id);\n      const newDroppable = droppableContainers.get(closestId);\n      const newRect = newDroppable ? droppableRects.get(newDroppable.id) : null;\n      const newNode = newDroppable == null ? void 0 : newDroppable.node.current;\n\n      if (newNode && newRect && activeDroppable && newDroppable) {\n        const newScrollAncestors = getScrollableAncestors(newNode);\n        const hasDifferentScrollAncestors = newScrollAncestors.some((element, index) => scrollableAncestors[index] !== element);\n        const hasSameContainer = isSameContainer(activeDroppable, newDroppable);\n        const isAfterActive = isAfter(activeDroppable, newDroppable);\n        const offset = hasDifferentScrollAncestors || !hasSameContainer ? {\n          x: 0,\n          y: 0\n        } : {\n          x: isAfterActive ? collisionRect.width - newRect.width : 0,\n          y: isAfterActive ? collisionRect.height - newRect.height : 0\n        };\n        const rectCoordinates = {\n          x: newRect.left,\n          y: newRect.top\n        };\n        const newCoordinates = offset.x && offset.y ? rectCoordinates : subtract(rectCoordinates, offset);\n        return newCoordinates;\n      }\n    }\n  }\n\n  return undefined;\n};\n\nfunction isSameContainer(a, b) {\n  if (!hasSortableData(a) || !hasSortableData(b)) {\n    return false;\n  }\n\n  return a.data.current.sortable.containerId === b.data.current.sortable.containerId;\n}\n\nfunction isAfter(a, b) {\n  if (!hasSortableData(a) || !hasSortableData(b)) {\n    return false;\n  }\n\n  if (!isSameContainer(a, b)) {\n    return false;\n  }\n\n  return a.data.current.sortable.index < b.data.current.sortable.index;\n}\n\nexport { SortableContext, arrayMove, arraySwap, defaultAnimateLayoutChanges, defaultNewIndexGetter, hasSortableData, horizontalListSortingStrategy, rectSortingStrategy, rectSwappingStrategy, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy };\n//# sourceMappingURL=sortable.esm.js.map\n","export type CardChangeType = 'column' | 'title' | 'description' | 'labels';\n\nexport interface CardChange {\n  type: CardChangeType;\n  timestamp: string;\n  // For column changes\n  columnId?: string;\n  columnTitle?: string;\n  // For field changes\n  from?: string;\n  to?: string;\n}\n\nexport interface ChecklistItem {\n  id: string;\n  text: string;\n  completed: boolean;\n}\n\nexport type ColumnColor = 'default' | 'yellow' | 'orange' | 'purple' | 'blue' | 'green' | 'red' | 'pink';\n\n// Card colors reuse the same palette as columns\nexport type CardColor = ColumnColor;\n\nexport type PrStatus = 'passing' | 'failing' | 'pending';\n\nexport interface KanbanCard {\n  id: string;\n  title: string;\n  summary?: string; // Short one-liner for Change Log cards\n  description?: string;\n  labels?: string[];\n  checklist?: ChecklistItem[];\n  planFile?: string; // Path to plan file, e.g., 'docs/plans/11-framer-motion.md'\n  color?: CardColor;\n  prStatus?: PrStatus; // CI status for cards in \"In Review\" column\n  createdAt: string;\n  updatedAt?: string;\n  history?: CardChange[];\n}\n\nexport const COLUMN_COLORS: Record<ColumnColor, { label: string; bg: string; border: string; dot: string }> = {\n  default: { label: 'Default', bg: 'bg-muted/50', border: 'border-border', dot: 'bg-gray-400' },\n  yellow: { label: 'Investigating', bg: 'bg-yellow-500/10', border: 'border-yellow-500/30', dot: 'bg-yellow-500' },\n  orange: { label: 'Identified', bg: 'bg-orange-500/10', border: 'border-orange-500/30', dot: 'bg-orange-500' },\n  purple: { label: 'Fixing', bg: 'bg-purple-500/10', border: 'border-purple-500/30', dot: 'bg-purple-500' },\n  blue: { label: 'Monitoring', bg: 'bg-blue-500/10', border: 'border-blue-500/30', dot: 'bg-blue-500' },\n  green: { label: 'Resolved', bg: 'bg-green-500/10', border: 'border-green-500/30', dot: 'bg-green-500' },\n  red: { label: 'Critical', bg: 'bg-red-500/10', border: 'border-red-500/30', dot: 'bg-red-500' },\n  pink: { label: 'Review', bg: 'bg-pink-500/10', border: 'border-pink-500/30', dot: 'bg-pink-500' },\n};\n\n// Card colors use the same config as columns\nexport const CARD_COLORS = COLUMN_COLORS;\n\nexport interface KanbanColumn {\n  id: string;\n  title: string;\n  description?: string;\n  color?: ColumnColor;\n  cards: KanbanCard[];\n}\n\nexport interface KanbanBoard {\n  schemaVersion: number;\n  id: string;\n  title: string;\n  columns: KanbanColumn[];\n  createdAt: string;\n  updatedAt: string;\n}\n\n// Board data is now loaded from JSON at runtime\n// See src/data/roadmap-board.json\n\nexport function generateId(): string {\n  return Math.random().toString(36).substring(2, 9);\n}\n","import { useState, useEffect } from 'react';\nimport type { PrStatus } from '@/types/kanban';\n\nconst REPO_OWNER = 'Dbochman';\nconst REPO_NAME = 'personal-website';\nconst CACHE_TTL = 2 * 60 * 1000; // 2 minutes\n\ninterface CacheEntry {\n  status: PrStatus | null;\n  timestamp: number;\n}\n\ninterface CheckRun {\n  status: 'queued' | 'in_progress' | 'completed';\n  conclusion: 'success' | 'failure' | 'neutral' | 'cancelled' | 'skipped' | 'timed_out' | 'action_required' | null;\n}\n\ninterface CheckRunsResponse {\n  total_count: number;\n  check_runs: CheckRun[];\n}\n\ninterface PrResponse {\n  head: {\n    sha: string;\n  };\n}\n\n// Module-level cache shared across all hook instances\nconst cache = new Map<number, CacheEntry>();\n\ninterface CacheResult {\n  hit: boolean;\n  status: PrStatus | null;\n}\n\nfunction getCachedStatus(prNumber: number): CacheResult {\n  const entry = cache.get(prNumber);\n  if (!entry) return { hit: false, status: null };\n\n  const isExpired = Date.now() - entry.timestamp > CACHE_TTL;\n  if (isExpired) {\n    cache.delete(prNumber);\n    return { hit: false, status: null };\n  }\n\n  // Cache hit - status may be null (meaning \"no CI status available\")\n  return { hit: true, status: entry.status };\n}\n\nfunction setCachedStatus(prNumber: number, status: PrStatus | null): void {\n  cache.set(prNumber, { status, timestamp: Date.now() });\n}\n\nasync function fetchPrStatus(prNumber: number): Promise<PrStatus | null> {\n  try {\n    // First, get the PR to find the head SHA\n    const prResponse = await fetch(\n      `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/pulls/${prNumber}`,\n      {\n        headers: {\n          'Accept': 'application/vnd.github.v3+json',\n        },\n      }\n    );\n\n    if (!prResponse.ok) {\n      if (prResponse.status === 404) {\n        // PR not found - hide indicator rather than show misleading status\n        return null;\n      }\n      if (prResponse.status === 403) {\n        console.warn('GitHub API rate limit reached');\n      }\n      // Rate limited or other error - hide indicator\n      return null;\n    }\n\n    const prData: PrResponse = await prResponse.json();\n    const sha = prData.head.sha;\n\n    // Now fetch the check runs for that commit\n    const checksResponse = await fetch(\n      `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/commits/${sha}/check-runs`,\n      {\n        headers: {\n          'Accept': 'application/vnd.github.v3+json',\n        },\n      }\n    );\n\n    if (!checksResponse.ok) {\n      // Error fetching checks - hide indicator\n      return null;\n    }\n\n    const checksData: CheckRunsResponse = await checksResponse.json();\n\n    if (checksData.total_count === 0) {\n      // No checks configured - hide indicator\n      return null;\n    }\n\n    // Determine overall status\n    const hasFailure = checksData.check_runs.some(\n      (run) => run.conclusion === 'failure' || run.conclusion === 'timed_out'\n    );\n    if (hasFailure) {\n      return 'failing';\n    }\n\n    const hasPending = checksData.check_runs.some(\n      (run) => run.status === 'queued' || run.status === 'in_progress'\n    );\n    if (hasPending) {\n      return 'pending';\n    }\n\n    // All checks completed successfully (success, neutral, skipped)\n    return 'passing';\n  } catch (error) {\n    console.error('Error fetching PR status:', error);\n    // Network error - hide indicator\n    return null;\n  }\n}\n\nexport interface UsePrStatusResult {\n  status: PrStatus | null;\n  loading: boolean;\n}\n\nexport function usePrStatus(prNumber: number | null): UsePrStatusResult {\n  const [status, setStatus] = useState<PrStatus | null>(() => {\n    if (prNumber === null) return null;\n    const cached = getCachedStatus(prNumber);\n    return cached.hit ? cached.status : null;\n  });\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (prNumber === null) {\n      setStatus(null);\n      setLoading(false);\n      return;\n    }\n\n    // Check cache first - null statuses are also cached to prevent repeated API calls\n    const cached = getCachedStatus(prNumber);\n    if (cached.hit) {\n      setStatus(cached.status);\n      setLoading(false);\n      return;\n    }\n\n    // Fetch from API\n    let cancelled = false;\n    setLoading(true);\n\n    fetchPrStatus(prNumber).then((newStatus) => {\n      if (!cancelled) {\n        // Cache the result even if null (means \"no CI status available\")\n        setCachedStatus(prNumber, newStatus);\n        setStatus(newStatus);\n        setLoading(false);\n      }\n    });\n\n    return () => {\n      cancelled = true;\n    };\n  }, [prNumber]);\n\n  return { status, loading };\n}\n","import { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { Card } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Pencil, CheckSquare, FileText, ExternalLink, CheckCircle, XCircle, Clock, Loader2, GitMerge, Link2 } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport type { KanbanCard as KanbanCardType } from '@/types/kanban';\nimport { CARD_COLORS } from '@/types/kanban';\nimport { usePrStatus } from '@/hooks/usePrStatus';\n\nconst REPO_URL = 'https://github.com/Dbochman/personal-website';\n\n// Check if label is a single PR reference (not a range) and extract PR number\nfunction parsePrLabel(label: string): number | null {\n  // Only match single PRs like \"PR #123\", not ranges like \"PR #88-92\"\n  const match = label.match(/^PR #(\\d+)$/);\n  return match ? parseInt(match[1], 10) : null;\n}\n\n// Get the first PR number from labels\nfunction getFirstPrNumber(labels?: string[]): number | null {\n  if (!labels) return null;\n  for (const label of labels) {\n    const prNumber = parsePrLabel(label);\n    if (prNumber) return prNumber;\n  }\n  return null;\n}\n\n// Check if any label contains a PR reference (single or range)\nfunction hasPrLabel(labels?: string[]): boolean {\n  if (!labels) return false;\n  return labels.some((label) => label.startsWith('PR #'));\n}\n\ninterface KanbanCardProps {\n  card: KanbanCardType;\n  columnId?: string;\n  onEdit?: (card: KanbanCardType, scrollTo?: string) => void;\n  isDragOverlay?: boolean;\n}\n\nexport function KanbanCard({ card, columnId, onEdit, isDragOverlay = false }: KanbanCardProps) {\n  // Disable sortable for drag overlay to prevent duplicate draggable registration\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({ id: card.id, disabled: isDragOverlay });\n\n  const isChangelog = columnId === 'changelog';\n  const isInReview = columnId === 'in-review';\n\n  // Only fetch dynamic status for cards in \"In Review\" column without hardcoded prStatus\n  // Skip fetching for drag overlay to avoid duplicate requests\n  const prNumber = isInReview && !card.prStatus && !isDragOverlay ? getFirstPrNumber(card.labels) : null;\n  const { status: dynamicStatus, loading: statusLoading } = usePrStatus(prNumber);\n  const displayStatus = card.prStatus ?? dynamicStatus;\n\n  const style = isDragOverlay ? undefined : {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n\n  const colorConfig = card.color ? CARD_COLORS[card.color] : null;\n\n  // Don't apply sortable props to drag overlay - it's just a visual clone\n  const sortableProps = isDragOverlay ? {} : { ref: setNodeRef, ...attributes, ...listeners };\n\n  return (\n    <Card\n      style={style}\n      className={cn(\n        'p-3 border shadow-xs cursor-grab active:cursor-grabbing touch-none group relative',\n        colorConfig ? colorConfig.bg : 'bg-background',\n        colorConfig && colorConfig.border,\n        isDragging && 'opacity-50',\n        isDragOverlay && 'shadow-lg rotate-3'\n      )}\n      {...sortableProps}\n    >\n      {/* Action buttons - top right */}\n      <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10 flex gap-1\">\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            const url = new URL(window.location.href);\n            const boardId = url.searchParams.get('board') || 'roadmap';\n            url.search = `?board=${boardId}&card=${card.id}`;\n            navigator.clipboard.writeText(url.toString());\n          }}\n          onPointerDown={(e) => e.stopPropagation()}\n          className=\"text-muted-foreground hover:text-foreground p-1 rounded hover:bg-muted\"\n          aria-label={`Copy link to ${card.title}`}\n          title=\"Copy card link\"\n        >\n          <Link2 className=\"w-3.5 h-3.5\" />\n        </button>\n        {onEdit && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onEdit(card);\n            }}\n            onPointerDown={(e) => e.stopPropagation()}\n            className=\"text-muted-foreground hover:text-foreground p-1 rounded hover:bg-muted\"\n            aria-label={`Edit ${card.title}`}\n          >\n            <Pencil className=\"w-3.5 h-3.5\" />\n          </button>\n        )}\n      </div>\n\n      <div className=\"pr-6\">\n        <p className=\"font-medium text-sm wrap-break-word\">{card.title}</p>\n        {(card.summary || card.description) && (\n          <p className=\"text-xs text-muted-foreground mt-1 wrap-break-word\">\n            {card.summary || card.description}\n          </p>\n        )}\n        {card.labels && card.labels.length > 0 && (\n          <div className=\"flex flex-wrap gap-1 mt-2\">\n            {card.labels.map((label) => {\n              const prNumber = parsePrLabel(label);\n              if (prNumber) {\n                return (\n                  <a\n                    key={label}\n                    href={`${REPO_URL}/pull/${prNumber}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    onClick={(e) => e.stopPropagation()}\n                    onPointerDown={(e) => e.stopPropagation()}\n                    className=\"inline-flex\"\n                  >\n                    <Badge variant=\"secondary\" className=\"text-xs px-1.5 py-0 hover:bg-primary/20 transition-colors cursor-pointer\">\n                      {label}\n                      <ExternalLink className=\"w-2.5 h-2.5 ml-1 opacity-60\" />\n                    </Badge>\n                  </a>\n                );\n              }\n              return (\n                <Badge key={label} variant=\"secondary\" className=\"text-xs px-1.5 py-0\">\n                  {label}\n                </Badge>\n              );\n            })}\n          </div>\n        )}\n        {(card.checklist?.length || card.planFile || displayStatus || statusLoading || (isChangelog && hasPrLabel(card.labels))) && (\n          <div className=\"flex items-center gap-3 mt-2 text-xs text-muted-foreground\">\n            {isChangelog && hasPrLabel(card.labels) && (\n              <div className=\"flex items-center gap-1\" title=\"Merged\">\n                <GitMerge className=\"w-3.5 h-3.5 text-purple-500\" />\n              </div>\n            )}\n            {!isChangelog && statusLoading && (\n              <div className=\"flex items-center gap-1\" title=\"Checking CI status...\">\n                <Loader2 className=\"w-3.5 h-3.5 text-muted-foreground animate-spin\" />\n              </div>\n            )}\n            {!isChangelog && !statusLoading && displayStatus && (\n              <div className=\"flex items-center gap-1\" title={`CI: ${displayStatus}`}>\n                {displayStatus === 'passing' && (\n                  <CheckCircle className=\"w-3.5 h-3.5 text-green-500\" />\n                )}\n                {displayStatus === 'failing' && (\n                  <XCircle className=\"w-3.5 h-3.5 text-red-500\" />\n                )}\n                {displayStatus === 'pending' && (\n                  <Clock className=\"w-3.5 h-3.5 text-yellow-500\" />\n                )}\n              </div>\n            )}\n            {card.checklist && card.checklist.length > 0 && (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onEdit?.(card, 'checklist');\n                }}\n                onPointerDown={(e) => e.stopPropagation()}\n                className=\"flex items-center gap-1 hover:text-primary transition-colors\"\n                title=\"View checklist\"\n              >\n                <CheckSquare className=\"w-3 h-3\" />\n                <span>\n                  {card.checklist.filter((item) => item.completed).length}/{card.checklist.length}\n                </span>\n              </button>\n            )}\n            {card.planFile && (\n              <a\n                href={`${REPO_URL}/blob/main/${card.planFile}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                onClick={(e) => e.stopPropagation()}\n                onPointerDown={(e) => e.stopPropagation()}\n                className=\"flex items-center gap-1 hover:text-primary transition-colors\"\n                title=\"View plan document\"\n              >\n                <FileText className=\"w-3 h-3\" />\n              </a>\n            )}\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n}\n","import { useState, useMemo } from 'react';\nimport { useDroppable } from '@dnd-kit/core';\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { KanbanCard } from './KanbanCard';\nimport { Button } from '@/components/ui/button';\nimport { Plus, MoreHorizontal, Trash2, Pencil, ArrowUpDown, ArrowUp, ArrowDown, ScrollText } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport type { KanbanColumn as KanbanColumnType, KanbanCard as KanbanCardType } from '@/types/kanban';\nimport { COLUMN_COLORS } from '@/types/kanban';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\n\ntype SortDirection = 'none' | 'asc' | 'desc';\n\nconst CHANGELOG_MAX_CARDS = 7;\n\n// Map size labels to numeric values for sorting\nfunction getSizeValue(labels?: string[]): number {\n  if (!labels) return 50;\n  for (const label of labels) {\n    const lower = label.toLowerCase();\n    if (lower === 'small') return 10;\n    if (lower === 'small-medium') return 25;\n    if (lower === 'medium') return 50;\n    if (lower === 'medium-large') return 75;\n    if (lower === 'large') return 100;\n  }\n  return 50; // default to medium\n}\n\ninterface KanbanColumnProps {\n  column: KanbanColumnType;\n  boardId: string;\n  onAddCard: (columnId: string) => void;\n  onEditCard: (card: KanbanCardType, scrollTo?: string) => void;\n  onEditColumn: (columnId: string) => void;\n  onDeleteColumn: (columnId: string) => void;\n}\n\nexport function KanbanColumn({\n  column,\n  boardId,\n  onAddCard,\n  onEditCard,\n  onEditColumn,\n  onDeleteColumn,\n}: KanbanColumnProps) {\n  const { setNodeRef, isOver } = useDroppable({ id: column.id });\n  const [sortDirection, setSortDirection] = useState<SortDirection>('none');\n\n  const isChangelog = column.id === 'changelog';\n  const hasMoreCards = isChangelog && column.cards.length > CHANGELOG_MAX_CARDS;\n\n  const sortedCards = useMemo(() => {\n    let cards = column.cards;\n\n    // Limit changelog to max cards\n    if (isChangelog && cards.length > CHANGELOG_MAX_CARDS) {\n      cards = cards.slice(0, CHANGELOG_MAX_CARDS);\n    }\n\n    if (sortDirection === 'none') return cards;\n    return [...cards].sort((a, b) => {\n      const aVal = getSizeValue(a.labels);\n      const bVal = getSizeValue(b.labels);\n      return sortDirection === 'asc' ? aVal - bVal : bVal - aVal;\n    });\n  }, [column.cards, sortDirection, isChangelog]);\n\n  const toggleSort = () => {\n    setSortDirection((prev) => {\n      if (prev === 'none') return 'asc';\n      if (prev === 'asc') return 'desc';\n      return 'none';\n    });\n  };\n\n  const SortIcon = sortDirection === 'asc' ? ArrowUp : sortDirection === 'desc' ? ArrowDown : ArrowUpDown;\n  const colorConfig = COLUMN_COLORS[column.color || 'default'];\n\n  return (\n    <div\n      className={cn(\n        'shrink-0 w-64 rounded-lg p-3 border',\n        colorConfig.bg,\n        colorConfig.border,\n        isOver && 'ring-2 ring-primary ring-offset-2 ring-offset-background'\n      )}\n    >\n      {/* Column header */}\n      <div className=\"flex items-center justify-between mb-1\">\n        <div className=\"flex items-center gap-2\">\n          <h3 className=\"font-semibold text-sm\">{column.title}</h3>\n          <span className=\"text-muted-foreground text-xs bg-background/50 px-1.5 py-0.5 rounded\">\n            {column.cards.length}\n          </span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className={cn('h-7 w-7', sortDirection !== 'none' && 'text-primary')}\n            onClick={toggleSort}\n            title={sortDirection === 'none' ? 'Sort by size' : sortDirection === 'asc' ? 'Sorted: small first' : 'Sorted: large first'}\n          >\n            <SortIcon className=\"w-4 h-4\" />\n            <span className=\"sr-only\">Sort by size</span>\n          </Button>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\">\n                <MoreHorizontal className=\"w-4 h-4\" />\n                <span className=\"sr-only\">Column options</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              <DropdownMenuItem onClick={() => onEditColumn(column.id)}>\n                <Pencil className=\"w-4 h-4 mr-2\" />\n                Edit\n              </DropdownMenuItem>\n              <DropdownMenuItem\n                onClick={() => onDeleteColumn(column.id)}\n                className=\"text-destructive focus:text-destructive\"\n              >\n                <Trash2 className=\"w-4 h-4 mr-2\" />\n                Delete\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n\n      {/* Column description */}\n      {column.description && (\n        <p className=\"text-xs text-muted-foreground mb-3\">{column.description}</p>\n      )}\n      {!column.description && <div className=\"mb-2\" />}\n\n      {/* Cards */}\n      <div ref={setNodeRef} className=\"min-h-[50px]\">\n        <SortableContext\n          items={sortedCards.map((c) => c.id)}\n          strategy={verticalListSortingStrategy}\n        >\n          <div className=\"space-y-2\">\n            {sortedCards.map((card) => (\n              <KanbanCard key={card.id} card={card} columnId={column.id} onEdit={onEditCard} />\n            ))}\n          </div>\n        </SortableContext>\n\n        {/* Show link to Change Log Explorer if changelog has more cards */}\n        {hasMoreCards && (\n          <a\n            href={`/projects/changelog?board=${boardId}`}\n            className=\"flex items-center gap-2 mt-3 px-3 py-2 text-xs text-muted-foreground hover:text-foreground bg-background/50 rounded border border-dashed border-border hover:border-primary/50 transition-colors\"\n          >\n            <ScrollText className=\"w-3.5 h-3.5\" />\n            <span>View full Change Log</span>\n          </a>\n        )}\n      </div>\n\n      {/* Add card button */}\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        className=\"w-full mt-3 justify-start text-muted-foreground hover:text-foreground\"\n        onClick={() => onAddCard(column.id)}\n      >\n        <Plus className=\"w-4 h-4 mr-1\" />\n        Add card\n      </Button>\n    </div>\n  );\n}\n","import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport { useTheme } from '@/context/ThemeContext';\n\ninterface CardCommentsProps {\n  cardId: string;\n}\n\nexport function CardComments({ cardId }: CardCommentsProps) {\n  const commentsRef = useRef<HTMLDivElement>(null);\n  const [isVisible, setIsVisible] = useState(false);\n  const { isDark } = useTheme();\n  const currentCardIdRef = useRef<string | null>(null);\n\n  // Lazy load comments when they come into view\n  useEffect(() => {\n    if (!commentsRef.current) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting) {\n          setIsVisible(true);\n          observer.disconnect();\n        }\n      },\n      { rootMargin: '100px' }\n    );\n\n    observer.observe(commentsRef.current);\n\n    return () => observer.disconnect();\n  }, []);\n\n  const getGiscusTheme = useCallback(() => (isDark ? 'dark' : 'light'), [isDark]);\n\n  const sendThemeUpdate = (giscusTheme: string) => {\n    const iframe = commentsRef.current?.querySelector<HTMLIFrameElement>('iframe.giscus-frame');\n    iframe?.contentWindow?.postMessage(\n      { giscus: { setConfig: { theme: giscusTheme } } },\n      'https://giscus.app'\n    );\n  };\n\n  const loadGiscus = useCallback((giscusTheme: string) => {\n    if (!commentsRef.current) return;\n    commentsRef.current.innerHTML = '';\n    const script = document.createElement('script');\n    script.src = 'https://giscus.app/client.js';\n    script.setAttribute('data-repo', 'Dbochman/personal-website');\n    script.setAttribute('data-repo-id', 'R_kgDOO7-rBw');\n    script.setAttribute('data-category', 'General');\n    script.setAttribute('data-category-id', 'DIC_kwDOO7-rB84C0ubL');\n    script.setAttribute('data-mapping', 'specific');\n    script.setAttribute('data-term', `kanban-${cardId}`);\n    script.setAttribute('data-strict', '0');\n    script.setAttribute('data-reactions-enabled', '1');\n    script.setAttribute('data-emit-metadata', '0');\n    script.setAttribute('data-input-position', 'bottom');\n    script.setAttribute('data-theme', giscusTheme);\n    script.setAttribute('data-lang', 'en');\n    script.setAttribute('crossorigin', 'anonymous');\n    script.async = true;\n    commentsRef.current.appendChild(script);\n  }, [cardId]);\n\n  // Load Giscus script when visible\n  useEffect(() => {\n    if (!isVisible || !commentsRef.current) return;\n\n    const giscusTheme = getGiscusTheme();\n    if (currentCardIdRef.current !== cardId) {\n      currentCardIdRef.current = cardId;\n      loadGiscus(giscusTheme);\n      return;\n    }\n\n    sendThemeUpdate(giscusTheme);\n  }, [isVisible, cardId, isDark, getGiscusTheme, loadGiscus]);\n\n  return (\n    <div ref={commentsRef} className=\"giscus-container min-h-[200px]\">\n      {!isVisible && (\n        <div className=\"text-center text-muted-foreground py-8 text-sm\">\n          Scroll to load comments...\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect, useRef } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { X, History, Plus, FileText, ExternalLink, MessageSquare } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport type { KanbanCard, CardChange, ChecklistItem, CardColor } from '@/types/kanban';\nimport { generateId, CARD_COLORS } from '@/types/kanban';\nimport { CardComments } from './CardComments';\n\nconst colorKeys = Object.keys(CARD_COLORS) as CardColor[];\n\nfunction formatDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n  });\n}\n\nfunction formatChangeDescription(change: CardChange): string {\n  switch (change.type) {\n    case 'column':\n      return `Moved to ${change.columnTitle}`;\n    case 'title':\n      return `Title: \"${change.from}\"  \"${change.to}\"`;\n    case 'description':\n      if (!change.from) return 'Description added';\n      if (!change.to) return 'Description removed';\n      return 'Description updated';\n    case 'labels':\n      return `Labels: ${change.from || '(none)'}  ${change.to || '(none)'}`;\n    default:\n      return 'Updated';\n  }\n}\n\ninterface CardEditorModalProps {\n  card: KanbanCard | null;\n  isOpen: boolean;\n  scrollTo?: string;\n  onClose: () => void;\n  onSave: (card: KanbanCard) => void;\n  onDelete?: (cardId: string) => void;\n}\n\nexport function CardEditorModal({\n  card,\n  isOpen,\n  scrollTo,\n  onClose,\n  onSave,\n  onDelete,\n}: CardEditorModalProps) {\n  const checklistRef = useRef<HTMLDivElement>(null);\n  const [title, setTitle] = useState('');\n  const [summary, setSummary] = useState('');\n  const [description, setDescription] = useState('');\n  const [labels, setLabels] = useState<string[]>([]);\n  const [newLabel, setNewLabel] = useState('');\n  const [checklist, setChecklist] = useState<ChecklistItem[]>([]);\n  const [newChecklistItem, setNewChecklistItem] = useState('');\n  const [color, setColor] = useState<CardColor | undefined>(undefined);\n\n  useEffect(() => {\n    if (card) {\n      setTitle(card.title);\n      setSummary(card.summary || '');\n      setDescription(card.description || '');\n      setLabels(card.labels || []);\n      setChecklist(card.checklist || []);\n      setColor(card.color);\n    } else {\n      setTitle('');\n      setSummary('');\n      setDescription('');\n      setLabels([]);\n      setChecklist([]);\n      setColor(undefined);\n    }\n    setNewLabel('');\n    setNewChecklistItem('');\n  }, [card]);\n\n  // Scroll to section when modal opens\n  useEffect(() => {\n    if (isOpen && scrollTo === 'checklist' && checklistRef.current) {\n      // Small delay to ensure modal content is rendered\n      setTimeout(() => {\n        checklistRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }, 100);\n    }\n  }, [isOpen, scrollTo]);\n\n  const handleSave = () => {\n    if (!title.trim()) return;\n\n    const now = new Date().toISOString();\n    const newHistory: CardChange[] = [...(card?.history || [])];\n\n    // Track changes for existing cards\n    if (card) {\n      const trimmedTitle = title.trim();\n      const trimmedDesc = description.trim();\n      const oldLabels = (card.labels || []).join(', ');\n      const newLabels = labels.join(', ');\n\n      if (trimmedTitle !== card.title) {\n        newHistory.push({ type: 'title', timestamp: now, from: card.title, to: trimmedTitle });\n      }\n      if (trimmedDesc !== (card.description || '')) {\n        newHistory.push({ type: 'description', timestamp: now, from: card.description || '', to: trimmedDesc });\n      }\n      if (newLabels !== oldLabels) {\n        newHistory.push({ type: 'labels', timestamp: now, from: oldLabels, to: newLabels });\n      }\n    }\n\n    onSave({\n      id: card?.id || generateId(),\n      title: title.trim(),\n      summary: summary.trim() || undefined,\n      description: description.trim() || undefined,\n      labels: labels.length > 0 ? labels : undefined,\n      checklist: checklist.length > 0 ? checklist : undefined,\n      color,\n      createdAt: card?.createdAt || now,\n      history: newHistory.length > 0 ? newHistory : undefined,\n    });\n    onClose();\n  };\n\n  const handleAddLabel = () => {\n    if (newLabel.trim() && !labels.includes(newLabel.trim())) {\n      setLabels([...labels, newLabel.trim()]);\n      setNewLabel('');\n    }\n  };\n\n  const handleRemoveLabel = (label: string) => {\n    setLabels(labels.filter((l) => l !== label));\n  };\n\n  const handleLabelKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleAddLabel();\n    }\n  };\n\n  const handleAddChecklistItem = () => {\n    if (newChecklistItem.trim()) {\n      setChecklist([...checklist, { id: generateId(), text: newChecklistItem.trim(), completed: false }]);\n      setNewChecklistItem('');\n    }\n  };\n\n  const handleToggleChecklistItem = (itemId: string) => {\n    setChecklist(checklist.map((item) =>\n      item.id === itemId ? { ...item, completed: !item.completed } : item\n    ));\n  };\n\n  const handleRemoveChecklistItem = (itemId: string) => {\n    setChecklist(checklist.filter((item) => item.id !== itemId));\n  };\n\n  const handleChecklistKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleAddChecklistItem();\n    }\n  };\n\n  const completedCount = checklist.filter((item) => item.completed).length;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[475px] max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{card ? 'Edit Card' : 'New Card'}</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Title</Label>\n            <Input\n              id=\"title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Card title\"\n              autoFocus\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"summary\">Summary</Label>\n            <Input\n              id=\"summary\"\n              value={summary}\n              onChange={(e) => setSummary(e.target.value)}\n              placeholder=\"Short one-liner for card preview\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\">Description</Label>\n            <Textarea\n              id=\"description\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              placeholder=\"Full details (shown when editing)\"\n              rows={2}\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"labels\">Labels</Label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"labels\"\n                value={newLabel}\n                onChange={(e) => setNewLabel(e.target.value)}\n                onKeyDown={handleLabelKeyDown}\n                placeholder=\"Add a label\"\n                className=\"flex-1\"\n              />\n              <Button type=\"button\" variant=\"secondary\" size=\"sm\" onClick={handleAddLabel}>\n                Add\n              </Button>\n            </div>\n            {labels.length > 0 && (\n              <div className=\"flex flex-wrap gap-1 mt-2\">\n                {labels.map((label) => (\n                  <Badge key={label} variant=\"secondary\" className=\"pr-1\">\n                    {label}\n                    <button\n                      onClick={() => handleRemoveLabel(label)}\n                      className=\"ml-1 hover:text-destructive\"\n                      aria-label={`Remove ${label} label`}\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                  </Badge>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Color picker */}\n          <div className=\"space-y-2\">\n            <Label>Color (optional)</Label>\n            <div className=\"flex flex-wrap gap-2\">\n              {/* None button */}\n              <button\n                type=\"button\"\n                onClick={() => setColor(undefined)}\n                title=\"None\"\n                className={cn(\n                  'w-8 h-8 rounded-full border-2 transition-all bg-background',\n                  !color\n                    ? 'border-primary ring-2 ring-primary ring-offset-2 ring-offset-background'\n                    : 'border-border hover:scale-110'\n                )}\n              >\n                <span className=\"sr-only\">None</span>\n              </button>\n              {colorKeys.filter(k => k !== 'default').map((colorKey) => {\n                const config = CARD_COLORS[colorKey];\n                const isSelected = color === colorKey;\n                return (\n                  <button\n                    key={colorKey}\n                    type=\"button\"\n                    onClick={() => setColor(colorKey)}\n                    title={config.label}\n                    className={cn(\n                      'w-8 h-8 rounded-full border-2 transition-all',\n                      config.dot,\n                      isSelected\n                        ? 'border-primary ring-2 ring-primary ring-offset-2 ring-offset-background'\n                        : 'border-transparent hover:scale-110'\n                    )}\n                  >\n                    <span className=\"sr-only\">{config.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Checklist / Subtasks */}\n          <div ref={checklistRef} className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <Label>Checklist</Label>\n              {checklist.length > 0 && (\n                <span className=\"text-xs text-muted-foreground\">\n                  {completedCount}/{checklist.length}\n                </span>\n              )}\n            </div>\n            <div className=\"flex gap-2\">\n              <Input\n                value={newChecklistItem}\n                onChange={(e) => setNewChecklistItem(e.target.value)}\n                onKeyDown={handleChecklistKeyDown}\n                placeholder=\"Add subtask...\"\n                className=\"flex-1\"\n              />\n              <Button type=\"button\" variant=\"secondary\" size=\"sm\" onClick={handleAddChecklistItem}>\n                <Plus className=\"w-4 h-4\" />\n              </Button>\n            </div>\n            {checklist.length > 0 && (\n              <div className=\"space-y-1 mt-2\">\n                {checklist.map((item) => (\n                  <div key={item.id} className=\"flex items-center gap-2 group\">\n                    <Checkbox\n                      id={item.id}\n                      checked={item.completed}\n                      onCheckedChange={() => handleToggleChecklistItem(item.id)}\n                    />\n                    <label\n                      htmlFor={item.id}\n                      className={`flex-1 text-sm cursor-pointer ${item.completed ? 'line-through text-muted-foreground' : ''}`}\n                    >\n                      {item.text}\n                    </label>\n                    <button\n                      onClick={() => handleRemoveChecklistItem(item.id)}\n                      className=\"opacity-0 group-hover:opacity-100 text-muted-foreground hover:text-destructive transition-opacity\"\n                      aria-label={`Remove ${item.text}`}\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Plan file link */}\n          {card?.planFile && (\n            <div className=\"space-y-2\">\n              <Label>Plan Document</Label>\n              <a\n                href={`https://github.com/Dbochman/personal-website/blob/main/${card.planFile}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 p-2 rounded-md border bg-muted/50 hover:bg-muted transition-colors text-sm\"\n              >\n                <FileText className=\"w-4 h-4 text-muted-foreground\" />\n                <span className=\"flex-1 truncate\">{card.planFile.split('/').pop()}</span>\n                <ExternalLink className=\"w-3 h-3 text-muted-foreground\" />\n              </a>\n            </div>\n          )}\n\n          {/* Card metadata & history */}\n          {card && (\n            <div className=\"space-y-2 pt-2 border-t\">\n              <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                <span>Created: {formatDate(card.createdAt)}</span>\n                {card.updatedAt && (\n                  <>\n                    <span></span>\n                    <span>Updated: {formatDate(card.updatedAt)}</span>\n                  </>\n                )}\n              </div>\n              {card.history && card.history.length > 0 && (\n                <div className=\"space-y-1\">\n                  <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                    <History className=\"w-3 h-3\" />\n                    <span>History</span>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground space-y-2 max-h-32 overflow-y-auto\">\n                    {[...card.history].reverse().map((change, i) => (\n                      <div key={i} className=\"flex flex-col gap-0.5\">\n                        <span className=\"wrap-break-word\">{formatChangeDescription(change)}</span>\n                        <span className=\"text-muted-foreground/70\">{formatDate(change.timestamp)}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Comments section */}\n          {card && (\n            <div className=\"space-y-2 pt-4 border-t\">\n              <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                <MessageSquare className=\"w-3 h-3\" />\n                <span>Discussion</span>\n              </div>\n              <CardComments cardId={card.id} />\n            </div>\n          )}\n        </div>\n\n        <DialogFooter className=\"gap-2 sm:gap-0\">\n          {card && onDelete && (\n            <Button\n              type=\"button\"\n              variant=\"destructive\"\n              onClick={() => {\n                onDelete(card.id);\n                onClose();\n              }}\n              className=\"mr-auto\"\n            >\n              Delete\n            </Button>\n          )}\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button type=\"button\" onClick={handleSave} disabled={!title.trim()}>\n            {card ? 'Save' : 'Create'}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { cn } from '@/lib/utils';\nimport type { KanbanColumn, ColumnColor } from '@/types/kanban';\nimport { COLUMN_COLORS } from '@/types/kanban';\n\ninterface ColumnEditorModalProps {\n  column: KanbanColumn | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (data: { title: string; description?: string; color?: ColumnColor }) => void;\n  onDelete?: (columnId: string) => void;\n}\n\nconst colorKeys = Object.keys(COLUMN_COLORS) as ColumnColor[];\n\nexport function ColumnEditorModal({\n  column,\n  isOpen,\n  onClose,\n  onSave,\n  onDelete,\n}: ColumnEditorModalProps) {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [color, setColor] = useState<ColumnColor>('default');\n\n  useEffect(() => {\n    if (column) {\n      setTitle(column.title);\n      setDescription(column.description || '');\n      setColor(column.color || 'default');\n    } else {\n      setTitle('');\n      setDescription('');\n      setColor('default');\n    }\n  }, [column]);\n\n  const handleSave = () => {\n    if (!title.trim()) return;\n    onSave({\n      title: title.trim(),\n      description: description.trim() || undefined,\n      color: color !== 'default' ? color : undefined,\n    });\n    onClose();\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && e.target instanceof HTMLInputElement) {\n      e.preventDefault();\n      handleSave();\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[400px]\">\n        <DialogHeader>\n          <DialogTitle>{column ? 'Edit Column' : 'New Column'}</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"column-title\">Name</Label>\n            <Input\n              id=\"column-title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Column name\"\n              autoFocus\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"column-description\">Description (optional)</Label>\n            <Textarea\n              id=\"column-description\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              placeholder=\"What belongs in this column?\"\n              rows={2}\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>Color</Label>\n            <div className=\"flex flex-wrap gap-2\">\n              {colorKeys.map((colorKey) => {\n                const config = COLUMN_COLORS[colorKey];\n                const isSelected = color === colorKey;\n                return (\n                  <button\n                    key={colorKey}\n                    type=\"button\"\n                    onClick={() => setColor(colorKey)}\n                    title={config.label}\n                    className={cn(\n                      'w-8 h-8 rounded-full border-2 transition-all',\n                      config.dot,\n                      isSelected\n                        ? 'border-primary ring-2 ring-primary ring-offset-2 ring-offset-background'\n                        : 'border-transparent hover:scale-110'\n                    )}\n                  >\n                    <span className=\"sr-only\">{config.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n\n        <DialogFooter className=\"gap-2 sm:gap-0\">\n          {column && onDelete && (\n            <Button\n              type=\"button\"\n              variant=\"destructive\"\n              onClick={() => {\n                onDelete(column.id);\n                onClose();\n              }}\n              className=\"mr-auto\"\n            >\n              Delete\n            </Button>\n          )}\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button type=\"button\" onClick={handleSave} disabled={!title.trim()}>\n            {column ? 'Save' : 'Create'}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Button } from '@/components/ui/button';\nimport { LayoutGrid, ChevronDown, Plus, Loader2 } from 'lucide-react';\nimport { kanbanManifest } from '@/generated/kanban/manifest';\n\nconst WORKER_URL = 'https://api.dylanbochman.com';\n\ninterface BoardSummary {\n  id: string;\n  title: string;\n  cardCount: number;\n}\n\ninterface BoardSelectorProps {\n  currentBoardId: string;\n  currentBoardTitle: string;\n  onCreateNew: () => void;\n  isAuthenticated: boolean;\n}\n\nconst FALLBACK_BOARDS: BoardSummary[] = Object.entries(kanbanManifest).map(([id, meta]) => ({\n  id,\n  title: meta.title || id,\n  cardCount: meta.cardCount ?? 0,\n}));\n\nfunction mergeBoards(remoteBoards: BoardSummary[] | null): BoardSummary[] {\n  const merged = new Map<string, BoardSummary>();\n  for (const board of FALLBACK_BOARDS) {\n    merged.set(board.id, board);\n  }\n  if (remoteBoards) {\n    for (const board of remoteBoards) {\n      merged.set(board.id, board);\n    }\n  }\n  return Array.from(merged.values()).sort((a, b) => a.title.localeCompare(b.title));\n}\n\nexport function BoardSelector({\n  currentBoardId,\n  currentBoardTitle,\n  onCreateNew,\n  isAuthenticated,\n}: BoardSelectorProps) {\n  const [, setSearchParams] = useSearchParams();\n  const [boards, setBoards] = useState<BoardSummary[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const loadBoards = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const res = await fetch(`${WORKER_URL}/boards`, {\n        credentials: 'include',\n      });\n      if (res.ok) {\n        const data = await res.json();\n        setBoards(mergeBoards(data.boards || []));\n        return;\n      }\n      setBoards(mergeBoards(null));\n    } catch (err) {\n      console.error('Failed to load boards:', err);\n      setBoards(mergeBoards(null));\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Load boards on mount and when dropdown opens\n  useEffect(() => {\n    loadBoards();\n  }, [loadBoards]);\n\n  function handleOpenChange(open: boolean) {\n    setIsOpen(open);\n    if (open) {\n      loadBoards(); // Refresh list when dropdown opens\n    }\n  }\n\n  function handleBoardSelect(boardId: string) {\n    // Preserve existing params but update board and clear card (different board)\n    setSearchParams((prev) => {\n      const next = new URLSearchParams(prev);\n      next.set('board', boardId);\n      next.delete('card'); // Card IDs are board-specific\n      return next;\n    });\n    setIsOpen(false);\n  }\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={handleOpenChange}>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" className=\"gap-2\">\n          <LayoutGrid className=\"h-4 w-4\" />\n          <span className=\"max-w-[150px] truncate\">{currentBoardTitle}</span>\n          <ChevronDown className=\"h-4 w-4 opacity-50\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"start\" className=\"w-56\">\n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-4\">\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\n          </div>\n        ) : boards.length === 0 ? (\n          <div className=\"px-2 py-4 text-sm text-muted-foreground text-center\">\n            No boards found\n          </div>\n        ) : (\n          boards.map((board) => (\n            <DropdownMenuItem\n              key={board.id}\n              onSelect={() => handleBoardSelect(board.id)}\n              className={board.id === currentBoardId ? 'bg-accent' : ''}\n            >\n              <span className=\"flex-1 truncate\">{board.title}</span>\n              <span className=\"ml-2 text-xs text-muted-foreground\">\n                {board.cardCount}\n              </span>\n            </DropdownMenuItem>\n          ))\n        )}\n        {isAuthenticated && (\n          <>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem onSelect={onCreateNew}>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              New Board...\n            </DropdownMenuItem>\n          </>\n        )}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Loader2 } from 'lucide-react';\n\nconst WORKER_URL = 'https://api.dylanbochman.com';\n\ninterface CreateBoardModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCreated: (boardId: string) => void;\n}\n\nexport function CreateBoardModal({ isOpen, onClose, onCreated }: CreateBoardModalProps) {\n  const [title, setTitle] = useState('');\n  const [id, setId] = useState('');\n  const [idManuallyEdited, setIdManuallyEdited] = useState(false);\n  const [isCreating, setIsCreating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Auto-generate ID from title (unless manually edited)\n  useEffect(() => {\n    if (!idManuallyEdited) {\n      const generated = title\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .slice(0, 50)\n        .replace(/^-|-$/g, ''); // Trim after slice to handle truncation mid-word\n      setId(generated);\n    }\n  }, [title, idManuallyEdited]);\n\n  // Reset form when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      setTitle('');\n      setId('');\n      setIdManuallyEdited(false);\n      setError(null);\n    }\n  }, [isOpen]);\n\n  function handleIdChange(value: string) {\n    setId(value);\n    setIdManuallyEdited(true);\n  }\n\n  async function handleCreate() {\n    if (!id || !title) {\n      setError('Title and ID are required');\n      return;\n    }\n\n    // Validate ID format\n    if (!/^[a-z0-9][a-z0-9-]{0,48}[a-z0-9]?$/.test(id)) {\n      setError('ID must be lowercase letters, numbers, and hyphens only');\n      return;\n    }\n\n    setIsCreating(true);\n    setError(null);\n\n    try {\n      const res = await fetch(`${WORKER_URL}/boards`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ id, title }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        if (data.error === 'board_exists') {\n          setError('A board with this ID already exists');\n        } else if (data.error === 'not_authenticated') {\n          setError('You must be logged in to create boards');\n        } else {\n          setError(data.message || data.error || 'Failed to create board');\n        }\n        return;\n      }\n\n      onCreated(data.boardId);\n      onClose();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Network error');\n    } finally {\n      setIsCreating(false);\n    }\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Create New Board</DialogTitle>\n          <DialogDescription>\n            Create a new kanban board to organize your tasks.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4 py-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"board-title\">Board Title</Label>\n            <Input\n              id=\"board-title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"My Project Board\"\n              autoFocus\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"board-id\">Board ID</Label>\n            <Input\n              id=\"board-id\"\n              value={id}\n              onChange={(e) => handleIdChange(e.target.value)}\n              placeholder=\"my-project-board\"\n              className=\"font-mono text-sm\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Used in URLs: /projects/kanban?board=<span className=\"font-mono\">{id || 'my-board'}</span>\n            </p>\n          </div>\n          {error && (\n            <p className=\"text-sm text-destructive\">{error}</p>\n          )}\n        </div>\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={onClose} disabled={isCreating}>\n            Cancel\n          </Button>\n          <Button onClick={handleCreate} disabled={!id || !title || isCreating}>\n            {isCreating ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Creating...\n              </>\n            ) : (\n              'Create Board'\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useState, useCallback, useEffect, useRef, useMemo, startTransition } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport {\n  DndContext,\n  DragOverlay,\n  closestCorners,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  type DragStartEvent,\n  type DragEndEvent,\n  type DragOverEvent,\n} from '@dnd-kit/core';\nimport { sortableKeyboardCoordinates, arrayMove } from '@dnd-kit/sortable';\nimport { KanbanColumn } from './KanbanColumn';\nimport { KanbanCard } from './KanbanCard';\nimport { CardEditorModal } from './CardEditorModal';\nimport { ColumnEditorModal } from './ColumnEditorModal';\nimport { BoardSelector } from './BoardSelector';\nimport { CreateBoardModal } from './CreateBoardModal';\nimport { Button } from '@/components/ui/button';\nimport { Plus, RotateCcw, Share2, Save, Loader2, Check, LogIn, LogOut, RefreshCw } from 'lucide-react';\nimport { toast } from '@/components/ui/sonner';\nimport type { KanbanBoard as BoardType, KanbanCard as CardType, KanbanColumn as ColumnType, ColumnColor } from '@/types/kanban';\nimport { generateId } from '@/types/kanban';\nimport { throttle } from '@/lib/utils';\n\nconst WORKER_URL = 'https://api.dylanbochman.com';\n\ninterface AuthStatus {\n  authenticated: boolean;\n  username: string | null;\n}\n\ninterface SaveResponse {\n  success?: boolean;\n  newHeadSha?: string;\n  error?: string;\n  message?: string;\n}\n\ninterface KanbanBoardProps {\n  initialBoard: BoardType;\n  boardId: string; // ID used for saving (e.g., 'roadmap')\n  initialCardId?: string; // Card ID to open on mount (for deep linking)\n  initialHeadCommitSha?: string | null; // Commit SHA for conflict detection\n}\n\nexport function KanbanBoard({ initialBoard, boardId, initialCardId, initialHeadCommitSha }: KanbanBoardProps) {\n  const [, setSearchParams] = useSearchParams();\n  const [board, setBoard] = useState<BoardType>(initialBoard);\n  // Track the \"baseline\" board state for reset - updated after save/reload\n  const baselineBoardRef = useRef<BoardType>(initialBoard);\n  // Track the commit SHA for conflict detection\n  const [headCommitSha, setHeadCommitSha] = useState<string | null>(initialHeadCommitSha ?? null);\n  // Track deleted card IDs for explicit deletion on save (persisted to localStorage)\n  const deletedCardStorageKey = `kanban-deleted-cards-${boardId}`;\n  const [deletedCardIds, setDeletedCardIds] = useState<string[]>(() => {\n    // Guard for SSR/build/test environments without DOM\n    if (typeof window === 'undefined') return [];\n    // Initialize from localStorage, validating against current board\n    try {\n      const stored = localStorage.getItem(deletedCardStorageKey);\n      if (!stored) return [];\n      const parsed = JSON.parse(stored) as string[];\n      // Only keep IDs that exist in the board (remove stale IDs)\n      const existingCardIds = new Set(initialBoard.columns.flatMap(col => col.cards.map(c => c.id)));\n      return parsed.filter(id => existingCardIds.has(id));\n    } catch {\n      return [];\n    }\n  });\n  const [activeCard, setActiveCard] = useState<CardType | null>(null);\n  const [isDirty, setIsDirty] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [conflictDetected, setConflictDetected] = useState(false);\n\n  // Auth state\n  const [auth, setAuth] = useState<AuthStatus>({ authenticated: false, username: null });\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true);\n\n  // External change detection state\n  const [externalChangeDetected, setExternalChangeDetected] = useState(false);\n  const externalChangeDetectedRef = useRef(false);\n\n  // Track the original column when drag starts (for history deduplication)\n  const dragStartColumnRef = useRef<string | null>(null);\n\n  // Keep ref in sync with state (for use in callbacks without stale closures)\n  useEffect(() => {\n    externalChangeDetectedRef.current = externalChangeDetected;\n  }, [externalChangeDetected]);\n\n  // Check auth status on mount\n  useEffect(() => {\n    fetch(`${WORKER_URL}/auth/status`, { credentials: 'include' })\n      .then((res) => res.json())\n      .then((data: AuthStatus) => setAuth(data))\n      .catch(() => setAuth({ authenticated: false, username: null }))\n      .finally(() => setIsCheckingAuth(false));\n  }, []);\n\n  // Persist deletedCardIds to localStorage and sync across tabs\n  useEffect(() => {\n    if (deletedCardIds.length > 0) {\n      localStorage.setItem(deletedCardStorageKey, JSON.stringify(deletedCardIds));\n    } else {\n      localStorage.removeItem(deletedCardStorageKey);\n    }\n  }, [deletedCardIds, deletedCardStorageKey]);\n\n  // Multi-tab sync for deletedCardIds\n  // When another tab deletes cards, sync both the deletion list AND remove cards from board\n  // This prevents the scenario where Tab B saves with cards in board + those same cards in deletedCardIds\n  useEffect(() => {\n    const handleStorageEvent = (e: StorageEvent) => {\n      if (e.key === deletedCardStorageKey) {\n        if (e.newValue === null) {\n          // Another tab cleared the key (e.g., after successful save)\n          setDeletedCardIds([]);\n        } else {\n          try {\n            const newIds = JSON.parse(e.newValue) as string[];\n            // Find IDs that are new (not already in our deletedCardIds)\n            const currentIds = new Set(deletedCardIds);\n            const addedIds = newIds.filter(id => !currentIds.has(id));\n\n            // If there are newly deleted cards from another tab, remove them from our board\n            if (addedIds.length > 0) {\n              const addedIdSet = new Set(addedIds);\n              setBoard(prev => ({\n                ...prev,\n                columns: prev.columns.map(col => ({\n                  ...col,\n                  cards: col.cards.filter(card => !addedIdSet.has(card.id)),\n                })),\n              }));\n              // Mark as dirty since board changed\n              setIsDirty(true);\n            }\n\n            setDeletedCardIds(newIds);\n          } catch {\n            // Ignore parse errors\n          }\n        }\n      }\n    };\n    window.addEventListener('storage', handleStorageEvent);\n    return () => window.removeEventListener('storage', handleStorageEvent);\n  }, [deletedCardStorageKey, deletedCardIds]);\n\n  // Warn user before leaving page with unsaved changes\n  useEffect(() => {\n    if (!isDirty) return;\n\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      e.preventDefault();\n      // Modern browsers ignore custom messages, but this is still required\n      e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';\n      return e.returnValue;\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n  }, [isDirty]);\n\n  // Card editor state\n  const [editingCard, setEditingCard] = useState<CardType | null>(null);\n  const [addingToColumn, setAddingToColumn] = useState<string | null>(null);\n  const [isCardModalOpen, setIsCardModalOpen] = useState(false);\n  const [scrollToSection, setScrollToSection] = useState<string | undefined>(undefined);\n\n  // Deep linking: open card from URL param on mount\n  useEffect(() => {\n    if (initialCardId) {\n      // Find card across all columns\n      for (const column of board.columns) {\n        const card = column.cards.find((c) => c.id === initialCardId);\n        if (card) {\n          setEditingCard(card);\n          setIsCardModalOpen(true);\n          break;\n        }\n      }\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  // Note: only run on mount - initialCardId won't change\n\n  // Column editor state\n  const [editingColumnId, setEditingColumnId] = useState<string | null>(null);\n  const [isColumnModalOpen, setIsColumnModalOpen] = useState(false);\n\n  // Create board modal state\n  const [isCreateBoardModalOpen, setIsCreateBoardModalOpen] = useState(false);\n  const [isAddingColumn, setIsAddingColumn] = useState(false);\n\n  // Wrapper that updates board state\n  const updateBoard = useCallback((updater: (prev: BoardType) => BoardType) => {\n    setBoard((prev) => updater(prev));\n    setIsDirty(true);\n    setSaveSuccess(false);\n  }, []);\n\n  // Auth handlers\n  const handleLogin = useCallback(() => {\n    const returnTo = encodeURIComponent(window.location.href);\n    window.location.href = `${WORKER_URL}/auth/login?return_to=${returnTo}`;\n  }, []);\n\n  const handleLogout = useCallback(async () => {\n    await fetch(`${WORKER_URL}/auth/logout`, {\n      method: 'POST',\n      credentials: 'include',\n    });\n    setAuth({ authenticated: false, username: null });\n  }, []);\n\n  // Soft reload - fetch new data and update state in place\n  const handleSoftReload = useCallback(async () => {\n    try {\n      // Try to load from worker API first (has commit SHA)\n      let data: BoardType;\n      let newSha: string | null = null;\n\n      try {\n        const apiRes = await fetch(`${WORKER_URL}/board/${boardId}`, {\n          credentials: 'include',\n        });\n\n        if (apiRes.ok) {\n          const apiData = await apiRes.json();\n          data = apiData.board;\n          newSha = apiData.headCommitSha;\n        } else {\n          throw new Error('API unavailable');\n        }\n      } catch {\n        // Fallback to precompiled JS\n        const module = await import(`@/generated/kanban/${boardId}.js`);\n        data = module.board;\n      }\n\n      setBoard(data);\n      baselineBoardRef.current = data; // Update baseline after reload\n      setHeadCommitSha(newSha);\n      setDeletedCardIds([]);\n      setIsDirty(false);\n      setExternalChangeDetected(false);\n      setConflictDetected(false);\n\n      toast.success('Board reloaded');\n    } catch {\n      toast.error('Failed to reload board');\n    }\n  }, [boardId]);\n\n  // Check for external changes (uses commit SHA comparison)\n  const checkForExternalChanges = useCallback(async () => {\n    // Don't check if we've already detected a change or don't have a SHA to compare\n    if (externalChangeDetectedRef.current || !headCommitSha) return;\n\n    try {\n      const res = await fetch(`${WORKER_URL}/board/${boardId}`, {\n        credentials: 'include',\n      });\n      if (!res.ok) return;\n\n      const data = await res.json();\n      const remoteSha = data.headCommitSha;\n\n      // If remote SHA differs from our local SHA, external change detected\n      if (remoteSha && remoteSha !== headCommitSha) {\n        setExternalChangeDetected(true);\n\n        toast('Board was updated externally', {\n          id: 'external-change', // Prevent duplicate toasts\n          description: isDirty\n            ? 'You have unsaved changes that may conflict.'\n            : 'Click reload to get the latest version.',\n          action: {\n            label: 'Reload',\n            onClick: handleSoftReload,\n          },\n          duration: Infinity, // Don't auto-dismiss\n        });\n      }\n    } catch {\n      // Silently fail - don't disrupt user\n      console.debug('External change check failed');\n    }\n  }, [boardId, headCommitSha, isDirty, handleSoftReload]);\n\n  // Set up polling and visibility detection for external changes\n  useEffect(() => {\n    // Poll every 15 seconds while visible\n    let intervalId: ReturnType<typeof setInterval> | null = null;\n\n    const startPolling = () => {\n      if (!intervalId) {\n        intervalId = setInterval(checkForExternalChanges, 15000);\n      }\n    };\n\n    const stopPolling = () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n        intervalId = null;\n      }\n    };\n\n    // Handle visibility change\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        checkForExternalChanges(); // Check immediately on focus\n        startPolling();\n      } else {\n        stopPolling();\n      }\n    };\n\n    // Start polling if visible\n    if (document.visibilityState === 'visible') {\n      startPolling();\n    }\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    return () => {\n      stopPolling();\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [checkForExternalChanges]);\n\n  // Save board to GitHub via Cloudflare Worker (requires auth)\n  const handleSaveToGitHub = useCallback(async () => {\n    if (!auth.authenticated) {\n      toast.error('Not authenticated');\n      return;\n    }\n\n    if (!headCommitSha) {\n      toast.error('Cannot save: missing commit reference. Please reload the page.');\n      return;\n    }\n\n    setIsSaving(true);\n    setSaveSuccess(false);\n\n    try {\n      const response = await fetch(`${WORKER_URL}/save`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          board,\n          boardId,\n          headCommitSha,\n          deletedCardIds,\n        }),\n      });\n\n      const data: SaveResponse = await response.json();\n\n      if (response.ok && data.success) {\n        setIsDirty(false);\n        setSaveSuccess(true);\n        setDeletedCardIds([]); // Clear deleted IDs after successful save\n        // Update headCommitSha so consecutive saves work without reload\n        if (data.newHeadSha) {\n          setHeadCommitSha(data.newHeadSha);\n        }\n        // Update board's updatedAt to prevent false external-change detection\n        // The worker sets this timestamp when saving, so we mirror it locally\n        const now = new Date().toISOString();\n        setBoard((prev) => {\n          const updated = { ...prev, updatedAt: now };\n          baselineBoardRef.current = updated; // Update baseline after successful save\n          return updated;\n        });\n        toast.success('Board saved! Changes will appear after precompile completes.');\n        // Clear success indicator after 3 seconds\n        setTimeout(() => setSaveSuccess(false), 3000);\n      } else if (response.status === 409) {\n        // Conflict detected\n        setConflictDetected(true);\n        toast.error('Board was modified externally. Please reload to see changes.', {\n          id: 'save-conflict',\n          action: {\n            label: 'Reload',\n            onClick: handleSoftReload,\n          },\n          duration: Infinity,\n        });\n      } else {\n        toast.error(data.message || data.error || 'Save failed');\n      }\n    } catch (err) {\n      console.error('Save error:', err);\n      toast.error('Failed to save board');\n    } finally {\n      setIsSaving(false);\n    }\n  }, [board, boardId, auth.authenticated, headCommitSha, deletedCardIds, handleSoftReload]);\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: { distance: 8 },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  const findCard = (cardId: string): CardType | null => {\n    for (const column of board.columns) {\n      const card = column.cards.find((c) => c.id === cardId);\n      if (card) return card;\n    }\n    return null;\n  };\n\n  const findColumnByCardId = (cardId: string): ColumnType | null => {\n    return board.columns.find((col) => col.cards.some((c) => c.id === cardId)) || null;\n  };\n\n  const handleDragStart = (event: DragStartEvent) => {\n    const { active } = event;\n    const card = findCard(active.id as string);\n    setActiveCard(card);\n    // Track starting column for history deduplication\n    const startColumn = findColumnByCardId(active.id as string);\n    dragStartColumnRef.current = startColumn?.id || null;\n  };\n\n  // Throttled drag over handler - fires at most once per 16ms (~60fps)\n  // Uses startTransition for interruptible rendering during drag\n  const handleDragOver = useMemo(\n    () =>\n      throttle((event: DragOverEvent) => {\n        const { active, over } = event;\n        if (!over) return;\n\n        const activeId = active.id as string;\n        const overId = over.id as string;\n\n        // Use startTransition for interruptible rendering during drag\n        startTransition(() => {\n          setBoard((prev) => {\n            // Derive columns from prev state to avoid stale closures with throttling\n            const activeColumn = prev.columns.find((col) => col.cards.some((c) => c.id === activeId)) || null;\n            const overColumn = prev.columns.find((col) => col.id === overId) ||\n              prev.columns.find((col) => col.cards.some((c) => c.id === overId)) || null;\n\n            if (!activeColumn || !overColumn || activeColumn.id === overColumn.id) return prev;\n\n            const activeCards = [...activeColumn.cards];\n            const overCards = activeColumn.id === overColumn.id ? activeCards : [...overColumn.cards];\n\n            const activeIndex = activeCards.findIndex((c) => c.id === activeId);\n            if (activeIndex === -1) return prev; // Card not found, skip update\n            const [movedCard] = activeCards.splice(activeIndex, 1);\n\n            // Don't add history during drag - only update position\n            // History will be added in handleDragEnd\n\n            // If dropping on a column (not a card), add to end\n            const overIndex = overColumn.cards.findIndex((c) => c.id === overId);\n            if (overIndex === -1) {\n              overCards.push(movedCard);\n            } else {\n              overCards.splice(overIndex, 0, movedCard);\n            }\n\n            return {\n              ...prev,\n              columns: prev.columns.map((col) => {\n                if (col.id === activeColumn.id) {\n                  return { ...col, cards: activeCards };\n                }\n                if (col.id === overColumn.id) {\n                  return { ...col, cards: overCards };\n                }\n                return col;\n              }),\n            };\n          });\n        });\n        // Note: setIsDirty moved to handleDragEnd to avoid unnecessary updates during drag\n      }, 16),\n    [] // No dependencies needed - we derive everything from prev state\n  );\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n    const startColumnId = dragStartColumnRef.current;\n    setActiveCard(null);\n    dragStartColumnRef.current = null; // Reset for next drag\n\n    if (!over) return;\n\n    const activeId = active.id as string;\n    const overId = over.id as string;\n\n    // Use state updater to get fresh state and apply final move\n    // This ensures correctness even if throttled drag-over updates are stale\n    updateBoard((prev) => {\n      // Find columns from fresh state\n      const activeColumn = prev.columns.find((col) => col.cards.some((c) => c.id === activeId));\n      if (!activeColumn) return prev;\n\n      // Determine target column: could be dropping on a column or a card\n      const overColumn = prev.columns.find((col) => col.id === overId) ||\n        prev.columns.find((col) => col.cards.some((c) => c.id === overId));\n      if (!overColumn) return prev;\n\n      const isCrossColumnMove = activeColumn.id !== overColumn.id;\n      const movedFromStart = startColumnId && startColumnId !== overColumn.id;\n\n      // Mark dirty if card moved\n      if (isCrossColumnMove || activeId !== overId) {\n        // Use setTimeout to avoid setState during render\n        setTimeout(() => {\n          setIsDirty(true);\n          setSaveSuccess(false);\n        }, 0);\n      }\n\n      // Same position, no change needed (and no cross-column move happened)\n      if (activeColumn.id === overColumn.id && activeId === overId && !movedFromStart) return prev;\n\n      // Helper to add history entry for cross-column moves\n      const addHistoryIfNeeded = (card: CardType): CardType => {\n        if (card.id !== activeId || !movedFromStart) return card;\n        const now = new Date().toISOString();\n        const lastEntry = card.history?.[card.history.length - 1];\n        // Deduplicate: don't add if last history entry is same column\n        if (lastEntry?.type === 'column' && lastEntry?.columnId === overColumn.id) {\n          return { ...card, updatedAt: now };\n        }\n        return {\n          ...card,\n          updatedAt: now,\n          history: [\n            ...(card.history || []),\n            { type: 'column' as const, timestamp: now, columnId: overColumn.id, columnTitle: overColumn.title },\n          ],\n        };\n      };\n\n      // Same column reordering (but card may have been moved here by throttled drag-over)\n      if (!isCrossColumnMove) {\n        const oldIndex = activeColumn.cards.findIndex((c) => c.id === activeId);\n        const newIndex = activeColumn.cards.findIndex((c) => c.id === overId);\n\n        // If card moved from start column, add history even if just reordering in target\n        if (movedFromStart) {\n          return {\n            ...prev,\n            columns: prev.columns.map((col) => {\n              if (col.id !== activeColumn.id) return col;\n              const reorderedCards = oldIndex !== -1 && newIndex !== -1 && oldIndex !== newIndex\n                ? arrayMove(col.cards, oldIndex, newIndex)\n                : col.cards;\n              return { ...col, cards: reorderedCards.map(addHistoryIfNeeded) };\n            }),\n          };\n        }\n\n        if (oldIndex === -1 || newIndex === -1 || oldIndex === newIndex) return prev;\n\n        return {\n          ...prev,\n          columns: prev.columns.map((col) => {\n            if (col.id !== activeColumn.id) return col;\n            return { ...col, cards: arrayMove(col.cards, oldIndex, newIndex) };\n          }),\n        };\n      }\n\n      // Cross-column move: ensure card is in target column with history\n      const activeCards = activeColumn.cards.filter((c) => c.id !== activeId);\n      const movedCard = activeColumn.cards.find((c) => c.id === activeId);\n      if (!movedCard) return prev;\n\n      // Calculate insert position\n      const overIndex = overColumn.cards.findIndex((c) => c.id === overId);\n      const overCards = [...overColumn.cards];\n      if (overIndex === -1) {\n        // Dropping on column itself, add to end\n        overCards.push(movedCard);\n      } else {\n        overCards.splice(overIndex, 0, movedCard);\n      }\n\n      return {\n        ...prev,\n        columns: prev.columns.map((col) => {\n          if (col.id === activeColumn.id) return { ...col, cards: activeCards };\n          if (col.id === overColumn.id) return { ...col, cards: overCards.map(addHistoryIfNeeded) };\n          return col;\n        }),\n      };\n    });\n  };\n\n  // Card operations\n  const handleAddCard = (columnId: string) => {\n    setAddingToColumn(columnId);\n    setEditingCard(null);\n    setIsCardModalOpen(true);\n  };\n\n  const handleEditCard = (card: CardType, scrollTo?: string) => {\n    setEditingCard(card);\n    setAddingToColumn(null);\n    setScrollToSection(scrollTo);\n    setIsCardModalOpen(true);\n  };\n\n  const handleSaveCard = (card: CardType) => {\n    const now = new Date().toISOString();\n    updateBoard((prev) => {\n      if (addingToColumn) {\n        // Adding new card - set initial column history\n        const column = prev.columns.find((c) => c.id === addingToColumn);\n        const newCard: CardType = {\n          ...card,\n          createdAt: now,\n          updatedAt: now,\n          history: column\n            ? [{ type: 'column' as const, timestamp: now, columnId: column.id, columnTitle: column.title }]\n            : [],\n        };\n        return {\n          ...prev,\n          columns: prev.columns.map((col) =>\n            col.id === addingToColumn\n              ? { ...col, cards: [...col.cards, newCard] }\n              : col\n          ),\n        };\n      } else {\n        // Editing existing card - history changes are tracked in the modal\n        const updatedCard: CardType = {\n          ...card,\n          updatedAt: now,\n        };\n        return {\n          ...prev,\n          columns: prev.columns.map((col) => ({\n            ...col,\n            cards: col.cards.map((c) => (c.id === card.id ? updatedCard : c)),\n          })),\n        };\n      }\n    });\n  };\n\n  const handleDeleteCard = (cardId: string) => {\n    // Track deleted card ID for explicit deletion on save\n    setDeletedCardIds((prev) => [...prev, cardId]);\n\n    updateBoard((prev) => ({\n      ...prev,\n      columns: prev.columns.map((col) => ({\n        ...col,\n        cards: col.cards.filter((c) => c.id !== cardId),\n      })),\n    }));\n  };\n\n  // Column operations\n  const handleEditColumn = (columnId: string) => {\n    setEditingColumnId(columnId);\n    setIsAddingColumn(false);\n    setIsColumnModalOpen(true);\n  };\n\n  const handleAddColumn = () => {\n    setEditingColumnId(null);\n    setIsAddingColumn(true);\n    setIsColumnModalOpen(true);\n  };\n\n  const handleSaveColumn = (data: { title: string; description?: string; color?: ColumnColor }) => {\n    updateBoard((prev) => {\n      if (isAddingColumn) {\n        return {\n          ...prev,\n          columns: [\n            ...prev.columns,\n            { id: generateId(), title: data.title, description: data.description, color: data.color, cards: [] },\n          ],\n        };\n      } else if (editingColumnId) {\n        return {\n          ...prev,\n          columns: prev.columns.map((col) =>\n            col.id === editingColumnId\n              ? { ...col, title: data.title, description: data.description, color: data.color }\n              : col\n          ),\n        };\n      }\n      return prev;\n    });\n  };\n\n  const handleDeleteColumn = (columnId: string) => {\n    // Track all card IDs in the deleted column\n    const column = board.columns.find((col) => col.id === columnId);\n    if (column) {\n      const cardIdsInColumn = column.cards.map((c) => c.id);\n      setDeletedCardIds((prev) => [...prev, ...cardIdsInColumn]);\n    }\n\n    updateBoard((prev) => ({\n      ...prev,\n      columns: prev.columns.filter((col) => col.id !== columnId),\n    }));\n  };\n\n  const handleReset = () => {\n    // Reset to the last loaded/saved state, not the original initialBoard prop\n    setBoard(baselineBoardRef.current);\n    setDeletedCardIds([]);\n    setIsDirty(false);\n    setConflictDetected(false);\n  };\n\n  const handleShare = async () => {\n    try {\n      const url = new URL(window.location.href);\n      url.search = `?board=${boardId}`;\n      await navigator.clipboard.writeText(url.toString());\n      toast.success('Link copied to clipboard');\n    } catch (e) {\n      console.error('Failed to copy URL:', e);\n      toast.error('Failed to copy link');\n    }\n  };\n\n  const handleBoardCreated = (newBoardId: string) => {\n    // Navigate to the new board, preserving other params but clearing card (different board)\n    setSearchParams((prev) => {\n      const next = new URLSearchParams(prev);\n      next.set('board', newBoardId);\n      next.delete('card'); // Card IDs are board-specific\n      return next;\n    });\n    toast.success('Board created! It may take a moment to fully load.');\n  };\n\n  const editingColumn = editingColumnId\n    ? board.columns.find((c) => c.id === editingColumnId)\n    : null;\n\n  // Determine if save should be disabled\n  const canSave = auth.authenticated && headCommitSha && isDirty && !conflictDetected;\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Toolbar */}\n      <div className=\"flex items-center justify-between flex-wrap gap-2\">\n        <div className=\"flex items-center gap-3\">\n          <BoardSelector\n            currentBoardId={boardId}\n            currentBoardTitle={board.title}\n            onCreateNew={() => setIsCreateBoardModalOpen(true)}\n            isAuthenticated={auth.authenticated}\n          />\n          <span className=\"text-sm text-muted-foreground\">Drag cards between columns.</span>\n          {isDirty && !conflictDetected && (\n            <span className=\"text-yellow-600 dark:text-yellow-400\">Unsaved changes</span>\n          )}\n          {conflictDetected && (\n            <span className=\"text-red-600 dark:text-red-400\">Conflict - reload required</span>\n          )}\n          {saveSuccess && <span className=\"text-green-600 dark:text-green-400\">Saved!</span>}\n          {auth.authenticated && (\n            <span className=\"text-muted-foreground\">\n              Logged in as <span className=\"font-medium\">{auth.username}</span>\n            </span>\n          )}\n        </div>\n        <div className=\"flex gap-2\">\n          {/* Auth-gated save controls */}\n          {!isCheckingAuth && (\n            auth.authenticated ? (\n              <>\n                {conflictDetected ? (\n                  <Button\n                    variant=\"default\"\n                    size=\"sm\"\n                    onClick={handleSoftReload}\n                  >\n                    <RefreshCw className=\"w-4 h-4 mr-1\" />\n                    Reload Board\n                  </Button>\n                ) : (\n                  <Button\n                    variant={isDirty ? 'default' : 'outline-solid'}\n                    size=\"sm\"\n                    onClick={handleSaveToGitHub}\n                    disabled={isSaving || !canSave}\n                    title={!headCommitSha ? 'Cannot save: missing commit reference' : undefined}\n                  >\n                    {isSaving ? (\n                      <Loader2 className=\"w-4 h-4 mr-1 animate-spin\" />\n                    ) : saveSuccess ? (\n                      <Check className=\"w-4 h-4 mr-1\" />\n                    ) : (\n                      <Save className=\"w-4 h-4 mr-1\" />\n                    )}\n                    {isSaving ? 'Saving...' : saveSuccess ? 'Saved' : 'Save'}\n                  </Button>\n                )}\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout}>\n                  <LogOut className=\"w-4 h-4 mr-1\" />\n                  Logout\n                </Button>\n              </>\n            ) : (\n              <Button variant=\"outline\" size=\"sm\" onClick={handleLogin}>\n                <LogIn className=\"w-4 h-4 mr-1\" />\n                Login to Save\n              </Button>\n            )\n          )}\n          <Button variant=\"outline\" size=\"sm\" onClick={handleShare}>\n            <Share2 className=\"w-4 h-4 mr-1\" />\n            Copy Link\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" onClick={handleReset}>\n            <RotateCcw className=\"w-4 h-4 mr-1\" />\n            Reset\n          </Button>\n        </div>\n      </div>\n\n      {/* Board */}\n      <DndContext\n        sensors={sensors}\n        collisionDetection={closestCorners}\n        onDragStart={handleDragStart}\n        onDragOver={handleDragOver}\n        onDragEnd={handleDragEnd}\n      >\n        <div className=\"flex gap-3 overflow-x-auto pb-4 items-start\">\n          {board.columns.map((column) => (\n            <KanbanColumn\n              key={column.id}\n              column={column}\n              boardId={boardId}\n              onAddCard={handleAddCard}\n              onEditCard={handleEditCard}\n              onEditColumn={handleEditColumn}\n              onDeleteColumn={handleDeleteColumn}\n            />\n          ))}\n\n          {/* Add column button */}\n          <Button\n            variant=\"outline\"\n            className=\"shrink-0 w-64 h-12 border-dashed self-start\"\n            onClick={handleAddColumn}\n          >\n            <Plus className=\"w-4 h-4 mr-1\" />\n            Add Column\n          </Button>\n        </div>\n\n        <DragOverlay>\n          {activeCard && <KanbanCard card={activeCard} isDragOverlay />}\n        </DragOverlay>\n      </DndContext>\n\n      {/* Card editor modal */}\n      <CardEditorModal\n        card={editingCard}\n        isOpen={isCardModalOpen}\n        scrollTo={scrollToSection}\n        onClose={() => {\n          setIsCardModalOpen(false);\n          setEditingCard(null);\n          setAddingToColumn(null);\n          setScrollToSection(undefined);\n        }}\n        onSave={handleSaveCard}\n        onDelete={editingCard ? handleDeleteCard : undefined}\n      />\n\n      {/* Column editor modal */}\n      <ColumnEditorModal\n        column={editingColumn || null}\n        isOpen={isColumnModalOpen}\n        onClose={() => {\n          setIsColumnModalOpen(false);\n          setEditingColumnId(null);\n          setIsAddingColumn(false);\n        }}\n        onSave={handleSaveColumn}\n        onDelete={editingColumn ? handleDeleteColumn : undefined}\n      />\n\n      {/* Create board modal */}\n      <CreateBoardModal\n        isOpen={isCreateBoardModalOpen}\n        onClose={() => setIsCreateBoardModalOpen(false)}\n        onCreated={handleBoardCreated}\n      />\n    </div>\n  );\n}\n"],"file":"KanbanBoard-BPxeb3iF.js"}